



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="js" />


<link rel="canonical" href="https://lhchen74.github.io/2022/10/22/javascript-equailty/">



  <title>
The Legend of JavaScript Equality Operator |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.2"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">The Legend of JavaScript Equality Operator
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2022-10-22 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2022-10-22T00:00:00+08:00">2022-10-22</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/元气囝仔.jpg"></li>
          <li class="item" data-background-image="/anime/index/万国志.jpg"></li>
          <li class="item" data-background-image="/anime/index/神不在的星期天.jpg"></li>
          <li class="item" data-background-image="/anime/index/电波女与青春男-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/借东西的小人阿莉埃蒂-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/罪恶王冠.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2022/10/22/javascript-equailty/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载：<span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4z">The Legend of JavaScript Equality Operator</span></p>
</blockquote>
<blockquote>
<p>Sometimes when I’m writing Javascript I want to throw up my hands and say ‘this is bullshit!’</p>
</blockquote>
<p>During everyday JavaScript coding, it may be hard to see how the equality operator works. Especially when the operands have different types. Time to time this creates bugs in conditionals, which are difficult to identify. It is easy to understand why  <code>0 == 8</code>  is  <code>false</code>  or  <code>'' == false</code>  is  <code>true</code> . But why  <code>&#123;&#125; == true</code>  is  <code>false</code>  is not obviously to see. If you’re interested:</p>
<ul>
<li>to know better the equality and identity operators</li>
<li>to learn the formal computation algorithm</li>
<li>to practice a plenty of examples</li>
</ul>
<p>then make yourself comfortable and let’s begin.</p>
<p>The following terminology is used in the article:</p>
<ul>
<li><strong>Operator</strong> is a symbol denoting an operation.</li>
</ul>
<p>For example the equality operator  <code>==</code>  compares two values, identity operator  <code>===</code>  compares two values and their types, addition operator  <code>+</code>  sums two numbers or concatenates two strings.</p>
<ul>
<li><strong>Operand</strong> is the subject of the operation, a quantity on which an operation is performed.</li>
</ul>
<p>In the expression  <code>0 == &#123;&#125;</code> , the  <code>0</code>  is the first operand and  <code>&#123;&#125;</code>  the second.</p>
<ul>
<li><strong>Primitive types</strong> in JavaScript are considered numbers, strings, booleans, null and undefined.</li>
</ul>
<h2 id="the-identity-operator"><a class="markdownIt-Anchor" href="#the-identity-operator">#</a> The identity operator</h2>
<p>JavaScript is performing the equality evaluation. The interpreter first converts both operands to the same type. Then executes the identity comparison.<br>
The identity evaluation algorithm (<strong>IEA</strong>)  <code>===</code> :</p>
<ol>
<li>If both operands have <em>different types</em>, they are <strong>not strictly equal</strong></li>
<li>If both operands are  <code>null</code> , they are <strong>strictly equal</strong></li>
<li>If both operands are  <code>undefined</code> , they are <strong>strictly equal</strong></li>
<li>If one or both operands are  <code>NaN</code> , they are <strong>not strictly equal</strong></li>
<li>If both operands are  <code>true</code>  or both  <code>false</code> , they are <strong>strictly equal</strong></li>
<li>If both operands are <em>numbers</em> and have <em>the same value</em>, they are <strong>strictly equal</strong></li>
<li>If both operands are <em>strings</em> and have <em>the same value</em>, they are <strong>strictly equal</strong></li>
<li>If both operands have reference to <em>the same object or function</em>, they are <strong>strictly equal</strong></li>
<li>In all other cases operands are <strong>not strictly equal</strong>.</li>
</ol>
<p>The rules are quite simple.<br>
It is worth mentioning that  <code>NaN</code>  in identity (and in equality) operator compared with any other value always evaluates to  <code>false</code> . Lets consider some examples. It’s the best way to remember the strict comparison algorithm.</p>
<p><strong>Example 1</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> === <span class="string">&quot;1&quot;</span>; <span class="comment">// false, IEA rule 1</span></span><br></pre></td></tr></table></figure>
<p>Operands are different types (number and string) and based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtMQ==">IEA rule 1</span> they are not identical.</p>
<p><strong>Example 2</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> === <span class="number">0</span>; <span class="comment">// true, IEA rule 6</span></span><br></pre></td></tr></table></figure>
<p>Operands are the same type (number) and have the same value, so they are strictly equal based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNg==">IEA rule 6</span>.</p>
<p><strong>Example 3</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> === <span class="literal">undefined</span>; <span class="comment">// true, IEA rule 3</span></span><br></pre></td></tr></table></figure>
<p>Both operands are  <code>undefined</code>  and applying the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtMw==">IEA rule 3</span> it’s an equality.</p>
<p><strong>Example 4</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> === <span class="literal">null</span>; <span class="comment">// false, IEA rule 1</span></span><br></pre></td></tr></table></figure>
<p>Because operands are different types, based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtMQ==">IEA rule 1</span> they’re not identical.</p>
<p><strong>Example 5</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span>; <span class="comment">// false, IEA rule 4</span></span><br></pre></td></tr></table></figure>
<p>Operands are the same type (numbers), but the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNA==">IEA rule 4</span> indicates than nothing is equal with a  <code>NaN</code> . The result is  <code>false</code> .</p>
<p><strong>Example 6</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstObject = &#123;&#125;,</span><br><span class="line">  secondObject = firstObject;</span><br><span class="line">secondObject[<span class="string">&quot;name&quot;</span>] = <span class="string">&quot;Neo&quot;</span>;</span><br><span class="line">secondObject === firstObject; <span class="comment">// true, IEA rule 8</span></span><br></pre></td></tr></table></figure>
<p>Both variables  <code>firstObject</code>  and  <code>secondObject</code>  are references to the same object and based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtOA==">IEA rule 8</span> the identity operator evaluates to  <code>true</code> .</p>
<p><strong>Example 7</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[] === []; <span class="comment">//false, IEA rule 9</span></span><br></pre></td></tr></table></figure>
<p>The  <code>[]</code>  literal creates a new array reference. Both operands being the same type (object), however have reference to different objects. The <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtOQ==">IEA rule 9</span> says that the identity evaluates to  <code>false</code> .</p>
<p><span class="exturl" data-url="aHR0cDovL2pzYmluLmNvbS9tYWx1cnUvOS9lZGl0P2pzLGNvbnNvbGU=">See the examples in JS Bin</span></p>
<h2 id="converting-an-object-to-a-primitive"><a class="markdownIt-Anchor" href="#converting-an-object-to-a-primitive">#</a> Converting an object to a primitive</h2>
<p>Another step before learning equality is understanding the object to primitive conversion. JavaScript use it when comparing an object with a primitive value. The object to primitive conversion algorithm (<strong>OPCA</strong>):</p>
<ol>
<li>If the method  <code>valueOf()</code>  exists it is called. If  <code>valueOf()</code>  returns a primitive, the object is converted to this value</li>
<li>In other case if the method  <code>toString()</code>  exists it is called. If  <code>toString()</code>  returns a primitive, the object is converted to this value</li>
<li>In other case JavaScript throws an error:  <code>TypeError: Cannot convert object to primitive value</code></li>
</ol>
<p>Most of the native objects when calling the <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L3ZhbHVlT2Y=">valueOf()</span> method returns the object itself. So the <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L3RvU3RyaW5n">toString()</span> method is used more often.<br>
A note about the  <code>Date</code>  objects: when converting to a primitive, the object is converted instantly to a string using  <code>toString()</code>  method. This way the rule 1 is skipped for  <code>Date</code> . The plain JavaScript object,  <code>&#123;&#125;</code>  or  <code>new Object()</code> , usually is converted to  <code>&quot;[object Object]&quot;</code> .<br>
An array is converted to by joining it’s elements with  <code>&quot;,&quot;</code>  separator. For example  <code>[1, 3, &quot;four&quot;]</code>  is converted to  <code>&quot;1,3,four&quot;</code> .</p>
<h2 id="the-equality-operator"><a class="markdownIt-Anchor" href="#the-equality-operator">#</a> The equality operator</h2>
<p>Now it is the interesting part. Before reading this, I recommend to have a good understanding of the identity and object to primitive conversion parts, if you just scrolled here.<br>
The equality evaluation algorithm (<strong>EEA</strong>)  <code>==</code> :</p>
<ol>
<li>If the operands have the same type, test them for strict equality using <strong>IEA</strong>. If they are not strictly equal, they <strong>aren’t equal</strong>, otherwise they are <strong>equal</strong></li>
<li>If the operands have different types:</li>
<li>If one operand is  <code>null</code>  and another  <code>undefined</code> , they <strong>are equal</strong></li>
<li>If one operand is <em>number</em> and another is a <em>string</em>, convert the <em>string</em> to <em>number</em>. Compute the comparison again</li>
<li>If one operand is <em>boolean</em>, transform  <code>true</code>  to  <code>1</code>  and  <code>false</code>  to  <code>0</code> . Compute the comparison again</li>
<li>If one operand is an <em>object</em> and another is a <em>number</em> or <em>string</em>, convert the <em>object</em> to a primitive using <strong>OPCA</strong>. Compute the comparison again</li>
<li>In all other cases operands are <strong>not equal</strong></li>
</ol>
<p>Let’s consider some examples.</p>
<p><strong>Example 1</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> == <span class="literal">true</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>1 == true</code>  (Transform  <code>true</code>  to  <code>1</code>  using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4z">EEA rule 2.3</span>)</li>
<li><code>1 == 1</code>  (Operands have the same type, numbers. Transform the equality to identity using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMQ==">EEA rule 1</span>)</li>
<li><code>1 === 1</code>  (Both operands are numbers and have the same value. Based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNg==">IEA rule 6</span>, it’s an equality)</li>
<li><code>true</code></li>
</ol>
<p><strong>Example 2</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span> == <span class="number">0</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>'' == 0</code>  (One operand is string and another is number, based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4y">EEA rule 2.2</span> the  <code>''</code>  is transformed to a number)</li>
<li><code>0 == 0</code>  (Operands are the same type, transform the equality to identity using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMQ==">EEA rule 1</span>)</li>
<li><code>0 === 0</code>  (Operands are the same type and have the same value, so based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNg==">IEA rule 6</span> it’s an identity)</li>
<li><code>true</code></li>
</ol>
<p><strong>Example 3</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="number">0</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>null == 0</code>  ( <code>null</code>  is a primitive of type null and  <code>0</code>  is number. Apply the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMw==">EEA rule 3</span>)</li>
<li><code>false</code></li>
</ol>
<p><strong>Example 4</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>null == undefined</code>  (Based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4x">EEA rule 2.1</span> the operands are equal)</li>
<li><code>true</code></li>
</ol>
<p><strong>Example 5</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> == <span class="literal">NaN</span>; <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>NaN == NaN</code>  (Both operands are numbers. Transform the equality to identity using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMQ==">EEA rule 1</span>)</li>
<li><code>NaN === NaN</code>  (Based on rule <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNA==">IEA rule 4</span> the operands are not strictly equal)</li>
<li><code>false</code></li>
</ol>
<p><strong>Example 6</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&quot;&quot;</span>] == <span class="string">&quot;&quot;</span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>[''] == ''</code>  ( <code>['']</code>  is an array and  <code>''</code>  a string. Apply the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi40">EEA rule 2.4</span> and transform the array to a primitive using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNvcGNhLTI=">OPCA rule 2</span>)</li>
<li><code>'' == ''</code>  (Both operands are strings, so transform the equality to identity)</li>
<li><code>'' === ''</code>  (Both operands are the same type and have the same value. Using the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNw==">IEA rule 7</span> it’s an identity)</li>
<li><code>true</code></li>
</ol>
<p><strong>Example 7</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#125; == <span class="literal">true</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<ol>
<li><code>&#123;&#125; == true</code>  (Using the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4z">EEA rule 2.3</span>, transform the  <code>true</code>  operand to  <code>1</code> )</li>
<li><code>&#123;&#125; == 1</code>  (First operand is an object, so it’s necessary to transform it to a primitive using OPCA)</li>
<li><code>&quot;[object Object]&quot; == 1</code>  (Because first operand is a string and second a number, we need to transform the  <code>&quot;[object Object]&quot;</code>  to a number using the <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMi4y">EEA rule 2.2</span>)</li>
<li><code>NaN == 1</code>  (Both operands are numbers, so transform the equality to identity using <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNlZWEtMQ==">EEA rule 1</span>)</li>
<li><code>NaN === 1</code>  (Based on <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vdGhlLWxlZ2VuZC1vZi1qYXZhc2NyaXB0LWVxdWFsaXR5LW9wZXJhdG9yLyNpZWEtNA==">IEA rule 4</span>, which says that nothing is equal with a  <code>NaN</code> , the result is  <code>false</code> )</li>
<li><code>false</code></li>
</ol>
<p><span class="exturl" data-url="aHR0cDovL2h0dHAvL2pzYmluLmNvbS9rZWpvanUvNS9lZGl0P2pzLGNvbnNvbGU=">See the examples in JS Bin</span></p>
<h2 id="useful-tips"><a class="markdownIt-Anchor" href="#useful-tips">#</a> Useful tips</h2>
<p>Even after checking in details all the examples in this article, learning the algorithms, you may find complicated to instantly understand complex comparisons. Honestly this operator was a long time a black box for me too.</p>
<p>Let me tell you a <em>little trick</em> how to pass this. Add this article to bookmarks (using  <code>Ctrl+D</code> ) and next time you see an interesting case, write a step by step computation based on the equality algorithm. If you check by yourself at least 10 examples, you won’t have any problems in the future.</p>
<p>Start right now! What is the result and the detailed explanation of  <code>[0] == 0</code> ? Feel free to write a comment with the response.</p>
<p>The equality operator  <code>==</code>  makes type conversions. As result some comparisons may have unexpected results, for example  <code>&#123;&#125; == true</code>  is  <code>false</code>  (see example 7). In most cases is safer to use the identity operator  <code>===</code> .</p>
<h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion">#</a> Conclusion</h2>
<p>Equality and identity are probably one of the most used operators. Understanding them is one of the steps to write a stable and less buggy JavaScript.</p>
<h2 id="comments"><a class="markdownIt-Anchor" href="#comments">#</a> Comments</h2>
<p>Do <em>if</em> statements work differently ? Having {} == true // false why does if ({}) evaluate to true?</p>
<p>Yes,  <code>if (&#123;&#125; == true) &#123; &#125;</code>  and  <code>if (&#123;&#125;) &#123; &#125;</code>  are evaluated differently by JavaScript.<br>
The first case you can find described in the example 7. It evaluates to  <code>false</code> .<br>
The second case doesn’t involve any comparison operators. The condition is passed because the object literal {} is a truthy value. Falsy values in JavaScript are considered ‘’, null, undefined, NaN, 0, false. All other ones are truthy, including objects (like {}), true, 1, etc.</p>

      <div class="tags">
          <a href="/tags/js/" rel="tag"><i class="ic i-tag"></i> js</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2022-10-22 12:13:36" itemprop="dateModified" datetime="2022-10-22T12:13:36+08:00">2022-10-22</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2022/10/20/javascript-node-element/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;擅长捉弄的高木同学-2.jpg" title="What&#39;s the Difference between DOM Node and Element?">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>What's the Difference between DOM Node and Element?</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2022/10/22/javascript-addation/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;僵尸百分百.jpg" title="JavaScript Addition Operator in Details">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>JavaScript Addition Operator in Details</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#the-identity-operator"><span class="toc-number">1.</span> <span class="toc-text"> The identity operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#converting-an-object-to-a-primitive"><span class="toc-number">2.</span> <span class="toc-text"> Converting an object to a primitive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-equality-operator"><span class="toc-number">3.</span> <span class="toc-text"> The equality operator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#useful-tips"><span class="toc-number">4.</span> <span class="toc-text"> Useful tips</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#conclusion"><span class="toc-number">5.</span> <span class="toc-text"> Conclusion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comments"><span class="toc-number">6.</span> <span class="toc-text"> Comments</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">364</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">51</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2022/10/20/javascript-node-element/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2022/10/22/javascript-addation/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2022/10/22/javascript-equailty/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
