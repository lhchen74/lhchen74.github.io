



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="js" />


<link rel="canonical" href="https://lhchen74.github.io/2022/10/25/javascript-symbol/">



  <title>
Detailed Overview of Well-known Symbols |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Detailed Overview of Well-known Symbols
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2022-10-25 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2022-10-25T00:00:00+08:00">2022-10-25</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/派对浪客诸葛孔明-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/刺客伍六七.jpg"></li>
          <li class="item" data-background-image="/anime/index/动物狂想曲-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/秒速五厘米-5.jpg"></li>
          <li class="item" data-background-image="/anime/index/间谍过家家.jpg"></li>
          <li class="item" data-background-image="/anime/index/借东西的小人阿莉埃蒂.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2022/10/25/javascript-symbol/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载: <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vZGV0YWlsZWQtb3ZlcnZpZXctb2Ytd2VsbC1rbm93bi1zeW1ib2xzLw==">Detailed Overview of Well-known Symbols</span></p>
</blockquote>
<p><span class="exturl" data-url="aHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWVjbWFzY3JpcHQtbGFuZ3VhZ2UtdHlwZXMtc3ltYm9sLXR5cGU=">Symbol</span> is a new primitive type available from ECMAScript 2015, which allow to create unique identifiers  <code>let uniqueKey = Symbol('SymbolName')</code> .</p>
<p>You may use symbols as keys of properties in objects. A list of symbols that JavaScript treats specially is published as <span class="exturl" data-url="aHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXdlbGwta25vd24tc3ltYm9scw==">well-known symbols</span>.<br>
Well-known symbols are used by built-in JavaScript algorithms. For example  <code>Symbol.iterator</code>  is utilized to iterate over items in arrays, strings, or even to define your own iterator function.</p>
<p>These special symbols are important because they are system properties of objects that allow to define custom behavior. Sounds great, use them to hook into JavaScript!</p>
<p>Being unique, using symbols as keys (instead of string literals) allow easily to add new functionality to objects. You don’t have to worry about keys collision (because every symbol is unique), which can be a problem when using string literals.</p>
<p>This article guides through the list of well-known symbols and explains how to use them comfortable in your code.</p>
<p>Often for simplicity a well-known  <code>Symbol.&lt;name&gt;</code>  is abbreviated to <em>@@<name></em> format. For example  <code>Symbol.iterator</code>  is <em>@@iterator</em> or  <code>Symbol.toPrimitive</code>  is <em>@@toPrimitive</em>.<br>
It’s possible to say that an object has an <em>@@iterator</em> method. It indicates that the object has a property named  <code>Symbol.iterator</code>  that holds a function:<br>
 <code>&#123; [Symbol.iterator]: function()&#123;...&#125; &#125;</code> .</p>
<h2 id="1-a-short-introduction-to-symbol"><a class="markdownIt-Anchor" href="#1-a-short-introduction-to-symbol">#</a> 1. A short introduction to Symbol</h2>
<p>Symbol is a primitive type (like numbers, booleans and strings), unique and immutable.</p>
<p>To create a symbol, invoke  <code>Symbol</code>  function with an optional name argument:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> mySymbol = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> namedSymbol = <span class="built_in">Symbol</span>(<span class="string">&#x27;myName&#x27;</span>);</span><br><span class="line"><span class="keyword">typeof</span> mySymbol;    <span class="comment">// =&gt; &#x27;symbol&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> namedSymbol; <span class="comment">// =&gt; &#x27;symbol&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>mySymbol</code>  and  <code>namedSymbol</code>  are symbol primitives.  <code>namedSymbol</code>  has an associated name  <code>'myName'</code> , which is useful for debugging.</p>
<p>It is important that every time  <code>Symbol()</code>  is invoked, a new and unique symbol is created. Two symbols are unique (or distinct) even if they have the same name:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> first = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">let</span> second = <span class="built_in">Symbol</span>();</span><br><span class="line">first === second; <span class="comment">// =&gt; false</span></span><br><span class="line"><span class="keyword">let</span> firstNamed = <span class="built_in">Symbol</span>(<span class="string">&#x27;Lorem&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> secondNamed = <span class="built_in">Symbol</span>(<span class="string">&#x27;Lorem&#x27;</span>);</span><br><span class="line">firstNamed === secondNamed; <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure>
<p><code>first</code>  and  <code>second</code>  create unique symbols and are different.<br>
 <code>firstNamed</code>  and  <code>secondNamed</code>  have the same name  <code>'Lorem'</code> , but are still different.</p>
<p>Symbols can be keys for properties in objects. In object literals or classes declaration, it is necessary to use a <span class="exturl" data-url="aHR0cHM6Ly9kbWl0cmlwYXZsdXRpbi5jb20vd2h5LW9iamVjdC1saXRlcmFscy1pbi1qYXZhc2NyaXB0LWFyZS1jb29sLyM0LWNvbXB1dGVkLXByb3BlcnR5LW5hbWVz">computed property name</span> syntax  <code>[symbol]</code> :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> stringSymbol = <span class="built_in">Symbol</span>(<span class="string">&#x27;String&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> myObject = &#123;</span><br><span class="line">  number: <span class="number">1</span>,</span><br><span class="line">  [stringSymbol]: <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line">myObject[stringSymbol];                 <span class="comment">// =&gt; &#x27;Hello World&#x27;</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(myObject);   <span class="comment">// =&gt; [&#x27;number&#x27;]</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(myObject); <span class="comment">// =&gt; [&#x27;Symbol(String)&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>When defining  <code>myObject</code>  from a literal, a computed syntax is used to set the property key from a symbol  <code>[stringSymbol]</code> .<br>
Properties defined with symbols are not accessible using  <code>Object.keys()</code>  or  <code>Object.getOwnPropertyNames()</code>  functions. To access those, call the special function <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols"> <code>Object.getOwnPropertySymbols()</code> </a>.</p>
<p>Using symbols as keys is an important aspect. Special symbols (or well-known symbols) allow to define custom objects behavior like iteration, object to primitive or string conversion, etc.</p>
<p>Well-known symbols are available as non-enumerable, non-writable and non-configurable properties of  <code>Symbol</code>  function object. Simply use a property accessor on  <code>Symbol</code>  function object to get them:  <code>Symbol.iterator</code> ,  <code>Symbol.hasInstance</code> , etc.</p>
<p>You can get the list of well-known symbols this way:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(<span class="built_in">Symbol</span>);</span><br><span class="line"><span class="comment">// =&gt; [&quot;hasInstance&quot;, &quot;isConcatSpreadable&quot;, &quot;iterator&quot;, &quot;toPrimitive&quot;, </span></span><br><span class="line"><span class="comment">//     &quot;toStringTag&quot;, &quot;unscopables&quot;, &quot;match&quot;, &quot;replace&quot;, &quot;search&quot;,    </span></span><br><span class="line"><span class="comment">//     &quot;split&quot;, &quot;species&quot;, ....];</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>.iterator; <span class="comment">// =&gt; &#x27;symbol&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>Object.getOwnPropertiesNames(Symbol)</code>  returns the owned properties of  <code>Symbol</code>  function object, including the list of well-known symbols.<br>
The type of  <code>Symbol.iterator</code>  of course is  <code>'symbol'</code> .</p>
<h2 id="2-iterator-to-make-the-object-iterable"><a class="markdownIt-Anchor" href="#2-iterator-to-make-the-object-iterable">#</a> 2. <em>@@iterator</em> to make the object iterable</h2>
<p><code>Symbol.iterator</code>  is probably the most known symbol. It allows to define how the object should be iterated using  <code>for...of</code>  statement or consumed by  <code>...</code>  spread operator.</p>
<p>Many built-in types like strings, arrays, maps, sets are iterables, i.e. they have an <em>@@iterator</em> method:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myString = <span class="string">&#x27;Hola&#x27;</span>;</span><br><span class="line"><span class="keyword">typeof</span> myString[<span class="built_in">Symbol</span>.iterator]; <span class="comment">// =&gt; &#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> char <span class="keyword">of</span> myString) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(char); <span class="comment">// logs on each iterator &#x27;H&#x27;, &#x27;o&#x27;, &#x27;l&#x27;, &#x27;a&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">[...myString]; <span class="comment">// =&gt; [&#x27;H&#x27;, &#x27;o&#x27;, &#x27;l&#x27;, &#x27;a&#x27;]</span></span><br></pre></td></tr></table></figure>
<p><code>myString</code>  of primitive type string has a property  <code>Symbol.iterator</code> . The property holds a method used to iterate over string characters.</p>
<p>The object that defines a method named  <code>Symbol.iterator</code>  conforms to <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyNpdGVyYWJsZQ==">iterable protocol</span>.<br>
The method should return an object that conforms to <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvSXRlcmF0aW9uX3Byb3RvY29scyNpdGVyYXRvcg==">iterator protocol</span>. The iterator protocol object should have a method  <code>next()</code>  that returns  <code>&#123;value: &lt;iterator_value&gt;, done: &lt;boolean_finished_iterator&gt;&#125;</code> .</p>
<p>Let’s see how to define a custom iterator. The following example creates an iterable object  <code>myMethods</code> , which allows to go over the owned methods:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">methodsIterator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> methods = <span class="built_in">Object</span>.keys(<span class="built_in">this</span>).filter(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> <span class="built_in">this</span>[key] === <span class="string">&#x27;function&#x27;</span>;</span><br><span class="line">  &#125;).map(<span class="function"><span class="params">key</span> =&gt;</span> <span class="built_in">this</span>[key]);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    next: <span class="function">() =&gt;</span> (&#123; <span class="comment">// Conform to Iterator protocol</span></span><br><span class="line">      done : index &gt;= methods.length,</span><br><span class="line">      value: methods[index++]</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> myMethods = &#123;</span><br><span class="line">  toString: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;[object myMethods]&#x27;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  sumNumbers: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;,</span><br><span class="line">  numbers: [<span class="number">1</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">  [<span class="built_in">Symbol</span>.iterator]: methodsIterator <span class="comment">// Conform to Iterable Protocol</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> method <span class="keyword">of</span> myMethods) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(method); <span class="comment">// logs methods `toString` and `sumNumbers`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>methodsIterator()</code>  is a function that returns an iterator object  <code>&#123; next: function() &#123;...&#125; &#125;</code> .<br>
In  <code>myMethods</code>  object a property is setup with  <code>Symbol.iterator</code>  as key and  <code>methodsIterator</code>  as value. This makes  <code>myMethods</code>  iterable, and now is possible to pass over object’s own methods  <code>toString()</code>  and  <code>sumNumbers()</code>  in a  <code>for...of</code>  loop.<br>
Additionally you can get these methods by calling  <code>[...myMethods]</code>  or  <code>Array.from(myMethods)</code> .</p>
<p><em>@@iterator</em> property accepts also a <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvU3RhdGVtZW50cy9mdW5jdGlvbio=">generator function</span>, which makes it even more valuable. The generator function returns a <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvR2VuZXJhdG9y">generator object</span>, which conforms to iterator protocol.</p>
<p>Let’s create a class  <code>Fibonacci</code>  with an <em>@@iterator</em> method, which generates a Fibonacci sequence:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fibonacci</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">n</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.n = n;</span><br><span class="line">  &#125;</span><br><span class="line">  *[<span class="built_in">Symbol</span>.iterator]() &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">0</span>,</span><br><span class="line">      b = <span class="number">1</span>,</span><br><span class="line">      index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (index &lt; <span class="built_in">this</span>.n) &#123;</span><br><span class="line">      index++;</span><br><span class="line">      <span class="keyword">let</span> current = a;</span><br><span class="line">      a = b;</span><br><span class="line">      b = current + a;</span><br><span class="line">      <span class="keyword">yield</span> current;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sequence = <span class="keyword">new</span> Fibonacci(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">let</span> numbers = [...sequence];</span><br><span class="line">numbers; <span class="comment">// =&gt; [0, 1, 1, 2, 3, 5]</span></span><br></pre></td></tr></table></figure>
<p><code>*[Symbol.iterator]() &#123;...&#125;</code>  declares a class method that is a generator function. The instances of  <code>Fibonacci</code>  class will conform to iterable protocol.<br>
Then  <code>sequence</code>  instance is used with the spread operator  <code>[...sequence]</code> . The spread operator calls <em>@@iterator</em> method to create an array from the generated numbers. So the result is an array of first 5 Fibonacci numbers.</p>
<p>If the primitive type or object have an <em>@@iterator</em> method, they can be applied in the following constructs:</p>
<ul>
<li>Iterate over the elements in  <code>for...of</code>  loop</li>
<li>Create an array of elements using spread operator  <code>[...iterableObject]</code></li>
<li>Create an array of elements using  <code>Array.from(iterableObject)</code></li>
<li>In  <code>yield*</code>  expression <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL3lpZWxkKiNPdGhlcl9JdGVyYWJsZV9vYmplY3Rz">to delegate to another generator</span></li>
<li>In constructors for  <code>Map(iterableObject)</code> ,  <code>WeakMap(iterableObject)</code> ,  <code>Set(iterableObject)</code> ,  <code>WeakSet(iterableObject)</code></li>
<li>In promise static methods  <code>Promise.all(iterableObject)</code> ,  <code>Promise.race(iterableObject)</code></li>
</ul>
<h2 id="3-hasinstance-to-customize-instanceof"><a class="markdownIt-Anchor" href="#3-hasinstance-to-customize-instanceof">#</a> 3. <em>@@hasInstance</em> to customize  <code>instanceof</code></h2>
<p>By default  <code>obj instanceof Constructor</code>  operator verifies if the prototype chain of  <code>obj</code>  contains  <code>Constructor.prototype</code>  object. Let’s see an example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Constructor</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// constructor code</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> Constructor();</span><br><span class="line"><span class="keyword">let</span> objProto = <span class="built_in">Object</span>.getPrototypeOf(obj);</span><br><span class="line">objProto === Constructor.prototype; <span class="comment">// =&gt; true</span></span><br><span class="line">obj <span class="keyword">instanceof</span> Constructor;         <span class="comment">// =&gt; true</span></span><br><span class="line">obj <span class="keyword">instanceof</span> <span class="built_in">Object</span>;              <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p><code>obj instanceof Constructor</code>  evaluates to  <code>true</code>  because the prototype of  <code>obj</code>  equals to  <code>Constructor.prototype</code>  (as result of constructor invocation).<br>
 <code>instanceof</code>  verifies also the prototype chain of  <code>obj</code> , thus  <code>obj instanceof Object</code>  is  <code>true</code> .</p>
<p>Often an application does not deal with prototypes and requires a more specific instance verification.</p>
<p>Fortunately is possible to define a method <em>@@hasInstance</em> on a callable type  <code>Type</code>  to customize  <code>instanceof</code>  evaluation.  <code>obj instanceof Type</code>  is now equivalent to  <code>Type[Symbol.hasInstance](obj)</code> .</p>
<p>For example let’s verify if an object or primitive is iterable:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Iterable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> [<span class="built_in">Symbol</span>.hasInstance](obj) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> obj[<span class="built_in">Symbol</span>.iterator] === <span class="string">&#x27;function&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> string = <span class="string">&#x27;Welcome&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> number = <span class="number">15</span>;</span><br><span class="line">array <span class="keyword">instanceof</span> Iterable;  <span class="comment">// =&gt; true</span></span><br><span class="line">string <span class="keyword">instanceof</span> Iterable; <span class="comment">// =&gt; true</span></span><br><span class="line">number <span class="keyword">instanceof</span> Iterable; <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure>
<p><code>Iterable</code>  is a class that contains <em>@@hasInstance</em> static method. This method verifies if the supplied  <code>obj</code>  parameter is iterable, i.e. contains a  <code>Symbol.iterable</code>  property.<br>
Later  <code>Iterable</code>  is used to verify different types of variables.  <code>array</code>  and  <code>string</code>  are iterables,  <code>number</code>  is not.</p>
<p>In my opinion, using <em>@@hasInstance</em> such way with  <code>instanceof</code>  and constructors is more graceful than simply  <code>isIterable(array)</code>  calls.<br>
 <code>array instanceof Iterable</code>  clearly suggests that  <code>array</code>  is verified that it conforms to iterable protocol.</p>
<h2 id="4-toprimitive-to-convert-an-object-to-a-primitive"><a class="markdownIt-Anchor" href="#4-toprimitive-to-convert-an-object-to-a-primitive">#</a> 4. <em>@@toPrimitive</em> to convert an object to a primitive</h2>
<p>Use  <code>Symbol.toPrimitive</code>  to specify a property whose value is a function to transform an object to a primitive. <em>@@toPrimitive</em> method has one parameter <em>hint</em> that takes  <code>&quot;number&quot;</code> ,  <code>&quot;string&quot;</code>  or  <code>&quot;default&quot;</code>  value. <em>hint</em> parameter indicates the suggested type of primitive that should be returned.</p>
<p>As an example, let’s improve an array instance with a <em>@@toPrimitive</em> method:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">arrayToPrimitive</span>(<span class="params">hint</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hint === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.reduce(<span class="function">(<span class="params">sum, num</span>) =&gt;</span> sum + num);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hint === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="built_in">this</span>.join(<span class="string">&#x27;, &#x27;</span>)&#125;</span>]`</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// hint is default</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.toString();    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> array = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>];</span><br><span class="line">array[<span class="built_in">Symbol</span>.toPrimitive] = arrayToPrimitive;</span><br><span class="line"><span class="comment">// array to number. hint is &#x27;number&#x27;</span></span><br><span class="line">+ array; <span class="comment">// =&gt; 9</span></span><br><span class="line"><span class="comment">// array to string. hint is &#x27;string&#x27;</span></span><br><span class="line"><span class="string">`array is <span class="subst">$&#123;array&#125;</span>`</span>; <span class="comment">// =&gt; &#x27;array is [1, 5, 3]&#x27;</span></span><br><span class="line"><span class="comment">// array to default. hint is &#x27;default&#x27;</span></span><br><span class="line"><span class="string">&#x27;array elements: &#x27;</span> + array; <span class="comment">// =&gt; &#x27;array elements: 1,5,3&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>arrayToPrimitive(hint)</code>  is a function that converts the array to a primitive depending on  <code>hint</code> . The assignment  <code>array[Symbol.toPrimitive] = arrayToPrimitive</code>  makes the array to use the new conversion method.<br>
Executing  <code>+ array</code>  calls <em>@@toPrimitive</em> method with  <code>'number'</code>  hint.  <code>array</code>  is transformed to a number, which is the sum of array elements  <code>9</code> .<br>
 <code>array is $&#123;array&#125;</code>  calls <em>@@toPrimitive</em> method with a hint  <code>'string'</code> . The array to primitive conversion is  <code>'[1, 5, 3]'</code> .<br>
The final  <code>'array elements: ' + array</code>  uses  <code>'default'</code>  hint for the transformation. In this case  <code>array</code>  evaluates to  <code>'1,5,3'</code> .</p>
<p><em>@toPrimitive</em> method is used when an object interacts with a primitive type:</p>
<ul>
<li>In equality operator  <code>object == primitive</code></li>
<li>In addition/concatenation operator  <code>object + primitive</code></li>
<li>In subtraction operator  <code>object - primitive</code></li>
<li>Different situations when an object is coerced to a primitive:  <code>String(object)</code> ,  <code>Number(object)</code> , etc.</li>
</ul>
<h2 id="5-tostringtag-to-create-the-default-description-of-an-object"><a class="markdownIt-Anchor" href="#5-tostringtag-to-create-the-default-description-of-an-object">#</a> 5. <em>@@toStringTag</em> to create the default description of an object</h2>
<p>Use  <code>Symbol.toStringTag</code>  to specify a property whose value is a string that describes object’s type tag. <em>@@toStringTag</em> method is used by  <code>Object.prototype.toString()</code> .</p>
<p>The specification of  <code>Object.prototype.toString()</code>  <span class="exturl" data-url="aHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmc=">indicates</span> that many JavaScript types have tags by default:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line">toString.call(<span class="literal">undefined</span>); <span class="comment">// =&gt; &#x27;[object Undefined]&#x27;</span></span><br><span class="line">toString.call(<span class="literal">null</span>);      <span class="comment">// =&gt; &#x27;[object Null]&#x27;</span></span><br><span class="line">toString.call([<span class="number">1</span>, <span class="number">4</span>]);    <span class="comment">// =&gt; &#x27;[object Array]&#x27;</span></span><br><span class="line">toString.call(<span class="string">&#x27;Hello&#x27;</span>);   <span class="comment">// =&gt; &#x27;[object String]&#x27;</span></span><br><span class="line">toString.call(<span class="number">15</span>);        <span class="comment">// =&gt; &#x27;[object Number]&#x27;</span></span><br><span class="line">toString.call(<span class="literal">true</span>);      <span class="comment">// =&gt; &#x27;[object Boolean]&#x27;</span></span><br><span class="line"><span class="comment">// etc for Function, Arguments, Error, Date, RegExp</span></span><br><span class="line">toString.call(&#123;&#125;);        <span class="comment">// =&gt; &#x27;[object Object]&#x27;</span></span><br></pre></td></tr></table></figure>
<p>These types do not have a property  <code>Symbol.toStringTag</code> , because  <code>Object.prototype.toString()</code>  algorithm evaluates them separately.</p>
<p>Many other JavaScript types define the <em>@@toStringTag</em> property, like symbols, generator functions, maps, promises, and more. Let’s take a look:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="keyword">let</span> noop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"><span class="built_in">Symbol</span>.iterator[<span class="built_in">Symbol</span>.toStringTag];   <span class="comment">// =&gt; &#x27;Symbol&#x27;</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;&#125;)[<span class="built_in">Symbol</span>.toStringTag]; <span class="comment">// =&gt; &#x27;GeneratorFunction&#x27;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Map</span>()[<span class="built_in">Symbol</span>.toStringTag];         <span class="comment">// =&gt; &#x27;Map&#x27;</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(noop)[<span class="built_in">Symbol</span>.toStringTag]; <span class="comment">// =&gt; &#x27;Promise&#x27;</span></span><br><span class="line">toString.call(<span class="built_in">Symbol</span>.iterator);   <span class="comment">// =&gt; &#x27;[object Symbol]&#x27;</span></span><br><span class="line">toString.call(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;&#125;);   <span class="comment">// =&gt; &#x27;[object GeneratorFunction]&#x27;</span></span><br><span class="line">toString.call(<span class="keyword">new</span> <span class="built_in">Map</span>());         <span class="comment">// =&gt; &#x27;[object Map]&#x27;</span></span><br><span class="line">toString.call(<span class="keyword">new</span> <span class="built_in">Promise</span>(noop)); <span class="comment">// =&gt; &#x27;[object Promise]&#x27;</span></span><br></pre></td></tr></table></figure>
<p>As seen in the above sample, many JavaScript types define their own <em>@@toStringTag</em> properties.</p>
<p>In other cases, when an object is not from default tagged types or does not provide <em>@@toStringTag</em> property, it is tagged simply as  <code>'Object'</code> .<br>
Of course you can define a custom <em>@@toStringTag</em> property:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> toString = <span class="built_in">Object</span>.prototype.toString;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleClass</span> </span>&#123;&#125;</span><br><span class="line">toString.call(<span class="keyword">new</span> SimpleClass); <span class="comment">// =&gt; &#x27;[object Object]&#x27;</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTypeClass</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>[<span class="built_in">Symbol</span>.toStringTag] = <span class="string">&#x27;MyType&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">toString.class(<span class="keyword">new</span> TagClass); <span class="comment">// =&gt; &#x27;[object MyType]&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>new SimpleClass</code>  instance does not have defined <em>@@toStringTag</em>.  <code>Object.prototype.toString()</code>  returns for it a default  <code>'[object Object]'</code> .<br>
In the constructor of  <code>MyTypeClass</code> , the instance is configured with a custom tag  <code>'MyType'</code> . For such a class instance  <code>Object.prototype.toString()</code>  returns the custom type description  <code>'[object MyType]'</code> .</p>
<p>Notice that <em>@@toStringTag</em> exists more in terms of backward compatibility. Its usage is not encouraged. You probably should use other ways to determine the object type, e.g.  <code>instanceof</code>  (including with <em>@@hasInstance</em> symbol) or  <code>typeof</code> .</p>
<h2 id="6-species-to-create-derived-objects"><a class="markdownIt-Anchor" href="#6-species-to-create-derived-objects">#</a> 6. <em>@@species</em> to create derived objects</h2>
<p>Use  <code>Symbol.species</code>  to specify a property whose value is a constructor function used to create derived objects.</p>
<p>Many JavaScript constructors have the value of <em>@@species</em> equal to the constructor itself:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>[<span class="built_in">Symbol</span>.species] === <span class="built_in">Array</span>;   <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">Map</span>[<span class="built_in">Symbol</span>.species] === <span class="built_in">Map</span>;       <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="built_in">RegExp</span>[<span class="built_in">Symbol</span>.species] === <span class="built_in">RegExp</span>; <span class="comment">// =&gt; true</span></span><br></pre></td></tr></table></figure>
<p>First, note that a <em>derived object</em> is one created after a specific operation on an original object. For example calling  <code>.map()</code>  method on original array returns a derived object: the mapping result array.</p>
<p>Usually derived objects have the same constructor as the original object, which is expected. But sometimes is necessary to indicate a custom constructor (maybe one from the base class): this is where  <code>@@species</code>  property can help.</p>
<p>Suppose a scenario when you extend  <code>Array</code>  constructor to a child class  <code>MyArray</code> , in order to add useful methods. When later  <code>MyArray</code>  class instance is used with  <code>.map()</code>  method, you would need an instance of  <code>Array</code> , but not the child one  <code>MyArray</code> .<br>
To do so, define an accessor property <em>@@species</em> and indicate the derived object constructor:  <code>Array</code> . Let’s try an example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">isEmpty</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.length === <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> get [<span class="built_in">Symbol</span>.species]() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> array = <span class="keyword">new</span> MyArray(<span class="number">3</span>, <span class="number">5</span>, <span class="number">4</span>);</span><br><span class="line">array.isEmpty(); <span class="comment">// =&gt; false</span></span><br><span class="line"><span class="keyword">let</span> odds = array.filter(<span class="function"><span class="params">item</span> =&gt;</span> item % <span class="number">2</span> === <span class="number">1</span>);</span><br><span class="line">odds <span class="keyword">instanceof</span> <span class="built_in">Array</span>;   <span class="comment">// =&gt; true</span></span><br><span class="line">odds <span class="keyword">instanceof</span> MyArray; <span class="comment">// =&gt; false</span></span><br></pre></td></tr></table></figure>
<p>In  <code>MyArray</code>  a static accessor property is defined  <code>static get [Symbol.species]() &#123;&#125;</code> . It indicates that derived objects should have an  <code>Array</code>  constructor.<br>
Later when filtering the array elements,  <code>array.filter()</code>  method returns an  <code>Array</code> .<br>
If <em>@@species</em> property is not customized,  <code>array.filter()</code>  would return an  <code>MyArray</code>  instance.</p>
<p><em>@@species</em> accessor property is used with  <code>Array</code>  and  <code>TypedArray</code>  methods like  <code>.map()</code> ,  <code>.concat()</code> ,  <code>.slice()</code> ,  <code>.splice()</code>  that return derived objects.<br>
It is useful for extending maps, regular expression objects, promises, and still keep the original constructor.</p>
<h2 id="7-create-regular-expression-like-objects-match-replace-search-and-split"><a class="markdownIt-Anchor" href="#7-create-regular-expression-like-objects-match-replace-search-and-split">#</a> 7. Create regular expression like objects: <em>@@match</em>, <em>@@replace</em>, <em>@@search</em> and <em>@@split</em></h2>
<p>JavaScript’s string prototype has 4 methods that accept regular expression objects:</p>
<ul>
<li><code>String.prototype.match(regExp)</code></li>
<li><code>String.prototype.replace(regExp, newSubstr)</code></li>
<li><code>String.prototype.search(regExp)</code></li>
<li><code>String.prototype.split(regExp, limit)</code></li>
</ul>
<p>ECMAScript 2015 allows these 4 methods to accept types other than  <code>RegExp</code> , with the condition to define the corresponding function valued properties <em>@@match</em>, <em>@@replace</em>, <em>@@search</em> and <em>@@split</em>.</p>
<p>Interestingly that  <code>RegExp</code>  prototype defines these methods using symbols too:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">RegExp</span>.prototype[<span class="built_in">Symbol</span>.match];   <span class="comment">// =&gt; &#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">RegExp</span>.prototype[<span class="built_in">Symbol</span>.replace]; <span class="comment">// =&gt; &#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">RegExp</span>.prototype[<span class="built_in">Symbol</span>.search];  <span class="comment">// =&gt; &#x27;function&#x27;</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">RegExp</span>.prototype[<span class="built_in">Symbol</span>.split];   <span class="comment">// =&gt; &#x27;function&#x27;</span></span><br></pre></td></tr></table></figure>
<p>Now let’s create a custom pattern class. The following example defines a simplified class that can be used instead of  <code>RegExp</code> :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Expression</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">pattern</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.pattern = pattern;</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="built_in">Symbol</span>.match](str) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.includes(<span class="built_in">this</span>.pattern);</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="built_in">Symbol</span>.replace](str, replace) &#123;</span><br><span class="line">    <span class="keyword">return</span> str.split(<span class="built_in">this</span>.pattern).join(replace);</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="built_in">Symbol</span>.search](str) &#123;</span><br><span class="line">  	<span class="keyword">return</span> str.indexOf(<span class="built_in">this</span>.pattern);</span><br><span class="line">  &#125;</span><br><span class="line">  [<span class="built_in">Symbol</span>.split](str) &#123;</span><br><span class="line">  	<span class="keyword">return</span> str.split(<span class="built_in">this</span>.pattern);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> sunExp = <span class="keyword">new</span> Expression(<span class="string">&#x27;sun&#x27;</span>);</span><br><span class="line"><span class="string">&#x27;sunny day&#x27;</span>.match(sunExp);            <span class="comment">// =&gt; true</span></span><br><span class="line"><span class="string">&#x27;rainy day&#x27;</span>.match(sunExp);            <span class="comment">// =&gt; false</span></span><br><span class="line"><span class="string">&#x27;sunny day&#x27;</span>.replace(sunExp, <span class="string">&#x27;rainy&#x27;</span>); <span class="comment">// =&gt; &#x27;rainy day&#x27;</span></span><br><span class="line"><span class="string">&quot;It&#x27;s sunny&quot;</span>.search(sunExp);          <span class="comment">// =&gt; 5</span></span><br><span class="line"><span class="string">&quot;daysunnight&quot;</span>.split(sunExp);          <span class="comment">// =&gt; [&#x27;day&#x27;, &#x27;night&#x27;]</span></span><br></pre></td></tr></table></figure>
<p><code>Expression</code>  class defines the methods <em>@@match</em>, <em>@@replace</em>, <em>@@search</em> and <em>@@split</em>.<br>
 <code>sunExp</code>  instance later is used in the corresponding string methods, roughly simulating a regular expression.</p>
<h2 id="8-isconcatspreadable-to-flat-an-object-to-array-elements"><a class="markdownIt-Anchor" href="#8-isconcatspreadable-to-flat-an-object-to-array-elements">#</a> 8. <em>@@isConcatSpreadable</em> to flat an object to array elements</h2>
<p><code>Symbol.isConcatSpreadable</code>  is a boolean valued property that indicates if an object should be flattened to its array elements by  <code>Array.prototype.concat()</code>  method.</p>
<p>By default  <code>.concat()</code>  method spreads the array to its elements when used for concatenation:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letters = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line"><span class="keyword">let</span> otherLetters = [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>];</span><br><span class="line">otherLetters.concat(<span class="string">&quot;e&quot;</span>, letters); <span class="comment">// =&gt; [&#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, &#x27;a&#x27;, &#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>To concatenate two array,  <code>letters</code>  is applied as an argument to  <code>.concat()</code>  method. The elements of  <code>letters</code>  are spread in the concatenation result  <code>['c', 'd', 'e', 'a', 'b']</code> .</p>
<p>To avoid the spread and keep the whole array as an element in the concatenation, set <em>@@isConcatSpreadable</em> to  <code>false</code> :</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letters = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>];</span><br><span class="line">letters[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> otherLetters = [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>];</span><br><span class="line">otherLetters.concat(<span class="string">&quot;e&quot;</span>, letters); <span class="comment">// =&gt; [&#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, [&#x27;a&#x27;, &#x27;b&#x27;]]</span></span><br></pre></td></tr></table></figure>
<p>Assigning  <code>false</code>  to <em>@@isConcatSpreadable</em> property of  <code>letters</code>  array keeps it intact in the concatenation result  <code>['c', 'd', 'e', ['a', 'b']]</code> .</p>
<p>Contrary to an array, by default  <code>.concat()</code>  method <em>does not spread</em> the array-like objects (<span class="exturl" data-url="aHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLWlzY29uY2F0c3ByZWFkYWJsZQ==">see here why, step 5</span>).<br>
This behavior can be configured also by altering <em>@@isConcatSpreadable</em> property:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letters = &#123;<span class="number">0</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">1</span>: <span class="string">&#x27;b&#x27;</span>, <span class="attr">length</span>: <span class="number">2</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> otherLetters = [<span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>];</span><br><span class="line">otherLetters.concat(<span class="string">&#x27;e&#x27;</span>, letters); </span><br><span class="line"><span class="comment">// =&gt; [&#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, &#123;0: &#x27;a&#x27;, 1: &#x27;b&#x27;, length: 2&#125;]</span></span><br><span class="line">letters[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">true</span>;</span><br><span class="line">otherLetters.concat(<span class="string">&#x27;e&#x27;</span>, letters); <span class="comment">// =&gt; [&#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;, &#x27;a&#x27;, &#x27;b&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>On first  <code>.concat()</code>  call the array-like object  <code>letters</code>  remains unmodified in the concatenation result array. This is the default for array-like objects.<br>
Then <em>@@isConcatSpreadable</em> property is set to  <code>true</code>  for  <code>letters</code> . So the concatenation spreads the array-like object to its elements.</p>
<h2 id="9-unscopables-for-properties-accessibility-within-with"><a class="markdownIt-Anchor" href="#9-unscopables-for-properties-accessibility-within-with">#</a> 9. <em>@@unscopables</em> for properties accessibility within with</h2>
<p><code>Symbol.unscopables</code>  is an object valued property whose own property names are property names that are excluded from the  <code>with</code>  environment bindings of the associated object.<br>
<em>@@unscopables</em> property value has this format:  <code>&#123; propertyName: &lt;boolean_exclude_binding&gt; &#125;</code> .</p>
<p>ES2015 defines by default <em>@@unscopables</em> for arrays only. The meaning is to hide the new methods that may override variables with the same name in older JavaScript code:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype[<span class="built_in">Symbol</span>.unscopables];  </span><br><span class="line"><span class="comment">// =&gt; &#123; copyWithin: true, entries: true, fill: true, </span></span><br><span class="line"><span class="comment">//      find: true, findIndex: true, keys: true &#125;</span></span><br><span class="line"><span class="keyword">let</span> numbers = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>];  </span><br><span class="line"><span class="keyword">with</span> (numbers) &#123;  </span><br><span class="line">  concat(<span class="number">8</span>); <span class="comment">// =&gt; [3, 5, 6, 8]</span></span><br><span class="line">  entries;   <span class="comment">// =&gt; ReferenceError: entries is not defined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>.concat()</code>  method can be accessed in  <code>with</code>  body, since it is not mentioned in  <code>@@unscopables</code>  property value.<br>
The method  <code>.entries()</code>  is listed in the <em>@@unscopables</em> property with  <code>true</code> , thus is not available within  <code>with</code> .</p>
<p><em>@@unscopables</em> exists mostly for backward compatibility with older JavaScript code that utilizes  <code>with</code>  (which usage is deprecated and even not allowed in strict mode).</p>
<h2 id="10-final-thoughts"><a class="markdownIt-Anchor" href="#10-final-thoughts">#</a> 10. Final thoughts</h2>
<p>Well-know symbols are powerful properties that allow to hack into JavaScript internal algorithms. Their uniqueness is good for extensibility: object properties are not polluted.</p>
<p><em>@@iterable</em> is an useful property to configure how JavaScript iterates object elements. It is used by  <code>for...of</code> ,  <code>Array.from()</code> , spread operator  <code>...</code>  and more.</p>
<p>Use <em>@@hasInstance</em> for a straightforward type verification. For me,  <code>obj instanceof Iterable</code>  looks better than  <code>isIterable(obj)</code> .</p>
<p><em>@@toStringTag</em> and <em>@@unscopables</em> well-known symbols exists for backward compatibility with <em>ancient</em> JavaScript code. Their utilization is not recommended.</p>
<p>Feeling inspired? I suggest you to take a few hours and analyze your current JavaScript project. I’m sure you can improve it with well-known symbols!<br>
<em>Feel free to write a comment below about your experience on that!</em></p>

      <div class="tags">
          <a href="/tags/js/" rel="tag"><i class="ic i-tag"></i> js</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2022-10-25 15:48:43" itemprop="dateModified" datetime="2022-10-25T15:48:43+08:00">2022-10-25</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2022/10/22/javascript-addation/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;魔笛.jpg" title="JavaScript Addition Operator in Details">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>JavaScript Addition Operator in Details</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2022/10/25/javascript-let/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;我们大家的河合庄.jpg" title="JavaScript Variables Lifecycle Why let Is Not Hoisted">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>JavaScript Variables Lifecycle Why let Is Not Hoisted</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-a-short-introduction-to-symbol"><span class="toc-number">1.</span> <span class="toc-text"> 1. A short introduction to Symbol</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-iterator-to-make-the-object-iterable"><span class="toc-number">2.</span> <span class="toc-text"> 2. @@iterator to make the object iterable</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-hasinstance-to-customize-instanceof"><span class="toc-number">3.</span> <span class="toc-text"> 3. @@hasInstance to customize  instanceof</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-toprimitive-to-convert-an-object-to-a-primitive"><span class="toc-number">4.</span> <span class="toc-text"> 4. @@toPrimitive to convert an object to a primitive</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-tostringtag-to-create-the-default-description-of-an-object"><span class="toc-number">5.</span> <span class="toc-text"> 5. @@toStringTag to create the default description of an object</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-species-to-create-derived-objects"><span class="toc-number">6.</span> <span class="toc-text"> 6. @@species to create derived objects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-create-regular-expression-like-objects-match-replace-search-and-split"><span class="toc-number">7.</span> <span class="toc-text"> 7. Create regular expression like objects: @@match, @@replace, @@search and @@split</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-isconcatspreadable-to-flat-an-object-to-array-elements"><span class="toc-number">8.</span> <span class="toc-text"> 8. @@isConcatSpreadable to flat an object to array elements</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-unscopables-for-properties-accessibility-within-with"><span class="toc-number">9.</span> <span class="toc-text"> 9. @@unscopables for properties accessibility within with</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-final-thoughts"><span class="toc-number">10.</span> <span class="toc-text"> 10. Final thoughts</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">350</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">50</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2022/10/22/javascript-addation/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2022/10/25/javascript-let/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2022/10/25/javascript-symbol/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
