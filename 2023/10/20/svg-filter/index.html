



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="xml,svg" />


<link rel="canonical" href="https://lhchen74.github.io/2023/10/20/svg-filter/">



  <title>
SVG filters |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">SVG filters
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2023-10-20 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2023-10-20T00:00:00+08:00">2023-10-20</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/捉妖小红娘-1.jpg"></li>
          <li class="item" data-background-image="/anime/index/穿越时空的少女-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/clannad-3.jpg"></li>
          <li class="item" data-background-image="/anime/index/千与千寻-4.jpg"></li>
          <li class="item" data-background-image="/anime/index/侧耳倾听-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/辉夜姬物语-2.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2023/10/20/svg-filter/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>repost: <span class="exturl" data-url="aHR0cHM6Ly93ZWJwbGF0Zm9ybS5naXRodWIuaW8vZG9jcy9zdmcvdHV0b3JpYWxzL3NtYXJ0ZXJfc3ZnX2ZpbHRlcnMv">SVG filters · WebPlatform Docs</span></p>
</blockquote>
<h2 id="summary"><a class="markdownIt-Anchor" href="#summary">#</a> Summary</h2>
<p>This guide shows you how to build SVG image processing filters to create interesting visual effects. It shows how to apply these effects within an SVG graphic, and how to apply them to HTML content using the filter CSS property.</p>
<p>The power of SVG filters is matched by the depth and complexity of available options. It takes a good deal of practice to master the many filter effects and understand how to combine them. This guide covers a wide range of examples. It starts by showing how to modify color values in ways that often correspond to built-in CSS filter functions. Then it shows you how to split and merge independent channels to take advantage of some of SVG’s more unusual filter effects. Finally, it shows you how to apply three-dimensional lighting effects.</p>
<h2 id="what-are-filters"><a class="markdownIt-Anchor" href="#what-are-filters">#</a> What are filters?</h2>
<p>A filter is a little machine that takes graphic input, changes it in some way, and causes the output to render differently. Filters comprise <em>filter effect</em> elements, some of which do intuitively obvious things (such as blur the graphic), and some of which only make sense when combined with other effects. Filter effects are often chained together so that one effect’s output becomes another effect’s input. Filter effects may also operate on different inputs that are modified independently of each other, then combined.</p>
<p>The idea of applying filters to web content originated in SVG, but it has recently been extended to CSS, so it helps to clarify what <em>filter</em> means in that context. CSS filters currently come in two flavors:</p>
<ul>
<li>Built-in <em>filter functions</em> provide a series of fairly standard pre-built image processing effects, such as the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/blur"><strong>blur()</strong></a> and <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/grayscale"><strong>grayscale()</strong></a> functions specified by the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/properties/filter"><strong>filter</strong></a> property. These CSS functions can be chained together to form larger effects. (Each is actually implemented as an SVG filter.) See <span class="exturl" data-url="aHR0cHM6Ly93ZWJwbGF0Zm9ybS5naXRodWIuaW8vdy9pbmRleC5waHA/dGl0bGU9dHV0b3JpYWxzL2Nzc19maWx0ZXJzKCkmYW1wO2FjdGlvbj1lZGl0JmFtcDtyZWRsaW5rPTE=">Understanding CSS filter effects</span> for a guide to these CSS functions.</li>
<li>In addition to standard two-dimensional image processing features, CSS <em>custom filters</em> allow you to warp the surface of an element in three dimensions using <span class="exturl" data-url="aHR0cHM6Ly93ZWJwbGF0Zm9ybS5naXRodWIuaW8vZG9jcy93ZWJnbA==">WebGL</span>. Custom CSS filters are also known as <em>shaders</em>, either <em>vertex</em> shaders that warp a surface, or <em>fragment</em> shaders that modify the pixels that cover the resulting surface.</li>
</ul>
<p>This guide does not discuss these more recent CSS custom filters, but does show you how to customize your own SVG filters for use in HTML.</p>
<h2 id="applying-a-simple-filter-fegaussianblur"><a class="markdownIt-Anchor" href="#applying-a-simple-filter-fegaussianblur">#</a> Applying a simple filter (feGaussianBlur)</h2>
<p>Start by placing some text within an SVG graphic:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;blurred&quot;</span> <span class="attr">x</span>=<span class="string">&quot;30&quot;</span> <span class="attr">y</span>=<span class="string">&quot;100&quot;</span>&gt;</span>An SVG Filter<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_none-1697772210740.png" class="" title="svgf none.png">
<p>Place a <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/filter"><strong>filter</strong></a> element within the SVG’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/defs"><strong>defs</strong></a> region. Filters contain series of filter effect elements, all prefixed <em>fe</em>. In this example, a <a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feGaussianBlur"><strong>feGaussianBlur</strong></a> element produces a blurring effect, which matches the effect of the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/blur"><strong>blur()</strong></a> CSS filter function:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_blur&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">stdDeviation</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>To apply the filter, reference it with the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/properties/filter"><strong>filter</strong></a> property, expressed either as an attribute or via CSS:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;text</span><br><span class="line">  class  = &quot;blurred&quot;</span><br><span class="line">  filter = &quot;url(#css_blur)&quot;</span><br><span class="line">  x      = &quot;30&quot;</span><br><span class="line">  y      = &quot;100&quot;</span><br><span class="line">&gt;An SVG Filter<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line">.blurred &#123;</span><br><span class="line">    filter      : url(#css_blur);</span><br><span class="line">    font-family : sans-serif;</span><br><span class="line">    font-size   : 70px;</span><br><span class="line">    fill        : red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_blurBoth-1697772210746.png" class="" title="svgf blurBoth.png">
<p>The effect takes each pixel and moves it around randomly from its original location within a radius specified by the <strong>stdDeviation</strong> value. Unlike the built-in CSS function, in SVG you can specify separate <em>x</em> and <em>y</em> values to produce a sideways motion effect that in this case is a bit more legible:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;sideways_blur&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">stdDeviation</span>=<span class="string">&quot;10 1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_blur-1697772211264.png" class="" title="svgf blur.png">
<h3 id="applying-svg-filters-to-html"><a class="markdownIt-Anchor" href="#applying-svg-filters-to-html">#</a> Applying SVG filters to HTML</h3>
<p>If you want to apply this customized SVG filter to HTML content, place it in an SVG file and use the corresponding <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/properties/filter"><strong>filter</strong></a> CSS property to reference it using the same <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/url"><strong>url()</strong></a> function:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.sidewaysBlur &#123;</span><br><span class="line">    -webkit-filter : url(filters.svg#sideways_blur);</span><br><span class="line">    filter         : url(filters.svg#sideways_blur); /* standard in Mozilla */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>As of this writing, not all browsers allow you to apply SVG filters to HTML content. Mozilla Firefox fully supports the feature, even allowing filtered elements <span class="exturl" data-url="aHR0cHM6Ly93ZWJwbGF0Zm9ybS5naXRodWIuaW8vZG9jcy9zdmcvdHV0b3JpYWxzL3NtYXJ0ZXJfc3ZnX2FuaW1hdGlvbg==">to animate</span>. WebKit Safari’s support is limited to filters that use the blur described above, and basic image processing effects described in the first half of this guide: <strong>feComponentTransfer</strong>, <strong>feColorMatrix</strong>, and <strong>feConvolveMatrix</strong>.</p>
<h2 id="modifying-colors-with-fecomponenttransfer"><a class="markdownIt-Anchor" href="#modifying-colors-with-fecomponenttransfer">#</a> Modifying colors with feComponentTransfer</h2>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComponentTransfer"><strong>feComponentTransfer</strong></a> element allows you to modify each RGBA <em>component</em> represented in each pixel. Within the element, nest any combination of <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feFuncR"><strong>feFuncR</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feFuncG"><strong>feFuncG</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feFuncB"><strong>feFuncB</strong></a>, and <a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feFuncA"><strong>feFuncA</strong></a> elements to run different types of function over each pixel component value.</p>
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> of function to <strong>identity</strong> is equivalent to leaving out the function element altogether, keeping the image on the left unchanged. Setting it to <strong>discrete</strong> allows you to posterize an image, clustering gradual color shifts into solid bands based on the step values specified in <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/tableValues&amp;action=edit&amp;redlink=1"><strong>tableValues</strong></a>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;no_op&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;identity&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;identity&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncB</span> <span class="attr">type</span>=<span class="string">&quot;identity&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncA</span> <span class="attr">type</span>=<span class="string">&quot;identity&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTnoop-1697772210768.png" class="" title="svgf CTnoop.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;posterize&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;discrete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tableValues</span>=<span class="string">&quot;0 0.2 0.4 0.6 0.8 1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;discrete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tableValues</span>=<span class="string">&quot;0 0.2 0.4 0.6 0.8 1&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feFuncB</span> <span class="attr">type</span>=<span class="string">&quot;discrete&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">tableValues</span>=<span class="string">&quot;0 0.2 0.4 0.6 0.8 1&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTband-1697772210787.png" class="" title="svgf CTband.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> to <strong>linear</strong> multiplies the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/slope&amp;action=edit&amp;redlink=1"><strong>slope</strong></a> value (relative to the default <strong>1</strong>), then adds an <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/intercept&amp;action=edit&amp;redlink=1"><strong>intercept</strong></a> value if present. The first example below reproduces the effect of the CSS <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/brightness"><strong>brightness()</strong></a> function, flattening the slope to darken the image. The second increases the slope to brighten the image, but then drops all values by a fixed amount, zeroing out many of them:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_brightness&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncB</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTlinear-1697772211267.png" class="" title="svgf CTlinear.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;brightness_threshold&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;1.5&quot;</span> <span class="attr">intercept</span>=<span class="string">&quot;-0.3&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;1.5&quot;</span> <span class="attr">intercept</span>=<span class="string">&quot;-0.3&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncB</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;1.5&quot;</span> <span class="attr">intercept</span>=<span class="string">&quot;-0.3&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTlinearIntercept-1697772211012.png" class="" title="svgf CTlinearIntercept.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> to <strong>table</strong> lets you specify your own linear slope based on two <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/tableValues&amp;action=edit&amp;redlink=1"><strong>tableValues</strong></a>. The first example behaves like the CSS <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/opacity"><strong>opacity()</strong></a> function. The second, specifying a negative slope from 1 to 0, behaves like the CSS <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/invert"><strong>invert()</strong></a> function:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_opacity&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feFuncA</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;0 0.5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTopacity-1697772210985.png" class="" title="svgf CTopacity.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_invert&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFuncB</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTinvert-1697772211022.png" class="" title="svgf CTinvert.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> to <strong>gamma</strong> allows you to perform <em>gamma correction</em>, a useful way to increase dark values. The function applies the following formula to produce a curve: ((<em>amplitude</em> × <em>value**exponent</em>) + <em>offset</em>). The first example heightens the darker greens, and the second uses <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/offset&amp;action=edit&amp;redlink=1"><strong>offset</strong></a> to reduce the overall green level (the same way that <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/intercept&amp;action=edit&amp;redlink=1"><strong>intercept</strong></a> does for the <strong>linear</strong> type):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;gamma_correct&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;gamma&quot;</span> <span class="attr">amplitude</span>=<span class="string">&quot;1&quot;</span> <span class="attr">exponent</span>=<span class="string">&quot;0.5&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTgammaOffset0-1697772211034.png" class="" title="svgf CTgammaOffset0.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;gamma_correct2&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncG</span> <span class="attr">type</span>=<span class="string">&quot;gamma&quot;</span> <span class="attr">amplitude</span>=<span class="string">&quot;1&quot;</span> <span class="attr">exponent</span>=<span class="string">&quot;0.5&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">offset</span>=<span class="string">&quot;-0.1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CTgamma-1697772211228.png" class="" title="svgf CTgamma.png">
<h2 id="transforming-colors-with-fecolormatrix"><a class="markdownIt-Anchor" href="#transforming-colors-with-fecolormatrix">#</a> Transforming colors with feColorMatrix</h2>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feColorMatrix"><strong>feColorMatrix</strong></a> element provides other useful ways to modify an image’s color. With its <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> set to <strong>saturate</strong>, reducing the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/values&amp;action=edit&amp;redlink=1"><strong>values</strong></a> from 1 produces a grayscale, while increasing it makes the image more vivid, just like the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/grayscale"><strong>grayscale()</strong></a> and <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/saturate"><strong>saturate()</strong></a> CSS functions:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_grayscale&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;saturate&quot;</span> <span class="attr">values</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXsaturate0-1697772211510.png" class="" title="svgf CMXsaturate0.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_saturate&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;saturate&quot;</span> <span class="attr">values</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXsaturate10-1697772211246.png" class="" title="svgf CMXsaturate10.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> to <strong>hueRotate</strong> alters the angle along the color wheel, just like the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/hue-rotate"><strong>hue-rotate()</strong></a> CSS function. Setting <strong>luminanceToAlpha</strong> (no <strong>values</strong> necessary) produces an alpha channel from bright pixels, useful to produce image masks as described below.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_hue_rotate&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;hueRotate&quot;</span> <span class="attr">values</span>=<span class="string">&quot;180&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXhurRotate180-1697772211281.png" class="" title="svgf CMXhurRotate180.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;luminance_mask&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;luminanceToAlpha&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXluminanceToAlpha-1697772211308.png" class="" title="svgf CMXluminanceToAlpha.png">
<p>As the name of the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feColorMatrix"><strong>feColorMatrix</strong></a> suggests, setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/type&amp;action=edit&amp;redlink=1"><strong>type</strong></a> to <strong>matrix</strong> allows you to transform colors yourself. It specifies a 20-element transform whose rows correspond to red, green, blue, and alpha channels. This initial transform leaves the image unchanged:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 0 0 0 0</span><br><span class="line">0 1 0 0 0</span><br><span class="line">0 0 1 0 0</span><br><span class="line">0 0 0 1 0</span><br></pre></td></tr></table></figure>
<p>The first example below reproduces the effect of the CSS <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/sepia"><strong>sepia()</strong></a> function, while the second simply reduces green and blue tones. (In these examples, the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/values&amp;action=edit&amp;redlink=1"><strong>values</strong></a> appear stacked into a table only in the interest of clarity.)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_sepia&quot;</span>&gt;</span></span><br><span class="line">  &lt;feColorMatrix</span><br><span class="line">    type=&quot;matrix&quot;</span><br><span class="line">    values=&quot;.343 .669 .119 0 0</span><br><span class="line">            .249 .626 .130 0 0</span><br><span class="line">            .172 .334 .111 0 0</span><br><span class="line">            .000 .000 .000 1 0 &quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXsepia-1697772211584.png" class="" title="svgf CMXsepia.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;dusk&quot;</span>&gt;</span></span><br><span class="line">  &lt;feColorMatrix</span><br><span class="line">    type=&quot;matrix&quot;</span><br><span class="line">    values=&quot;1.0 0   0   0   0</span><br><span class="line">            0   0.2 0   0   0</span><br><span class="line">            0   0   0.2 0   0</span><br><span class="line">            0   0   0   1.0 0 &quot;/&gt;</span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CMXsunset-1697772211569.png" class="" title="svgf CMXsunset.png">
<h2 id="sharpening-images-with-feconvolvematrix"><a class="markdownIt-Anchor" href="#sharpening-images-with-feconvolvematrix">#</a> Sharpening images with feConvolveMatrix</h2>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feConvolveMatrix"><strong>feConvolveMatrix</strong></a> effect allows you to modify pixels based on the values of their neighbors, useful in sharpening details. In its simplest form, the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/order&amp;action=edit&amp;redlink=1"><strong>order</strong></a> attribute declares a 3×3 box, which defines a matrix of 9 table values that must be reflected in the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/kernelMatrix&amp;action=edit&amp;redlink=1"><strong>kernelMatrix</strong></a> attribute:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;no_op&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feConvolveMatrix</span> <span class="attr">order</span>=<span class="string">&quot;3&quot;</span> <span class="attr">kernelMatrix</span>=<span class="string">&quot;0 0 0 0 1 0 0 0 0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The middle value is the pixel to modify, and the others form a map of its immediate neighbors:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0 0 0</span><br><span class="line">0 1 0</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>
<p>The relative weight of the neighbors helps calculate the pixel’s new value. (In this case it’s 0 times each adjacent pixel’s value, summed together along with 1 times the value of the pixel, divided by the sum of all the pixel values.) This initial example has no effect on the image.</p>
<p>The original image shown on the left is slightly blurred. Applying a sharpen filter nudges pixels for the higher-contrast edges shown at the right:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 1  -1  1</span><br><span class="line">-1  -1 -1</span><br><span class="line"> 1  -1  1</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>left</th>
<th>right</th>
</tr>
</thead>
<tbody>
<tr>
<td><img data-src="/2023/10/20/svg-filter/400px-svgf_CVnoop-1697772211471.png" class="" title="svgf CVnoop.png"></td>
<td><img data-src="/2023/10/20/svg-filter/400px-svgf_CVsharpen-1697772211515.png" class="" title="svgf CVsharpen.png"></td>
</tr>
</tbody>
</table>
<p>Getting convolve filters to behave predictably takes a bit of practice. The example on the left below sharpens the detail more dramatically, while the one on the right embosses it diagonally:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> 1  -1    1</span><br><span class="line">-1  -0.1 -1</span><br><span class="line"> 1  -1    1</span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CVsuperSharp-1697772212479.png" class="" title="svgf CVsuperSharp.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9  0  0</span><br><span class="line">0  1  0</span><br><span class="line">0  0 -9</span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CVemboss-1697772211711.png" class="" title="svgf CVemboss.png">
<p>Convolution filters can also highlight moats around high-contrast edges. The more dramatic texture shown below on the right forms moats throughout the image. It requires an <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/order&amp;action=edit&amp;redlink=1"><strong>order</strong></a> of 5, which extends the range of the calculation to each adjacent neighbor’s farthest neighbor.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-1 -1 -1</span><br><span class="line">-1  7 -1</span><br><span class="line">-1 -1 -1</span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CVedge-1697772211768.png" class="" title="svgf CVedge.png">
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1   1   1   1  1</span><br><span class="line">1  -2  -2  -2  1</span><br><span class="line">1  -2  .01 -2  1</span><br><span class="line">1  -2  -2  -2  1</span><br><span class="line">1   1   1   1  1</span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/400px-svgf_CVsuperEdge-1697772211822.png" class="" title="svgf CVsuperEdge.png">
<p>As shown below, the example on the right is also converted to a grayscale using the <strong>luminanceToAlpha</strong> <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feColorMatrix"><strong>feColorMatrix</strong></a> effect described above, and the effect-chaining technique described in the following section.</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;extremeEffect&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feConvolveMatrix</span> <span class="attr">order</span>=<span class="string">&quot;5&quot;</span> <span class="attr">kernelMatrix</span>=<span class="string">&quot;1 1 1 1 1 1 -2 -2 -2 1 1  -2 .01 -2 1 1 -2 -2 -2 1 1 1 1 1 1&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;luminanceToAlpha&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="chaining-splitting-and-merging-effects-building-a-drop-shadow-with-feoffset-feflood-and-femerge"><a class="markdownIt-Anchor" href="#chaining-splitting-and-merging-effects-building-a-drop-shadow-with-feoffset-feflood-and-femerge">#</a> Chaining, splitting and merging effects: building a drop shadow with feOffset, feFlood, and feMerge</h2>
<p>Much of the power of SVG filters comes from their ability to accept various graphic inputs, modify them independently of each other, then recombine them. This example reproduces the effect produced by the CSS <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/css/functions/drop-shadow"><strong>drop-shadow()</strong></a> function. Stepping through each line and seeing the results as you go helps you to build far more interesting filters:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;css_drop_shadow&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">stdDeviation</span>=<span class="string">&quot;2&quot;</span>  <span class="attr">in</span>=<span class="string">&quot;SourceAlpha&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feOffset</span> <span class="attr">dx</span>=<span class="string">&quot;4&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;6&quot;</span>           <span class="attr">result</span>=<span class="string">&quot;offsetblur&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feFlood</span> <span class="attr">flood-color</span>=<span class="string">&quot;#777&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">operator</span>=<span class="string">&quot;in&quot;</span>        <span class="attr">in2</span>=<span class="string">&quot;offsetblur&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feMerge</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span>                    <span class="attr">in</span>=<span class="string">&quot;SourceGraphic&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feMerge</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>First we start with an image transparency:</p>
<img data-src="/2023/10/20/svg-filter/192px-svgf_dropNoop-1697772211849-removebg.png" class="" title="svgf dropNoop.png">
<p>We’ve already seen the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feGaussianBlur"><strong>feGaussianBlur</strong></a> effect in action, but in this case it behaves differently. The optional <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in&amp;action=edit&amp;redlink=1"><strong>in</strong></a> specifies the <strong>SourceAlpha</strong>, or all of its non-transparent pixels. The result of that effect, which is colored black, is passed to the next <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feOffset"><strong>feOffset</strong></a> effect, which simply moves it down and over:</p>
<img data-src="/2023/10/20/svg-filter/192px-svgf_dropOffsetBlur-1697772211856.png" class="" title="svgf dropOffsetBlur.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feFlood"><strong>feFlood</strong></a> effect simply produces a color, specified by its <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/properties/flood-color&amp;action=edit&amp;redlink=1"><strong>flood-color</strong></a> property. The effect is independent of the graphic we’ve produced so far, and doesn’t take any input from the offset effect, so it renders within the filter’s entire region:</p>
<img data-src="/2023/10/20/svg-filter/192px-svgf_dropFlood-1697772212426.png" class="" title="svgf dropFlood.png">
<p>By default, the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/result&amp;action=edit&amp;redlink=1"><strong>result</strong></a> of the flood becomes the next effect’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in&amp;action=edit&amp;redlink=1"><strong>in</strong></a> value, so neither of these attributes needs to be explicitly declared here. The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComposite"><strong>feComposite</strong></a> effect applies the <strong>in</strong> composite operation on the portion of the gray fill that falls within the dropped shadow:</p>
<img data-src="/2023/10/20/svg-filter/192px-svgf_dropComposite-1697772211979.png" class="" title="svgf dropComposite.png">
<p>Finally, the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMerge"><strong>feMerge</strong></a> effect combines the modified version of the graphic with the original. The first <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMergeNode"><strong>feMergeNode</strong></a> accepts the composite result by default, and the second specifies the <strong>SourceGraphic</strong>, which renders over it for the final effect:</p>
<img data-src="/2023/10/20/svg-filter/192px-svgf_dropMerge-1697772212477.png" class="" title="svgf dropMerge.png">
<h2 id="other-input-and-merging-options-feblend-fecomposite-feimage-fetile"><a class="markdownIt-Anchor" href="#other-input-and-merging-options-feblend-fecomposite-feimage-fetile">#</a> Other input and merging options: feBlend, feComposite, feImage, feTile</h2>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMerge"><strong>feMerge</strong></a> element shown above simply places one graphic over another to produce a new filter channel. As an alternative, you can use <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feBlend"><strong>feBlend</strong></a> with its <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/mode&amp;action=edit&amp;redlink=1"><strong>mode</strong></a> set to <strong>normal</strong>, which combines the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in&amp;action=edit&amp;redlink=1"><strong>in</strong></a> and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in2&amp;action=edit&amp;redlink=1"><strong>in2</strong></a> channels:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feBlend</span> <span class="attr">in</span>=<span class="string">&quot;SourceGraphic&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;offsetBlur&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;normal&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>The following shows how <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feBlend"><strong>feBlend</strong></a>’s other modes affect graphics that overlay each other. The <strong>lighten</strong> and <strong>darken</strong> modes simply take the lighter or darker of the two pixels:</p>
<p><strong>normal</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_blendNormal-1697772211999.png" class="" title="svgf blendNormal.png">
<p><strong>lighten</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_blendLighten-1697772212004.png" class="" title="svgf blendLighten.png">
<p><strong>darken</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_blendDarken-1697772212237.png" class="" title="svgf blendDarken.png">
<p><strong>screen</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_blendScreen-1697772212251.png" class="" title="svgf blendScreen.png">
<p><strong>multiply</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_blendMultiply-1697772212246.png" class="" title="svgf blendMultiply.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComposite"><strong>feComposite</strong></a> element’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/operator&amp;action=edit&amp;redlink=1"><strong>operator</strong></a> to <strong>over</strong> produces the same default overlay as <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMerge"><strong>feMerge</strong></a>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;SourceGraphic&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;offsetBlur&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;over&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>The following shows how its operators behave. The drop-shadow example above uses the <strong>in</strong> operator to fill a color within another graphic.</p>
<p><strong>over</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compOver-1697772212534.png" class="" title="svgf compOver.png">
<p><strong>out</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compOut-1697772212538.png" class="" title="svgf compOut.png">
<p><strong>in</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compIn-1697772212540.png" class="" title="svgf compIn.png">
<p><strong>atop</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compAtop-1697772212652.png" class="" title="svgf compAtop.png">
<p><strong>xor</strong></p>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compXor-1697772212722.png" class="" title="svgf compXor.png">
<p>Setting the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/operator&amp;action=edit&amp;redlink=1"><strong>operator</strong></a> to <strong>arithmetic</strong> allows you to supply your own <strong>k1</strong>-<strong>k4</strong> table values to produce composite blends. For example, set <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/k1&amp;action=edit&amp;redlink=1"><strong>k1</strong></a> and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/k4&amp;action=edit&amp;redlink=1"><strong>k4</strong></a> to 0, then decrease <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/k2&amp;action=edit&amp;redlink=1"><strong>k2</strong></a> from 1 while increasing <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/k3&amp;action=edit&amp;redlink=1"><strong>k3</strong></a> from 0 for a cross-fade effect. This example makes the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in2&amp;action=edit&amp;redlink=1"><strong>in2</strong></a> graphic more visible:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;graphicA&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;graphicB&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;arithmetic&quot;</span> <span class="attr">k1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">k2</span>=<span class="string">&quot;0.3&quot;</span> <span class="attr">k3</span>=<span class="string">&quot;0.7&quot;</span> <span class="attr">k4</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/150px-svgf_compArithmetic-1697772212730.png" class="" title="svgf compArithmetic.png">
<p>Use the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feImage"><strong>feImage</strong></a> element to import graphics into filter effects as in the examples above and below. It allows you to import not only raster images as with the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/image"><strong>image</strong></a> element, but any other SVG graphic as well. By default, graphics are placed in the center of the filter region. Otherwise, use <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/x&amp;action=edit&amp;redlink=1"><strong>x</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/y&amp;action=edit&amp;redlink=1"><strong>y</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/width&amp;action=edit&amp;redlink=1"><strong>width</strong></a>, and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/height&amp;action=edit&amp;redlink=1"><strong>height</strong></a> attributes to reposition and resize them:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feImage</span> <span class="attr">xlink:href</span>=<span class="string">&quot;img/icon.png&quot;</span> <span class="attr">x</span>=<span class="string">&quot;100&quot;</span> <span class="attr">y</span>=<span class="string">&quot;50&quot;</span> <span class="attr">width</span>=<span class="string">&quot;20%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;20%&quot;</span> <span class="attr">result</span>=<span class="string">&quot;icon&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feImage</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#gradient&quot;</span> <span class="attr">result</span>=<span class="string">&quot;gradient&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feTile</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feTile"><strong>feTile</strong></a> element simply allows you to repeat imported graphics as a pattern.</p>
<h2 id="warping-effects-femorphology-feturbulence-fedisplacementmap"><a class="markdownIt-Anchor" href="#warping-effects-femorphology-feturbulence-fedisplacementmap">#</a> Warping effects (feMorphology, feTurbulence, feDisplacementMap)</h2>
<p>The next example shows how to combine several filter effects to warp text:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;warp&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feMorphology</span> <span class="attr">radius</span>=<span class="string">&quot;3&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;dilate&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0.5&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feMerge</span> <span class="attr">result</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span> <span class="attr">in</span>=<span class="string">&quot;SourceGraphic&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feMerge</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feTurbulence</span> <span class="attr">type</span>=<span class="string">&quot;fractalNoise&quot;</span> <span class="attr">baseFrequency</span>=<span class="string">&quot;0.017&quot;</span> <span class="attr">numOctaves</span>=<span class="string">&quot;1&quot;</span> <span class="attr">result</span>=<span class="string">&quot;warp&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feDisplacementMap</span> <span class="attr">xChannelSelector</span>=<span class="string">&quot;R&quot;</span> <span class="attr">yChannelSelector</span>=<span class="string">&quot;G&quot;</span> <span class="attr">scale</span>=<span class="string">&quot;60&quot;</span> <span class="attr">in</span>=<span class="string">&quot;text&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;warp&quot;</span>  /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Start with a bit of text:</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpStart-1697772212738.png" class="" title="svgf warpStart.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMorphology"><strong>feMorphology</strong></a> effect specifies a <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/dilate&amp;action=edit&amp;redlink=1"><strong>dilate</strong></a> factor to thicken the graphic. (Alternately, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/erode&amp;action=edit&amp;redlink=1"><strong>erode</strong></a> would make it thinner.)</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpMorph-1697772212741.png" class="" title="svgf warpMorph.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComponentTransfer"><strong>feComponentTransfer</strong></a> modifies the color, as described in a previous section:</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpColoredOutline-1697772212747.png" class="" title="svgf warpColoredOutline.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMerge"><strong>feMerge</strong></a> places the modified outline behind the original letterform:</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpCombinedOutline-1697772213372.png" class="" title="svgf warpCombinedOutline.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feTurbulence"><strong>feTurbulence</strong></a> effect produces its own graphic noise within which colors form cloud-like patterns:</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpTurbulence-1697772212967.png" class="" title="svgf warpTurbulence.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feDisplacementMap"><strong>feDisplacementMap</strong></a> produces the final effect:</p>
<img data-src="/2023/10/20/svg-filter/250px-svgf_warpDisplace-1697772212980.png" class="" title="svgf warpDisplace.png">
<p>The displacement effect moves the pixels of the text (specified by <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in&amp;action=edit&amp;redlink=1"><strong>in</strong></a>) based on the pixel values of the noise pattern (specified by <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/in2&amp;action=edit&amp;redlink=1"><strong>in2</strong></a>). The <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/xChannelSelector&amp;action=edit&amp;redlink=1"><strong>xChannelSelector</strong></a> and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/yChannelSelector&amp;action=edit&amp;redlink=1"><strong>yChannelSelector</strong></a> specify, for each axis, which color component’s value (<strong>R</strong>, <strong>G</strong>, <strong>B</strong>, or <strong>A</strong>) to use to push the pixels, and the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/scale&amp;action=edit&amp;redlink=1"><strong>scale</strong></a> sets the overall range of movement.</p>
<h2 id="creating-textures-feturbulence"><a class="markdownIt-Anchor" href="#creating-textures-feturbulence">#</a> Creating textures (feTurbulence)</h2>
<p>Turbulence is indispensable for grain and weave textures, useful for background patterns. Step through the following example:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;weave&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feTurbulence</span> <span class="attr">baseFrequency</span>=<span class="string">&quot;.25,.03&quot;</span> <span class="attr">numOctaves</span>=<span class="string">&quot;3&quot;</span> <span class="attr">seed</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feComponentTransfer</span> <span class="attr">result</span>=<span class="string">&quot;grain&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">feFuncR</span> <span class="attr">type</span>=<span class="string">&quot;linear&quot;</span> <span class="attr">slope</span>=<span class="string">&quot;3&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFlood</span> <span class="attr">flood-color</span>=<span class="string">&quot;brown&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feMerge</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">feMergeNode</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">feMergeNode</span> <span class="attr">in</span>=<span class="string">&quot;grain&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">feMerge</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Supplying the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feTurbulence"><strong>feTurbulence</strong></a> effect with two <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/baseFrequency&amp;action=edit&amp;redlink=1"><strong>baseFrequency</strong></a> values creates a striped effect:</p>
<img data-src="/2023/10/20/svg-filter/180px-svgf_TBturb-1697772212987.png" class="" title="svgf TBturb.png">
<p>An <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComponentTransfer"><strong>feComponentTransfer</strong></a> boosts the red values:</p>
<img data-src="/2023/10/20/svg-filter/180px-svgf_TBcomp-1697772212982.png" class="" title="svgf TBcomp.png">
<p>An <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feFlood"><strong>feFlood</strong></a> provides a background color:</p>
<img data-src="/2023/10/20/svg-filter/180px-svgf_TBflood-1697772212993.png" class="" title="svgf TBflood.png">
<p>The final <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feMerge"><strong>feMerge</strong></a> overlays the pattern:</p>
<img data-src="/2023/10/20/svg-filter/180px-svgf_TBmerge-1697772213207.png" class="" title="svgf TBmerge.png">
<p>Note the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/filter"><strong>filter</strong></a> element in the example above uses <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/x&amp;action=edit&amp;redlink=1"><strong>x</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/y&amp;action=edit&amp;redlink=1"><strong>y</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/width&amp;action=edit&amp;redlink=1"><strong>width</strong></a>, and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/height&amp;action=edit&amp;redlink=1"><strong>height</strong></a> attributes to specify dimensions. By default, filters operate on a <em>region</em> that’s somewhat wider than elements they are applied to, to account for offset effects such as the shadow shown above, which extends past the graphic’s original dimensions. In this example, the weave pattern only appears within the graphic’s original dimensions.</p>
<h2 id="lighting-effects"><a class="markdownIt-Anchor" href="#lighting-effects">#</a> Lighting effects</h2>
<p>Shining a light on a graphic provides additional depth and texture. To create a lighting effect, you need to specify three things:</p>
<ul>
<li>A light <em>color</em>, specified by the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/properties/lighting-color&amp;action=edit&amp;redlink=1"><strong>lighting-color</strong></a> property</li>
<li>A light <em>source</em>, of which there are three kinds:
<ul>
<li>a <em>distant</em> light (<a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feDistantLight"><strong>feDistantLight</strong></a>) is arbitrarily far away, and so is specified in terms of its angle from the target. This is the most appropriate way to represent sunlight.</li>
<li>a <em>point</em> light (<a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/fePointLight"><strong>fePointLight</strong></a>) emanates from a specific point that is represented as a three-dimensional <em>x</em>/<em>y</em>/<em>z</em> coordinate. This is more appropriate when you need the perspective necessary to place a room light within a scene.</li>
<li>a <em>spot</em> light (<a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/elements/feSpotLight&amp;action=edit&amp;redlink=1"><strong>feSpotLight</strong></a>) behaves much like a point light, but its beam can be narrowed to a cone, and the light can pivot to other targets.</li>
</ul>
</li>
<li>A basic <em>type</em> of light, of which two are available:
<ul>
<li><em>diffuse</em> light (<a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feDiffuseLighting"><strong>feDiffuseLighting</strong></a>) indicates indirect light from an outside source.</li>
<li><em>specular</em> light (<a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feSpecularLighting"><strong>feSpecularLighting</strong></a>) specifies secondary light that bounced from reflective surfaces.</li>
</ul>
</li>
</ul>
<p>A graphic’s alpha channel forms a <em>bump map</em> that responds to light. Transparent values remain flat, while opaque values rise to form peaks that are illuminated more prominently. To illustrate how lighting works, this example generates a hilly terrain:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;terrain&quot;</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feTurbulence</span> <span class="attr">baseFrequency</span>=<span class="string">&quot;.01&quot;</span> <span class="attr">numOctaves</span>=<span class="string">&quot;2&quot;</span> <span class="attr">seed</span>=<span class="string">&quot;10&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turbulence&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;luminanceToAlpha&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncA</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feTurbulence"><strong>feTurbulence</strong></a> provides a noise pattern. The darker clusters will become hilltops, and the surrounding white areas will be valleys:</p>
<img data-src="/2023/10/20/svg-filter/260px-svgf_TERRturb1-1697772213225.png" class="" title="svgf TERRturb1.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feColorMatrix"><strong>feColorMatrix</strong></a> element’s <strong>luminanceToAlpha</strong> type converts the brighter colors in the valleys to higher alpha values:</p>
<img data-src="/2023/10/20/svg-filter/260px-svgf_TERRturb2-1697772213688.png" class="" title="svgf TERRturb2.png">
<p>The <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComponentTransfer"><strong>feComponentTransfer</strong></a> inverts the alpha channel, so that peaks have higher values and valleys have lower values:</p>
<img data-src="/2023/10/20/svg-filter/260px-svgf_TERRturb3-1697772213229.png" class="" title="svgf TERRturb3.png">
<p>To specify the lighting effect, nest the light source element (<a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feDistantLight"><strong>feDistantLight</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/fePointLight"><strong>fePointLight</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/elements/feSpotLight&amp;action=edit&amp;redlink=1"><strong>feSpotLight</strong></a>) within the lighting type (<a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feDiffuseLighting"><strong>feDiffuseLighting</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/svg/elements/feSpecularLighting"><strong>feSpecularLighting</strong></a>). This example specifies a distant light:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feDiffuseLighting</span> <span class="attr">lighting-color</span>=<span class="string">&quot;brown&quot;</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;100&quot;</span> <span class="attr">diffuseConstant</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feDistantLight</span> <span class="attr">azimuth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">elevation</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feDiffuseLighting</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_TERRdiff-1697772213240.png" class="" title="svgf TERRdiff.png">
<p>The distant light source’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/azimuth&amp;action=edit&amp;redlink=1"><strong>azimuth</strong></a> corresponds to a compass angle along the horizon, which lies along the plane of the display screen. The <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/elevation&amp;action=edit&amp;redlink=1"><strong>elevation</strong></a> specifies the angle from the horizon, with 90° facing straight up, or out from the screen.</p>
<p>The diffuse lighting effect’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/surfaceScale&amp;action=edit&amp;redlink=1"><strong>surfaceScale</strong></a> sets the maximum height of the hilltops. The <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/diffuseConstant&amp;action=edit&amp;redlink=1"><strong>diffuseConstant</strong></a> sets the light’s saturation, so increasing it from its default value of 1 produces sunlight that’s brighter than usual.</p>
<p>The corresponding specular lighting effect only produces highlights, which can be overlaid on the original scene:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feSpecularLighting</span> <span class="attr">lighting-color</span>=<span class="string">&quot;brown&quot;</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;100&quot;</span> <span class="attr">specularConstant</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feDistantLight</span> <span class="attr">azimuth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">elevation</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feSpecularLighting</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_TERRspec-1697772213461.png" class="" title="svgf TERRspec.png">
<p>This shows the two effects used in combination, with the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/properties/lighting-color&amp;action=edit&amp;redlink=1"><strong>lighting-color</strong></a> property specified separately in a style sheet. The two lighting effects take the same <em>terrain</em> input, then later composite the <em>scene</em> and its <em>highlights</em>:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">.feDiffuseLighting,</span><br><span class="line">.feSpecularLighting &#123;</span><br><span class="line">    lighting-color: brown;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">id</span>=<span class="string">&quot;shadow_terrain&quot;</span> <span class="attr">primitiveUnits</span>=<span class="string">&quot;objectBoundingBox&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feTurbulence</span> <span class="attr">baseFrequency</span>=<span class="string">&quot;.01&quot;</span> <span class="attr">numOctaves</span>=<span class="string">&quot;2&quot;</span> <span class="attr">seed</span>=<span class="string">&quot;1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;turbulence&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feColorMatrix</span> <span class="attr">type</span>=<span class="string">&quot;luminanceToAlpha&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComponentTransfer</span> <span class="attr">result</span>=<span class="string">&quot;terrain&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">feFuncA</span> <span class="attr">type</span>=<span class="string">&quot;table&quot;</span> <span class="attr">tableValues</span>=<span class="string">&quot;1 0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feComponentTransfer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feDiffuseLighting</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;100&quot;</span> <span class="attr">in</span>=<span class="string">&quot;terrain&quot;</span> <span class="attr">result</span>=<span class="string">&quot;scene&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feDistantLight</span> <span class="attr">azimuth</span>=<span class="string">&quot;0&quot;</span> <span class="attr">elevation</span>=<span class="string">&quot;20&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feDiffuseLighting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feSpecularLighting</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;100&quot;</span> <span class="attr">in</span>=<span class="string">&quot;terrain&quot;</span> <span class="attr">result</span>=<span class="string">&quot;highlights&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feDistantLight</span> <span class="attr">azimuth</span>=<span class="string">&quot;90&quot;</span> <span class="attr">elevation</span>=<span class="string">&quot;20&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">feSpecularLighting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;scene&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;highlights&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;xor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_TERRboth-1697772213958.png" class="" title="svgf TERRboth.png">
<p>Setting the filter’s <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/primitiveUnits&amp;action=edit&amp;redlink=1"><strong>primitiveUnits</strong></a> to <strong>objectBoundingBox</strong> allows you to specify light sources as relative percentages, otherwise the default <strong>userSpaceOnUse</strong> value references the coordinate system in effect when the filter was applied.</p>
<p>A point light allows you to place light sources closer to the scene. Specify a set of 3D coordinates to position the light source:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">fePointLight</span> <span class="attr">x</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">y</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">z</span>=<span class="string">&quot;200&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>A spot light can direct a beam from the light source to a different target defined by the <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/pointsAtX&amp;action=edit&amp;redlink=1"><strong>pointsAtX</strong></a>, <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/pointsAtY&amp;action=edit&amp;redlink=1"><strong>pointsAtY</strong></a>, and <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/pointsAtZ&amp;action=edit&amp;redlink=1"><strong>pointsAtZ</strong></a> coordinates. The <a target="_blank" rel="noopener" href="https://webplatform.github.io/w/index.php?title=svg/attributes/limitingConeAngle&amp;action=edit&amp;redlink=1"><strong>limitingConeAngle</strong></a> attribute allows you to tightly focus the beam:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">feSpotLight</span> <span class="attr">x</span>=<span class="string">&quot;0&quot;</span> <span class="attr">y</span>=<span class="string">&quot;100&quot;</span> <span class="attr">z</span>=<span class="string">&quot;150&quot;</span> <span class="attr">pointsAtX</span>=<span class="string">&quot;200&quot;</span> <span class="attr">pointsAtY</span>=<span class="string">&quot;100&quot;</span> <span class="attr">pointsAtZ</span>=<span class="string">&quot;0&quot;</span> <span class="attr">limitingConeAngle</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_TERRspot-1697772214432.png" class="" title="svgf TERRspot.png">
<p>See this <span class="exturl" data-url="aHR0cDovL2xldG1lc3BlbGxpdG91dGZvcnlvdS5jb20vc2FtcGxlcy9zdmcvZmlsdGVyX3RlcnJhaW4uc3Zn">animated SVG</span> that repositions the light sources in these examples.</p>
<h2 id="beveling-fespecularlighting"><a class="markdownIt-Anchor" href="#beveling-fespecularlighting">#</a> Beveling (feSpecularLighting)</h2>
<p>Using lighting effects to bevel graphics adds a greater sense of depth to the drop-shadow effect seen above. Step through this example to build the effect:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;bevel&quot;</span> <span class="attr">filterUnits</span>=<span class="string">&quot;userSpaceOnUse&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feGaussianBlur</span> <span class="attr">in</span>=<span class="string">&quot;SourceAlpha&quot;</span> <span class="attr">stdDeviation</span>=<span class="string">&quot;4&quot;</span> <span class="attr">result</span>=<span class="string">&quot;blur&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feOffset</span> <span class="attr">in</span>=<span class="string">&quot;blur&quot;</span> <span class="attr">dx</span>=<span class="string">&quot;4&quot;</span> <span class="attr">dy</span>=<span class="string">&quot;4&quot;</span> <span class="attr">result</span>=<span class="string">&quot;offsetBlur&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feSpecularLighting</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;5&quot;</span> <span class="attr">specularConstant</span>=<span class="string">&quot;.75&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">specularExponent</span>=<span class="string">&quot;20&quot;</span> <span class="attr">lighting-color</span>=<span class="string">&quot;#bbbbbb&quot;</span> <span class="attr">in</span>=<span class="string">&quot;blur&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">result</span>=<span class="string">&quot;highlight&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fePointLight</span> <span class="attr">x</span>=<span class="string">&quot;-5000&quot;</span> <span class="attr">y</span>=<span class="string">&quot;-10000&quot;</span> <span class="attr">z</span>=<span class="string">&quot;20000&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feSpecularLighting</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;highlight&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;SourceAlpha&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;in&quot;</span> <span class="attr">result</span>=<span class="string">&quot;highlight&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;SourceGraphic&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;highlight&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;arithmetic&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">k1</span>=<span class="string">&quot;0&quot;</span> <span class="attr">k2</span>=<span class="string">&quot;1&quot;</span> <span class="attr">k3</span>=<span class="string">&quot;1&quot;</span> <span class="attr">k4</span>=<span class="string">&quot;0&quot;</span> <span class="attr">result</span>=<span class="string">&quot;highlightText&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feMerge</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span> <span class="attr">in</span>=<span class="string">&quot;offsetBlur&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feMergeNode</span> <span class="attr">in</span>=<span class="string">&quot;highlightText&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feMerge</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Start with some text that appears fairly indistinguishable against a filled background:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelOrig-1697772213489.png" class="" title="svgf bevelOrig.png">
<p>The blur pattern is piped to the <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feOffset"><strong>feOffset</strong></a> and stored in <em>offsetBlur</em> for use as the drop shadow. It’s also stored in <em>blur</em> for use by the lighting effect:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelBlur-1697772214083.png" class="" title="svgf bevelBlur.png">
<p>The blur not only scatters pixels, but distributes their alpha values to form a rounded surface, which the lighting effect highlights:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelSpec-1697772213697.png" class="" title="svgf bevelSpec.png">
<p>The first <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComposite"><strong>feComposite</strong></a> clips the blurred edges that fall outside the graphic’s original contours, available as its <strong>SourceAlpha</strong>:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelCompAlpha-1697772213734.png" class="" title="svgf bevelCompAlpha.png">
<p>The second <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feComposite"><strong>feComposite</strong></a> overlays the highlight with the original <strong>SourceGraphic</strong>:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelCompImg-1697772213934.png" class="" title="svgf bevelCompImg.png">
<p>Finally, the <em>offsetBlur</em> buffer is merged in to provide a drop shadow for additional depth and legibility:</p>
<img data-src="/2023/10/20/svg-filter/svgf_bevelFinal-1697772213942.png" class="" title="svgf bevelFinal.png">
<p>Use the same technique to add depth to surfaces, such as this example that defines a radial gradient that fades to transparent values:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">circle</span> <span class="attr">id</span>=<span class="string">&quot;cornea&quot;</span> <span class="attr">cx</span>=<span class="string">&quot;100&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;100&quot;</span> <span class="attr">r</span>=<span class="string">&quot;50&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;url(#corneaSurface)&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radialGradient</span> <span class="attr">id</span>=<span class="string">&quot;corneaSurface&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stop</span> <span class="attr">offset</span>=<span class="string">&quot;0%&quot;</span>   <span class="attr">stop-color</span>=<span class="string">&quot;black&quot;</span> <span class="attr">stop-opacity</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">stop</span> <span class="attr">offset</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">stop-color</span>=<span class="string">&quot;black&quot;</span> <span class="attr">stop-opacity</span>=<span class="string">&quot;0&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">radialGradient</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_eyeCornea-1697772213981.png" class="" title="svgf eyeCornea.png">
<p>The filter uses <a target="_blank" rel="noopener" href="https://webplatform.github.io/docs/svg/elements/feImage"><strong>feImage</strong></a> to import an graphic filled with the gradient, then shines a narrow spot light on the surface, which results in a subtle rounded highlight:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span> <span class="attr">id</span>=<span class="string">&quot;corneaShine&quot;</span> <span class="attr">primitiveUnits</span>=<span class="string">&quot;objectBoundingBox&quot;</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feImage</span> <span class="attr">xlink:href</span>=<span class="string">&quot;#cornea&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feSpecularLighting</span> <span class="attr">lighting-color</span>=<span class="string">&quot;white&quot;</span> <span class="attr">surfaceScale</span>=<span class="string">&quot;170&quot;</span> <span class="attr">specularConstant</span>=<span class="string">&quot;2&quot;</span> <span class="attr">result</span>=<span class="string">&quot;shine&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">feSpotLight</span> <span class="attr">x</span>=<span class="string">&quot;200&quot;</span> <span class="attr">y</span>=<span class="string">&quot;-100&quot;</span> <span class="attr">z</span>=<span class="string">&quot;200&quot;</span> <span class="attr">pointsAtX</span>=<span class="string">&quot;120&quot;</span> <span class="attr">pointsAtY</span>=<span class="string">&quot;80&quot;</span> <span class="attr">pointsAtZ</span>=<span class="string">&quot;50&quot;</span> <span class="attr">limitingConeAngle</span>=<span class="string">&quot;7&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">feSpecularLighting</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">feComposite</span> <span class="attr">in</span>=<span class="string">&quot;shine&quot;</span> <span class="attr">in2</span>=<span class="string">&quot;SourceGraphic&quot;</span> <span class="attr">operator</span>=<span class="string">&quot;over&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br></pre></td></tr></table></figure>
<img data-src="/2023/10/20/svg-filter/svgf_eyeShine-1697772214180.png" class="" title="svgf eyeShine.png">

      <div class="tags">
          <a href="/tags/xml/" rel="tag"><i class="ic i-tag"></i> xml</a>
          <a href="/tags/svg/" rel="tag"><i class="ic i-tag"></i> svg</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2024-01-06 11:15:48" itemprop="dateModified" datetime="2024-01-06T11:15:48+08:00">2024-01-06</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/09/02/csharp-wpf-basics/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;借东西的小人阿莉埃蒂-2.jpg" title="C# WPF Basics">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>C# WPF Basics</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/10/20/svg-basic/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;弹丸论破.jpg" title="SVG 图像入门教程">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>SVG 图像入门教程</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#summary"><span class="toc-number">1.</span> <span class="toc-text"> Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#what-are-filters"><span class="toc-number">2.</span> <span class="toc-text"> What are filters?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#applying-a-simple-filter-fegaussianblur"><span class="toc-number">3.</span> <span class="toc-text"> Applying a simple filter (feGaussianBlur)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#applying-svg-filters-to-html"><span class="toc-number">3.1.</span> <span class="toc-text"> Applying SVG filters to HTML</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#modifying-colors-with-fecomponenttransfer"><span class="toc-number">4.</span> <span class="toc-text"> Modifying colors with feComponentTransfer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transforming-colors-with-fecolormatrix"><span class="toc-number">5.</span> <span class="toc-text"> Transforming colors with feColorMatrix</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sharpening-images-with-feconvolvematrix"><span class="toc-number">6.</span> <span class="toc-text"> Sharpening images with feConvolveMatrix</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chaining-splitting-and-merging-effects-building-a-drop-shadow-with-feoffset-feflood-and-femerge"><span class="toc-number">7.</span> <span class="toc-text"> Chaining, splitting and merging effects: building a drop shadow with feOffset, feFlood, and feMerge</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#other-input-and-merging-options-feblend-fecomposite-feimage-fetile"><span class="toc-number">8.</span> <span class="toc-text"> Other input and merging options: feBlend, feComposite, feImage, feTile</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#warping-effects-femorphology-feturbulence-fedisplacementmap"><span class="toc-number">9.</span> <span class="toc-text"> Warping effects (feMorphology, feTurbulence, feDisplacementMap)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-textures-feturbulence"><span class="toc-number">10.</span> <span class="toc-text"> Creating textures (feTurbulence)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lighting-effects"><span class="toc-number">11.</span> <span class="toc-text"> Lighting effects</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#beveling-fespecularlighting"><span class="toc-number">12.</span> <span class="toc-text"> Beveling (feSpecularLighting)</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">359</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">50</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/09/02/csharp-wpf-basics/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/10/20/svg-basic/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/10/20/svg-filter/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
