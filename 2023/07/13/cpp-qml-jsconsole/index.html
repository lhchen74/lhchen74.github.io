



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="js,cpp" />


<link rel="canonical" href="https://lhchen74.github.io/2023/07/13/cpp-qml-jsconsole/">



  <title>
Creating a JS Console use QML |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.2"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Creating a JS Console use QML
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2023-07-13 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2023-07-13T00:00:00+08:00">2023-07-13</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/野良神.jpg"></li>
          <li class="item" data-background-image="/anime/index/更衣人偶坠入爱河-3.jpg"></li>
          <li class="item" data-background-image="/anime/index/死神.jpg"></li>
          <li class="item" data-background-image="/anime/index/从零开始的异世界生活.jpg"></li>
          <li class="item" data-background-image="/anime/index/萤火虫之墓-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/东京暗鸦.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2023/07/13/cpp-qml-jsconsole/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载：<span class="exturl" data-url="aHR0cHM6Ly93d3cuYm9va3N0YWNrLmNuL3JlYWQvcXQ2LXFtbC1ib29rLzI4NzhhYTZiMWYxMDJhYzQubWQ=">Javascript - Creating a JS Console - 《Qt6 QML Book》</span></p>
</blockquote>
<p>As a little example, we will create a JS console. We need an input field where the user can enter his JS expressions and ideally there should be a list of output results. As this should more look like a desktop application we use the Qt Quick Controls module.</p>
<p>TIP</p>
<p>A JS console inside your next project can be really beneficial for testing. Enhanced with a Quake-Terminal effect it is also good to impress customers. To use it wisely you need to control the scope the JS console evaluates in, e.g. the currently visible screen, the main data model, a singleton core object or all together.</p>

<p>We use Qt Creator to create a Qt Quick UI project using Qt Quick controls. We call the project JSConsole. After the wizard has finished we have already a basic structure for the application with an application window and a menu to exit the application.</p>
<p>For the input, we use a TextField and a Button to send the input for evaluation. The result of the expression evaluation is displayed using a ListView with a ListModel as the model and two labels to display the expression and the evaluated result.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">// part of JSConsole<span class="selector-class">.qml</span></span><br><span class="line">ApplicationWindow &#123;</span><br><span class="line">  id: root</span><br><span class="line">  ...</span><br><span class="line">  ColumnLayout &#123;</span><br><span class="line">      anchors.fill: parent</span><br><span class="line">      anchors.margins: <span class="number">9</span></span><br><span class="line">      RowLayout &#123;</span><br><span class="line">          Layout.fillWidth: true</span><br><span class="line">          TextField &#123;</span><br><span class="line">              id: input</span><br><span class="line">              Layout.fillWidth: true</span><br><span class="line">              focus: true</span><br><span class="line">              onAccepted: &#123;</span><br><span class="line">                  // call our evaluation function on root</span><br><span class="line">                  root.<span class="built_in">jsCall</span>(input.text)</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="selector-tag">Button</span> &#123;</span><br><span class="line">              text: <span class="built_in">qsTr</span>(<span class="string">&quot;Send&quot;</span>)</span><br><span class="line">              onClicked: &#123;</span><br><span class="line">                  // call our evaluation function on root</span><br><span class="line">                  root.<span class="built_in">jsCall</span>(input.text)</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      Item &#123;</span><br><span class="line">          Layout<span class="selector-class">.fillWidth</span>: true</span><br><span class="line">          Layout.fillHeight: true</span><br><span class="line">          Rectangle &#123;</span><br><span class="line">              anchors.fill: parent</span><br><span class="line">              color: <span class="string">&#x27;#333&#x27;</span></span><br><span class="line">              border.color: Qt.<span class="built_in">darker</span>(color)</span><br><span class="line">              opacity: <span class="number">0.2</span></span><br><span class="line">              radius: <span class="number">2</span></span><br><span class="line">          &#125;</span><br><span class="line">          ScrollView &#123;</span><br><span class="line">              id: scrollView</span><br><span class="line">              anchors.fill: parent</span><br><span class="line">              anchors.margins: <span class="number">9</span></span><br><span class="line">              ListView &#123;</span><br><span class="line">                  id: resultView</span><br><span class="line">                  model: ListModel &#123;</span><br><span class="line">                      id: outputModel</span><br><span class="line">                  &#125;</span><br><span class="line">                  delegate: ColumnLayout &#123;</span><br><span class="line">                      width: ListView.view.width</span><br><span class="line">                      Label &#123;</span><br><span class="line">                          Layout.fillWidth: true</span><br><span class="line">                          color: <span class="string">&#x27;green&#x27;</span></span><br><span class="line">                          text: <span class="string">&quot;&gt; &quot;</span> + model.expression</span><br><span class="line">                      &#125;</span><br><span class="line">                      <span class="selector-tag">Label</span> &#123;</span><br><span class="line">                          Layout<span class="selector-class">.fillWidth</span>: true</span><br><span class="line">                          color: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">                          text: <span class="string">&quot;&quot;</span> + model.result</span><br><span class="line">                      &#125;</span><br><span class="line">                      Rectangle &#123;</span><br><span class="line">                          <span class="attribute">height</span>: <span class="number">1</span></span><br><span class="line">                          Layout.fillWidth: true</span><br><span class="line">                          color: <span class="string">&#x27;#333&#x27;</span></span><br><span class="line">                          opacity: <span class="number">0.2</span></span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The evaluation function  <code>jsCall</code>  does the evaluation not by itself this has been moved to a JS module ( <code>jsconsole.js</code> ) for clearer separation.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// part of JSConsole.qml</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;jsconsole.js&quot;</span> <span class="keyword">as</span> Util</span><br><span class="line">...</span><br><span class="line">ApplicationWindow &#123;</span><br><span class="line">  id: root</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">jsCall</span>(<span class="params">exp</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> data = Util.call(exp);</span><br><span class="line">      <span class="comment">// insert the result at the beginning of the list</span></span><br><span class="line">      outputModel.insert(<span class="number">0</span>, data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For safety, we do not use the  <code>eval</code>  function from JS as this would allow the user to modify the local scope. We use the Function constructor to create a JS function on runtime and pass in our scope as this variable. As the function is created every time it does not act as a closure and stores its own scope, we need to use  <code>this.a = 10</code>  to store the value inside this scope of the function. This scope is set by the script to the scope variable.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsconsole.js</span></span><br><span class="line">.pragma library</span><br><span class="line"><span class="keyword">var</span> scope = &#123;</span><br><span class="line">  <span class="comment">// our custom scope injected into our function evaluation</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">call</span>(<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> exp = msg.toString();</span><br><span class="line">    <span class="built_in">console</span>.log(exp)</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">        expression : msg</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> fun = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;return (&#x27;</span> + exp + <span class="string">&#x27;);&#x27;</span>);</span><br><span class="line">        data.result = <span class="built_in">JSON</span>.stringify(fun.call(scope), <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;scope: &#x27;</span> + <span class="built_in">JSON</span>.stringify(scope, <span class="literal">null</span>, <span class="number">2</span>) + <span class="string">&#x27;result: &#x27;</span> + result)</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.toString())</span><br><span class="line">        data.error = e.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The data return from the call function is a JS object with a result, expression and error property:  <code>data: &#123; expression: &#123;&#125;, result: &#123;&#125;, error: &#123;&#125; &#125;</code> . We can use this JS object directly inside the ListModel and access it then from the delegate, e.g.  <code>model.expression</code>  gives us the input expression. For the simplicity of the example, we ignore the error result.</p>
<hr>
<p>Complete Source Code</p>
<p>jsconsole.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.pragma library</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> scope = &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">call</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> exp = msg.toString();</span><br><span class="line">    <span class="built_in">console</span>.log(exp)</span><br><span class="line">    <span class="keyword">var</span> data = &#123;</span><br><span class="line">        expression: msg</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> fun = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">&#x27;return (&#x27;</span> + exp + <span class="string">&#x27;);&#x27;</span>);</span><br><span class="line">        data.result = <span class="built_in">JSON</span>.stringify(fun.call(scope), <span class="literal">null</span>, <span class="number">2</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;scope: &#x27;</span> + <span class="built_in">JSON</span>.stringify(scope, <span class="literal">null</span>, <span class="number">2</span>) + <span class="string">&#x27;result: &#x27;</span> + result)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e.toString())</span><br><span class="line">        data.error = e.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>JSConsole.qml</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">import QtQuick</span><br><span class="line">import QtQuick<span class="selector-class">.Controls</span></span><br><span class="line">import QtQuick<span class="selector-class">.Layouts</span></span><br><span class="line">import &quot;./jsconsole<span class="selector-class">.js</span>&quot; as Util</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ApplicationWindow &#123;</span><br><span class="line">    id: root</span><br><span class="line">    title: <span class="built_in">qsTr</span>(<span class="string">&quot;JSConsole&quot;</span>)</span><br><span class="line">    width: <span class="number">640</span></span><br><span class="line">    height: <span class="number">480</span></span><br><span class="line">    visible: true</span><br><span class="line"></span><br><span class="line">    menuBar: MenuBar &#123;</span><br><span class="line">        Menu &#123;</span><br><span class="line">            title: <span class="built_in">qsTr</span>(<span class="string">&quot;File&quot;</span>)</span><br><span class="line">            MenuItem &#123;</span><br><span class="line">                text: <span class="built_in">qsTr</span>(<span class="string">&quot;Exit&quot;</span>)</span><br><span class="line">                onTriggered: Qt.<span class="built_in">quit</span>()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ColumnLayout &#123;</span><br><span class="line">        anchors<span class="selector-class">.fill</span>: parent</span><br><span class="line">        anchors.margins: <span class="number">9</span></span><br><span class="line">        RowLayout &#123;</span><br><span class="line">            Layout.fillWidth: true</span><br><span class="line">            TextField &#123;</span><br><span class="line">                id: input</span><br><span class="line">                Layout.fillWidth: true</span><br><span class="line">                focus: true</span><br><span class="line">                onAccepted: &#123;</span><br><span class="line">                    root.<span class="built_in">jsCall</span>(input.text)</span><br><span class="line">                    input.text = <span class="string">&quot;&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-tag">Button</span> &#123;</span><br><span class="line">                text: <span class="built_in">qsTr</span>(<span class="string">&quot;Send&quot;</span>)</span><br><span class="line">                onClicked: &#123;</span><br><span class="line">                    root.<span class="built_in">jsCall</span>(input.text)</span><br><span class="line">                    input.text = <span class="string">&quot;&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Item &#123;</span><br><span class="line">            Layout<span class="selector-class">.fillWidth</span>: true</span><br><span class="line">            Layout.fillHeight: true</span><br><span class="line"></span><br><span class="line">            Rectangle &#123;</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                color: <span class="string">&quot;#333&quot;</span></span><br><span class="line">                border.color: Qt.<span class="built_in">darker</span>(color)</span><br><span class="line">                opacity: <span class="number">0.2</span></span><br><span class="line">                radius: <span class="number">2</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            ScrollView &#123;</span><br><span class="line">                id: scrollView</span><br><span class="line">                anchors.fill: parent</span><br><span class="line">                anchors.margins: <span class="number">9</span></span><br><span class="line"></span><br><span class="line">                ListView &#123;</span><br><span class="line">                    id: resultView</span><br><span class="line"></span><br><span class="line">                    model: ListModel &#123;</span><br><span class="line">                        id: outputModel</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    delegate: ColumnLayout &#123;</span><br><span class="line">                        width: ListView.view.width</span><br><span class="line">                        Label &#123;</span><br><span class="line">                            Layout.fillWidth: true</span><br><span class="line">                            color: <span class="string">&quot;green&quot;</span></span><br><span class="line">                            text: <span class="string">&quot;&gt; &quot;</span> + model.expression</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="selector-tag">Label</span> &#123;</span><br><span class="line">                            Layout<span class="selector-class">.fillWidth</span>: true</span><br><span class="line">                            color: <span class="string">&quot;blue&quot;</span></span><br><span class="line">                            text: <span class="string">&quot;&quot;</span> + model.result</span><br><span class="line">                        &#125;</span><br><span class="line">                        Rectangle &#123;</span><br><span class="line">                            <span class="attribute">height</span>: <span class="number">1</span></span><br><span class="line">                            Layout.fillWidth: true</span><br><span class="line">                            color: <span class="string">&#x27;#333&#x27;</span></span><br><span class="line">                            opacity: <span class="number">0.2</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function jsCall(exp)</span><br><span class="line">    &#123;</span><br><span class="line">        const data = Util.call(exp)</span><br><span class="line">        outputModel<span class="selector-class">.insert</span>(<span class="number">0</span>, data)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// C:/Qt/Tools/QtDesignStudio/qt6_design_studio_reduced_version/bin/qml.exe -f JSConsole.qml</span><br></pre></td></tr></table></figure>
<hr>
<p>当前内容版权归 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3FtbGJvb2svcXQ2Ym9vaw==">Juergen Bocklage Ryannel and Johan Thelin</span> 或其关联方所有，如需对内容或内容相关联开源项目进行关注与资助，请访问 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3FtbGJvb2svcXQ2Ym9vaw==">Juergen Bocklage Ryannel and Johan Thelin</span> .</p>

      <div class="tags">
          <a href="/tags/js/" rel="tag"><i class="ic i-tag"></i> js</a>
          <a href="/tags/cpp/" rel="tag"><i class="ic i-tag"></i> cpp</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2024-11-12 18:53:57" itemprop="dateModified" datetime="2024-11-12T18:53:57+08:00">2024-11-12</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2023/07/13/pyside6-qml/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;灼眼的夏娜.jpg" title="Qt for Python - Building an Application - 《Qt6 QML Book》">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Qt for Python - Building an Application - 《Qt6 QML Book》</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2023/08/10/pyside6-example/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;文豪野犬-2.jpg" title="PySide6 Practice Example">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>PySide6 Practice Example</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">378</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">51</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2023/07/13/pyside6-qml/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2023/08/10/pyside6-example/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2023/07/13/cpp-qml-jsconsole/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
