



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="éœ²ã®ä¸–" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="éœ²ã®ä¸–" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="éœ²ã®ä¸–" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="python" />


<link rel="canonical" href="https://lhchen74.github.io/2019/06/06/python/">



  <title>
python - manual |
D E W = éœ²ã®ä¸–</title>
<meta name="generator" content="Hexo 5.4.2"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">python
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2019-06-06 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2019-06-06T00:00:00+08:00">2019-06-06</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/æ— å¤´éª‘å£«å¼‚é—»å½•.jpg"></li>
          <li class="item" data-background-image="/anime/index/fate_stay_night.jpg"></li>
          <li class="item" data-background-image="/anime/index/ç©¿è¶Šæ—¶ç©ºçš„å°‘å¥³-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/é‚»åº§çš„æ€ªåŒå­¦.jpg"></li>
          <li class="item" data-background-image="/anime/index/å¦–ç²¾æ£®æ—çš„å°ä¸ç‚¹.jpg"></li>
          <li class="item" data-background-image="/anime/index/å‹‡è€…èµ«é²åº“.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/manual/" itemprop="item" rel="index" title="In manual"><span itemprop="name">manual</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2019/06/06/python/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="æ±Ÿè¾¹é¸Ÿ">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="éœ²ã®ä¸–">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h2 id="io"><a class="markdownIt-Anchor" href="#io">#</a> IO</h2>
<h3 id="file-open"><a class="markdownIt-Anchor" href="#file-open">#</a> file open</h3>
<p>open è¿”å›çš„å®é™…ä¸Šæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯»å–æ§åˆ¶å°æˆ–è€…æ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">import</span> fileinput</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fileinput.<span class="built_in">input</span>():</span><br><span class="line">    print(line)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> fileinput.FileInput(files=(<span class="string">&quot;a.txt&quot;</span>, <span class="string">&quot;b.txt&quot;</span>), mode=<span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> <span class="built_in">input</span>:</span><br><span class="line">    <span class="keyword">for</span> idx, line <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">input</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">input</span>.isfirstline():</span><br><span class="line">            <span class="comment"># If you want to look at the name of the file currently being read, we can use the fileinput.filename() method.</span></span><br><span class="line">            <span class="comment"># However, this will return None if no line has yet been read! So you can use this only after the first read.</span></span><br><span class="line">            print(<span class="string">f&quot;Reading file <span class="subst">&#123;<span class="built_in">input</span>.filename()&#125;</span>...&quot;</span>)</span><br><span class="line">        print(line)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">print(<span class="built_in">hasattr</span>(file, <span class="string">&quot;__next__&quot;</span>), <span class="built_in">hasattr</span>(file, <span class="string">&quot;__iter__&quot;</span>)) <span class="comment"># True True</span></span><br><span class="line">print(<span class="built_in">next</span>(f))</span><br><span class="line">print(<span class="built_in">next</span>(f))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="file-lines"><a class="markdownIt-Anchor" href="#file-lines">#</a> file lines</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¡ç®—è¡Œæ•°</span></span><br><span class="line">k = <span class="number">0</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>) <span class="keyword">as</span> fid:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fid:</span><br><span class="line">        k = k + <span class="number">1</span></span><br><span class="line">print(k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">print(<span class="built_in">len</span>([line <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>) ]))</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">sum</span>(<span class="number">1</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>)))</span><br></pre></td></tr></table></figure>
<h3 id="file-state"><a class="markdownIt-Anchor" href="#file-state">#</a> file state</h3>
<ul>
<li>è·å–æ–‡ä»¶ç›®å½•åï¼Œæ–‡ä»¶å</li>
<li>è·å–æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯ç›®å½•è¿˜æ˜¯æ–‡ä»¶</li>
<li>è·å–æ–‡ä»¶å¤§å°</li>
<li>è·å–æ–‡ä»¶åˆ›å»ºæ—¶é—´ï¼Œä¸Šæ¬¡è®¿é—®æ—¶é—´ï¼Œä¿®æ”¹æ—¶é—´</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">print(__file__, sys.argv[<span class="number">0</span>]) <span class="comment"># python test.py =&gt; test.py test.py</span></span><br><span class="line">path = <span class="string">r&#x27;E:\study_python\test\fast02.py&#x27;</span></span><br><span class="line">print(os.path.basename(path), os.path.dirname(path), os.path.split(path))</span><br><span class="line"><span class="comment"># fast02.py E:\study_python\test (&#x27;E:\\study_python\\test&#x27;, &#x27;fast02.py&#x27;)</span></span><br><span class="line"></span><br><span class="line">print(os.path.exists(path)</span><br><span class="line">     ,os.path.isfile(path)</span><br><span class="line">     ,os.path.isdir(path)</span><br><span class="line">     ,os.path.getsize(path)</span><br><span class="line">     ,os.path.getatime(path)   <span class="comment"># retrieve the last access time</span></span><br><span class="line">     ,datetime.datetime.fromtimestamp(os.path.getmtime(path)) <span class="comment"># retrieve the last modification time</span></span><br><span class="line">     ,os.path.getctime(path)) <span class="comment"># retrieve the creation time </span></span><br><span class="line"><span class="comment"># True True False 1740 1536125104.7735167 2018-09-05 16:59:29.086361 1536125104.7735167</span></span><br></pre></td></tr></table></figure>
<h3 id="oswalk"><a class="markdownIt-Anchor" href="#oswalk">#</a> os.walk</h3>
<p>remove node_modules</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">node_modules_dirs = []</span><br><span class="line">node_modules = <span class="string">&#x27;node_modules&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">r&#x27;D:\study\node&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> dirs:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">dir</span> == node_modules:</span><br><span class="line">            path = os.path.join(root, <span class="built_in">dir</span>)</span><br><span class="line">            <span class="comment"># exclude child module&#x27;s node_modules</span></span><br><span class="line">            <span class="comment"># é™¤äº†æœ€åä¸€ä¸ª node_modules, è·¯å¾„ä¸­ä¸å†åŒ…å«å…¶å®ƒ node_modules</span></span><br><span class="line">            <span class="keyword">if</span> node_modules <span class="keyword">not</span> <span class="keyword">in</span> path[<span class="number">0</span>:-<span class="built_in">len</span>(node_modules)]:</span><br><span class="line">                node_modules_dirs.append(path)</span><br><span class="line">                print(path)</span><br><span class="line">print(<span class="built_in">len</span>(node_modules_dirs), node_modules_dirs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> node_modules_dirs:</span><br><span class="line">    shutil.rmtree(<span class="built_in">dir</span>)</span><br><span class="line">    print(<span class="string">f&quot;Remove <span class="subst">&#123;<span class="built_in">dir</span>&#125;</span> success!&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°æ–¹æ³•ç¼ºç‚¹æ˜¯éå†ç›®å½•æ–‡ä»¶è¿‡å¤šæ—¶ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œæ¯”å¦‚å®é™…æ‰¾åˆ°é¡¹ç›®ç›®å½•çš„ node_modules æ—¶ä¸éœ€è¦å†å‘ä¸‹éå†å®‰è£…çš„æ¨¡å—ä¸­ä¸ç¬¦åˆæ¡ä»¶çš„ node_modules, è¿™æ—¶å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">node_modules_dirs = []</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params"><span class="built_in">dir</span></span>):</span></span><br><span class="line">    <span class="keyword">for</span> subpath <span class="keyword">in</span> os.listdir(<span class="built_in">dir</span>):</span><br><span class="line">        path = os.path.join(<span class="built_in">dir</span>, subpath)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(path):</span><br><span class="line">            <span class="keyword">if</span> path.endswith(<span class="string">&#x27;node_modules&#x27;</span>):</span><br><span class="line">                node_modules_dirs.append(path)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                walk(path)</span><br><span class="line"></span><br><span class="line">walk(<span class="string">r&#x27;D:\study\node&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">len</span>(node_modules_dirs), node_modules_dirs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> node_modules_dirs:</span><br><span class="line">    shutil.rmtree(<span class="built_in">dir</span>)</span><br><span class="line">    print(<span class="string">f&quot;Remove <span class="subst">&#123;<span class="built_in">dir</span>&#125;</span> success!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="stringio"><a class="markdownIt-Anchor" href="#stringio">#</a> StringIO</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"></span><br><span class="line"><span class="comment"># f = StringIO(&#x27;hello, world&#x27;)</span></span><br><span class="line"><span class="comment"># print(f.readline())</span></span><br><span class="line"></span><br><span class="line">f = StringIO()</span><br><span class="line">f.write(<span class="string">&#x27;hello, world&#x27;</span>) <span class="comment"># f.write() å®šä½åœ¨æ–‡ä»¶æœ«å°¾</span></span><br><span class="line">print(f.readline())  <span class="comment"># è¯»å–ä¸åˆ°æ•°æ®</span></span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line">print(f.readline())  <span class="comment"># hello, world</span></span><br></pre></td></tr></table></figure>
<h3 id="shutilmove-and-osrename"><a class="markdownIt-Anchor" href="#shutilmove-and-osrename">#</a> shutil.move and os.rename</h3>
<p>shutil means â€œshell utilitiesâ€.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.rename() requires to include the file name in both the source and destination arguments</span></span><br><span class="line">os.rename(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"><span class="comment"># while shutil.move() requires the new directory as destination or include the filename</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># if file exsists, os.rename will raise file exists error</span></span><br><span class="line">os.rename(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"><span class="comment"># if file exsists, shutil.move will raise file exists error</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line"><span class="comment"># if file exsists, shutil.move will cover but no error</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># if file exsists, shutil.copy will cover, no error</span></span><br><span class="line">shutil.copy(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line">shutil.copy(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="shutilcopy2-copy-file-with-metadata"><a class="markdownIt-Anchor" href="#shutilcopy2-copy-file-with-metadata">#</a> shutil.copy2 copy file with metadata</h3>
<p>Keep the file modification time and so on.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> filedialog</span><br><span class="line"></span><br><span class="line">src_path: <span class="built_in">str</span> = filedialog.askopenfilename(title=<span class="string">&quot;Pick a file&quot;</span>)</span><br><span class="line">directory: <span class="built_in">str</span> = filedialog.askdirectory(title=<span class="string">&quot;Pick a location&quot;</span>)</span><br><span class="line">dst_path: Path = Path(directory) / <span class="string">&quot;copy.jpg&quot;</span></span><br><span class="line"></span><br><span class="line">print(shutil.copy2(src=src_path, dst=dst_path))</span><br></pre></td></tr></table></figure>
<h3 id="print"><a class="markdownIt-Anchor" href="#print">#</a> print</h3>
<p>Prints the values to a stream, or to sys.stdout by default.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    *values: <span class="built_in">object</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    sep: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="string">&quot; &quot;</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    end: <span class="built_in">str</span> | <span class="literal">None</span> = <span class="string">&quot;\n&quot;</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    file: SupportsWrite[<span class="built_in">str</span>] | <span class="literal">None</span> = <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    flush: Literal[<span class="literal">False</span>] = <span class="literal">False</span></span></span></span><br><span class="line"><span class="function"><span class="params"></span>) -&gt; <span class="keyword">None</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>sep: string inserted between values, default a space.</li>
<li>end: string appended after the last value, default a newline.</li>
<li>file: a file-like object (stream); defaults to the current sys.stdout.</li>
<li>flush: whether to forcibly flush the stream.</li>
</ul>
<p><code>print('*', end='\n')</code> : é»˜è®¤è¾“å‡ºæ¢è¡Œ</p>
<p><code>print('*', end='')</code> : è¾“å‡ºä¸æ¢è¡Œ</p>
<p><code>print('*', '*', sep=' ')</code> : é»˜è®¤ä»¥ç©ºæ ¼åˆ†éš”å¤šä¸ªå€¼</p>
<p><code>print('*', '*', sep='@')</code> : ç”¨ @ åˆ†éš”å¤šä¸ªå€¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">num_stars = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;How many stars do you want ? &#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_stars):</span><br><span class="line">     print(<span class="string">&#x27;*&#x27;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># ****</span></span><br><span class="line">print(*(<span class="string">&quot;*&quot;</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num_stars)), sep=<span class="string">&quot;-&quot;</span>, end=<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># *-*-*-*</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, sep=<span class="string">&#x27; &#x27;</span>)   <span class="comment"># * *</span></span><br><span class="line">print(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;*&#x27;</span>, sep=<span class="string">&#x27;@&#x27;</span>)   <span class="comment"># *@*</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">foods: <span class="built_in">list</span>[<span class="built_in">str</span>] = [<span class="string">&quot;Apples&quot;</span>, <span class="string">&quot;Bananas&quot;</span>, <span class="string">&quot;Oranges&quot;</span>]</span><br><span class="line">print(*foods, sep=<span class="string">&quot;, &quot;</span>, end=<span class="string">&quot;.\n&quot;</span>) <span class="comment"># Apples, Bananas, Oranges.</span></span><br></pre></td></tr></table></figure>
<h3 id="print-s-r"><a class="markdownIt-Anchor" href="#print-s-r">#</a> print %s, %r</h3>
<p><code>%r(repr)</code>  unambiguously recreate the object it represents å¯ä»¥é‡å»ºå®ƒæ‰€ä»£è¡¨çš„å¯¹è±¡ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;world&quot;</span></span><br><span class="line">print(<span class="string">&quot;hello &#123;!s&#125;&quot;</span>.<span class="built_in">format</span>(s), <span class="string">&#x27;,&#x27;</span>, <span class="string">&quot;hello %s&quot;</span> % s)</span><br><span class="line">print(<span class="string">&quot;hello &#123;!r&#125;&quot;</span>.<span class="built_in">format</span>(s), <span class="string">&#x27;,&#x27;</span>, <span class="string">&quot;hello %r&quot;</span> % s)</span><br><span class="line"><span class="comment"># hello world , hello world</span></span><br><span class="line"><span class="comment"># hello &#x27;world&#x27; , hello &#x27;world&#x27;</span></span><br><span class="line"></span><br><span class="line">d = datetime.date.today()</span><br><span class="line">print(<span class="string">&quot;today is &#123;!s&#125;&quot;</span>.<span class="built_in">format</span>(d), <span class="string">&quot;today is %s&quot;</span> % d)</span><br><span class="line">print(<span class="string">&quot;today is &#123;!r&#125;&quot;</span>.<span class="built_in">format</span>(d), <span class="string">&quot;today is %r&quot;</span> % d)</span><br><span class="line"><span class="comment"># today is 2019-10-28 today is 2019-10-28</span></span><br><span class="line"><span class="comment"># today is datetime.date(2019, 10, 28) today is datetime.date(2019, 10, 28)</span></span><br></pre></td></tr></table></figure>
<p><code>__repr__()</code>  æ–¹æ³•è¿”å›ä¸€ä¸ªå®ä¾‹çš„ä»£ç è¡¨ç¤ºå½¢å¼ï¼Œé€šå¸¸ç”¨æ¥é‡æ–°æ„é€ è¿™ä¸ªå®ä¾‹ã€‚ å†…ç½®çš„ repr () å‡½æ•°è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œè·Ÿæˆ‘ä»¬ä½¿ç”¨äº¤äº’å¼è§£é‡Šå™¨æ˜¾ç¤ºçš„å€¼æ˜¯ä¸€æ ·çš„ã€‚<br>
 <code>__str__()</code>  æ–¹æ³•å°†å®ä¾‹è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨ str () æˆ– print () å‡½æ•°ä¼šè¾“å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y</span>):</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># !r æ ¼å¼åŒ–ä»£ç æŒ‡æ˜è¾“å‡ºä½¿ç”¨ __repr__() æ¥ä»£æ›¿é»˜è®¤çš„ __str__()</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Pair(&#123;0.x!r&#125;, &#123;0.y!r&#125;)&#x27;</span>.<span class="built_in">format</span>(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;(&#123;0.x!s&#125;, &#123;0.y!s&#125;)&#x27;</span>.<span class="built_in">format</span>(self)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; p = Pair(3, 4)</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; p</span></span><br><span class="line"><span class="comment"># Pair(3, 4) # __repr__() output</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; print(p)</span></span><br><span class="line"><span class="comment"># (3, 4) # __str__() output</span></span><br></pre></td></tr></table></figure>
<h3 id="fstring"><a class="markdownIt-Anchor" href="#fstring">#</a> fstring</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">n: <span class="built_in">int</span> = <span class="number">100000000</span></span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;n:_&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;n:,&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;n:<span class="number">.2</span>e&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 100_000_000</span></span><br><span class="line"><span class="comment"># 100,000,000</span></span><br><span class="line"><span class="comment"># 1.00e+08</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var: <span class="built_in">str</span> = <span class="string">&#x27;var&#x27;</span></span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;var:&gt;<span class="number">20</span>&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;var:&lt;<span class="number">20</span>&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;var:^<span class="number">20</span>&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment">#                  var</span></span><br><span class="line"><span class="comment"># var</span></span><br><span class="line"><span class="comment">#         var</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">now: datetime = datetime.now()</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;now:%d.%m.%y (%H:%M:%S)&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;now:%c&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;now:%I%p&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># 21.02.24 (17:49:03)</span></span><br><span class="line"><span class="comment"># Wed Feb 21 17:49:03 2024</span></span><br><span class="line"><span class="comment"># 05PM</span></span><br><span class="line">now: datetime = datetime.now()</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;now:%Y-%m-%d&#125;</span>&quot;</span>)</span><br><span class="line">date_spec: <span class="built_in">str</span> = <span class="string">&quot;%Y-%m-%d&quot;</span></span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;now:&#123;date_spec&#125;</span>&#125;&quot;</span>) </span><br><span class="line"><span class="comment"># 2025-12-18</span></span><br><span class="line"><span class="comment"># 2025-12-18</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">n: <span class="built_in">float</span> = <span class="number">1234.5678</span></span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;n:<span class="number">.2</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;n:<span class="number">.0</span>f&#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;n:_<span class="number">.3</span>f&#125;</span>&#x27;</span></span><br><span class="line"><span class="comment"># 1234.57</span></span><br><span class="line"><span class="comment"># 1235</span></span><br><span class="line"><span class="comment"># 1_234.568</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a: <span class="built_in">int</span> = <span class="number">5</span></span><br><span class="line">b: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line">var: <span class="built_in">str</span> = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;a + b = &#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;<span class="built_in">bool</span>(a) = &#125;</span>&#x27;</span>)</span><br><span class="line">print(<span class="string">f&#x27;<span class="subst">&#123;var = &#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment"># a + b = 15</span></span><br><span class="line"><span class="comment"># bool(a) = True</span></span><br><span class="line"><span class="comment"># var = &#x27;hello&#x27;</span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line">custom_folder: <span class="built_in">str</span> = <span class="string">&quot;Babb&quot;</span></span><br><span class="line">path: <span class="built_in">str</span> = <span class="string">fr&quot;\Desktop\STUDY\py-deep-dive\&#123;custom_folder&#125;&quot;</span></span><br><span class="line">print(path) <span class="comment"># \Desktop\STUDY\py-deep-dive\Babb</span></span><br><span class="line">      </span><br><span class="line">      </span><br><span class="line">banana: <span class="built_in">str</span> = <span class="string">&quot;ğŸŒ&quot;</span></span><br><span class="line">name: <span class="built_in">str</span> = <span class="string">&quot;Babb&quot;</span></span><br><span class="line">today: date = datetime.now().date()</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;today!s&#125;</span> <span class="subst">&#123;name!s&#125;</span> says: <span class="subst">&#123;banana!s&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;today!r&#125;</span> <span class="subst">&#123;name!r&#125;</span> says: <span class="subst">&#123;banana!r&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;today!a&#125;</span> <span class="subst">&#123;name!a&#125;</span> says: <span class="subst">&#123;banana!a&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># 2025-12-18 Babb says: ğŸŒ</span></span><br><span class="line"><span class="comment"># datetime.date(2025, 12, 18) &#x27;Babb&#x27; says: &#x27;ğŸŒ&#x27;</span></span><br><span class="line"><span class="comment"># datetime.date(2025, 12, 18) &#x27;Babb&#x27; says: &#x27;\U0001f34c&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="logical-lines"><a class="markdownIt-Anchor" href="#logical-lines">#</a> logical lines</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">a = [</span><br><span class="line">    <span class="number">1</span>,  <span class="comment"># item 1</span></span><br><span class="line">    <span class="number">2</span>,  <span class="comment"># item 2</span></span><br><span class="line">    <span class="number">3</span>,  <span class="comment"># item 3</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = &#123;</span><br><span class="line">    <span class="string">&quot;key1&quot;</span>: <span class="number">1</span>,  <span class="comment"># item 1</span></span><br><span class="line">    <span class="string">&quot;key2&quot;</span>: <span class="number">2</span>,  <span class="comment"># item 2</span></span><br><span class="line">    <span class="string">&quot;key3&quot;</span>: <span class="number">3</span>,  <span class="comment"># item 3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">    a,</span></span></span><br><span class="line"><span class="function"><span class="params">    b,  <span class="comment"># comment</span></span></span></span><br><span class="line"><span class="function"><span class="params">    c,</span></span></span><br><span class="line"><span class="function"><span class="params"></span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func(</span><br><span class="line">    <span class="number">10</span>,  <span class="comment"># comment</span></span><br><span class="line">    <span class="number">20</span>,</span><br><span class="line">    <span class="number">30</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = <span class="literal">True</span></span><br><span class="line">b = <span class="literal">True</span></span><br><span class="line">c = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">and</span> b <span class="keyword">and</span> c:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if a \</span></span><br><span class="line"><span class="comment">#     and b \</span></span><br><span class="line"><span class="comment">#     and c:</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;&quot;&quot;this\n</span></span><br><span class="line"><span class="string">\tis </span></span><br><span class="line"><span class="string">    a string</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<h2 id="container"><a class="markdownIt-Anchor" href="#container">#</a> Container</h2>
<h3 id="string-index"><a class="markdownIt-Anchor" href="#string-index">#</a> string index</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment"># for(int i=len(s) -1 ; i &gt; 0; i--)</span></span><br><span class="line">print(s[::-<span class="number">1</span>])  <span class="comment"># olleh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># palindrome</span></span><br><span class="line">s = <span class="string">&#x27;PHP&#x27;</span></span><br><span class="line">print(s == s[::-<span class="number">1</span>]) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h3 id="string-interning"><a class="markdownIt-Anchor" href="#string-interning">#</a> string interning</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;hello&quot;</span></span><br><span class="line">b = <span class="string">&quot;hello&quot;</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;the quick brown fox&quot;</span></span><br><span class="line">b = <span class="string">&quot;the quick brown fox&quot;</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span></span><br><span class="line">b = <span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span></span><br><span class="line">print(a <span class="keyword">is</span> b)  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compare_using_equals</span>(<span class="params">n</span>):</span></span><br><span class="line">    a = <span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span></span><br><span class="line">    b = <span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">if</span> a == b:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">compare_using_interning</span>(<span class="params">n</span>):</span></span><br><span class="line">    a = sys.intern(<span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span>)</span><br><span class="line">    b = sys.intern(<span class="string">&quot;the quick brown fox&quot;</span> * <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">if</span> a <span class="keyword">is</span> b:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.perf_counter()</span><br><span class="line">compare_using_equals(<span class="number">10000000</span>)</span><br><span class="line">end = time.perf_counter()</span><br><span class="line">print(<span class="string">&quot;equality&quot;</span>, end - start)  <span class="comment"># equality 4.051721299998462</span></span><br><span class="line"></span><br><span class="line">start = time.perf_counter()</span><br><span class="line">compare_using_interning(<span class="number">10000000</span>)</span><br><span class="line">end = time.perf_counter()</span><br><span class="line">print(<span class="string">&quot;interning&quot;</span>, end - start)  <span class="comment"># interning 0.13192070001969114</span></span><br></pre></td></tr></table></figure>
<h3 id="and"><a class="markdownIt-Anchor" href="#and">#</a> + and +=</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">c = a + [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># c = a + (3, 4) # TypeError: can only concatenate list (not &quot;tuple&quot;) to list</span></span><br><span class="line"></span><br><span class="line">a += (<span class="number">5</span>, <span class="number">6</span>)      <span class="comment"># += å®é™…è°ƒç”¨çš„æ˜¯ extendï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»æ„åºåˆ—ç±»å‹ï¼Œå¹¶ä¸” += æ˜¯ inpalce æ“ä½œ</span></span><br><span class="line">a.extend(<span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print(<span class="built_in">id</span>(a), a)	<span class="comment"># 2551381626112 [1, 2, 3]</span></span><br><span class="line">b = <span class="built_in">range</span>(<span class="number">4</span>, <span class="number">8</span>, <span class="number">2</span>)</span><br><span class="line">a += b</span><br><span class="line">print(<span class="built_in">id</span>(a), a) <span class="comment"># 2551381626112 [1, 2, 3, 4, 6]</span></span><br></pre></td></tr></table></figure>
<h3 id="__sub__"><a class="markdownIt-Anchor" href="#__sub__">#</a> __sub__</h3>
<p>é€šè¿‡å®šä¹‰  <code>__sub__</code>  æ–¹æ³•å¯ä»¥ç»™ç±»å‹æ·»åŠ   <code>-</code>  æ“ä½œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">print(a + b) <span class="comment"># [1, 2, 3, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubList</span>(<span class="params"><span class="built_in">list</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sub__</span>(<span class="params">self, b</span>):</span></span><br><span class="line">        a = self[:]</span><br><span class="line">        b = b[:]</span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(b) &gt; <span class="number">0</span>:</span><br><span class="line">            ele = b.pop()</span><br><span class="line">            <span class="keyword">if</span> ele <span class="keyword">in</span> a:</span><br><span class="line">                a.remove(ele)</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">al = SubList(a)</span><br><span class="line">bl = SubList(b)</span><br><span class="line">print(al - bl) <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure>
<h3 id="collections-type-check"><a class="markdownIt-Anchor" href="#collections-type-check">#</a> collections type check</h3>
<p><code>collections</code>  æ¨¡å—å®šä¹‰äº†å¾ˆå¤šè·Ÿå®¹å™¨å’Œè¿­ä»£å™¨ï¼ˆåºåˆ—ã€æ˜ å°„ã€é›†åˆç­‰ï¼‰æœ‰å…³çš„æŠ½è±¡åŸºç±»ã€‚</p>
<p>The  <code>Iterable</code>  abstract class was removed from  <code>collections</code>  in python 3.10ï¼ŒYou can use  <code>Iterable</code>  from  <code>collections.abc</code>  instead.</p>
<p><code>numbers</code>  åº“å®šä¹‰äº†è·Ÿæ•°å­—å¯¹è±¡ï¼ˆæ•´æ•°ã€æµ®ç‚¹æ•°ã€æœ‰ç†æ•°ç­‰ï¼‰æœ‰å…³çš„åŸºç±»ã€‚</p>
<p><code>io</code>  åº“å®šä¹‰äº†å¾ˆå¤šè·Ÿ I/O æ“ä½œç›¸å…³çš„åŸºç±»ã€‚å¯ä»¥ç”¨è¿™äº›æŠ½è±¡åŸºç±»æ£€æŸ¥æ•°æ®ç±»å‹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is a sequence</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Sequence):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is iterable</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Iterable):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x has a size</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Sized):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is a mapping</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Mapping):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="iterable"><a class="markdownIt-Anchor" href="#iterable">#</a> iterable</h3>
<p>å±•å¼€åµŒå¥—åºåˆ—</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="comment"># from collections.abc import Iterable # from python 3.10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span>(<span class="params">items, ignore_types=(<span class="params"><span class="built_in">str</span>, <span class="built_in">bytes</span></span>)</span>):</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> items:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(x, Iterable) <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(x, ignore_types):</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> flatten(x)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line"></span><br><span class="line">    items = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>], <span class="string">&#x27;abc&#x27;</span>], <span class="string">b&#x27;abc&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> flatten(items):</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<h3 id="iter"><a class="markdownIt-Anchor" href="#iter">#</a> iter</h3>
<p>iter å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„ callable å¯¹è±¡å’Œä¸€ä¸ªæ ‡è®°ï¼ˆç»“å°¾ï¼‰å€¼ä½œä¸ºè¾“å…¥å‚æ•°ã€‚ å½“ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨çš„æ—¶å€™ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œ è¿™ä¸ªè¿­ä»£å™¨ä¼šä¸æ–­è°ƒç”¨ callable å¯¹è±¡ç›´åˆ°è¿”å›å€¼å’Œæ ‡è®°å€¼ç›¸ç­‰ä¸ºæ­¢ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;log2.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> <span class="built_in">iter</span>(<span class="keyword">lambda</span>:f.read(<span class="number">10</span>), <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">    print(chunk)</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"><span class="comment"># worl</span></span><br><span class="line"><span class="comment"># d</span></span><br></pre></td></tr></table></figure>
<h3 id="iterator-and-generator"><a class="markdownIt-Anchor" href="#iterator-and-generator">#</a> iterator and generator</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my_str = &quot;hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in my_str:</span></span><br><span class="line"><span class="comment">#     print(i)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># my_list = [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for i in my_list:</span></span><br><span class="line"><span class="comment">#     print(i)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(hasattr(my_str, &quot;__iter__&quot;), hasattr(my_list, &quot;__iter__&quot;))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># it = iter(my_str)</span></span><br><span class="line"><span class="comment"># while True:</span></span><br><span class="line"><span class="comment">#     try:</span></span><br><span class="line"><span class="comment">#         print(next(it))</span></span><br><span class="line"><span class="comment">#     except StopIteration:</span></span><br><span class="line"><span class="comment">#         break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"><span class="keyword">import</span> tracemalloc</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">process_line</span>(<span class="params">line</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">filepath = <span class="string">&quot;large_data.csv&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trace_memory</span>():</span></span><br><span class="line">    tracemalloc.start()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line">    current, peak = tracemalloc.get_traced_memory()</span><br><span class="line">    print(<span class="string">f&quot;Current memory usage : <span class="subst">&#123;current / <span class="number">1024</span>**<span class="number">2</span>&#125;</span> MB&quot;</span>)</span><br><span class="line">    print(<span class="string">f&quot;Peak memory usage : <span class="subst">&#123;peak / <span class="number">1024</span>**<span class="number">2</span>&#125;</span> MB&quot;</span>)</span><br><span class="line">    tracemalloc.stop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> trace_memory():</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filepath, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">            process_line(line)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LineIterator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, filepath</span>):</span></span><br><span class="line">        self.file = <span class="built_in">open</span>(filepath, <span class="string">&quot;r&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">        line = self.file.readline()</span><br><span class="line">        <span class="keyword">if</span> line:</span><br><span class="line">            <span class="keyword">return</span> line</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.file.close()</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">line_generator</span>(<span class="params">filepath</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filepath, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            <span class="keyword">yield</span> line</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> trace_memory():</span><br><span class="line">    line_iter = LineIterator(filepath)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> line_iter:</span><br><span class="line">        process_line(line)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> trace_memory():</span><br><span class="line">    line_gen = line_generator(filepath)</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> line_gen:</span><br><span class="line">        process_line(line)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def generator(n):</span></span><br><span class="line"><span class="comment">#     for i in range(n):</span></span><br><span class="line"><span class="comment">#         print(&quot;before yield&quot;)</span></span><br><span class="line"><span class="comment">#         yield i</span></span><br><span class="line"><span class="comment">#         print(&quot;after yield&quot;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># gen = generator(3)</span></span><br><span class="line"><span class="comment"># print(next(gen))</span></span><br><span class="line"><span class="comment"># print(next(gen))</span></span><br><span class="line"><span class="comment"># print(&quot;-&quot; * 10)</span></span><br><span class="line"><span class="comment"># for i in gen:</span></span><br><span class="line"><span class="comment">#     print(i)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def fib_generator():</span></span><br><span class="line"><span class="comment">#     cur, next = 0, 1</span></span><br><span class="line"><span class="comment">#     while True:</span></span><br><span class="line"><span class="comment">#         yield cur</span></span><br><span class="line"><span class="comment">#         cur, next = next, cur + next</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># fib_gen = fib_generator()</span></span><br><span class="line"><span class="comment"># for _ in range(10):</span></span><br><span class="line"><span class="comment">#     print(next(fib_gen))</span></span><br></pre></td></tr></table></figure>
<h3 id="defaultdict-realize-multidict"><a class="markdownIt-Anchor" href="#defaultdict-realize-multidict">#</a> defaultdict realize multidict</h3>
<p><code>defaultdict</code>  å¯ä»¥å®ç°å­—å…¸çš„å€¼å¯¹åº”ä¸ºåˆ—è¡¨æˆ–é›†åˆï¼Œåˆ—è¡¨ä¼šä¿æŒå…ƒç´ çš„æ’å…¥é¡ºåºï¼Œé›†åˆä¼šå»é™¤é‡å¤å…ƒç´ </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">d = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">1</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">3</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">print(d)  <span class="comment"># defaultdict(&lt;class &#x27;list&#x27;&gt;, &#123;&#x27;a&#x27;: [1, 3, 2], &#x27;b&#x27;: [2, 2]&#125;)</span></span><br><span class="line"></span><br><span class="line">d = defaultdict(<span class="built_in">set</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">1</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">3</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">print(d)   <span class="comment"># defaultdict(&lt;class &#x27;set&#x27;&gt;, &#123;&#x27;a&#x27;: &#123;1, 2, 3&#125;, &#x27;b&#x27;: &#123;2&#125;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># extend</span></span><br><span class="line">d.setdefault(<span class="string">&#x27;a&#x27;</span>, []).append(<span class="number">1</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;a&#x27;</span>, []).append(<span class="number">2</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;b&#x27;</span>, <span class="built_in">set</span>()).add(<span class="number">2</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;b&#x27;</span>, <span class="built_in">set</span>()).add(<span class="number">2</span>)</span><br><span class="line">print(d)   <span class="comment"># &#123;&#x27;a&#x27;: [1, 2], &#x27;b&#x27;: &#123;2&#125;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="zip-and-zip_longest"><a class="markdownIt-Anchor" href="#zip-and-zip_longest">#</a> zip and zip_longest</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">prices = &#123;</span><br><span class="line">    <span class="string">&#x27;ACME&#x27;</span>: <span class="number">45.23</span>,</span><br><span class="line">    <span class="string">&#x27;AAPL&#x27;</span>: <span class="number">612.78</span>,</span><br><span class="line">    <span class="string">&#x27;IBM&#x27;</span>: <span class="number">205.55</span>,</span><br><span class="line">    <span class="string">&#x27;HPQ&#x27;</span>: <span class="number">37.20</span>,</span><br><span class="line">    <span class="string">&#x27;FB&#x27;</span>: <span class="number">10.75</span></span><br><span class="line">&#125;</span><br><span class="line">print(<span class="built_in">sorted</span>(<span class="built_in">zip</span>(prices.values(), prices.keys())))</span><br><span class="line"></span><br><span class="line"><span class="comment"># zip() å‡½æ•°åˆ›å»ºçš„æ˜¯åªèƒ½è¿”å›ä¸€æ¬¡çš„è¿­ä»£å™¨</span></span><br><span class="line">prices_and_names = <span class="built_in">zip</span>(prices.values(), prices.keys())</span><br><span class="line">print(<span class="built_in">min</span>(prices_and_names)) <span class="comment"># OK (10.75, &#x27;FB&#x27;)</span></span><br><span class="line">print(<span class="built_in">max</span>(prices_and_names)) <span class="comment"># ValueError: max() arg is an empty sequence</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> zip_longest</span><br><span class="line"></span><br><span class="line">l1 = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">l2 = [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">list</span>(zip_longest(l1, l2))) <span class="comment"># [(&#x27;a&#x27;, 10), (&#x27;b&#x27;, 20), (&#x27;c&#x27;, 30), (None, 40)]</span></span><br><span class="line">print(<span class="built_in">list</span>(zip_longest(l1, l2, fillvalue=<span class="string">&quot;???&quot;</span>))) <span class="comment"># [(&#x27;a&#x27;, 10), (&#x27;b&#x27;, 20), (&#x27;c&#x27;, 30), (&#x27;???&#x27;, 40)]</span></span><br></pre></td></tr></table></figure>
<h3 id="dict_keys-and-dict_items"><a class="markdownIt-Anchor" href="#dict_keys-and-dict_items">#</a> dict_keys and dict_items</h3>
<p>å­—å…¸çš„ keys () å’Œ items () æ–¹æ³•åˆ†åˆ«è¿”å›ä¸€ä¸ªé”®è§†å›¾å¯¹è±¡å’Œä¸€ä¸ªåŒ…å« (é”®ï¼Œå€¼) å¯¹çš„å…ƒç´ è§†å›¾å¯¹è±¡ï¼Œ æ”¯æŒé›†åˆå¹¶ã€äº¤ã€å·®è¿ç®—ï¼Œvalues () ä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä½†æ˜¯ä¸æ”¯æŒé›†åˆè¿ç®—ï¼Œå› ä¸ºå€¼è§†å›¾ä¸èƒ½ä¿è¯å…ƒç´ äº’ä¸ç›¸åŒã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> : <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;z&#x27;</span> : <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b = &#123;</span><br><span class="line">    <span class="string">&#x27;w&#x27;</span> : <span class="number">10</span>,</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> : <span class="number">11</span>,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> : <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">print(a.keys(), a.items())      <span class="comment"># dict_keys([&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;]) dict_items([(&#x27;x&#x27;, 1), (&#x27;y&#x27;, 2), (&#x27;z&#x27;, 3)])</span></span><br><span class="line">print(a.keys() &amp; b.keys())      <span class="comment"># &#123;&#x27;x&#x27;, &#x27;y&#x27;&#125;</span></span><br><span class="line">print(a.keys() - b.keys())      <span class="comment"># &#123;&#x27;z&#x27;&#125;</span></span><br><span class="line">print(a.items() - b.items())    <span class="comment"># &#123;(&#x27;x&#x27;, 1), (&#x27;z&#x27;, 3)&#125;</span></span><br><span class="line">c = &#123;key: a[key] <span class="keyword">for</span> key <span class="keyword">in</span> a.keys() - &#123;<span class="string">&#x27;z&#x27;</span>&#125;&#125;</span><br><span class="line">print(c)                        <span class="comment"># &#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="dict-set-comprehension"><a class="markdownIt-Anchor" href="#dict-set-comprehension">#</a> dict &amp; set comprehension</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&quot;Babb&quot;</span>: <span class="number">18</span>, <span class="string">&quot;Julian&quot;</span>: <span class="number">28</span>&#125;</span><br><span class="line"></span><br><span class="line">reversed_dict = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items()&#125;</span><br><span class="line">print(reversed_dict) <span class="comment"># &#123;18: &#x27;Babb&#x27;, 28: &#x27;Julian&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">my_set = &#123;key <span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items()&#125;</span><br><span class="line">print(my_set) <span class="comment"># &#123;&#x27;Julian&#x27;, &#x27;Babb&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">my_set = <span class="built_in">set</span>(my_dict.keys())</span><br><span class="line">print(my_set) <span class="comment"># &#123;&#x27;Julian&#x27;, &#x27;Babb&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="dict-update"><a class="markdownIt-Anchor" href="#dict-update">#</a> dict update</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">b: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;<span class="string">&quot;a&quot;</span>: <span class="number">2</span>, <span class="string">&quot;c&quot;</span>: <span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line">print(a | b) <span class="comment"># &#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br><span class="line">a |= b</span><br><span class="line">print(a) <span class="comment"># &#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 2, &#x27;c&#x27;: 3&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="dict-sort-by-values"><a class="markdownIt-Anchor" href="#dict-sort-by-values">#</a> dict sort by values</h3>
<p>Order is guaranteed since Python 3.7 in dictionaries.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scores: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;<span class="string">&quot;Babb&quot;</span>: <span class="number">101</span>, <span class="string">&quot;Tom&quot;</span>: <span class="number">42</span>, <span class="string">&quot;Alice&quot;</span>: <span class="number">34</span>, <span class="string">&quot;Bob&quot;</span>: <span class="number">68</span>&#125;</span><br><span class="line">print(<span class="built_in">dict</span>(<span class="built_in">sorted</span>(scores.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>]))) <span class="comment"># &#123;&#x27;Alice&#x27;: 34, &#x27;Tom&#x27;: 42, &#x27;Bob&#x27;: 68, &#x27;Babb&#x27;: 101&#125;</span></span><br><span class="line">print(<span class="built_in">dict</span>(<span class="built_in">sorted</span>(scores.items(), key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>], reverse=<span class="literal">True</span>))) <span class="comment"># &#123;&#x27;Babb&#x27;: 101, &#x27;Bob&#x27;: 68, &#x27;Tom&#x27;: 42, &#x27;Alice&#x27;: 34&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="tuple"><a class="markdownIt-Anchor" href="#tuple">#</a> tuple</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span>,</span><br><span class="line">b = ()</span><br><span class="line">c = (<span class="number">1</span>,)</span><br><span class="line">d = (<span class="number">1</span>) <span class="comment"># is like 2 * (1 + 1)</span></span><br><span class="line">e = (<span class="number">1</span>+<span class="number">1</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(a)=&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(b)=&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(c)=&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(d)=&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">type</span>(e)=&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># type(a)=&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="comment"># type(b)=&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="comment"># type(c)=&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="comment"># type(d)=&lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"><span class="comment"># type(e)=&lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="tuple-compare"><a class="markdownIt-Anchor" href="#tuple-compare">#</a> tuple compare</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">print((<span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">2</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># True</span></span><br><span class="line">print((<span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">1</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># &#x27;&lt;&#x27; not supported between instances of &#x27;A&#x27; and &#x27;A&#x27;</span></span><br><span class="line">print((<span class="number">1</span>, <span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">1</span>, <span class="number">2</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># True</span></span><br><span class="line">print((<span class="number">1</span>, [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]) &lt; (<span class="number">2</span>, [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>])) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h3 id="typing-namedtuple"><a class="markdownIt-Anchor" href="#typing-namedtuple">#</a> typing namedtuple</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> namedtuple</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> NamedTuple</span><br><span class="line"></span><br><span class="line">Point = namedtuple(<span class="string">&quot;Point&quot;</span>, [<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>])</span><br><span class="line">p = Point(<span class="number">11</span>, y=<span class="number">22</span>)</span><br><span class="line">print(p.x, p.y)</span><br><span class="line">print(p[<span class="number">0</span>], p[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">NamedTuple</span>):</span></span><br><span class="line">    red: <span class="built_in">int</span></span><br><span class="line">    green: <span class="built_in">int</span></span><br><span class="line">    blue: <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = Color(red=<span class="number">55</span>, green=<span class="number">66</span>, blue=<span class="number">77</span>)</span><br><span class="line">print(c.red, c.green, c.blue)</span><br><span class="line">print(c[<span class="number">0</span>], c[<span class="number">1</span>], c[<span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<h3 id="itertools"><a class="markdownIt-Anchor" href="#itertools">#</a> itertools</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line">counter = itertools.count(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> counter:</span><br><span class="line">    print(i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">6</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 0</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># 6</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line">letters = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>]</span><br><span class="line">cycler = itertools.cycle(letters)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, letter <span class="keyword">in</span> <span class="built_in">enumerate</span>(cycler, start=<span class="number">1</span>):</span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>: <span class="subst">&#123;letter&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">8</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1: A</span></span><br><span class="line"><span class="comment"># 2: B</span></span><br><span class="line"><span class="comment"># 3: C</span></span><br><span class="line"><span class="comment"># 4: A</span></span><br><span class="line"><span class="comment"># 5: B</span></span><br><span class="line"><span class="comment"># 6: C</span></span><br><span class="line"><span class="comment"># 7: A</span></span><br><span class="line"><span class="comment"># 8: B</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line">string = <span class="string">&quot;Hello&quot;</span></span><br><span class="line"></span><br><span class="line">repeater = itertools.repeat(string, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> s <span class="keyword">in</span> repeater:</span><br><span class="line">    print(s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"><span class="comment"># Hello</span></span><br><span class="line"><span class="comment"># Hello</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-groupby"><a class="markdownIt-Anchor" href="#itertools-groupby">#</a> itertools groupby</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">employees = [</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;çŠ¬å¤œå‰&#x27;</span>, <span class="number">2000</span>],</span><br><span class="line">    [<span class="number">200</span>, <span class="string">&#x27;æ€ç”Ÿä¸¸&#x27;</span>, <span class="number">3000</span>],</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;æ¡”æ¢—&#x27;</span>, <span class="number">1000</span>],</span><br><span class="line">    [<span class="number">200</span>, <span class="string">&#x27;ç²&#x27;</span>, <span class="number">800</span>],</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;å†¥åŠ &#x27;</span>, <span class="number">800</span>],</span><br><span class="line">    [<span class="number">300</span>, <span class="string">&#x27;å¥ˆè½&#x27;</span>, <span class="number">4000</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">employees = <span class="built_in">sorted</span>(employees, key=itemgetter(<span class="number">0</span>))</span><br><span class="line">print(employees) <span class="comment"># [[100, &#x27;çŠ¬å¤œå‰&#x27;, 2000], [100, &#x27;æ¡”æ¢—&#x27;, 1000], [100, &#x27;å†¥åŠ &#x27;, 800], [200, &#x27;æ€ç”Ÿä¸¸&#x27;, 3000], [200, &#x27;ç²&#x27;, 800], [300, &#x27;å¥ˆè½&#x27;, 4000]]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> no, item <span class="keyword">in</span> itertools.groupby(employees, itemgetter(<span class="number">0</span>)):</span><br><span class="line">    print(<span class="built_in">list</span>(item))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 100 [[100, &#x27;çŠ¬å¤œå‰&#x27;, 2000], [100, &#x27;æ¡”æ¢—&#x27;, 1000], [100, &#x27;å†¥åŠ &#x27;, 800]]</span></span><br><span class="line"><span class="comment"># 200 [[200, &#x27;æ€ç”Ÿä¸¸&#x27;, 3000], [200, &#x27;ç²&#x27;, 800]]</span></span><br><span class="line"><span class="comment"># 300 [[300, &#x27;å¥ˆè½&#x27;, 4000]]</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-product"><a class="markdownIt-Anchor" href="#itertools-product">#</a> itertools product</h3>
<p>product è®¡ç®—ç¬›å¡å°”ç§¯ã€‚</p>
<p>100 ä»¥å†…æ‰€æœ‰å‹¾è‚¡æ•°ï¼Œ(3, 4, 5) å’Œ (4, 3, 5)  ç®—ä¸åŒçš„å‹¾è‚¡æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> product</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">      <span class="keyword">if</span> i * i + j * j == k  * k:</span><br><span class="line">        print(i, j, k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># product è®¡ç®—ç¬›å¡å°”ç§¯</span></span><br><span class="line">items = product(<span class="string">&#x27;ABCD&#x27;</span>, <span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.product object at 0x000001BC20F1E600&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;D&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;D&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">items = product(<span class="built_in">range</span>(<span class="number">2</span>), repeat=<span class="number">3</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.product object at 0x000001AAF4ECE6C0&gt;</span></span><br><span class="line"><span class="comment"># (0, 0, 0)</span></span><br><span class="line"><span class="comment"># (0, 0, 1)</span></span><br><span class="line"><span class="comment"># (0, 1, 0)</span></span><br><span class="line"><span class="comment"># (0, 1, 1)</span></span><br><span class="line"><span class="comment"># (1, 0, 0)</span></span><br><span class="line"><span class="comment"># (1, 0, 1)</span></span><br><span class="line"><span class="comment"># (1, 1, 0)</span></span><br><span class="line"><span class="comment"># (1, 1, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> product(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>), repeat=<span class="number">3</span>):</span><br><span class="line">  <span class="keyword">if</span> i * i + j * j == k * k:</span><br><span class="line">    print(i, j, k)</span><br></pre></td></tr></table></figure>
<h3 id="itertools-combinations_with_replacement"><a class="markdownIt-Anchor" href="#itertools-combinations_with_replacement">#</a> itertools combinations_with_replacement</h3>
<p>combinations_with_replacement å®¹å™¨å– n ä¸ªå…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤çš„ç»„åˆã€‚</p>
<p>100 ä»¥å†…æ‰€æœ‰å‹¾è‚¡æ•°ï¼Œ(3, 4, 5) å’Œ (4, 3, 5)  ç®—ç›¸åŒçš„å‹¾è‚¡æ•°ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations_with_replacement</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, <span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(j, <span class="number">100</span>):</span><br><span class="line">      <span class="keyword">if</span> i * i + j * j == k  * k:</span><br><span class="line">        print(i, j, k)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="comment"># combinations_with_replacement å®¹å™¨å– n ä¸ªå…ƒç´ ï¼Œå…ƒç´ å¯ä»¥é‡å¤çš„ç»„åˆã€‚</span></span><br><span class="line">items = combinations_with_replacement(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;itertools.combinations_with_replacement object at 0x000002845DA23EA0&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> combinations_with_replacement(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>), <span class="number">3</span>):</span><br><span class="line">  <span class="keyword">if</span> i * i + j * j == k * k:</span><br><span class="line">    print(i, j, k)</span><br></pre></td></tr></table></figure>
<h3 id="itertools-combinations"><a class="markdownIt-Anchor" href="#itertools-combinations">#</a> itertools combinations</h3>
<p>combinations å®¹å™¨å– n ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸é‡å¤çš„ç»„åˆã€‚</p>
<p>æœ‰ 10 ä¸ªä¸åŒé‡é‡çš„ç ç ï¼Œä»»æ„å–ä¸‰ä¸ªç»„åˆï¼Œæ€»é‡é‡ä¸åœ¨æŒ‡å®š  [a, b]  é‡é‡åŒºé—´çš„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">weight_list = [<span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">10</span>]</span><br><span class="line">n = <span class="built_in">len</span>(weight_list)</span><br><span class="line">a, b = <span class="number">10</span>, <span class="number">30</span></span><br><span class="line">weight_range = <span class="built_in">set</span>(<span class="built_in">range</span>(a, b + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, n):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(j + <span class="number">1</span>, n):</span><br><span class="line">            total = weight_list[i] + weight_list[j] + weight_list[k]</span><br><span class="line">            <span class="keyword">if</span> total <span class="keyword">in</span> weight_range:</span><br><span class="line">                weight_range.remove(total)</span><br><span class="line"></span><br><span class="line">print(weight_range)</span><br><span class="line"><span class="comment"># &#123;29, 30&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># combinations å®¹å™¨å– n ä¸ªå…ƒç´ ï¼Œå…ƒç´ ä¸é‡å¤çš„ç»„åˆã€‚</span></span><br><span class="line">items = combinations(<span class="string">&quot;ABC&quot;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">    print(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;itertools.combinations object at 0x000002150036EAE0&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> combinations(weight_list, <span class="number">3</span>):</span><br><span class="line">    total = i + j + k</span><br><span class="line">    <span class="keyword">if</span> total <span class="keyword">in</span> weight_range:</span><br><span class="line">        weight_range.remove(total)</span><br><span class="line"></span><br><span class="line">print(weight_range)</span><br><span class="line"><span class="comment"># &#123;29, 30&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-permutations"><a class="markdownIt-Anchor" href="#itertools-permutations">#</a> itertools permutations</h3>
<p>permutations æ’åˆ—ï¼Œæ¯ä¸ªé¡ºåºéƒ½ç§°ä½œä¸€ä¸ªæ’åˆ—ã€‚</p>
<p>SEND + MORE = MONEY, æ¯ä¸ªå­—æ¯ä»£è¡¨ä¸åŒçš„æ•°å­—ï¼ŒS = ?, D = ? â€¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"></span><br><span class="line"><span class="comment"># permutations æ’åˆ—</span></span><br><span class="line">items = permutations(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.permutations object at 0x000002D06EB67E00&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"></span><br><span class="line">items = permutations(<span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.permutations object at 0x000002D06E594E00&gt;</span></span><br><span class="line"><span class="comment"># (0, 1, 2)</span></span><br><span class="line"><span class="comment"># (0, 2, 1)</span></span><br><span class="line"><span class="comment"># (1, 0, 2)</span></span><br><span class="line"><span class="comment"># (1, 2, 0)</span></span><br><span class="line"><span class="comment"># (2, 0, 1)</span></span><br><span class="line"><span class="comment"># (2, 1, 0)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> s, e, n, d, m, o, r, y <span class="keyword">in</span> permutations(<span class="built_in">range</span>(<span class="number">10</span>), <span class="number">8</span>):</span><br><span class="line">  <span class="keyword">if</span> (s*<span class="number">1000</span>+e*<span class="number">100</span>+n*<span class="number">10</span>+d) + (m*<span class="number">1000</span>+o*<span class="number">100</span>+r*<span class="number">10</span>+e) == (m*<span class="number">10000</span>+o*<span class="number">1000</span>+n*<span class="number">100</span>+e*<span class="number">10</span>+y):</span><br><span class="line">    <span class="keyword">if</span> m != <span class="number">0</span> <span class="keyword">and</span> s != <span class="number">0</span>:</span><br><span class="line">      print(<span class="string">f&quot;<span class="subst">&#123;s=&#125;</span>,<span class="subst">&#123;e=&#125;</span>, <span class="subst">&#123;n=&#125;</span>, <span class="subst">&#123;d=&#125;</span>, <span class="subst">&#123;m=&#125;</span>, <span class="subst">&#123;o=&#125;</span>, <span class="subst">&#123;r=&#125;</span>, <span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># s=9,e=5, n=6, d=7, m=1, o=0, r=8, y=2</span></span><br><span class="line"><span class="comment"># 9567 + 1085 = 10652</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-batched-split-chunk"><a class="markdownIt-Anchor" href="#itertools-batched-split-chunk">#</a> itertools batched split chunk</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> batched</span><br><span class="line"></span><br><span class="line">data: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">chunks: batched = batched(data, n=<span class="number">2</span>)</span><br><span class="line">print(chunks) <span class="comment"># &lt;itertools.batched object at 0x0000021A15886C40&gt;</span></span><br><span class="line">print(<span class="built_in">list</span>(chunks)) <span class="comment"># [(1, 2), (3, 4), (5, 6), (7, 8), (9,)]</span></span><br><span class="line"></span><br><span class="line">chunks: batched = batched(data, n=<span class="number">3</span>)</span><br><span class="line">print(<span class="built_in">next</span>(chunks)) <span class="comment"># (1, 2, 3)</span></span><br><span class="line">print(<span class="built_in">next</span>(chunks)) <span class="comment"># (4, 5, 6)</span></span><br><span class="line">print(<span class="built_in">next</span>(chunks)) <span class="comment"># (7, 8, 9)</span></span><br></pre></td></tr></table></figure>
<h3 id="slice"><a class="markdownIt-Anchor" href="#slice">#</a> slice</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">iso_date_time = <span class="string">&quot;2025-02-15T12:30:00.000Z&quot;</span></span><br><span class="line"></span><br><span class="line">date_slice = <span class="built_in">slice</span>(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line">time_slice = <span class="built_in">slice</span>(<span class="number">11</span>, <span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">print(iso_date_time[date_slice], iso_date_time[time_slice])</span><br><span class="line"></span><br><span class="line">print(iso_date_time[<span class="built_in">slice</span>(<span class="number">10</span>)], iso_date_time[:<span class="number">10</span>])</span><br><span class="line">print(iso_date_time[<span class="built_in">slice</span>(<span class="number">11</span>, <span class="literal">None</span>)], iso_date_time[<span class="number">11</span>:])</span><br></pre></td></tr></table></figure>
<h3 id="hashable"><a class="markdownIt-Anchor" href="#hashable">#</a> hashable</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">k = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line"><span class="comment"># my_dict = &#123;k: &quot;value&quot;&#125;  # This will raise a TypeError because lists are not hashable</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyList</span>(<span class="params"><span class="built_in">list</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__hash__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">id</span>(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self <span class="keyword">is</span> other</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">k = MyList([<span class="number">1</span>, <span class="number">2</span>])</span><br><span class="line">my_dict = &#123;k: <span class="string">&quot;value&quot;</span>&#125;  <span class="comment"># This will work because MyList is now hashable</span></span><br><span class="line">k.append(<span class="number">3</span>)</span><br><span class="line">print(my_dict[k])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">k = MyClass()</span><br><span class="line">my_dict = &#123;</span><br><span class="line">    k: <span class="string">&quot;value&quot;</span></span><br><span class="line">&#125;  <span class="comment"># This will work because MyClass instances are hashable by default</span></span><br><span class="line">print(my_dict[k])</span><br></pre></td></tr></table></figure>
<h3 id="set-membership-is-much-faster-than-list-or-tuple-membership"><a class="markdownIt-Anchor" href="#set-membership-is-much-faster-than-list-or-tuple-membership">#</a> set membership is much faster than list or tuple membership</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">print(string.ascii_letters)</span><br><span class="line"></span><br><span class="line">char_list = <span class="built_in">list</span>(string.ascii_letters)</span><br><span class="line">char_tuple = <span class="built_in">tuple</span>(string.ascii_letters)</span><br><span class="line">char_set = <span class="built_in">set</span>(string.ascii_letters)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">membership_test</span>(<span class="params">n, container</span>):</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;z&quot;</span> <span class="keyword">in</span> container:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start = time.perf_counter()</span><br><span class="line">membership_test(<span class="number">10000000</span>, char_list)</span><br><span class="line">end = time.perf_counter()</span><br><span class="line">print(<span class="string">&quot;list&quot;</span>, end - start)</span><br><span class="line"></span><br><span class="line">start = time.perf_counter()</span><br><span class="line">membership_test(<span class="number">10000000</span>, char_tuple)</span><br><span class="line">end = time.perf_counter()</span><br><span class="line">print(<span class="string">&quot;tuple&quot;</span>, end - start)</span><br><span class="line"></span><br><span class="line">start = time.perf_counter()</span><br><span class="line">membership_test(<span class="number">10000000</span>, char_set)</span><br><span class="line">end = time.perf_counter()</span><br><span class="line">print(<span class="string">&quot;set&quot;</span>, end - start)</span><br><span class="line"></span><br><span class="line"><span class="comment"># list 2.0961915999941994</span></span><br><span class="line"><span class="comment"># tuple 2.1027070999844</span></span><br><span class="line"><span class="comment"># set 0.18551109998952597</span></span><br></pre></td></tr></table></figure>
<h3 id="enumerate-start"><a class="markdownIt-Anchor" href="#enumerate-start">#</a> enumerate start</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">letters: <span class="built_in">str</span> = <span class="string">&quot;ABCD&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">for</span> i, letter <span class="keyword">in</span> <span class="built_in">enumerate</span>(letters):</span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>: <span class="subst">&#123;letter&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 0: A</span></span><br><span class="line"><span class="comment"># 1: B</span></span><br><span class="line"><span class="comment"># 2: C</span></span><br><span class="line"><span class="comment"># 3: D</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, letter <span class="keyword">in</span> <span class="built_in">enumerate</span>(letters, start=<span class="number">1</span>):</span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>: <span class="subst">&#123;letter&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 1: A</span></span><br><span class="line"><span class="comment"># 2: B</span></span><br><span class="line"><span class="comment"># 3: C</span></span><br><span class="line"><span class="comment"># 4: D</span></span><br></pre></td></tr></table></figure>
<h3 id="counter"><a class="markdownIt-Anchor" href="#counter">#</a> Counter</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">letters: <span class="built_in">list</span>[<span class="built_in">str</span>] = [<span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>]</span><br><span class="line">counter: Counter = Counter(letters)</span><br><span class="line"></span><br><span class="line">print(counter) <span class="comment"># Counter(&#123;&#x27;A&#x27;: 3, &#x27;C&#x27;: 2, &#x27;B&#x27;: 1, &#x27;D&#x27;: 1&#125;)</span></span><br><span class="line">print(counter.total()) <span class="comment"># 7</span></span><br><span class="line">print(counter.most_common()) <span class="comment"># [(&#x27;A&#x27;, 3), (&#x27;C&#x27;, 2), (&#x27;B&#x27;, 1), (&#x27;D&#x27;, 1)]</span></span><br><span class="line">print(counter.most_common(n=<span class="number">2</span>)) <span class="comment"># [(&#x27;A&#x27;, 3), (&#x27;C&#x27;, 2)]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c1 = Counter(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line">c2 = Counter(b=<span class="number">1</span>, c=<span class="number">2</span>, d=<span class="number">3</span>)</span><br><span class="line">c1.update(c2)</span><br><span class="line">print(c1) <span class="comment"># Counter(&#123;&#x27;c&#x27;: 5, &#x27;b&#x27;: 3, &#x27;d&#x27;: 3, &#x27;a&#x27;: 1&#125;)</span></span><br><span class="line"></span><br><span class="line">c1 = Counter(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line">c2 = Counter(b=<span class="number">1</span>, c=<span class="number">2</span>, d=<span class="number">3</span>)</span><br><span class="line">c1.subtract(c2)</span><br><span class="line">print(c1) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 1, &#x27;c&#x27;: 1, &#x27;d&#x27;: -3&#125;)</span></span><br><span class="line"></span><br><span class="line">c1 = Counter(<span class="string">&#x27;aabbccddee&#x27;</span>)</span><br><span class="line">print(c1) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 2, &#x27;c&#x27;: 2, &#x27;d&#x27;: 2, &#x27;e&#x27;: 2&#125;)</span></span><br><span class="line">c1.update(<span class="string">&#x27;abcdef&#x27;</span>)</span><br><span class="line">print(c1) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 3, &#x27;b&#x27;: 3, &#x27;c&#x27;: 3, &#x27;d&#x27;: 3, &#x27;e&#x27;: 3, &#x27;f&#x27;: 1&#125;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c1 = Counter(<span class="string">&#x27;aabbcc&#x27;</span>)</span><br><span class="line">c2 = Counter(<span class="string">&#x27;abc&#x27;</span>)</span><br><span class="line">print(c1, c2)  <span class="comment"># Counter(&#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 2, &#x27;c&#x27;: 2&#125;) Counter(&#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 1, &#x27;c&#x27;: 1&#125;)</span></span><br><span class="line">print(c1 + c2) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 3, &#x27;b&#x27;: 3, &#x27;c&#x27;: 3&#125;)</span></span><br><span class="line">print(c1 - c2) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 1, &#x27;c&#x27;: 1&#125;)</span></span><br><span class="line"><span class="comment"># &amp;: keeps the minimum of the key values</span></span><br><span class="line">print(c1 &amp; c2) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 1, &#x27;b&#x27;: 1, &#x27;c&#x27;: 1&#125;)</span></span><br><span class="line"><span class="comment"># |: keeps the maximum of the key values</span></span><br><span class="line">print(c1 | c2) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 2, &#x27;b&#x27;: 2, &#x27;c&#x27;: 2&#125;)</span></span><br><span class="line"></span><br><span class="line">c1 = Counter(a=<span class="number">10</span>, b=-<span class="number">10</span>)</span><br><span class="line"><span class="comment"># The unary + can also be used to remove any non-positive count from the Counter</span></span><br><span class="line">print(+c1) <span class="comment"># Counter(&#123;&#x27;a&#x27;: 10&#125;)</span></span><br><span class="line"><span class="comment"># The unary - changes the sign of each counter, and removes any non-positive result</span></span><br><span class="line">print(-c1) <span class="comment"># Counter(&#123;&#x27;b&#x27;: 10&#125;)</span></span><br></pre></td></tr></table></figure>
<h3 id="typeddict"><a class="markdownIt-Anchor" href="#typeddict">#</a> TypedDict</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Required, TypedDict, NotRequired</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coordinate</span>(<span class="params">TypedDict</span>):</span></span><br><span class="line">    x: <span class="built_in">float</span></span><br><span class="line">    y: <span class="built_in">float</span></span><br><span class="line">    label: <span class="built_in">str</span></span><br><span class="line">    category: NotRequired[<span class="built_in">str</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">coordinate: Coordinate = &#123;<span class="string">&quot;x&quot;</span>: <span class="number">10</span>, <span class="string">&quot;y&quot;</span>: <span class="number">10</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Profit&quot;</span>, <span class="string">&quot;category&quot;</span>: <span class="string">&quot;Finance&quot;</span>&#125;</span><br><span class="line">coordinate2: Coordinate =  &#123;<span class="string">&quot;x&quot;</span>: <span class="number">15</span>, <span class="string">&quot;y&quot;</span>: <span class="number">25</span>, <span class="string">&quot;label&quot;</span>: <span class="string">&quot;Expenses&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Vote = TypedDict(<span class="string">&quot;Vote&quot;</span>, &#123;<span class="string">&quot;for&quot;</span>: <span class="built_in">int</span>, <span class="string">&quot;against&quot;</span>: <span class="built_in">int</span>&#125;, total=<span class="literal">True</span>)</span><br><span class="line">vote: Vote = &#123;<span class="string">&quot;for&quot;</span>: <span class="number">100</span>, <span class="string">&quot;against&quot;</span>: <span class="number">200</span>&#125;</span><br><span class="line"><span class="comment"># vote: Vote = &#123;&quot;for&quot;: 100&#125;  # &quot;against&quot; is required in &quot;Vote&quot;</span></span><br><span class="line"></span><br><span class="line">Vote = TypedDict(<span class="string">&quot;Vote&quot;</span>, &#123;<span class="string">&quot;for&quot;</span>: <span class="built_in">int</span>, <span class="string">&quot;against&quot;</span>: <span class="built_in">int</span>&#125;, total=<span class="literal">False</span>)</span><br><span class="line">vote2: Vote = &#123;<span class="string">&quot;for&quot;</span>: <span class="number">100</span>&#125;</span><br><span class="line"></span><br><span class="line">Vote = TypedDict(<span class="string">&quot;Vote&quot;</span>, &#123;<span class="string">&quot;for&quot;</span>: <span class="built_in">int</span>, <span class="string">&quot;against&quot;</span>: Required[<span class="built_in">int</span>]&#125;, total=<span class="literal">False</span>)</span><br><span class="line">vote3: Vote = &#123;<span class="string">&quot;for&quot;</span>: <span class="number">100</span>, <span class="string">&quot;against&quot;</span>: <span class="number">200</span>&#125;</span><br><span class="line"><span class="comment"># vote3: Vote = &#123;&quot;for&quot;: 100&#125; # &quot;against&quot; is required in &quot;Vote&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="itemgetter"><a class="markdownIt-Anchor" href="#itemgetter">#</a> itemgetter</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">elements: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">first_and_last: itemgetter = itemgetter(<span class="number">0</span>, -<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">print(first_and_last(elements)) <span class="comment"># (1, 5, 3)</span></span><br><span class="line"></span><br><span class="line">items: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">int</span>] = &#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>, <span class="string">&quot;c&quot;</span>: <span class="number">3</span>, <span class="string">&quot;d&quot;</span>: <span class="number">4</span>&#125;</span><br><span class="line">a_and_c: itemgetter = itemgetter(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;c&quot;</span>)</span><br><span class="line">print(a_and_c(items)) <span class="comment"># (1, 3)</span></span><br></pre></td></tr></table></figure>
<h3 id="remove-list-duplicates-and-keep-order"><a class="markdownIt-Anchor" href="#remove-list-duplicates-and-keep-order">#</a> remove list duplicates and keep order</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">numbers: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>,</span><br><span class="line">                      <span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">list</span>(<span class="built_in">set</span>(numbers))) <span class="comment"># [1, 2, 3, 4] the order not keep</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">dict</span>.fromkeys(numbers)) <span class="comment"># &#123;1: None, 3: None, 2: None, 4: None&#125;</span></span><br><span class="line"><span class="comment"># Order is guaranteed since Python 3.7 in dictionaries.</span></span><br><span class="line">print(<span class="built_in">list</span>(<span class="built_in">dict</span>.fromkeys(numbers))) <span class="comment"># [1, 3, 2, 4]</span></span><br></pre></td></tr></table></figure>
<h3 id="reversed"><a class="markdownIt-Anchor" href="#reversed">#</a> reversed</h3>
<p>reversed return an iterator, if the given sequence is too big, can consider using reversed.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">name: <span class="built_in">str</span> = <span class="string">&quot;Babb&quot;</span></span><br><span class="line"></span><br><span class="line">print(name[::-<span class="number">1</span>], <span class="string">&quot;&quot;</span>.join(<span class="built_in">reversed</span>(name))) <span class="comment"># bbaB bbaB</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">reversed</span>(name)) <span class="comment"># &lt;reversed object at 0x000002B4CAA4F580&gt;</span></span><br><span class="line">reverse_iterator = <span class="built_in">reversed</span>(name)</span><br><span class="line">print(<span class="built_in">next</span>(reverse_iterator)) <span class="comment"># b</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> reverse_iterator:</span><br><span class="line">    print(item)</span><br><span class="line"><span class="comment"># b</span></span><br><span class="line"><span class="comment"># a</span></span><br><span class="line"><span class="comment"># B</span></span><br></pre></td></tr></table></figure>
<h3 id="flatten-list"><a class="markdownIt-Anchor" href="#flatten-list">#</a> flatten list</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any, Callable</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> Flatten = Callable[[<span class="built_in">list</span>], <span class="built_in">list</span>]</span><br><span class="line"></span><br><span class="line">flatten: Flatten = <span class="keyword">lambda</span> target: <span class="built_in">sum</span>((flatten(sub) <span class="keyword">if</span> <span class="built_in">isinstance</span>(sub, <span class="built_in">list</span>) <span class="keyword">else</span> [sub] <span class="keyword">for</span> sub <span class="keyword">in</span> target), start=[])</span><br><span class="line">nested_list: <span class="built_in">list</span>[Any] = [<span class="number">1</span>, [<span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]], [<span class="string">&quot;a&quot;</span>, [<span class="string">&quot;b&quot;</span>, [<span class="string">&quot;c&quot;</span>, <span class="string">&quot;d&quot;</span>]]]]</span><br><span class="line">print(flatten(nested_list)) <span class="comment"># [1, 2, 3, 4, &#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;]</span></span><br><span class="line"></span><br><span class="line">print([<span class="number">1</span>] + [<span class="number">2</span>] + []) <span class="comment"># [1, 2]</span></span><br><span class="line">print(<span class="built_in">sum</span>([[<span class="number">1</span>], [<span class="number">2</span>]], start=[])) <span class="comment"># [1, 2]</span></span><br></pre></td></tr></table></figure>
<h3 id="secrets-password-generator"><a class="markdownIt-Anchor" href="#secrets-password-generator">#</a> secrets password generator</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> secrets</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Callable</span><br><span class="line"></span><br><span class="line">password_generator: Callable[[<span class="built_in">int</span>], <span class="built_in">str</span>] = <span class="keyword">lambda</span> n: <span class="string">&quot;&quot;</span>.join(secrets.choice(string.ascii_letters + string.digits + string.punctuation) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n))</span><br><span class="line">print(password_generator(<span class="number">5</span>))</span><br><span class="line">print(password_generator(<span class="number">10</span>))</span><br><span class="line">print(password_generator(<span class="number">20</span>))</span><br><span class="line"><span class="comment"># cGWN3</span></span><br><span class="line"><span class="comment"># i?k6t5wYYT</span></span><br><span class="line"><span class="comment"># lyOg_u*w8ofT;vN$=6=*</span></span><br></pre></td></tr></table></figure>
<h2 id="class"><a class="markdownIt-Anchor" href="#class">#</a> Class</h2>
<h3 id="super"><a class="markdownIt-Anchor" href="#super">#</a> super()</h3>
<p>super ç”¨æ¥è°ƒç”¨çˆ¶ç±»æŸä¸ªå·²ç»è¦†ç›–çš„æ–¹æ³•ï¼Œéµå¾ªè±å½¢ç»§æ‰¿é¡ºåºï¼Œæ ¼å¼  <code>super([type[, object-or-type]])</code>  , åœ¨ python3 ä¸­å¯ä»¥çœç•¥å‚æ•°  <code>super()</code> , åœ¨ python2 ä¸­ä½¿ç”¨  <code>super(subtype, self)</code> ã€‚</p>
<p><code>mro()</code>  stands for <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#class.__mro__"><strong>Method Resolution Order</strong></a>. It returns a list of types the class is derived from, in the order they are searched for methods.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spam</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;A.spam&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>().spam() <span class="comment"># ä¼šè°ƒç”¨ B çš„ spam æ–¹æ³•ï¼Œå°½ç®¡ A æ²¡æœ‰ç›´æ¥ç»§æ‰¿ B</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spam</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;B.spam&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A, B</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line">c.spam()</span><br><span class="line"></span><br><span class="line">print(C.mro())</span><br><span class="line">print(C.__mro__)</span><br><span class="line"><span class="comment"># (&lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</span></span><br></pre></td></tr></table></figure>
<h3 id="__class__-point-to-class"><a class="markdownIt-Anchor" href="#__class__-point-to-class">#</a> __class__ point to class</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: <span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    ...:     <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: a = A()</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: a.__class__</span><br><span class="line">Out[<span class="number">14</span>]: __main__.A</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: b = a.__class__()</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: b</span><br><span class="line">Out[<span class="number">16</span>]: &lt;__main__.A at <span class="number">0x4fcb5f8</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: b.__class__</span><br><span class="line">Out[<span class="number">17</span>]: __main__.A</span><br></pre></td></tr></table></figure>
<h3 id="calendar"><a class="markdownIt-Anchor" href="#calendar">#</a> calendar</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"><span class="comment"># æ‰“å°æ—¥å†</span></span><br><span class="line">cal = calendar.month(<span class="number">2018</span>, <span class="number">9</span>)</span><br><span class="line">print(cal)</span><br><span class="line"><span class="comment">#    September 2018</span></span><br><span class="line"><span class="comment"># Mo Tu We Th Fr Sa Su</span></span><br><span class="line"><span class="comment">#                 1  2</span></span><br><span class="line"><span class="comment">#  3  4  5  6  7  8  9</span></span><br><span class="line"><span class="comment"># 10 11 12 13 14 15 16</span></span><br><span class="line"><span class="comment"># 17 18 19 20 21 22 23</span></span><br><span class="line"><span class="comment"># 24 25 26 27 28 29 30</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­æ˜¯å¦ä¸ºé—°å¹´</span></span><br><span class="line">ret = calendar.isleap(<span class="number">2018</span>)</span><br><span class="line">print(ret)</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h3 id="type-and-isinstance"><a class="markdownIt-Anchor" href="#type-and-isinstance">#</a> type() and isinstance</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">isinstance</span>(A(), A))  <span class="comment"># True</span></span><br><span class="line">print(<span class="built_in">type</span>(A()) <span class="keyword">is</span> A)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">isinstance</span>(B(), A))  <span class="comment"># True</span></span><br><span class="line">print(<span class="built_in">type</span>(B()) <span class="keyword">is</span> A)  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">isinstance</span>(<span class="number">1</span>, (<span class="built_in">float</span>, <span class="built_in">int</span>)))  <span class="comment"># True, isinstance ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå…ƒç»„</span></span><br></pre></td></tr></table></figure>
<h3 id="typing-udtuser-defined-types"><a class="markdownIt-Anchor" href="#typing-udtuser-defined-types">#</a> typing udt(user-defined types)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"></span><br><span class="line">Vector = List[<span class="built_in">float</span>]</span><br><span class="line">Matrix = List[Vector]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addMatrix</span>(<span class="params">a : Matrix, b : Matrix</span>) -&gt; Matrix:</span></span><br><span class="line">    result = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line">        result_row =[]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> j, _ <span class="keyword">in</span> <span class="built_in">enumerate</span>(row):</span><br><span class="line">            result_row += [a[i][j] + b[i][j]]</span><br><span class="line"></span><br><span class="line">        result += [result_row]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">x = [[<span class="number">1.0</span>, <span class="number">0.0</span>], [<span class="number">0.0</span>, <span class="number">1.0</span>]]</span><br><span class="line">y = [[<span class="number">2.0</span>, <span class="number">1.0</span>], [<span class="number">0.0</span>, -<span class="number">2.0</span>]]</span><br><span class="line">z = addMatrix(x, y)</span><br><span class="line"></span><br><span class="line">print(z)</span><br><span class="line"><span class="comment"># [[3.0, 1.0], [0.0, -1.0]]</span></span><br></pre></td></tr></table></figure>
<h3 id="dynamic-monkey-patch"><a class="markdownIt-Anchor" href="#dynamic-monkey-patch">#</a> dynamic monkey patch</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;Foo.bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;Modified bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Foo().bar() <span class="comment"># Foo.bar</span></span><br><span class="line">Foo.bar = bar</span><br><span class="line">Foo().bar() <span class="comment"># Modified bar</span></span><br></pre></td></tr></table></figure>
<h3 id="dynamic-import"><a class="markdownIt-Anchor" href="#dynamic-import">#</a> dynamic import</h3>
<p>åŠ¨æ€å¯¼å…¥æ˜¯æŒ‡æ¨¡å—å¯ä»¥ä»¥å­—ç¬¦ä¸²çš„å½¢å¼å¯¼å…¥</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module_names = [<span class="string">&#x27;sys&#x27;</span>, <span class="string">&#x27;os&#x27;</span>, <span class="string">&#x27;re&#x27;</span>]</span><br><span class="line">modules = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">__import__</span>, module_names))</span><br><span class="line">sys = modules[<span class="number">0</span>]</span><br><span class="line">print(sys.version)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line">module2 = importlib.import_module(<span class="string">&#x27;sys&#x27;</span>)</span><br><span class="line">print(module2.version)</span><br></pre></td></tr></table></figure>
<h3 id="import-order"><a class="markdownIt-Anchor" href="#import-order">#</a> import order</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ¨¡å—æœç´¢é¡ºåº</span></span><br><span class="line">print(sys.path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¨‹åºæ‰§è¡Œæ—¶æ·»åŠ æ–°çš„æ¨¡å—è·¯å¾„</span></span><br><span class="line">sys.path.append(<span class="string">&quot;/home/jbn/xxx&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥ç¡®ä¿å…ˆæœç´¢è¿™ä¸ªè·¯å¾„</span></span><br><span class="line">sys.path.insert(<span class="number">0</span>, <span class="string">&quot;/home/jbn/xxx&quot;</span>)</span><br><span class="line">print(sys.path)</span><br></pre></td></tr></table></figure>
<h3 id="relative-and-absolute-import"><a class="markdownIt-Anchor" href="#relative-and-absolute-import">#</a> relative and absolute import</h3>
<p>Absolute import is from the sys.path.</p>
<p>Relative import is from the  <code>__package__</code> , if one file as the start script, the  <code>__package__</code>  is None.</p>
<h3 id="dataclass"><a class="markdownIt-Anchor" href="#dataclass">#</a> dataclass</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> ClassVar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">order=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    age: <span class="built_in">int</span></span><br><span class="line">    height: <span class="built_in">int</span> = field(</span><br><span class="line">        default_factory=<span class="keyword">lambda</span>: random.randint(<span class="number">150</span>, <span class="number">200</span>), <span class="built_in">repr</span>=<span class="literal">False</span></span><br><span class="line">    )  <span class="comment"># Default height in cm</span></span><br><span class="line"></span><br><span class="line">    count: ClassVar[<span class="built_in">int</span>] = <span class="number">0</span>  <span class="comment"># Class variable to count instances</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__post_init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        Person.count += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = Person(name=<span class="string">&quot;Alice&quot;</span>, age=<span class="number">30</span>)</span><br><span class="line">p2 = Person(name=<span class="string">&quot;Alice&quot;</span>, age=<span class="number">30</span>)</span><br><span class="line"></span><br><span class="line">print(p1 == p2)  <span class="comment"># True, because dataclass provides an automatic __eq__ method</span></span><br><span class="line">print(p1)  <span class="comment"># Person(name=&#x27;Alice&#x27;, age=30), automatic __repr__</span></span><br><span class="line">print(p1.name)  <span class="comment"># Alice</span></span><br><span class="line"></span><br><span class="line">p3 = Person(name=<span class="string">&quot;Bob&quot;</span>, age=<span class="number">25</span>)</span><br><span class="line">print(p1 &lt; p3)  <span class="comment"># True, because of the order=True parameter</span></span><br><span class="line"></span><br><span class="line">print(p1.height)  <span class="comment"># Random height between 150 and 200</span></span><br><span class="line"></span><br><span class="line">print(Person.count)  <span class="comment"># Number of Person instances created</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span>:</span></span><br><span class="line">    debug: <span class="built_in">bool</span> = <span class="literal">False</span></span><br><span class="line">    database_url: <span class="built_in">str</span> = <span class="string">&quot;sqlite:///:memory:&quot;</span></span><br><span class="line">    max_connections: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APIResponse</span>:</span></span><br><span class="line">    status_code: <span class="built_in">int</span></span><br><span class="line">    data: <span class="built_in">dict</span></span><br><span class="line">    headers: <span class="built_in">dict</span> = field(default_factory=<span class="built_in">dict</span>)</span><br><span class="line">    success: <span class="built_in">bool</span> = field(init=<span class="literal">False</span>)</span><br><span class="line">    timestamp: datetime = field(default_factory=datetime.now)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__post_init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.success = <span class="number">200</span> &lt;= self.status_code &lt; <span class="number">300</span></span><br></pre></td></tr></table></figure>
<p>frozen=True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">frozen=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    calories: <span class="built_in">float</span> = <span class="number">10</span></span><br><span class="line"></span><br><span class="line">banana = Fruit(<span class="string">&quot;Banana&quot;</span>)</span><br><span class="line">print(banana)</span><br><span class="line"></span><br><span class="line">banana.calories = <span class="number">30</span> <span class="comment"># dataclasses.FrozenInstanceError: cannot assign to field &#x27;calories&#x27;</span></span><br></pre></td></tr></table></figure>
<p>slots=True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">slots=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    calories: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apple = Fruit(<span class="string">&quot;Apple&quot;</span>, <span class="number">20</span>)</span><br><span class="line">print(apple)</span><br><span class="line">print(apple.__dict__) <span class="comment"># AttributeError: &#x27;Fruit&#x27; object has no attribute &#x27;__dict__&#x27;</span></span><br></pre></td></tr></table></figure>
<p>kw_only=True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">kw_only=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    calories: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apple = Fruit(name=<span class="string">&quot;Apple&quot;</span>, calories=<span class="number">20</span>)</span><br><span class="line">print(apple)</span><br><span class="line"><span class="comment"># apple = Fruit(&quot;Apple&quot;, 20) # TypeError: Fruit.__init__() takes 1 positional argument but 3 were given</span></span><br></pre></td></tr></table></figure>
<p>order=True</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">order=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    calories: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apple = Fruit(<span class="string">&quot;Apple&quot;</span>, <span class="number">20</span>)</span><br><span class="line">orange = Fruit(<span class="string">&quot;Orange&quot;</span>, <span class="number">20</span>)</span><br><span class="line">print(apple &lt; orange) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<p>__post_init__</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> InitVar, dataclass, field</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    grams: <span class="built_in">float</span></span><br><span class="line">    cost_per_kg: <span class="built_in">float</span></span><br><span class="line">    is_rare: InitVar[<span class="built_in">bool</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Caculate later</span></span><br><span class="line">    total_value: <span class="built_in">float</span> = field(init=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__post_init__</span>(<span class="params">self, is_rare: <span class="built_in">bool</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.total_value = (self.grams / <span class="number">1000</span>) * self.cost_per_kg</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> is_rare:</span><br><span class="line">            self.total_value *= <span class="number">2</span></span><br><span class="line">            self.cost_per_kg *= <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apple: Fruit = Fruit(<span class="string">&quot;Apple&quot;</span>, <span class="number">2500</span>, <span class="number">3</span>)</span><br><span class="line">print(apple) <span class="comment"># Fruit(name=&#x27;Apple&#x27;, grams=2500, cost_per_kg=3, total_value=7.5)</span></span><br><span class="line"></span><br><span class="line">orange: Fruit = Fruit(<span class="string">&quot;Orange&quot;</span>, <span class="number">2000</span>, <span class="number">3</span>, is_rare=<span class="literal">True</span>)</span><br><span class="line">print(orange) <span class="comment"># Fruit(name=&#x27;Orange&#x27;, grams=2000, cost_per_kg=6, total_value=12.0)</span></span><br></pre></td></tr></table></figure>
<p>field default_factory</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">import</span> string</span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, field</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">kw_only=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    address: <span class="built_in">str</span></span><br><span class="line">    active: <span class="built_in">bool</span> = <span class="literal">True</span></span><br><span class="line">    <span class="comment"># email_addresses: list[str] = [] #ValueError: mutable default &lt;class &#x27;list&#x27;&gt; for field email_addresses is not allowed: use default_factory</span></span><br><span class="line">    email_addresses: <span class="built_in">list</span>[<span class="built_in">str</span>] = field(default_factory=<span class="built_in">list</span>)</span><br><span class="line">    <span class="built_in">id</span>: <span class="built_in">str</span> = field(init=<span class="literal">False</span>, default_factory=<span class="keyword">lambda</span>: <span class="string">&quot;&quot;</span>.join(random.choices(string.ascii_uppercase, k=<span class="number">12</span>)))</span><br><span class="line">    search_string: <span class="built_in">str</span> = field(init=<span class="literal">False</span>, <span class="built_in">repr</span>=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__post_init__</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.search_string = <span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> <span class="subst">&#123;self.address&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">person = Person(name=<span class="string">&quot;Babb&quot;</span>, address=<span class="string">&quot;Newyork&quot;</span>)</span><br><span class="line">print(person) <span class="comment"># Person(name=&#x27;Babb&#x27;, address=&#x27;Newyork&#x27;, active=True, email_addresses=[], id=&#x27;MTHHVWTOYFOE&#x27;)</span></span><br><span class="line">person = Person(name=<span class="string">&quot;Babb&quot;</span>, active=<span class="literal">False</span>, address=<span class="string">&quot;Newyork&quot;</span>, email_addresses=[<span class="string">&quot;babb@abc.com&quot;</span>, <span class="string">&quot;babb@xyz.com&quot;</span>])</span><br><span class="line">print(person) <span class="comment"># Person(name=&#x27;Babb&#x27;, address=&#x27;Newyork&#x27;, active=False, email_addresses=[&#x27;babb@abc.com&#x27;, &#x27;babb@xyz.com&#x27;], id=&#x27;ZQTETEJQJAJO&#x27;)</span></span><br></pre></td></tr></table></figure>
<h3 id="property-and-descriptor"><a class="markdownIt-Anchor" href="#property-and-descriptor">#</a> property and descriptor</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> pi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, radius</span>):</span></span><br><span class="line">        self.radius = radius</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">radius</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._radius</span><br><span class="line"></span><br><span class="line"><span class="meta">    @radius.setter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">radius</span>(<span class="params">self, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (<span class="built_in">isinstance</span>(value, (<span class="built_in">int</span>, <span class="built_in">float</span>)) <span class="keyword">and</span> value &gt; <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Radius is required to be a positive number!&quot;</span>)</span><br><span class="line">        self._radius = value</span><br><span class="line"></span><br><span class="line"><span class="meta">    @radius.deleter</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">radius</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">del</span> self._radius</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">area</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> pi * self.radius * self.radius</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">c = Circle(<span class="number">1</span>)</span><br><span class="line">print(c.area)</span><br><span class="line">c.radius = <span class="number">2</span></span><br><span class="line">print(c.area)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class Rectange:</span></span><br><span class="line"><span class="comment">#     def __init__(self, width, height):</span></span><br><span class="line"><span class="comment">#         self.width = width</span></span><br><span class="line"><span class="comment">#         self.height = height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     @property</span></span><br><span class="line"><span class="comment">#     def width(self):</span></span><br><span class="line"><span class="comment">#         return self.width</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     @width.setter</span></span><br><span class="line"><span class="comment">#     def width(self, value):</span></span><br><span class="line"><span class="comment">#         if not (isinstance(value, (int, float)) and value &gt; 0):</span></span><br><span class="line"><span class="comment">#             raise ValueError(&quot;Width must be positive.&quot;)</span></span><br><span class="line"><span class="comment">#         self._width = value</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     @property</span></span><br><span class="line"><span class="comment">#     def height(self):</span></span><br><span class="line"><span class="comment">#         return self.height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     @height.setter</span></span><br><span class="line"><span class="comment">#     def height(self, value):</span></span><br><span class="line"><span class="comment">#         if not (isinstance(value, (int, float)) and value &gt; 0):</span></span><br><span class="line"><span class="comment">#             raise ValueError(&quot;Height must be positive.&quot;)</span></span><br><span class="line"><span class="comment">#         self._height = value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class PositiveNumber:</span></span><br><span class="line"><span class="comment">#     def __get__(self, instance, owner):</span></span><br><span class="line"><span class="comment">#         return 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     # def __set__(self, instance, value):</span></span><br><span class="line"><span class="comment">#     #     pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class Rectangle:</span></span><br><span class="line"><span class="comment">#     width = PositiveNumber()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     def __init__(self, width, height):</span></span><br><span class="line"><span class="comment">#         self.width = width</span></span><br><span class="line"><span class="comment">#         self.height = height</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># r = Rectangle(2, 2)</span></span><br><span class="line"><span class="comment"># print(r.width)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class PositiveNumber:</span></span><br><span class="line"><span class="comment">#     def __get__(self, instance, owner):</span></span><br><span class="line"><span class="comment">#         return instance._width</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     def __set__(self, instance, value):</span></span><br><span class="line"><span class="comment">#         if not (isinstance(value, (int, float)) and value &gt; 0):</span></span><br><span class="line"><span class="comment">#             raise ValueError(&quot;Width must be positive.&quot;)</span></span><br><span class="line"><span class="comment">#         instance._width = value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># class Rectangle:</span></span><br><span class="line"><span class="comment">#     width = PositiveNumber()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     def __init__(self, width, height):</span></span><br><span class="line"><span class="comment">#         self.width = width</span></span><br><span class="line"><span class="comment">#         self.height = height</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PositiveNumber</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set_name__</span>(<span class="params">self, owner, name</span>):</span></span><br><span class="line">        self.private_name = <span class="string">f&quot;_<span class="subst">&#123;name&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get__</span>(<span class="params">self, instance, owner</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">getattr</span>(instance, self.private_name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__set__</span>(<span class="params">self, instance, value</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> (<span class="built_in">isinstance</span>(value, (<span class="built_in">int</span>, <span class="built_in">float</span>)) <span class="keyword">and</span> value &gt; <span class="number">0</span>):</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;self.private_name[<span class="number">1</span>:].capitalize()&#125;</span> must be positive.&quot;</span>)</span><br><span class="line">        <span class="built_in">setattr</span>(instance, self.private_name, value)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></span><br><span class="line">    width = PositiveNumber()</span><br><span class="line">    height = PositiveNumber()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, width, height</span>):</span></span><br><span class="line">        self.width = width</span><br><span class="line">        self.height = height</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">r = Rectangle(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">print(r.width, r.height)</span><br><span class="line">r.height = -<span class="number">1</span></span><br><span class="line">r.width = -<span class="number">1</span></span><br></pre></td></tr></table></figure>
<h3 id="enum"><a class="markdownIt-Anchor" href="#enum">#</a> enum</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum, IntEnum, StrEnum, auto</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    RED = <span class="number">1</span></span><br><span class="line">    GREEN = <span class="number">2</span></span><br><span class="line">    BLUE = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_members</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">for</span> color <span class="keyword">in</span> cls:</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;color.name&#125;</span> = <span class="subst">&#123;color.value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Color.print_members()</span><br><span class="line">print(<span class="built_in">type</span>(Color.RED))  <span class="comment"># &lt;enum &#x27;Color&#x27;&gt;</span></span><br><span class="line">print(Color.RED.name)  <span class="comment"># RED</span></span><br><span class="line">print(Color.RED.value)  <span class="comment"># 1</span></span><br><span class="line">print(Color.RED == Color(<span class="number">1</span>))  <span class="comment"># True</span></span><br><span class="line">print(Color.RED == <span class="number">1</span>)  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IntColor</span>(<span class="params">IntEnum</span>):</span></span><br><span class="line">    RED = <span class="number">1</span></span><br><span class="line">    GREEN = <span class="number">2</span></span><br><span class="line">    BLUE = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_members</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">for</span> color <span class="keyword">in</span> cls:</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;color.name&#125;</span> = <span class="subst">&#123;color.value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IntColor.print_members()</span><br><span class="line">print(IntColor.RED == <span class="number">1</span>)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StrColor</span>(<span class="params">StrEnum</span>):</span></span><br><span class="line">    RED = <span class="string">&quot;red&quot;</span></span><br><span class="line">    GREEN = <span class="string">&quot;green&quot;</span></span><br><span class="line">    BLUE = <span class="string">&quot;blue&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_members</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">for</span> color <span class="keyword">in</span> cls:</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;color.name&#125;</span> = <span class="subst">&#123;color.value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">StrColor.print_members()</span><br><span class="line">print(StrColor.RED == <span class="string">&quot;red&quot;</span>)  <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AutoColor</span>(<span class="params">StrEnum</span>):</span></span><br><span class="line">    RED = auto()</span><br><span class="line">    GREEN = auto()</span><br><span class="line">    BLUE = auto()</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print_members</span>(<span class="params">cls</span>):</span></span><br><span class="line">        <span class="keyword">for</span> color <span class="keyword">in</span> cls:</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;color.name&#125;</span> = <span class="subst">&#123;color.value&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">AutoColor.print_members()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HTTPStatus</span>(<span class="params">IntEnum</span>):</span></span><br><span class="line">    OK = <span class="number">200</span></span><br><span class="line">    NOT_FOUND = <span class="number">404</span></span><br><span class="line">    INTERNAL_SERVER_ERROR = <span class="number">500</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">handle_http_status</span>(<span class="params">status: HTTPStatus</span>):</span></span><br><span class="line">    <span class="keyword">if</span> status == HTTPStatus.OK:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Success&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> status == HTTPStatus.NOT_FOUND:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Not Found&quot;</span></span><br><span class="line">    <span class="keyword">elif</span> status == HTTPStatus.INTERNAL_SERVER_ERROR:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Server Error&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Unknown Status&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Light</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, color: Color</span>):</span></span><br><span class="line">        self.color = color</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">light = Light(Color.RED)</span><br><span class="line">print(light.color)</span><br></pre></td></tr></table></figure>
<p>enum aliases</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    red = <span class="number">1</span></span><br><span class="line">    crimson = <span class="number">1</span></span><br><span class="line">    carmine = <span class="number">1</span></span><br><span class="line">    blue = <span class="number">2</span></span><br><span class="line">    aquamarine = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">list</span>(Color)) <span class="comment"># [&lt;Color.red: 1&gt;, &lt;Color.blue: 2&gt;]</span></span><br><span class="line">print(Color.crimson, Color.carmine, Color.aquamarine) <span class="comment"># Color.red Color.red Color.blue</span></span><br><span class="line">print(Color.carmine <span class="keyword">is</span> Color.red) <span class="comment"># True</span></span><br><span class="line">print(Color(<span class="number">1</span>), Color[<span class="string">&quot;crimson&quot;</span>]) <span class="comment"># Color.red Color.red</span></span><br><span class="line">print(Color.crimson <span class="keyword">in</span> Color, <span class="number">1</span> <span class="keyword">in</span> Color) <span class="comment"># True True</span></span><br><span class="line">print(Color.__members__) <span class="comment"># &#123;&#x27;red&#x27;: &lt;Color.red: 1&gt;, &#x27;crimson&#x27;: &lt;Color.red: 1&gt;, &#x27;carmine&#x27;: &lt;Color.red: 1&gt;, &#x27;blue&#x27;: &lt;Color.blue: 2&gt;, &#x27;aquamarine&#x27;: &lt;Color.blue: 2&gt;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ensuring No Aliases</span></span><br><span class="line"><span class="keyword">import</span> enum</span><br><span class="line"></span><br><span class="line"><span class="comment"># ValueError: duplicate values found in &lt;enum &#x27;Color&#x27;&gt;: crimson -&gt; red, carmine -&gt; red, aquamarine -&gt; blue</span></span><br><span class="line"><span class="meta">@enum.unique</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    red = <span class="number">1</span></span><br><span class="line">    crimson = <span class="number">1</span></span><br><span class="line">    carmine = <span class="number">1</span></span><br><span class="line">    blue = <span class="number">2</span></span><br><span class="line">    aquamarine = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>Extending Custom Enumerations</p>
<p>We can also extend (subclass) our custom enumerations - but only under certain circumstances: as long as the enumeration we are extending does not define any <strong>members</strong>:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    RED = <span class="number">1</span></span><br><span class="line">    GREEN = <span class="number">2</span></span><br><span class="line">    BLUE = <span class="number">3</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ColorAlpha</span>(<span class="params">Color</span>):</span></span><br><span class="line">        ALPHA = <span class="number">4</span></span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> ex:</span><br><span class="line">    print(ex) <span class="comment"># Cannot extend enumerations</span></span><br></pre></td></tr></table></figure>
<p>But this would work:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ColorBase</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hello</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;<span class="subst">&#123;<span class="built_in">str</span>(self)&#125;</span> says hello!&#x27;</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Color</span>(<span class="params">ColorBase</span>):</span></span><br><span class="line">    RED = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    GREEN = <span class="string">&#x27;green&#x27;</span></span><br><span class="line">    BLUE = <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">    </span><br><span class="line">print(Color.RED.hello()) <span class="comment"># Color.RED says hello!</span></span><br></pre></td></tr></table></figure>
<p>Custom OrderedEnum</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> total_ordering</span><br><span class="line"></span><br><span class="line"><span class="meta">@total_ordering</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OrderedEnum</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;Creates an ordering based on the member values. </span></span><br><span class="line"><span class="string">    So member values have to support rich comparisons.</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__lt__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(other, OrderedEnum):</span><br><span class="line">            <span class="keyword">return</span> self.value &lt; other.value</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NotImplemented</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Number</span>(<span class="params">OrderedEnum</span>):</span></span><br><span class="line">    ONE = <span class="number">1</span></span><br><span class="line">    TWO = <span class="number">2</span></span><br><span class="line">    THREE = <span class="number">3</span></span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dimension</span>(<span class="params">OrderedEnum</span>):</span></span><br><span class="line">    D1 = <span class="number">1</span>,</span><br><span class="line">    D2 = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    D3 = <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(Number.ONE &lt; Number.THREE, Number.ONE &gt;= Number.ONE) <span class="comment"># True True</span></span><br><span class="line">print(Dimension.D1 &lt; Dimension.D3, Dimension.D1 &gt;= Dimension.D2) <span class="comment"># True False</span></span><br></pre></td></tr></table></figure>
<p>Custom TwoValueEnum</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TwoValueEnum</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span>(<span class="params">cls, member_value, member_phrase</span>):</span></span><br><span class="line">        <span class="comment"># create a new instance of cls</span></span><br><span class="line">        member = <span class="built_in">object</span>.__new__(cls)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># set up instance attributes</span></span><br><span class="line">        member._value_ = member_value  <span class="comment"># Set the value property - Enum has a special class attribute we can use, called _value_.</span></span><br><span class="line">        member.phrase = member_phrase</span><br><span class="line">        <span class="keyword">return</span> member</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AppStatus</span>(<span class="params">TwoValueEnum</span>):</span></span><br><span class="line">    OK = (<span class="number">0</span>, <span class="string">&#x27;No Problem!&#x27;</span>)</span><br><span class="line">    FAILED = (<span class="number">1</span>, <span class="string">&#x27;Crap!&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(AppStatus.FAILED, AppStatus.FAILED.name, AppStatus.FAILED.value, AppStatus.FAILED.phrase) <span class="comment"># AppStatus.FAILED FAILED 1 Crap!</span></span><br></pre></td></tr></table></figure>
<h3 id="abstract-class"><a class="markdownIt-Anchor" href="#abstract-class">#</a> abstract class</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span>(<span class="params">ABC</span>):</span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enroll</span>(<span class="params">self, student</span>):</span></span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;student&#125;</span> enrolled in the Course.&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MathCourse</span>(<span class="params">Course</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enroll</span>(<span class="params">self, student</span>):</span></span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;student&#125;</span> enrolled in the Math Course.&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HistoryCourse</span>(<span class="params">Course</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">enroll</span>(<span class="params">self, student</span>):</span></span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;student&#125;</span> enrolled in the History Course.&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">courses = [MathCourse(), HistoryCourse()]</span><br><span class="line"><span class="keyword">for</span> course <span class="keyword">in</span> courses:</span><br><span class="line">    course.enroll(<span class="string">&quot;Alice&quot;</span>)</span><br><span class="line">    course.enroll(<span class="string">&quot;Bob&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Alice enrolled in the Math Course.</span></span><br><span class="line"><span class="comment"># Bob enrolled in the Math Course.</span></span><br><span class="line"><span class="comment"># Alice enrolled in the History Course.</span></span><br><span class="line"><span class="comment"># Bob enrolled in the History Course.</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC, abstractmethod</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span>(<span class="params">ABC</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name: <span class="built_in">str</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sound</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>(<span class="params">Animal</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name: <span class="built_in">str</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        <span class="built_in">super</span>().__init__(name)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sound</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        print(<span class="string">&quot;Meow!&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">move</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        print(<span class="string">&quot;Paw paw paw...&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cat: Cat = Cat(<span class="string">&quot;Tom&quot;</span>)</span><br><span class="line">cat.sound() <span class="comment"># Meow!</span></span><br><span class="line">cat.move() <span class="comment"># Paw paw paw...</span></span><br></pre></td></tr></table></figure>
<h3 id="bultin-type-constructor-without-parameter"><a class="markdownIt-Anchor" href="#bultin-type-constructor-without-parameter">#</a> bultin type constructor without parameter</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="built_in">int</span>()) <span class="comment"># 0</span></span><br><span class="line">print(<span class="built_in">bool</span>()) <span class="comment"># False</span></span><br><span class="line">print(<span class="built_in">repr</span>(<span class="built_in">str</span>())) <span class="comment"># &#x27;&#x27;</span></span><br><span class="line">print(<span class="built_in">list</span>()) <span class="comment"># []</span></span><br><span class="line">print(<span class="built_in">set</span>()) <span class="comment"># set()</span></span><br><span class="line">print(<span class="built_in">dict</span>()) <span class="comment"># &#123;&#125;</span></span><br><span class="line">print(<span class="built_in">tuple</span>()) <span class="comment"># ()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="comment"># d: defaultdict[str, int] = defaultdict(lambda: 0)</span></span><br><span class="line">d: defaultdict[<span class="built_in">str</span>, <span class="built_in">int</span>] = defaultdict(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">print(d[<span class="string">&quot;a&quot;</span>])  <span class="comment"># 0</span></span><br></pre></td></tr></table></figure>
<h3 id="keyword-and-soft-keyword"><a class="markdownIt-Anchor" href="#keyword-and-soft-keyword">#</a> keyword and soft keyword</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> keyword</span><br><span class="line"></span><br><span class="line">print(keyword.softkwlist)</span><br><span class="line">print(keyword.kwlist)</span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;_&#x27;, &#x27;case&#x27;, &#x27;match&#x27;, &#x27;type&#x27;] 4</span></span><br><span class="line"><span class="comment"># [&#x27;False&#x27;, &#x27;None&#x27;, &#x27;True&#x27;, &#x27;and&#x27;, &#x27;as&#x27;, &#x27;assert&#x27;, &#x27;async&#x27;, &#x27;await&#x27;, &#x27;break&#x27;, &#x27;class&#x27;, &#x27;continue&#x27;, &#x27;def&#x27;, &#x27;del&#x27;, &#x27;elif&#x27;, &#x27;else&#x27;, &#x27;except&#x27;, &#x27;finally&#x27;, &#x27;for&#x27;, &#x27;from&#x27;, &#x27;global&#x27;, &#x27;if&#x27;, &#x27;import&#x27;, &#x27;in&#x27;, &#x27;is&#x27;, &#x27;lambda&#x27;, &#x27;nonlocal&#x27;, &#x27;not&#x27;, &#x27;or&#x27;, &#x27;pass&#x27;, &#x27;raise&#x27;, &#x27;return&#x27;, &#x27;try&#x27;, &#x27;while&#x27;, &#x27;with&#x27;, &#x27;yield&#x27;] 35</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># self is not keyword</span></span><br><span class="line">self = <span class="string">&quot;self&quot;</span></span><br><span class="line">this = self</span><br><span class="line">print(this) <span class="comment"># self</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match is soft keyword</span></span><br><span class="line">match = <span class="string">&quot;match&quot;</span></span><br><span class="line">switch = match</span><br><span class="line">print(switch) <span class="comment"># match</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># as is keyword</span></span><br><span class="line"><span class="keyword">as</span> = <span class="number">10</span>  <span class="comment"># SyntaxError: invalid syntax</span></span><br><span class="line">print(<span class="keyword">as</span>) <span class="comment"># SyntaxError: invalid syntax</span></span><br></pre></td></tr></table></figure>
<h3 id="class-arribute-and-instance-arribute"><a class="markdownIt-Anchor" href="#class-arribute-and-instance-arribute">#</a> class arribute and instance arribute</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span>:</span></span><br><span class="line">    fuel_type: <span class="built_in">str</span> = <span class="string">&quot;electric&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, brand: <span class="built_in">str</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.brand = brand</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">bmw: Car = Car(<span class="string">&quot;BMW&quot;</span>)</span><br><span class="line">print(bmw.__dict__) <span class="comment"># &#123;&#x27;brand&#x27;: &#x27;BMW&#x27;&#125;</span></span><br><span class="line">print(bmw.fuel_type) <span class="comment"># electric  instance -&gt; class</span></span><br><span class="line"></span><br><span class="line">bmw.fuel_type = <span class="string">&quot;disel&quot;</span> <span class="comment"># add to instance attribute, not effect class attribute</span></span><br><span class="line">print(Car.fuel_type) <span class="comment"># &quot;disel&quot;</span></span><br><span class="line">print(bmw.__dict__) <span class="comment"># &#123;&#x27;brand&#x27;: &#x27;BMW&#x27;, &#x27;fuel_type&#x27;: &#x27;disel&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="__slots__"><a class="markdownIt-Anchor" href="#__slots__">#</a> __slots__</h3>
<blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly93aWtpLnB5dGhvbi5vcmcvbW9pbi9Vc2luZ1Nsb3Rz">UsingSlots</span></p>
</blockquote>
<p>Why Use  <code>__slots__</code> ? The short answer is slots are more efficient in terms of memory space and speed of access, and a bit safer than the default Python method of data access. By default, when Python creates a new instance of a class, it creates a  <code>__dict__</code>  attribute for the class. The  <code>__dict__</code>  attribute is a dictionary whose keys are the variable names and whose values are the variable values. This allows for dynamic variable creation but can also lead to uncaught errors. For example, with the default  <code>__dict__</code> , a misspelled variable name results in the creation of a new variable, but with  <code>__slots__</code>  it raises in an <span class="exturl" data-url="aHR0cHM6Ly93aWtpLnB5dGhvbi5vcmcvbW9pbi9BdHRyaWJ1dGVFcnJvcg==">AttributeError</span>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Location</span>:</span></span><br><span class="line">    __slots__ = <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;_longitude&#x27;</span>, <span class="string">&#x27;_latitude&#x27;</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, longitude, latitude</span>):</span></span><br><span class="line">        self._longitude = longitude</span><br><span class="line">        self._latitude = latitude</span><br><span class="line">        self.name = name</span><br><span class="line">        </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">longitude</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._longitude</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">latitude</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._latitude</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">print(Location.__dict__) <span class="comment"># &#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__firstlineno__&#x27;: 383, &#x27;__slots__&#x27;: (&#x27;name&#x27;, &#x27;_longitude&#x27;, &#x27;_latitude&#x27;), &#x27;__init__&#x27;: &lt;function Location.__init__ at 0x000001C3F4198860&gt;, &#x27;longitude&#x27;: &lt;property object at 0x000001C3F41F6840&gt;, &#x27;latitude&#x27;: &lt;property object at 0x000001C3F421F9C0&gt;, &#x27;__static_attributes__&#x27;: (&#x27;_latitude&#x27;, &#x27;_longitude&#x27;, &#x27;name&#x27;), &#x27;_latitude&#x27;: &lt;member &#x27;_latitude&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;_longitude&#x27;: &lt;member &#x27;_longitude&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;name&#x27;: &lt;member &#x27;name&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;__doc__&#x27;: None&#125;</span></span><br><span class="line">Location.map_service = <span class="string">&quot;Google Maps&quot;</span></span><br><span class="line">print(Location.__dict__) <span class="comment"># &#123;&#x27;__module__&#x27;: &#x27;__main__&#x27;, &#x27;__firstlineno__&#x27;: 383, &#x27;__slots__&#x27;: (&#x27;name&#x27;, &#x27;_longitude&#x27;, &#x27;_latitude&#x27;), &#x27;__init__&#x27;: &lt;function Location.__init__ at 0x000001C3F4198860&gt;, &#x27;longitude&#x27;: &lt;property object at 0x000001C3F41F6840&gt;, &#x27;latitude&#x27;: &lt;property object at 0x000001C3F421F9C0&gt;, &#x27;__static_attributes__&#x27;: (&#x27;_latitude&#x27;, &#x27;_longitude&#x27;, &#x27;name&#x27;), &#x27;_latitude&#x27;: &lt;member &#x27;_latitude&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;_longitude&#x27;: &lt;member &#x27;_longitude&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;name&#x27;: &lt;member &#x27;name&#x27; of &#x27;Location&#x27; objects&gt;, &#x27;__doc__&#x27;: None, &#x27;map_service&#x27;: &#x27;Google Maps&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line">l = Location(<span class="string">&#x27;Mumbai&#x27;</span>, <span class="number">19.0760</span>, <span class="number">72.8777</span>)</span><br><span class="line">print(l.name, l.longitude, l.latitude) <span class="comment"># Mumbai 19.076 72.8777</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    l.__dict__</span><br><span class="line"><span class="keyword">except</span> AttributeError <span class="keyword">as</span> ex:</span><br><span class="line">    print(ex) <span class="comment"># &#x27;Location&#x27; object has no attribute &#x27;__dict__&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    l.map_link = <span class="string">&#x27;http://maps.google.com/...&#x27;</span></span><br><span class="line"><span class="keyword">except</span> AttributeError <span class="keyword">as</span> ex:</span><br><span class="line">    print(ex) <span class="comment"># &#x27;Location&#x27; object has no attribute &#x27;map_link&#x27; and no __dict__ for setting new attributes</span></span><br></pre></td></tr></table></figure>
<p>dataclass use slots</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">slots=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    calories: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">apple = Fruit(<span class="string">&quot;Apple&quot;</span>, <span class="number">20</span>)</span><br><span class="line">print(apple)</span><br><span class="line">print(apple.__dict__) <span class="comment"># AttributeError: &#x27;Fruit&#x27; object has no attribute &#x27;__dict__&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="private-attribute"><a class="markdownIt-Anchor" href="#private-attribute">#</a> private attribute</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> uuid <span class="keyword">import</span> uuid4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self._id = uuid4()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_get_id</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._id</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">user = User()</span><br><span class="line">print(user._get_id(), user._id) <span class="comment"># 940a4375-027a-4cee-9f90-2259ca27d2f5 940a4375-027a-4cee-9f90-2259ca27d2f5</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.__id = uuid4()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__get_id</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__id</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">user = User()</span><br><span class="line"><span class="comment"># print(user.__id) # AttributeError: &#x27;User&#x27; object has no attribute &#x27;__id&#x27;</span></span><br><span class="line"><span class="comment"># print(user.__get_id()) # AttributeError: &#x27;User&#x27; object has no attribute &#x27;__get_id&#x27;</span></span><br><span class="line">print(user.__dict__) <span class="comment"># &#123;&#x27;_User__id&#x27;: UUID(&#x27;e02b8b86-862c-4ed0-ba1b-147f5660058e&#x27;)&#125;</span></span><br><span class="line">print(user._User__id, user._User__get_id()) <span class="comment"># e02b8b86-862c-4ed0-ba1b-147f5660058e e02b8b86-862c-4ed0-ba1b-147f5660058e</span></span><br></pre></td></tr></table></figure>
<h3 id="__format__"><a class="markdownIt-Anchor" href="#__format__">#</a> __format__</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Self</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, *, name: <span class="built_in">str</span>, grams: <span class="built_in">float</span></span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.grams = grams</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__format__</span>(<span class="params">self, format_spec: <span class="built_in">str</span></span>) -&gt; str:</span></span><br><span class="line">        match format_spec:</span><br><span class="line">            case <span class="string">&quot;kg&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.grams / <span class="number">1000</span>:<span class="number">.2</span>f&#125;</span>kg&quot;</span></span><br><span class="line">            case <span class="string">&quot;lb&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.grams / <span class="number">453.5924</span>:<span class="number">.2</span>f&#125;</span>lb&quot;</span></span><br><span class="line">            case <span class="string">&quot;desc&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.grams&#125;</span>g of <span class="subst">&#123;self.name&#125;</span>&quot;</span></span><br><span class="line">            case _:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">&quot;Unknown format specifier...&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other: Self</span>) -&gt; bool:</span></span><br><span class="line">        <span class="keyword">return</span> self.__dict__ == other.__dict__</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__or__</span>(<span class="params">self, other: Self</span>) -&gt; Self:</span></span><br><span class="line">        new_name: <span class="built_in">str</span> = <span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> &amp; <span class="subst">&#123;other.name&#125;</span>&quot;</span></span><br><span class="line">        new_grams: <span class="built_in">float</span> = self.grams + other.grams</span><br><span class="line">        <span class="keyword">return</span> Fruit(name=new_name, grams=new_grams)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Fruit(name=<span class="subst">&#123;self.name&#125;</span>, grams=<span class="subst">&#123;self.grams&#125;</span>)&quot;</span></span><br><span class="line">    </span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;f1:kg&#125;</span>&quot;</span>) <span class="comment"># 1.20kg</span></span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;f1:lb&#125;</span>&quot;</span>) <span class="comment"># 2.65lb</span></span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;f1:desc&#125;</span>&quot;</span>) <span class="comment"># 1200g of Apple</span></span><br><span class="line"></span><br><span class="line">f1 = Fruit(name=<span class="string">&quot;Apple&quot;</span>, grams=<span class="number">1200</span>)</span><br><span class="line">f2 = Fruit(name=<span class="string">&quot;Apple&quot;</span>, grams=<span class="number">1200</span>)</span><br><span class="line">print(f1 == f2) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">f3 = Fruit(name=<span class="string">&quot;Orange&quot;</span>, grams=<span class="number">2200</span>)</span><br><span class="line">print(f1 | f3) <span class="comment"># Fruit(name=Apple &amp; Orange, grams=3400)</span></span><br></pre></td></tr></table></figure>
<h3 id="__getitem__"><a class="markdownIt-Anchor" href="#__getitem__">#</a> __getitem__</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass(<span class="params">kw_only=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span>:</span></span><br><span class="line">    name: <span class="built_in">str</span></span><br><span class="line">    grames: <span class="built_in">float</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Basket</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, *, fruits: <span class="built_in">list</span>[Fruit]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">        self.fruits = fruits</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, fruit_name: <span class="built_in">str</span></span>) -&gt; list[Fruit]:</span></span><br><span class="line">        <span class="keyword">return</span> [fruit <span class="keyword">for</span> fruit <span class="keyword">in</span> self.fruits <span class="keyword">if</span> fruit.name.lower() == fruit_name.lower() ]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fruits: <span class="built_in">list</span>[Fruit] = [Fruit(name=<span class="string">&quot;Apple&quot;</span>, grames=<span class="number">2500</span>),</span><br><span class="line">                       Fruit(name=<span class="string">&quot;Apple&quot;</span>, grames=<span class="number">1500</span>),</span><br><span class="line">                       Fruit(name=<span class="string">&quot;Orange&quot;</span>, grames=<span class="number">2500</span>),</span><br><span class="line">                       Fruit(name=<span class="string">&quot;Apple&quot;</span>, grames=<span class="number">2500</span>),</span><br><span class="line">                       Fruit(name=<span class="string">&quot;Banana&quot;</span>, grames=<span class="number">500</span>),]</span><br><span class="line"></span><br><span class="line">basket: Basket = Basket(fruits=fruits)</span><br><span class="line">apples = basket[<span class="string">&quot;apple&quot;</span>]</span><br><span class="line">print(apples) <span class="comment"># [Fruit(name=&#x27;Apple&#x27;, grames=2500), Fruit(name=&#x27;Apple&#x27;, grames=1500), Fruit(name=&#x27;Apple&#x27;, grames=2500)]</span></span><br></pre></td></tr></table></figure>
<h3 id="typing"><a class="markdownIt-Anchor" href="#typing">#</a> typing</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations  <span class="comment">#  type checking after reading the whole file</span></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Callable, Literal, TypeVar, Sequence, Optional</span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">        self,</span></span></span><br><span class="line"><span class="function"><span class="params">        name: <span class="built_in">str</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        birthdate: datetime | <span class="built_in">str</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">        sex: Literal[<span class="string">&quot;M&quot;</span>, <span class="string">&quot;F&quot;</span>],</span></span></span><br><span class="line"><span class="function"><span class="params">        courses: <span class="built_in">list</span>[<span class="built_in">str</span>],</span></span></span><br><span class="line"><span class="function"><span class="params">        scores: <span class="built_in">dict</span>[<span class="built_in">str</span>, <span class="built_in">float</span>],</span></span></span><br><span class="line"><span class="function"><span class="params">        location: <span class="built_in">tuple</span>[<span class="built_in">float</span>, <span class="built_in">float</span>] | <span class="literal">None</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">    </span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.birthdate = birthdate</span><br><span class="line">        self.sex = sex</span><br><span class="line">        self.courses = courses</span><br><span class="line">        self.scores = scores</span><br><span class="line">        self.location = location</span><br><span class="line"></span><br><span class="line">    <span class="comment"># def follow(self, other: &quot;Student&quot;):</span></span><br><span class="line">    <span class="comment">#     pass</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">follow</span>(<span class="params">self, other: Student</span>):</span>  <span class="comment">#  from __future__ import annotations</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = Student(</span><br><span class="line">    name=<span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">    birthdate=<span class="string">&quot;2000-01-01&quot;</span>,</span><br><span class="line">    sex=<span class="string">&quot;F&quot;</span>,</span><br><span class="line">    courses=[<span class="string">&quot;Math&quot;</span>, <span class="string">&quot;Science&quot;</span>],</span><br><span class="line">    scores=&#123;<span class="string">&quot;Math&quot;</span>: <span class="number">95.5</span>&#125;,</span><br><span class="line">    location=(<span class="number">40.7128</span>, -<span class="number">74.0060</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Be liberal in what you accept and conservative in what you send</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_names</span>(<span class="params">names: Iterable[<span class="built_in">str</span>]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">        print(name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_names([<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>])</span><br><span class="line">print_names((<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">x: <span class="built_in">int</span>, y: <span class="built_in">int</span></span>) -&gt; int:</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">callable</span>: Callable[[<span class="built_in">int</span>, <span class="built_in">int</span>], <span class="built_in">int</span>] = add</span><br><span class="line">print(<span class="built_in">callable</span>(<span class="number">2</span>, <span class="number">3</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply_function</span>(<span class="params">func: Callable[[<span class="built_in">int</span>, <span class="built_in">int</span>], <span class="built_in">int</span>], x: <span class="built_in">int</span>, y: <span class="built_in">int</span></span>) -&gt; int:</span></span><br><span class="line">    <span class="keyword">return</span> func(x, y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(apply_function(add, <span class="number">5</span>, <span class="number">7</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def add_two_items[T: (int, str)](a: T, b: T) -&gt; T:</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">U = TypeVar(<span class="string">&quot;U&quot;</span>, <span class="built_in">int</span>, <span class="built_in">str</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_two_items_again</span>(<span class="params">a: U, b: U</span>) -&gt; U:</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(add_two_items(<span class="number">1</span>, <span class="number">2</span>))  <span class="comment">#  Outputs: 3</span></span><br><span class="line">print(add_two_items(<span class="string">&quot;Hello, &quot;</span>, <span class="string">&quot;World!&quot;</span>))  <span class="comment">#  Outputs: Hello, World!</span></span><br><span class="line"><span class="comment"># print(add_two_items(&quot;a&quot;, 1))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Num = <span class="built_in">float</span> | <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_num</span>(<span class="params">a: Num, b: Num</span>) -&gt; Optional[Num]:</span></span><br><span class="line">    <span class="keyword">if</span> a &lt;= <span class="number">0</span> <span class="keyword">or</span> b &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(add_num(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">print(add_num(<span class="number">1.1</span>, <span class="number">2.2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_num</span>(<span class="params">n: Num</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    print(n)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">result = add_num(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">    print_num(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def print_num_list(lst: list[Num]) -&gt; None:</span></span><br><span class="line"><span class="comment">#     for n in lst:</span></span><br><span class="line"><span class="comment">#         print(n)</span></span><br><span class="line"><span class="comment">#     lst.append(1.1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># int_list: list[int] = [1, 2, 3]</span></span><br><span class="line"><span class="comment"># print_num_list(int_list)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_num_list</span>(<span class="params">lst: Sequence[Num]</span>) -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> lst:</span><br><span class="line">        print(n)</span><br><span class="line">    <span class="comment"># lst.append(1.1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">int_list: <span class="built_in">list</span>[<span class="built_in">int</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">print_num_list(int_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> TypeAlias, Literal</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mode: TypeAlias = Literal[&quot;r&quot;, &quot;w&quot;, &quot;a&quot;]</span></span><br><span class="line"><span class="built_in">type</span> Mode = Literal[<span class="string">&quot;r&quot;</span>, <span class="string">&quot;w&quot;</span>, <span class="string">&quot;a&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">open_file</span>(<span class="params">file: <span class="built_in">str</span>, mode: Mode</span>) -&gt; str:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">f&quot;Reading <span class="subst">&#123;file&#125;</span> in &#x27;<span class="subst">&#123;mode&#125;</span>&#x27; mode&quot;</span></span><br><span class="line"></span><br><span class="line">print(open_file(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;r&quot;</span>))</span><br><span class="line">print(open_file(<span class="string">&quot;test.txt&quot;</span>, <span class="string">&quot;o&quot;</span>)) <span class="comment"># Argument of type &quot;Literal[&#x27;o&#x27;]&quot; cannot be assigned to parameter &quot;mode&quot; of type</span></span><br></pre></td></tr></table></figure>
<p>Never and NoReturn</p>
<p><code>Never</code>  and  <code>NoReturn</code>  have the same meaning in the type system and static type checkers treat both equivalently.</p>
<p><em>Added in version 3.6.2:</em> Added <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/typing.html#typing.NoReturn"> <code>NoReturn</code> </a>.</p>
<p><em>Added in version 3.11:</em> Added <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/typing.html#typing.Never"> <code>Never</code> </a>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> enum <span class="keyword">import</span> Enum</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Never, NoReturn</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">assert_never</span>(<span class="params">arg: Never</span>) -&gt; NoReturn:</span></span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&quot;Expected code is unreachable&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">State</span>(<span class="params">Enum</span>):</span></span><br><span class="line">    OFF = <span class="number">0</span></span><br><span class="line">    ON = <span class="number">1</span></span><br><span class="line">    LIMBO = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">state: State = State.ON</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> state == State.ON:</span><br><span class="line">    print(<span class="string">&quot;Turned on&quot;</span>)</span><br><span class="line"><span class="keyword">elif</span> state == State.OFF:</span><br><span class="line">    print(<span class="string">&quot;Turned off&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    assert_never(state)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># mypy ./test.py </span></span><br><span class="line"><span class="comment"># test.py:20: error: Argument 1 to &quot;assert_never&quot; has incompatible type &quot;Literal[State.LIMBO]&quot;; expected &quot;Never&quot;  [arg-type]</span></span><br><span class="line"><span class="comment"># Found 1 error in 1 file (checked 1 source file)</span></span><br></pre></td></tr></table></figure>
<h2 id="fun"><a class="markdownIt-Anchor" href="#fun">#</a> Fun</h2>
<h3 id="nonlocal"><a class="markdownIt-Anchor" href="#nonlocal">#</a> nonlocal</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># outside function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    message = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># nested function</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line"></span><br><span class="line">        message = <span class="string">&#x27;nonlocal&#x27;</span></span><br><span class="line">        print(<span class="string">&quot;inner:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">&quot;outer:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"></span><br><span class="line"><span class="comment"># inner: nonlocal</span></span><br><span class="line"><span class="comment"># outer: local</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># outside function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    message = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># nested function</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># declare nonlocal variable, use outer message</span></span><br><span class="line">        <span class="keyword">nonlocal</span> message</span><br><span class="line"></span><br><span class="line">        message = <span class="string">&#x27;nonlocal&#x27;</span></span><br><span class="line">        print(<span class="string">&quot;inner:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">&quot;outer:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"></span><br><span class="line"><span class="comment"># inner: nonlocal</span></span><br><span class="line"><span class="comment"># outer: nonlocal</span></span><br></pre></td></tr></table></figure>
<h3 id="imp"><a class="markdownIt-Anchor" href="#imp">#</a> imp</h3>
<p>å¦‚æœä½ çš„æ¨¡å—ä¸åœ¨ sys.pathï¼Œå¯ä»¥ä½¿ç”¨ imp æ¨¡å—ä¸­çš„æ–¹æ³• imp.load_source.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> imp</span><br><span class="line"></span><br><span class="line">imp.load_source(<span class="string">&quot;hi&quot;</span>, <span class="string">&quot;C://data/hi.py&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> hi</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥è‡ªå·±æŒ‡å®šæ¨¡å—çš„åå­—ï¼Œç›¸å½“äº import hi as hello</span></span><br><span class="line">imp.load_source(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;C://data/hi.py&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> hello</span><br></pre></td></tr></table></figure>
<p>Replace  <code>imp.load_source()</code>  in python 3.12.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> importlib.util</span><br><span class="line"><span class="keyword">import</span> importlib.machinery</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_source</span>(<span class="params">modname, filename</span>):</span></span><br><span class="line">    loader = importlib.machinery.SourceFileLoader(modname, filename)</span><br><span class="line">    spec = importlib.util.spec_from_file_location(modname, filename, loader=loader)</span><br><span class="line">    module = importlib.util.module_from_spec(spec)</span><br><span class="line">    <span class="comment"># The module is always executed and not cached in sys.modules.</span></span><br><span class="line">    <span class="comment"># Uncomment the following line to cache the module.</span></span><br><span class="line">    <span class="comment"># sys.modules[module.__name__] = module</span></span><br><span class="line">    loader.exec_module(module)</span><br><span class="line">    <span class="keyword">return</span> module</span><br></pre></td></tr></table></figure>
<h3 id="fun-__code__"><a class="markdownIt-Anchor" href="#fun-__code__">#</a> fun __code__</h3>
<p>å‡½æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ å¯¹è±¡æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œ å³å‘½åç©ºé—´ï¼Œæ¯ä¸ªå‘½åç©ºé—´å¯¹åº”ä¸€ä¸ª  <code>__code__</code>  ï¼ŒåŒ…å«å¯¹è±¡çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">a, b, c, *d, e, f</span>):</span></span><br><span class="line">    localvar = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">dir</span>(fun.__code__))</span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;co_argcount:&#x27;</span> ,fun.__code__.co_argcount)                  <span class="comment">#ä½ç½®å‚æ•°ä¸ªæ•°(a,b,c)</span></span><br><span class="line">print(<span class="string">&#x27;co_kwonlyargcount:&#x27;</span>,fun.__code__.co_kwonlyargcount)       <span class="comment">#ä»…é™å…³é”®å­—å‚æ•°ä¸ªæ•°(e,f)</span></span><br><span class="line">print(<span class="string">&#x27;all_local:&#x27;</span>,fun.__code__.co_nlocals)                      <span class="comment">#å‡½æ•°ä¸­å±€éƒ¨å‚æ•°(ä½ç½®å‚æ•°+å…³é”®å­—+å¯å˜å‚æ•°(*d) + æœ¬åœ°å˜é‡)</span></span><br><span class="line">print(<span class="string">&#x27;consts:&#x27;</span>,fun.__code__.co_consts)                          <span class="comment">#å‡½æ•°å†…éƒ¨çš„å¸¸é‡</span></span><br><span class="line">print(<span class="string">&#x27;filename:&#x27;</span>,fun.__code__.co_filename)                      <span class="comment">#å‡½æ•°æ‰€å±çš„æ–‡ä»¶</span></span><br><span class="line">print(<span class="string">&#x27;name:&#x27;</span>,fun.__code__.co_name)                              <span class="comment">#å‡½æ•°å</span></span><br><span class="line">print(<span class="string">&#x27;func_lineno:&#x27;</span>,fun.__code__.co_firstlineno)                <span class="comment">#å‡½æ•°ä½æ–¼ç¬¬å‡ è¡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;__class__&#x27;, &#x27;__delattr__&#x27;, &#x27;__dir__&#x27;, &#x27;__doc__&#x27;, &#x27;__eq__&#x27;, &#x27;__format__&#x27;, &#x27;__ge__&#x27;, &#x27;__getattribute__&#x27;, &#x27;__gt__&#x27;, &#x27;__hash__&#x27;, &#x27;__init__&#x27;, &#x27;__init_subclass__&#x27;, &#x27;__le__&#x27;, &#x27;__lt__&#x27;, &#x27;__ne__&#x27;, &#x27;__new__&#x27;, &#x27;__reduce__&#x27;, &#x27;__reduce_ex__&#x27;, &#x27;__repr__&#x27;, &#x27;__setattr__&#x27;, &#x27;__sizeof__&#x27;, &#x27;__str__&#x27;, &#x27;__subclasshook__&#x27;, &#x27;co_argcount&#x27;, &#x27;co_cellvars&#x27;, &#x27;co_code&#x27;, &#x27;co_consts&#x27;, &#x27;co_filename&#x27;, &#x27;co_firstlineno&#x27;, &#x27;co_flags&#x27;, &#x27;co_freevars&#x27;, &#x27;co_kwonlyargcount&#x27;, &#x27;co_lnotab&#x27;, &#x27;co_name&#x27;, &#x27;co_names&#x27;, &#x27;co_nlocals&#x27;, &#x27;co_stacksize&#x27;, &#x27;co_varnames&#x27;]</span></span><br><span class="line"><span class="comment"># co_argcount: 3</span></span><br><span class="line"><span class="comment"># co_kwonlyargcount: 2</span></span><br><span class="line"><span class="comment"># all_local: 7</span></span><br><span class="line"><span class="comment"># consts: (None, 1)</span></span><br><span class="line"><span class="comment"># filename: code_test.py</span></span><br><span class="line"><span class="comment"># name: fun</span></span><br><span class="line"><span class="comment"># func_lineno: 7</span></span><br></pre></td></tr></table></figure>
<h3 id="freevars"><a class="markdownIt-Anchor" href="#freevars">#</a> freevars</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_averager</span>():</span></span><br><span class="line">    series = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">averager</span>(<span class="params">new_value</span>):</span></span><br><span class="line">        series.append(new_value)</span><br><span class="line">        total = <span class="built_in">sum</span>(series)</span><br><span class="line">        <span class="keyword">return</span> total / <span class="built_in">len</span>(series)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> averager</span><br><span class="line"></span><br><span class="line">avg = make_averager()</span><br><span class="line">print(avg.__code__.co_freevars)</span><br><span class="line">print(avg.__code__.co_varnames)</span><br><span class="line"></span><br><span class="line">print(avg.__closure__)</span><br><span class="line">print(avg.__closure__[<span class="number">0</span>].cell_contents)</span><br><span class="line">avg(<span class="number">10</span>)</span><br><span class="line">avg(<span class="number">11</span>)</span><br><span class="line">print(avg.__closure__[<span class="number">0</span>].cell_contents)</span><br><span class="line"></span><br><span class="line"><span class="comment"># (&#x27;series&#x27;,)</span></span><br><span class="line"><span class="comment"># (&#x27;new_value&#x27;, &#x27;total&#x27;)</span></span><br><span class="line"><span class="comment"># (&lt;cell at 0x000001C112507618: list object at 0x000001C114148E08&gt;,)</span></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"><span class="comment"># [10, 11]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_averager_nonlocal</span>():</span></span><br><span class="line"></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">averager</span>(<span class="params">new_value</span>):</span></span><br><span class="line">        <span class="keyword">nonlocal</span> count</span><br><span class="line">        <span class="keyword">nonlocal</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="built_in">sum</span> += new_value</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span> / count</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> averager</span><br><span class="line"></span><br><span class="line">print(make_averager_nonlocal().__code__.co_freevars)</span><br><span class="line"><span class="comment"># (&#x27;count&#x27;, &#x27;sum&#x27;)</span></span><br></pre></td></tr></table></figure>
<h3 id="switch-case"><a class="markdownIt-Anchor" href="#switch-case">#</a> switch case</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">var</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">    &#125;.get(var, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">print(foo(<span class="string">&#x27;d&#x27;</span>)) <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">var, x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>: <span class="keyword">lambda</span> x: x+<span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>: <span class="keyword">lambda</span> x: <span class="built_in">str</span>(x+<span class="number">2</span>)+var,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>: <span class="keyword">lambda</span> x: x+<span class="number">3</span>,</span><br><span class="line">    &#125;[var](x)</span><br><span class="line"></span><br><span class="line">print(foo(<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>)) <span class="comment"># 4b</span></span><br></pre></td></tr></table></figure>
<h3 id="insepect"><a class="markdownIt-Anchor" href="#insepect">#</a> insepect</h3>
<p>æ‰“å°æºç ï¼Œè·å¾—å®šä¹‰æ¨¡å—ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"></span><br><span class="line">print(inspect.getsource(inspect.getsource))</span><br><span class="line">print(inspect.getmodule(inspect.getmodule))</span><br><span class="line">print(inspect.currentframe().f_lineno)</span><br><span class="line">ğŸ‘</span><br><span class="line"><span class="comment"># def getsource(object):</span></span><br><span class="line"><span class="comment">#     &quot;&quot;&quot;Return the text of the source code for an object.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     The argument may be a module, class, method, function, traceback, frame,</span></span><br><span class="line"><span class="comment">#     or code object.  The source code is returned as a single string.  An</span></span><br><span class="line"><span class="comment">#     OSError is raised if the source code cannot be retrieved.&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#     lines, lnum = getsourcelines(object)</span></span><br><span class="line"><span class="comment">#     return &#x27;&#x27;.join(lines)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;module &#x27;inspect&#x27; from &#x27;C:\\Program Files\\python36\\lib\\inspect.py&#x27;&gt;</span></span><br><span class="line"><span class="comment"># 23</span></span><br></pre></td></tr></table></figure>
<h3 id="compile-to-pyc"><a class="markdownIt-Anchor" href="#compile-to-pyc">#</a> compile to pyc</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•ä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># python -m foo.py</span></span><br><span class="line"><span class="keyword">import</span> py_compile</span><br><span class="line">py_compile.<span class="built_in">compile</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šä¸ªæ–‡ä»¶</span></span><br><span class="line"><span class="comment"># python -m compileall &lt;dir&gt;</span></span><br><span class="line"><span class="keyword">import</span> compileall</span><br><span class="line">compileall.compile_dir(<span class="built_in">dir</span>)</span><br></pre></td></tr></table></figure>
<h3 id="traceback"><a class="markdownIt-Anchor" href="#traceback">#</a> traceback</h3>
<p><code>traceback.print_exc()</code>  å¯ä»¥æ‰“å°å‡ºé”™è¯¯å †æ ˆä¿¡æ¯ï¼Œå¯ä»¥æ˜¾ç¤ºé”™è¯¯è¡Œå·ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"><span class="comment"># division by zero</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment"># traceback.print_exc() &lt;=&gt;  print(traceback.format_exc())</span></span><br><span class="line">    print(traceback.format_exc())</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;C:/Users/11435/Desktop/Test/traceback_test.py&quot;, line 8, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     1 / 0</span></span><br><span class="line"><span class="comment"># ZeroDivisionError: division by zero</span></span><br></pre></td></tr></table></figure>
<h3 id="decorator"><a class="markdownIt-Anchor" href="#decorator">#</a> decorator</h3>
<p><code>wraps(func)</code>  å¯ä»¥ä¿æŒåŸå‡½æ•°çš„çŠ¶æ€ï¼Œ å¦‚æœæ²¡æœ‰æ·»åŠ æ­¤æ®µï¼Œè¿”å›çš„æ˜¯åŒ…è£…å‡½æ•°çš„çŠ¶æ€ï¼Œ <code>whatIsLiving.__doc__</code>  è¿”å› None,  <code>whatIsLiving.__name__</code>  è¿”å› living</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">thisIsLiving</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">living</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        <span class="keyword">return</span> func(*args,**kwargs) + <span class="string">&quot;living is sleep and eat&quot;</span></span><br><span class="line">    <span class="keyword">return</span> living</span><br><span class="line"></span><br><span class="line"><span class="meta">@thisIsLiving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">whatIsLiving</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    ä»€ä¹ˆæ˜¯æ´»ç€</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;what is living? &quot;</span></span><br><span class="line"></span><br><span class="line">print(whatIsLiving.__doc__)</span><br><span class="line">print(whatIsLiving.__name__)</span><br><span class="line">print(whatIsLiving())</span><br><span class="line"></span><br><span class="line"><span class="comment">#     ä»€ä¹ˆæ˜¯æ´»ç€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># whatIsLiving</span></span><br><span class="line"><span class="comment"># what is living? living is sleep and eat</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        start_time = time.time()</span><br><span class="line">        result = func(*args, **kwargs)</span><br><span class="line">        end_time = time.time()</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;func.__name__&#125;</span> execution time: <span class="subst">&#123;end_time - start_time&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@decorator</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># square = decorator(square)</span></span><br><span class="line"><span class="comment"># print(square(2))</span></span><br><span class="line"></span><br><span class="line">print(square(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>(<span class="params">threshold</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">        @functools.wraps(<span class="params">func</span>)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">            start_time = time.time()</span><br><span class="line"></span><br><span class="line">            result = func(*args, **kwargs)</span><br><span class="line">            end_time = time.time()</span><br><span class="line">            <span class="keyword">if</span> end_time - start_time &gt; threshold:</span><br><span class="line">                print(</span><br><span class="line">                    <span class="string">f&quot;<span class="subst">&#123;func.__name__&#125;</span> execution time <span class="subst">&#123;end_time - start_time&#125;</span> took long than <span class="subst">&#123;threshold&#125;</span>&quot;</span></span><br><span class="line">                )</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@timer(<span class="params"><span class="number">1</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sleep_2seconds</span>():</span></span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sleep_2seconds()</span><br><span class="line">print(sleep_2seconds.__name__)</span><br></pre></td></tr></table></figure>
<h3 id="argparse"><a class="markdownIt-Anchor" href="#argparse">#</a> argparse</h3>
<p>parse command line option.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;--h&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;This is Hub id&quot;</span>, dest=<span class="string">&quot;hub_id&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--t&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;This is file type&quot;</span>, dest=<span class="string">&quot;file_type&quot;</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args.hub_id, args.file_type)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># python argparse_test.py --h MAR --t csv</span></span><br><span class="line"><span class="comment"># MAR csv</span></span><br></pre></td></tr></table></figure>
<h3 id="rsplit"><a class="markdownIt-Anchor" href="#rsplit">#</a> rsplit()</h3>
<p>rsplit ä»å³å‘å·¦åˆ‡å‰²ï¼Œå’Œ spit ç±»ä¼¼ï¼Œrsplit () é»˜è®¤åˆ†éš”ç¬¦ä¸ºæ‰€æœ‰ç©ºå­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€æ¢è¡Œ (\n)ã€åˆ¶è¡¨ç¬¦ (\t) ç­‰ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;this is string example....wow!!!&quot;</span></span><br><span class="line"></span><br><span class="line">print(s.rsplit())</span><br><span class="line">print(s.rsplit(<span class="string">&#x27;i&#x27;</span>, maxsplit=<span class="number">2</span>))</span><br><span class="line">print(s.rsplit(<span class="string">&#x27;w&#x27;</span>))</span><br><span class="line">print(s.rsplit(<span class="literal">None</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;this&#x27;, &#x27;is&#x27;, &#x27;string&#x27;, &#x27;example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this &#x27;, &#x27;s str&#x27;, &#x27;ng example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this is string example....&#x27;, &#x27;o&#x27;, &#x27;!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this is&#x27;, &#x27;string&#x27;, &#x27;example....wow!!!&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="globiglob"><a class="markdownIt-Anchor" href="#globiglob">#</a> glob.iglob()</h3>
<p>iglob è¿”å›ä¸€ä¸ª generatorã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">g = glob.iglob(<span class="string">&#x27;*.txt&#x27;</span>)</span><br><span class="line">print(g, <span class="built_in">list</span>(g))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;generator object _iglob at 0x00000000025CB4C0&gt; [&#x27;combine.txt&#x27;, &#x27;test.txt&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="keyword-argument-and-keyword-only-argumnet"><a class="markdownIt-Anchor" href="#keyword-argument-and-keyword-only-argumnet">#</a> keyword argument and keyword-only argumnet</h3>
<p>åœ¨å‡½æ•° a ä¸­ï¼Œx å’Œ y æ˜¯ä½ç½®å‚æ•°ï¼ˆpositionalï¼‰åŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºå…³é”®å­—å‚æ•°ï¼ˆkeywordï¼‰ï¼Œåœ¨å‡½æ•° b, c ä¸­ y æ˜¯ä»…é™å…³é”®å­—å‚æ•°ï¼ˆkeword-onlyï¼‰å³å¼ºåˆ¶å…³é”®å­—å‚æ•°ï¼Œå› ä¸ºåœ¨ y ä¹‹å‰å­˜åœ¨  <code>*</code> , éœ€è¦æŒ‡æ˜ y çš„å€¼ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">a(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">a(x=<span class="number">1</span>, y=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span>(<span class="params">x, *, y</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># b(1, 2) # TypeError: b() missing 1 required keyword-only argument: &#x27;y&#x27;</span></span><br><span class="line">b(<span class="number">1</span>, y=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c</span>(<span class="params">x, *z, y</span>):</span> <span class="comment"># z is Arbitrary Positional Arguments </span></span><br><span class="line">    print(x, z, y)</span><br><span class="line"></span><br><span class="line"><span class="comment"># c(1, 4) # TypeError: c() missing 1 required keyword-only argument: &#x27;y&#x27;</span></span><br><span class="line">c(<span class="number">1</span>, y=<span class="number">4</span>) <span class="comment"># 1 () 4</span></span><br><span class="line">c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, y=<span class="number">4</span>) <span class="comment"># 1 (2, 3) 4</span></span><br></pre></td></tr></table></figure>
<h3 id="lambda-free-variable"><a class="markdownIt-Anchor" href="#lambda-free-variable">#</a> lambda free variable</h3>
<p>lambda è¡¨è¾¾å¼ä¸­çš„ x æ˜¯ä¸€ä¸ªè‡ªç”±å˜é‡ï¼Œ åœ¨è¿è¡Œæ—¶ç»‘å®šå€¼ï¼Œè€Œä¸æ˜¯å®šä¹‰æ—¶å°±ç»‘å®šï¼Œè¿™è·Ÿå‡½æ•°çš„é»˜è®¤å€¼å‚æ•°å®šä¹‰æ˜¯ä¸åŒçš„ã€‚å› æ­¤ï¼Œåœ¨è°ƒç”¨ lambda è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œx çš„å€¼æ˜¯æ‰§è¡Œæ—¶çš„å€¼ã€‚å¦‚æœä½ æƒ³è®©æŸä¸ªåŒ¿åå‡½æ•°åœ¨å®šä¹‰æ—¶å°±æ•è·åˆ°å€¼ï¼Œå¯ä»¥å°†é‚£ä¸ªå‚æ•°å€¼å®šä¹‰æˆé»˜è®¤å‚æ•°å³å¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">10</span></span><br><span class="line">a = <span class="keyword">lambda</span> y: x + y</span><br><span class="line">x = <span class="number">20</span></span><br><span class="line">b = <span class="keyword">lambda</span> y: x + y</span><br><span class="line">print(a(<span class="number">10</span>)) <span class="comment"># 30</span></span><br><span class="line">print(b(<span class="number">10</span>)) <span class="comment"># 30</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x = <span class="number">10</span></span><br><span class="line">a = <span class="keyword">lambda</span> y, x=x: x + y</span><br><span class="line">x = <span class="number">20</span></span><br><span class="line">b = <span class="keyword">lambda</span> y, x=x: x + y</span><br><span class="line">print(a(<span class="number">10</span>)) <span class="comment"># 20</span></span><br><span class="line">print(b(<span class="number">10</span>)) <span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">funcs = [<span class="keyword">lambda</span> x: x + n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line"><span class="keyword">for</span> func <span class="keyword">in</span> funcs:</span><br><span class="line">    print(func(<span class="number">1</span>))</span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">funcs = [<span class="keyword">lambda</span> x, n=n: x + n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line"><span class="keyword">for</span> func <span class="keyword">in</span> funcs:</span><br><span class="line">    print(func(<span class="number">1</span>))</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="date"><a class="markdownIt-Anchor" href="#date">#</a> date</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">now = time.time()</span><br><span class="line">print(now)</span><br><span class="line"></span><br><span class="line">tl = time.localtime(now)</span><br><span class="line">print(tl)</span><br><span class="line"></span><br><span class="line">date = time.strftime(<span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, tl)</span><br><span class="line">print(date)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dnow = <span class="string">&quot;2017-10-16 12:34:00&quot;</span></span><br><span class="line">timestamp = time.mktime(time.strptime(dnow, <span class="string">&quot;%Y-%m-%d %H:%M:%S&quot;</span>))</span><br><span class="line">print(timestamp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1563515277.4810107</span></span><br><span class="line"><span class="comment"># time.struct_time(tm_year=2019, tm_mon=7, tm_mday=19, tm_hour=13, tm_min=47, tm_sec=57, tm_wday=4, tm_yday=200, tm_isdst=0)</span></span><br><span class="line"><span class="comment"># 2019-07-19 13:47:57</span></span><br><span class="line"><span class="comment"># 1508128440.0</span></span><br></pre></td></tr></table></figure>
<img data-src="/2019/06/06/python/date.png" class="" title="python_date">
<h3 id="boolean"><a class="markdownIt-Anchor" href="#boolean">#</a> boolean</h3>
<p>There are not many values that evaluate to False, except empty values, such as (), [], {}, â€œâ€, the number 0, and the value None. And of course the value False evaluates to False.</p>
<p>The following will return False:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span>(<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">bool</span>(())</span><br><span class="line"><span class="built_in">bool</span>([])</span><br><span class="line"><span class="built_in">bool</span>(&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>One more value, or object in this case, evaluates to False, and that is if you have an object that is made from a class with a  <code>__len__</code>  function that returns 0 or False:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myclass</span>():</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">myobj = myclass()</span><br><span class="line">print(<span class="built_in">bool</span>(myobj))  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> myobj:</span><br><span class="line">    print(<span class="literal">True</span>)  <span class="comment"># not execute</span></span><br></pre></td></tr></table></figure>
<p>python xml.etree returns Element object len is 0 if the elementâ€™s not has child elements. So donâ€™t use  <code>if a:</code>  or  <code>if not a:</code>  to determine if an element exists</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree</span><br><span class="line"></span><br><span class="line">config = xml.etree.ElementTree.parse(<span class="string">&#x27;.\cfgEDIASNackFileImporter.xml&#x27;</span>).getroot()</span><br><span class="line"></span><br><span class="line">receiver = config.find(<span class="string">&quot;./Notification/Appender[@Name=&#x27;MailTest&#x27;]/Receiver&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">len</span>(receiver), boolen(receiver)) <span class="comment"># 0 False</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Notification</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">SMTP</span> <span class="attr">Server</span>=<span class="string">&quot;xxx.xxx&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Appender</span> <span class="attr">Name</span>=<span class="string">&quot;MailTest&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Receiver</span> <span class="attr">value</span>=<span class="string">&quot;test@example.com&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Notification</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="timeit"><a class="markdownIt-Anchor" href="#timeit">#</a> timeit</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">TIMES = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">SETUP = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">symbols = &#x27;$Â¢Â£Â¥â‚¬Â¤&#x27;</span></span><br><span class="line"><span class="string">def non_ascii(c):</span></span><br><span class="line"><span class="string">    return c &gt; 127</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Signature: repeat(stmt=&#x27;pass&#x27;, setup=&#x27;pass&#x27;, timer=&lt;built-in function perf_counter&gt;, repeat=3, number=1000000, globals=None)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clock</span>(<span class="params">label, cmd</span>):</span></span><br><span class="line">    res = timeit.repeat(cmd, setup=SETUP, number=TIMES)</span><br><span class="line">    print(label, *(<span class="string">&#x27;&#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> res))</span><br><span class="line"></span><br><span class="line">clock(<span class="string">&#x27;listcomp        :&#x27;</span>, <span class="string">&#x27;[ord(s) for s in symbols if ord(s) &gt; 127]&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;listcomp + func :&#x27;</span>, <span class="string">&#x27;[ord(s) for s in symbols if non_ascii(ord(s))]&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;filter + lambda :&#x27;</span>, <span class="string">&#x27;list(filter(lambda c: c &gt; 127, map(ord, symbols)))&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;filter + func   :&#x27;</span>, <span class="string">&#x27;list(filter(non_ascii, map(ord, symbols)))&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># listcomp        : 0.003 0.002 0.002 0.002 0.003</span></span><br><span class="line"><span class="comment"># listcomp + func : 0.004 0.004 0.003 0.004 0.004</span></span><br><span class="line"><span class="comment"># filter + lambda : 0.005 0.005 0.005 0.006 0.005</span></span><br><span class="line"><span class="comment"># filter + func   : 0.004 0.004 0.005 0.004 0.004</span></span><br></pre></td></tr></table></figure>
<h3 id="eval"><a class="markdownIt-Anchor" href="#eval">#</a> eval</h3>
<p>åŠŸèƒ½ï¼šå°†å­—ç¬¦ä¸² str å½“æˆæœ‰æ•ˆçš„è¡¨è¾¾å¼æ¥æ±‚å€¼å¹¶è¿”å›è®¡ç®—ç»“æœã€‚</p>
<p>è¯­æ³•ï¼š eval (source [, globals [, locals]]) -&gt; value</p>
<p>å‚æ•°ï¼š</p>
<ul>
<li>sourceï¼šä¸€ä¸ª python è¡¨è¾¾å¼æˆ–å‡½æ•° compile () è¿”å›çš„ä»£ç å¯¹è±¡ã€‚</li>
<li>globalsï¼šå¯é€‰ã€‚å¿…é¡»æ˜¯ dictionaryã€‚</li>
<li>ocalsï¼šå¯é€‰ã€‚ä»»æ„ map å¯¹è±¡ã€‚</li>
</ul>
<p>å¯ä»¥æŠŠ list, tuple, dict å’Œ string ç›¸äº’è½¬åŒ–ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;[[1,2], [3,4], [5,6], [7,8], [9,0]]&quot;</span></span><br><span class="line">print(<span class="built_in">type</span>(a))  <span class="comment"># &lt;class &#x27;str&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line">b = <span class="built_in">eval</span>(a)</span><br><span class="line">print(<span class="built_in">type</span>(b))  <span class="comment"># &lt;class &#x27;list&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="uuid"><a class="markdownIt-Anchor" href="#uuid">#</a> uuid</h3>
<p>uuid: é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆUniversally Unique IDï¼ŒUUIDï¼‰</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line">user_id = uuid.uuid4()</span><br><span class="line">print(user_id)</span><br><span class="line"><span class="comment"># cb79af9a-b05f-49a7-acd2-2675852e12f9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_id</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;%015d%s000&#x27;</span> % (<span class="built_in">int</span>(time.time() * <span class="number">1000</span>), uuid.uuid4().<span class="built_in">hex</span>)</span><br><span class="line">print(next_id())  <span class="comment"># 001583823607352451339f583754d75b479e67714a227ea000</span></span><br><span class="line">print(<span class="string">&#x27;%015d&#x27;</span> % <span class="number">10</span>) <span class="comment"># &#x27;000000000000010&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="partial"><a class="markdownIt-Anchor" href="#partial">#</a> partial</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤æŒ‰åè¿›åˆ¶è½¬æ¢</span></span><br><span class="line">r1 = <span class="built_in">int</span>(<span class="string">&quot;12&quot;</span>)</span><br><span class="line">print(r1, <span class="built_in">type</span>(r1))</span><br><span class="line"><span class="comment"># 12 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰äºŒè¿›åˆ¶è½¬æ¢</span></span><br><span class="line">r2 = <span class="built_in">int</span>(<span class="string">&quot;0101&quot;</span>, base=<span class="number">2</span>)</span><br><span class="line">print(r2, <span class="built_in">type</span>(r2))</span><br><span class="line"><span class="comment"># 5 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨åå‡½æ•°, æ”¹é€ åŸæœ‰çš„ int å‡½æ•°</span></span><br><span class="line">int2 = partial(<span class="built_in">int</span>, base=<span class="number">2</span>)</span><br><span class="line">r3 = int2(<span class="string">&quot;0101&quot;</span>)</span><br><span class="line">print(r3, <span class="built_in">type</span>(r3))</span><br><span class="line"><span class="comment"># 5 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span>(<span class="params">a: <span class="built_in">float</span>, b: <span class="built_in">float</span>, name: <span class="built_in">str</span> | <span class="literal">None</span></span>) -&gt; float:</span></span><br><span class="line">    <span class="keyword">if</span> name <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;name=&#125;</span> (<span class="subst">&#123;a=&#125;</span>, <span class="subst">&#123;b=&#125;</span>)&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a * b</span><br><span class="line"></span><br><span class="line">double = partial(multiply, <span class="number">2</span>, name=<span class="string">&quot;Double&quot;</span>)</span><br><span class="line">triple = partial(multiply, b=<span class="number">3</span>, name=<span class="string">&quot;Triple&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(double(<span class="number">10</span>))</span><br><span class="line">print(triple(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># name=&#x27;Double&#x27; (a=2, b=10)</span></span><br><span class="line"><span class="comment"># 20</span></span><br><span class="line"><span class="comment"># name=&#x27;Triple&#x27; (a=10, b=3)</span></span><br><span class="line"><span class="comment"># 30</span></span><br></pre></td></tr></table></figure>
<h3 id="base64"><a class="markdownIt-Anchor" href="#base64">#</a> base64</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment"># b64encode: Encode the bytes-like object s using Base64 and return a bytes object.</span></span><br><span class="line">a = base64.b64encode(s.encode())</span><br><span class="line">print(a) <span class="comment"># b&#x27;aGVsbG8=&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># encode: Encode a file; input and output are binary files.</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;01.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> r, <span class="built_in">open</span>(<span class="string">&#x27;01.txt&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> w:</span><br><span class="line">    base64.encode(r, w)</span><br></pre></td></tr></table></figure>
<h3 id="sqrt"><a class="markdownIt-Anchor" href="#sqrt">#</a> sqrt</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">print(math.sqrt(<span class="number">25</span>) == <span class="number">25</span> ** <span class="number">0.5</span>) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h3 id="mod"><a class="markdownIt-Anchor" href="#mod">#</a> mod</h3>
<p>å‡è®¾ q æ˜¯ aã€b ç›¸é™¤äº§ç”Ÿçš„å•† (quotient)ï¼Œr æ˜¯ç›¸åº”çš„ä½™æ•° (remainder)ï¼Œé‚£ä¹ˆåœ¨å‡ ä¹æ‰€æœ‰çš„è®¡ç®—ç³»ç»Ÿä¸­ï¼Œéƒ½æ»¡è¶³ï¼ša = b x q + rï¼Œå…¶ä¸­ |r|&lt;|a|ã€‚ æ‰€ä»¥  <code>r = a - (a / b) x b</code></p>
<p>python ä½¿ç”¨ floor å‘ä¸‹æ•´é™¤æ³•</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(-<span class="number">17</span> // <span class="number">10</span>, <span class="number">17</span> // -<span class="number">10</span>, -<span class="number">17</span> // -<span class="number">10</span>) <span class="comment"># # -2 -2 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -17 % 10 = -17 - (-17 // 10) * 10 = -17 - (-2) * 10 = 3</span></span><br><span class="line">print(-<span class="number">17</span> % <span class="number">10</span>, <span class="number">17</span> % -<span class="number">10</span>, -<span class="number">17</span> % -<span class="number">10</span>) <span class="comment"># 3 -3 -7</span></span><br></pre></td></tr></table></figure>
<p>JavaScript ä½¿ç”¨å‘ä¸Šæ•´é™¤æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -17 % 10 = -17 - parseInt(-17 / 10) * (-10) = -17 - (-1) * (-10) = -7</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">17</span> % <span class="number">10</span>, <span class="number">17</span> % -<span class="number">10</span>, -<span class="number">17</span> % -<span class="number">10</span>); <span class="comment">// -7 7 -7</span></span><br></pre></td></tr></table></figure>
<h3 id="max-count"><a class="markdownIt-Anchor" href="#max-count">#</a> max count</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums = [<span class="number">3</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">most = <span class="built_in">max</span>(<span class="built_in">set</span>(nums), key=nums.count)</span><br><span class="line">print(most)  <span class="comment"># 3</span></span><br><span class="line">print(nums.count(<span class="number">3</span>)) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>
<h3 id="empty-function-body"><a class="markdownIt-Anchor" href="#empty-function-body">#</a> empty function body</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun1</span>():</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun2</span>():</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># Avoid forget to implement</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun3</span>():</span></span><br><span class="line">    <span class="keyword">raise</span> NotImplementedError(<span class="string">&quot;Not Implement func3&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fun1()</span><br><span class="line">fun2()</span><br><span class="line">fun3()</span><br></pre></td></tr></table></figure>
<h3 id="and-argument"><a class="markdownIt-Anchor" href="#and-argument">#</a> * and / argument</h3>
<p><code>*</code>  åé¢çš„å‚æ•°å¿…é¡»ä½¿ç”¨å…³é”®å­—å‚æ•° (Keyword arguments)ã€‚</p>
<p><code>/</code>  å‰é¢çš„å‚æ•°å¿…é¡»ä½¿ç”¨ä½ç½®å‚æ•° (Positional argulemts)ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>(<span class="params">a, *, b, c</span>):</span></span><br><span class="line">    print(a, b, c)</span><br><span class="line">    </span><br><span class="line">test(<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"><span class="comment"># 1 2 3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">work</span>(<span class="params">name: <span class="built_in">str</span>, /, job: <span class="built_in">str</span>, *, hours: <span class="built_in">int</span></span>):</span></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span> is <span class="subst">&#123;job&#125;</span> for <span class="subst">&#123;hours&#125;</span> hours.&quot;</span>)</span><br><span class="line"></span><br><span class="line">work(<span class="string">&quot;Babb&quot;</span>, job=<span class="string">&quot;coding&quot;</span>, hours=<span class="number">10</span>) <span class="comment"># Babb is coding for 10 hours.</span></span><br><span class="line">work(<span class="string">&quot;Babb&quot;</span>, <span class="string">&quot;coding&quot;</span>, hours=<span class="number">10</span>) <span class="comment"># Babb is coding for 10 hours.</span></span><br></pre></td></tr></table></figure>
<h3 id="argument-default-value"><a class="markdownIt-Anchor" href="#argument-default-value">#</a> argument default value</h3>
<p>å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼æ˜¯åœ¨åˆ›å»º / ç¼–è¯‘æ—¶ç¡®å®šä¸æ˜¯è°ƒç”¨æ—¶ã€‚å¦‚ä¸‹ä¸¤æ¬¡å‡½æ•°è°ƒç”¨è¾“å‡ºçš„æ—¶é—´ä¸å˜ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log</span>(<span class="params">msg, current_dt=datetime.now(<span class="params"></span>)</span>):</span></span><br><span class="line">    print(msg, current_dt)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">print(datetime.now()) <span class="comment"># 2025-04-02 17:43:36.193251</span></span><br><span class="line"></span><br><span class="line">log(<span class="string">&quot;error&quot;</span>)  <span class="comment"># error 2025-04-02 17:43:34.192997</span></span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">log(<span class="string">&quot;warning&quot;</span>)  <span class="comment"># warning 2025-04-02 17:43:34.192997</span></span><br></pre></td></tr></table></figure>
<h3 id="pack-unpack"><a class="markdownIt-Anchor" href="#pack-unpack">#</a> * pack unpack</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="number">2</span> * <span class="number">3</span>)</span><br><span class="line">print(<span class="string">&quot;ha&quot;</span> * <span class="number">3</span>)</span><br><span class="line">print([<span class="number">1</span>, <span class="number">2</span>] * <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">first, *rest = numbers</span><br><span class="line">print(first, rest)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_args</span>(<span class="params">*args</span>):</span></span><br><span class="line">    print(<span class="built_in">type</span>(args), args)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_args(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_kwargs</span>(<span class="params">**kwargs</span>):</span></span><br><span class="line">    print(<span class="built_in">type</span>(kwargs), kwargs)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print_kwargs(a=<span class="number">1</span>, b=<span class="number">2</span>, c=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">greet</span>(<span class="params">name, age</span>):</span></span><br><span class="line">    print(<span class="string">f&quot;hello <span class="subst">&#123;name&#125;</span>, you are <span class="subst">&#123;age&#125;</span> old.&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">person = (<span class="string">&quot;Babb&quot;</span>, <span class="number">30</span>)</span><br><span class="line">greet(*person)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">list1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">tuple1 = (<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line">merged = [*list1, *tuple1]</span><br><span class="line">print(merged)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_profile</span>(<span class="params">name, age, email</span>):</span></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span> - <span class="subst">&#123;age&#125;</span> - <span class="subst">&#123;email&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">option = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;Babb&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">33</span>, <span class="string">&quot;email&quot;</span>: <span class="string">&quot;babb@example.com&quot;</span>&#125;</span><br><span class="line">create_profile(**option)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dict1 = &#123;<span class="string">&quot;a&quot;</span>: <span class="number">1</span>, <span class="string">&quot;b&quot;</span>: <span class="number">2</span>&#125;</span><br><span class="line">dict2 = &#123;<span class="string">&quot;c&quot;</span>: <span class="number">3</span>, <span class="string">&quot;d&quot;</span>: <span class="number">4</span>&#125;</span><br><span class="line">merged = &#123;**dict1, **dict2&#125;</span><br><span class="line">print(merged)</span><br></pre></td></tr></table></figure>
<h3 id="with-context"><a class="markdownIt-Anchor" href="#with-context">#</a> with context</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># f = open(&quot;test.txt&quot;)</span></span><br><span class="line"><span class="comment"># try:</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"><span class="comment"># finally:</span></span><br><span class="line"><span class="comment">#     f.close()</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># with open(&quot;test.txt&quot;) as f:</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyOpen</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, filepath</span>):</span></span><br><span class="line">        print(<span class="string">&quot;__init__&quot;</span>)</span><br><span class="line">        self.filepath = filepath</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&quot;__enter__&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.filepath</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span>(<span class="params">self, exc_type, exc_value, traceback</span>):</span></span><br><span class="line">        print(<span class="string">&quot;__exit__&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> exc_type <span class="keyword">is</span> ValueError:</span><br><span class="line">            print(<span class="string">&quot;Caught a ValueError&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> MyOpen(<span class="string">&quot;test.txt&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f)</span><br><span class="line">    <span class="keyword">raise</span> ValueError(<span class="string">&quot;A ValueError occured&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_open</span>(<span class="params">filepath</span>):</span></span><br><span class="line">    print(<span class="string">&quot;enter&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span> filepath</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        print(<span class="string">&quot;exit&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> my_open(<span class="string">&quot;test.txt&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    print(f)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">timer</span>():</span></span><br><span class="line">    start = time.time()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line"></span><br><span class="line">    print(<span class="string">f&quot;cost <span class="subst">&#123;time.time() - start&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> timer():</span><br><span class="line">    time.sleep(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_temporary_env</span>(<span class="params">**kwargs</span>):</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> kwargs.items():</span><br><span class="line">        os.environ[k] = v</span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> kwargs.items():</span><br><span class="line">        <span class="keyword">del</span> os.environ[k]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(os.environ.get(<span class="string">&quot;TEST_VAR&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> set_temporary_env(TEST_VAR=<span class="string">&quot;xyz&quot;</span>):</span><br><span class="line">    print(os.environ.get(<span class="string">&quot;TEST_VAR&quot;</span>))</span><br><span class="line"></span><br><span class="line">print(os.environ.get(<span class="string">&quot;TEST_VAR&quot;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="with-conext-seed-random"><a class="markdownIt-Anchor" href="#with-conext-seed-random">#</a> with conext seed random</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any, Generator</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rand_state</span>(<span class="params">seed: <span class="built_in">int</span> | <span class="literal">None</span> = <span class="literal">None</span></span>) -&gt; Generator:</span></span><br><span class="line">    state: <span class="built_in">tuple</span>[Any, ...] = random.getstate()</span><br><span class="line">    random.seed(seed)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        random.setstate(state)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    <span class="keyword">with</span> rand_state(<span class="number">1</span>):</span><br><span class="line">        print(random.randrange(<span class="number">0</span>, <span class="number">100</span>), random.randint(<span class="number">0</span>, <span class="number">100</span>), random.random())</span><br><span class="line"></span><br><span class="line">    print(random.randrange(<span class="number">0</span>, <span class="number">100</span>), random.randint(<span class="number">0</span>, <span class="number">100</span>), random.random())</span><br><span class="line">    </span><br><span class="line"><span class="comment"># 17 72 0.8474337369372327</span></span><br><span class="line"><span class="comment"># 90 88 0.18780016419984147</span></span><br><span class="line"><span class="comment"># 17 72 0.8474337369372327</span></span><br><span class="line"><span class="comment"># 0 99 0.6800110455387003</span></span><br><span class="line"><span class="comment"># 17 72 0.8474337369372327</span></span><br><span class="line"><span class="comment"># 27 35 0.586171697319297</span></span><br></pre></td></tr></table></figure>
<h3 id="walrus-operator"><a class="markdownIt-Anchor" href="#walrus-operator">#</a> walrus operator</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">(a := <span class="number">1</span>)</span><br><span class="line">print(a)</span><br><span class="line"></span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="comment"># length = len(lst)</span></span><br><span class="line"><span class="comment"># if length &gt; 0:</span></span><br><span class="line"><span class="comment">#     print(f&quot;list is not empty, its size is &#123;length&#125;&quot;)</span></span><br><span class="line"><span class="keyword">if</span> (length := <span class="built_in">len</span>(lst)) &gt; <span class="number">0</span>:</span><br><span class="line">    print(<span class="string">f&quot;list is not empty, its size is <span class="subst">&#123;length&#125;</span>&quot;</span>)</span><br><span class="line">print(length)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># while True:</span></span><br><span class="line"><span class="comment">#     cmd = input()</span></span><br><span class="line"><span class="comment">#     if cmd == &quot;exit&quot;:</span></span><br><span class="line"><span class="comment">#         break</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     print(f&quot;Got input &#123;cmd&#125;&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (cmd := <span class="built_in">input</span>()) != <span class="string">&quot;exit&quot;</span>:</span><br><span class="line">    print(<span class="string">f&quot;Got input <span class="subst">&#123;cmd&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lst = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">10</span>]</span><br><span class="line"><span class="comment"># is_even = True</span></span><br><span class="line"><span class="comment"># for i in lst:</span></span><br><span class="line"><span class="comment">#     if i % 2 != 0:</span></span><br><span class="line"><span class="comment">#         is_even = False</span></span><br><span class="line"><span class="comment">#         break</span></span><br><span class="line"><span class="comment"># print(i)</span></span><br><span class="line"><span class="comment"># print(is_even)</span></span><br><span class="line"></span><br><span class="line">is_even = <span class="built_in">all</span>((n := i) % <span class="number">2</span> == <span class="number">0</span> <span class="keyword">for</span> i <span class="keyword">in</span> lst)</span><br><span class="line">print(n)</span><br><span class="line">print(is_even)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_info</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; dict:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&quot;words&quot;</span>: (words := text.split()),</span><br><span class="line">        <span class="string">&quot;word count&quot;</span>: <span class="built_in">len</span>(words),</span><br><span class="line">        <span class="string">&quot;character count&quot;</span>: <span class="built_in">len</span>(<span class="string">&quot;&quot;</span>.join(words))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">print(get_info(<span class="string">&quot;Hello World&quot;</span>)) <span class="comment"># &#123;&#x27;words&#x27;: [&#x27;Hello&#x27;, &#x27;World&#x27;], &#x27;word count&#x27;: 2, &#x27;character count&#x27;: 10&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="match-case"><a class="markdownIt-Anchor" href="#match-case">#</a> match case</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_point</span>(<span class="params">point: <span class="built_in">tuple</span></span>):</span></span><br><span class="line">    match point:</span><br><span class="line">        case (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">            print(<span class="string">&quot;Origin!&quot;</span>)</span><br><span class="line">        <span class="comment"># case (x, 0):</span></span><br><span class="line">        <span class="comment">#     print(&quot;on x axis&quot;)</span></span><br><span class="line">        <span class="comment"># case (0, y):</span></span><br><span class="line">        <span class="comment">#     print(&quot;on y axis&quot;)</span></span><br><span class="line">        case (x, <span class="number">0</span>) | (<span class="number">0</span>, x):</span><br><span class="line">            print(<span class="string">&quot;on axis&quot;</span>)</span><br><span class="line">        case (x, y):</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>,<span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line">        case others:</span><br><span class="line">            print(<span class="string">f&quot;<span class="subst">&#123;others&#125;</span> is not valid point&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1 = (<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">p2 = (<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">p3 = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">p4 = (<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">match_point(p1)</span><br><span class="line">match_point(p2)</span><br><span class="line">match_point(p3)</span><br><span class="line">match_point(p4)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_tuple = (<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">my_list = [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">match my_tuple:</span><br><span class="line">    case [<span class="number">0</span>, <span class="number">0</span>]:</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line"></span><br><span class="line">match my_tuple:</span><br><span class="line">    case <span class="number">0</span>, <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line"></span><br><span class="line">match my_list:</span><br><span class="line">    case (<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">match my_list:</span><br><span class="line">    case <span class="built_in">tuple</span>([<span class="number">0</span>, <span class="number">0</span>]):</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line">    case _:</span><br><span class="line">        print(<span class="string">&quot;not matched&quot;</span>)</span><br><span class="line"></span><br><span class="line">match my_tuple:</span><br><span class="line">    case <span class="built_in">tuple</span>:</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_quadrant</span>(<span class="params">point</span>):</span></span><br><span class="line">    match point:</span><br><span class="line">        case (x, y) <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">and</span> y &gt; <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">&quot;First quadrant&quot;</span>)</span><br><span class="line">        case (x, y) <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">and</span> y &gt; <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">&quot;Second quadrant&quot;</span>)</span><br><span class="line">        case (x, y) <span class="keyword">if</span> x &lt; <span class="number">0</span> <span class="keyword">and</span> y &lt; <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">&quot;Third quadrant&quot;</span>)</span><br><span class="line">        case (x, y) <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">and</span> y &lt; <span class="number">0</span>:</span><br><span class="line">            print(<span class="string">&quot;Fourth quadrant&quot;</span>)</span><br><span class="line">        case (x, y):</span><br><span class="line">            print(<span class="string">&quot;On axis&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">match_quadrant((<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">match_quadrant((-<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">match_quadrant((-<span class="number">1</span>, -<span class="number">2</span>))</span><br><span class="line">match_quadrant((<span class="number">1</span>, -<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dict_p = &#123;<span class="string">&quot;x&quot;</span>: <span class="number">0</span>, <span class="string">&quot;y&quot;</span>: <span class="number">30</span>&#125;</span><br><span class="line"></span><br><span class="line">match dict_p:</span><br><span class="line">    case &#123;<span class="string">&quot;x&quot;</span>: <span class="number">0</span>, <span class="string">&quot;y&quot;</span>: <span class="number">0</span>&#125;:</span><br><span class="line">        print(<span class="string">&quot;Origin&quot;</span>)</span><br><span class="line">    case &#123;<span class="string">&quot;x&quot;</span>: x, <span class="string">&quot;y&quot;</span>: y&#125;:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>, <span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">match dict_p:</span><br><span class="line">    case &#123;<span class="string">&quot;x&quot;</span>: <span class="number">0</span>&#125;:</span><br><span class="line">        print(<span class="string">&quot;matched&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>:</span></span><br><span class="line">    __match_args__ = (<span class="string">&quot;x&quot;</span>, <span class="string">&quot;y&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y</span>):</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = Point(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">match p:</span><br><span class="line">    case Point(x=<span class="number">0</span>, y=<span class="number">0</span>):</span><br><span class="line">        print(<span class="string">&quot;Origin&quot;</span>)</span><br><span class="line">    case Point(x=x, y=y):</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>,<span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">match p:</span><br><span class="line">    case Point(<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">        print(<span class="string">&quot;Origin&quot;</span>)</span><br><span class="line">    case Point(x, y):</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>,<span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DataPoint</span>:</span></span><br><span class="line">    x: <span class="built_in">int</span></span><br><span class="line">    y: <span class="built_in">int</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p = DataPoint(<span class="number">0</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">match p:</span><br><span class="line">    case Point(<span class="number">0</span>, <span class="number">0</span>):</span><br><span class="line">        print(<span class="string">&quot;Origin&quot;</span>)</span><br><span class="line">    case Point(x, y):</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;x=&#125;</span>,<span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">symbols = &#123;</span><br><span class="line">    <span class="string">&quot;F&quot;</span>: <span class="string">&quot;\u2192&quot;</span>, </span><br><span class="line">    <span class="string">&quot;B&quot;</span>: <span class="string">&quot;\u2190&quot;</span>, </span><br><span class="line">    <span class="string">&quot;L&quot;</span>: <span class="string">&quot;\u2191&quot;</span>, </span><br><span class="line">    <span class="string">&quot;R&quot;</span>: <span class="string">&quot;\u2193&quot;</span>, </span><br><span class="line">    <span class="string">&quot;pick&quot;</span>: <span class="string">&quot;\u2923&quot;</span>, </span><br><span class="line">    <span class="string">&quot;drop&quot;</span>: <span class="string">&quot;\u2925&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print(symbols) <span class="comment"># &#123;&#x27;F&#x27;: &#x27;â†’&#x27;, &#x27;B&#x27;: &#x27;â†&#x27;, &#x27;L&#x27;: &#x27;â†‘&#x27;, &#x27;R&#x27;: &#x27;â†“&#x27;, &#x27;pick&#x27;: &#x27;â¤£&#x27;, &#x27;drop&#x27;: &#x27;â¤¥&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">op</span>(<span class="params">command</span>):</span></span><br><span class="line">    match command:</span><br><span class="line">        case <span class="string">&quot;move F&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;F&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;move B&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;B&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;move L&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;L&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;move R&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;R&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;pick&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;pick&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;drop&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;drop&quot;</span>]</span><br><span class="line">        case _:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;command&#125;</span> does not compute!&quot;</span>)</span><br><span class="line">            </span><br><span class="line">print([</span><br><span class="line">    op(<span class="string">&quot;move F&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;move F&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;move L&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;pick&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;move R&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;move L&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;move F&quot;</span>),</span><br><span class="line">    op(<span class="string">&quot;drop&quot;</span>),</span><br><span class="line">]) <span class="comment"># [&#x27;â†’&#x27;, &#x27;â†’&#x27;, &#x27;â†‘&#x27;, &#x27;â¤£&#x27;, &#x27;â†“&#x27;, &#x27;â†‘&#x27;, &#x27;â†’&#x27;, &#x27;â¤¥&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">op</span>(<span class="params">command</span>):</span></span><br><span class="line">    match command:</span><br><span class="line">        case [<span class="string">&quot;move&quot;</span>, (<span class="string">&quot;F&quot;</span> | <span class="string">&quot;B&quot;</span> | <span class="string">&quot;L&quot;</span> | <span class="string">&quot;R&quot;</span>) <span class="keyword">as</span> direction]:</span><br><span class="line">            <span class="keyword">return</span> symbols[direction]</span><br><span class="line">        case <span class="string">&quot;pick&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;pick&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;drop&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;drop&quot;</span>]</span><br><span class="line">        case _:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;command&#125;</span> does not compute!&quot;</span>)</span><br><span class="line"></span><br><span class="line">print([</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;F&quot;</span>]),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;F&quot;</span>]),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;L&quot;</span>]),</span><br><span class="line">    op(<span class="string">&quot;pick&quot;</span>),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;R&quot;</span>]),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;L&quot;</span>]),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;F&quot;</span>]),</span><br><span class="line">    op(<span class="string">&quot;drop&quot;</span>),</span><br><span class="line">]) <span class="comment"># [&#x27;â†’&#x27;, &#x27;â†’&#x27;, &#x27;â†‘&#x27;, &#x27;â¤£&#x27;, &#x27;â†“&#x27;, &#x27;â†‘&#x27;, &#x27;â†’&#x27;, &#x27;â¤¥&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">op</span>(<span class="params">command</span>):</span></span><br><span class="line">    match command:</span><br><span class="line">        case [<span class="string">&quot;move&quot;</span>, *directions]:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">tuple</span>(symbols[direction] <span class="keyword">for</span> direction <span class="keyword">in</span> directions)</span><br><span class="line">        case <span class="string">&quot;pick&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;pick&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;drop&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;drop&quot;</span>]</span><br><span class="line">        case _:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;command&#125;</span> does not compute!&quot;</span>)</span><br><span class="line">        </span><br><span class="line">print([</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;L&quot;</span>]),</span><br><span class="line">    op(<span class="string">&quot;pick&quot;</span>),</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;R&quot;</span>, <span class="string">&quot;L&quot;</span>, <span class="string">&quot;F&quot;</span>]),</span><br><span class="line">    op(<span class="string">&quot;drop&quot;</span>),</span><br><span class="line">]) <span class="comment"># [(&#x27;â†’&#x27;, &#x27;â†’&#x27;, &#x27;â†‘&#x27;), &#x27;â¤£&#x27;, (&#x27;â†“&#x27;, &#x27;â†‘&#x27;, &#x27;â†’&#x27;), &#x27;â¤¥&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">op</span>(<span class="params">command</span>):</span></span><br><span class="line">    match command:</span><br><span class="line">        case [<span class="string">&quot;move&quot;</span>, *directions] <span class="keyword">if</span> <span class="built_in">set</span>(directions) &lt; symbols.keys():</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">tuple</span>(symbols[direction] <span class="keyword">for</span> direction <span class="keyword">in</span> directions)</span><br><span class="line">        case <span class="string">&quot;pick&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;pick&quot;</span>]</span><br><span class="line">        case <span class="string">&quot;drop&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> symbols[<span class="string">&quot;drop&quot;</span>]</span><br><span class="line">        case _:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">f&quot;<span class="subst">&#123;command&#125;</span> does not compute!&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;F&quot;</span>, <span class="string">&quot;L&quot;</span>])) <span class="comment"># (&#x27;â†’&#x27;, &#x27;â†’&#x27;, &#x27;â†‘&#x27;)</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    op([<span class="string">&quot;move&quot;</span>, <span class="string">&quot;up&quot;</span>])</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> ex:</span><br><span class="line">    print(<span class="built_in">type</span>(ex), ex) <span class="comment"># &lt;class &#x27;ValueError&#x27;&gt; [&#x27;move&#x27;, &#x27;up&#x27;] does not compute!</span></span><br></pre></td></tr></table></figure>
<h3 id="magic-method"><a class="markdownIt-Anchor" href="#magic-method">#</a> magic method</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> annotations</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShoppingCart</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, items: List[<span class="built_in">str</span>]</span>):</span></span><br><span class="line">        self.items = items</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span>(<span class="params">self, another_cart: ShoppingCart</span>) -&gt; ShoppingCart:</span></span><br><span class="line">        <span class="keyword">return</span> ShoppingCart(self.items + another_cart.items)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>) -&gt; str:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;Cart(<span class="subst">&#123;self.items&#125;</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>) -&gt; int:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self.items)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, item: <span class="built_in">str</span></span>):</span></span><br><span class="line">        self.items.append(item)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cart = ShoppingCart([<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;orange&quot;</span>])</span><br><span class="line">cart(<span class="string">&quot;banana&quot;</span>)</span><br><span class="line">print(cart)</span><br><span class="line">print(<span class="built_in">len</span>(cart))</span><br><span class="line"></span><br><span class="line">cart = cart + ShoppingCart([<span class="string">&quot;grape&quot;</span>, <span class="string">&quot;peach&quot;</span>])</span><br><span class="line">print(cart)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">add</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, num</span>):</span></span><br><span class="line">        self.num = num</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">str</span>(self.num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__add__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.num + other</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="comment"># print(id(self))</span></span><br><span class="line">        <span class="keyword">return</span> add(self.num + other)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># NOT</span></span><br><span class="line">        <span class="comment"># self.num += other</span></span><br><span class="line">        <span class="comment"># return self</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">addTwo = add(<span class="number">2</span>)</span><br><span class="line">print(addTwo)</span><br><span class="line">print(addTwo + <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">print(addTwo(<span class="number">3</span>))</span><br><span class="line">print(addTwo(<span class="number">3</span>)(<span class="number">5</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)(<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<h3 id="unitest"><a class="markdownIt-Anchor" href="#unitest">#</a> unitest</h3>
<p>bank_account.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BankAccount</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, initial_balance=<span class="number">0</span></span>):</span></span><br><span class="line">        <span class="keyword">if</span> initial_balance &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Initial balance cannot be negative&quot;</span>)</span><br><span class="line">        self.balance = initial_balance</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">deposit</span>(<span class="params">self, amount</span>):</span></span><br><span class="line">        <span class="keyword">if</span> amount &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Deposit amount cannot be negative&quot;</span>)</span><br><span class="line">        self.balance += amount</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">withdraw</span>(<span class="params">self, amount</span>):</span></span><br><span class="line">        <span class="keyword">if</span> amount &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Withdraw amount cannot be negative&quot;</span>)</span><br><span class="line">        self.balance -= amount</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_interest_rate</span>(<span class="params">self</span>):</span></span><br><span class="line">        url = <span class="string">&quot;&quot;</span></span><br><span class="line">        response = requests.get(url)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> response.json().get(<span class="string">&quot;rate&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> Exception(<span class="string">&quot;Failed to fetch interest rate&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>test_bank_account.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> unittest</span><br><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> patch</span><br><span class="line"><span class="keyword">from</span> bank_account <span class="keyword">import</span> BankAccount</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestBankAccount</span>(<span class="params">unittest.TestCase</span>):</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUpClass</span>(<span class="params">cls</span>):</span></span><br><span class="line">        print(<span class="string">&quot;setUpClass&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDownClass</span>(<span class="params">cls</span>):</span></span><br><span class="line">        print(<span class="string">&quot;tearDownClass&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setUp</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.account = BankAccount(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">tearDown</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&quot;tearDown&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_create_account</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.account = BankAccount(<span class="number">100</span>)</span><br><span class="line">        self.assertIsInstance(self.account, BankAccount)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> self.assertRaises(ValueError):</span><br><span class="line">            BankAccount(-<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_deposit</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.account = BankAccount(<span class="number">100</span>)</span><br><span class="line">        self.account.deposit(<span class="number">50</span>)</span><br><span class="line">        self.assertEqual(</span><br><span class="line">            self.account.balance, <span class="number">150</span>, msg=<span class="string">&quot;Balance should be 100 + 50 after deposit&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> self.assertRaises(</span><br><span class="line">            ValueError, msg=<span class="string">&quot;Negative deposit should raise ValueError&quot;</span></span><br><span class="line">        ):</span><br><span class="line">            self.account.deposit(-<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_withdraw</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.account = BankAccount(<span class="number">100</span>)</span><br><span class="line">        self.account.withdraw(<span class="number">50</span>)</span><br><span class="line">        self.assertEqual(</span><br><span class="line">            self.account.balance, <span class="number">50</span>, msg=<span class="string">&quot;Balance should be 100 - 50 after withdraw&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">with</span> self.assertRaises(</span><br><span class="line">            ValueError, msg=<span class="string">&quot;Negative withdraw should raise ValueError&quot;</span></span><br><span class="line">        ):</span><br><span class="line">            self.account.deposit(-<span class="number">50</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">test_get_interest_rate</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">with</span> patch(<span class="string">&quot;bank_account.requests.get&quot;</span>) <span class="keyword">as</span> mock_get:</span><br><span class="line">            mock_get.return_value.status_code = <span class="number">200</span></span><br><span class="line">            mock_get.return_value.json.return_value = &#123;<span class="string">&quot;rate&quot;</span>: <span class="number">0.5</span>&#125;</span><br><span class="line">            interest_rate = self.account.get_interest_rate()</span><br><span class="line">            self.assertEqual(interest_rate, <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    unittest.main()</span><br></pre></td></tr></table></figure>
<p>unittest mock</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unittest.mock <span class="keyword">import</span> Mock, MagicMock, patch</span><br><span class="line"></span><br><span class="line">mock = Mock()</span><br><span class="line">mock.get.return_value = <span class="string">&quot;mocked value&quot;</span></span><br><span class="line">print(mock.get())  <span class="comment"># Output: mocked value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">magic_mock = MagicMock()</span><br><span class="line"><span class="comment"># magic_mock.__str__.return_value = &quot;magic mocked value&quot;</span></span><br><span class="line">magic_mock.__str__ = <span class="keyword">lambda</span> self=magic_mock: <span class="string">&quot;magic mocked value&quot;</span></span><br><span class="line">print(<span class="built_in">str</span>(magic_mock))  <span class="comment"># Output: magic mocked value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;original value&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> patch(<span class="string">&quot;__main__.foo&quot;</span>, return_value=<span class="string">&quot;patched value&quot;</span>):</span><br><span class="line">    print(foo())  <span class="comment"># Output: patched value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> patch(<span class="string">&quot;__main__.foo&quot;</span>) <span class="keyword">as</span> mock_foo:</span><br><span class="line">    mock_foo.return_value = <span class="string">&quot;another patched value&quot;</span></span><br><span class="line">    print(foo())  <span class="comment"># Output: another patched value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@patch(<span class="params"><span class="string">&quot;__main__.foo&quot;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test_foo</span>(<span class="params">mock_foo</span>):</span></span><br><span class="line">    mock_foo.return_value = <span class="string">&quot;test patched value&quot;</span></span><br><span class="line">    print(foo())  <span class="comment"># Output: test patched value</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">test_foo()</span><br></pre></td></tr></table></figure>
<h3 id="reference-counting"><a class="markdownIt-Anchor" href="#reference-counting">#</a> reference counting</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> ctypes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] <span class="comment"># +1</span></span><br><span class="line">b = a <span class="comment"># +1</span></span><br><span class="line">print(sys.getrefcount(a)) <span class="comment"># +1, 3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ref_count</span>(<span class="params">address: <span class="built_in">int</span></span>):</span></span><br><span class="line">    <span class="keyword">return</span> ctypes.c_long.from_address(address).value</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(ref_count(<span class="built_in">id</span>(a))) <span class="comment"># not + 1, 2</span></span><br><span class="line"></span><br><span class="line">b = <span class="literal">None</span> <span class="comment"># -1</span></span><br><span class="line"></span><br><span class="line">print(ref_count(<span class="built_in">id</span>(a))) <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line">a = <span class="literal">None</span> <span class="comment"># -1</span></span><br><span class="line"></span><br><span class="line">print(ref_count(<span class="built_in">id</span>(a))) <span class="comment"># -1?</span></span><br></pre></td></tr></table></figure>
<h3 id="pre-caculate-at-compile-time"><a class="markdownIt-Anchor" href="#pre-caculate-at-compile-time">#</a> pre-caculate at compile time</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func1</span>():</span></span><br><span class="line">    a = <span class="number">24</span> * <span class="number">60</span></span><br><span class="line">    b = (<span class="number">1</span>, <span class="number">2</span>) * <span class="number">5</span></span><br><span class="line">    c = <span class="string">&quot;abc&quot;</span> * <span class="number">3</span></span><br><span class="line">    d = <span class="string">&quot;abc&quot;</span> * <span class="number">10000</span></span><br><span class="line">    e = <span class="string">&quot;the quick brown fox &quot;</span> * <span class="number">5</span></span><br><span class="line">    f = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>] * <span class="number">3</span></span><br><span class="line"></span><br><span class="line">print(func1.__code__.co_consts)</span><br><span class="line"><span class="comment"># (None, 1440, (1, 2, 1, 2, 1, 2, 1, 2, 1, 2), &#x27;abcabcabc&#x27;, &#x27;abc&#x27;, 10000, &#x27;the quick brown fox the quick brown fox the quick brown fox the quick brown fox the quick brown fox &#x27;, &#x27;a&#x27;, &#x27;b&#x27;, 3)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>(<span class="params">e</span>):</span></span><br><span class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">print(func2.__code__.co_consts)  <span class="comment"># (None, (1, 2, 3))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func3</span>(<span class="params">e</span>):</span></span><br><span class="line">    <span class="keyword">for</span> e <span class="keyword">in</span> &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;:</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">print(func3.__code__.co_consts)  <span class="comment"># (None, frozenset(&#123;1, 2, 3&#125;))</span></span><br></pre></td></tr></table></figure>
<h3 id="not-logic-in-__main__"><a class="markdownIt-Anchor" href="#not-logic-in-__main__">#</a> not logic in  <code>__main__</code></h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># helps to avoid cluttering the global namespace</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>() -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    local_a = <span class="string">&quot;a&quot;</span></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;<span class="built_in">globals</span>().get(<span class="string">&quot;global_a&quot;</span>)&#125;</span> <span class="subst">&#123;<span class="built_in">globals</span>().get(<span class="string">&quot;local_a&quot;</span>)&#125;</span>&quot;</span>) <span class="comment"># A None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    global_a = <span class="string">&quot;A&quot;</span></span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h3 id="generator-type"><a class="markdownIt-Anchor" href="#generator-type">#</a> generator type</h3>
<p>A generator can be annotated using the generic type <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Generator"> <code>Generator[YieldType, SendType, ReturnType]</code> </a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Generator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci_generator</span>() -&gt; Generator[int, <span class="keyword">None</span>, <span class="keyword">None</span>]:</span></span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">yield</span> a</span><br><span class="line">        a, b = b, a + b</span><br><span class="line"></span><br><span class="line">fib_gen: Generator[<span class="built_in">int</span>, <span class="literal">None</span>, <span class="literal">None</span>] = fibonacci_generator()</span><br><span class="line">n: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line">line_break: <span class="built_in">str</span> = <span class="string">&quot;-&quot;</span> * <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">input</span>(<span class="string">f&quot;Tap &#x27;enter&#x27; for the next <span class="subst">&#123;n&#125;</span> number of fibonacci&quot;</span>)</span><br><span class="line">    print(line_break)</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        print(<span class="built_in">next</span>(fib_gen))</span><br><span class="line">    print(line_break)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read</span>(<span class="params">path: <span class="built_in">str</span></span>) -&gt; Generator[str, <span class="keyword">None</span>, str]:</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> file:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> file:</span><br><span class="line">            <span class="keyword">yield</span> line.strip()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;This is end!&quot;</span></span><br><span class="line"></span><br><span class="line">reader: Generator[<span class="built_in">str</span>, <span class="literal">None</span>, <span class="built_in">str</span>] = read(<span class="string">&quot;note.txt&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">input</span>(<span class="string">&quot;Press &#x27;enter&#x27;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(<span class="built_in">next</span>(reader))</span><br><span class="line">    <span class="keyword">except</span> StopIteration <span class="keyword">as</span> e:</span><br><span class="line">        print(e.value)</span><br><span class="line">        sys.exit()</span><br><span class="line">    <span class="built_in">input</span>()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cumulative_sum</span>() -&gt; Generator[float, float, <span class="keyword">None</span>]:</span></span><br><span class="line">    total: <span class="built_in">float</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        total += <span class="keyword">yield</span> total</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">cumulative_generator: Generator[<span class="built_in">float</span>, <span class="built_in">float</span>, <span class="literal">None</span>] = cumulative_sum()</span><br><span class="line"><span class="built_in">next</span>(cumulative_generator)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    value: <span class="built_in">float</span> = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;Enter a value: &quot;</span>))</span><br><span class="line">    current_sum: <span class="built_in">float</span> = cumulative_generator.send(value)</span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;current_sum=&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">infinite_repeater</span>(<span class="params">sequence: <span class="built_in">list</span>[Any]</span>) -&gt; Generator[Any, <span class="keyword">None</span>, <span class="keyword">None</span>]:</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> sequence:</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">repeater: Generator[Any, <span class="literal">None</span>, <span class="literal">None</span>] = infinite_repeater([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>):</span><br><span class="line">    print(<span class="built_in">next</span>(repeater))</span><br></pre></td></tr></table></figure>
<h3 id="methodcaller"><a class="markdownIt-Anchor" href="#methodcaller">#</a> methodcaller</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> methodcaller</span><br><span class="line"><span class="keyword">from</span> timeit <span class="keyword">import</span> repeat</span><br><span class="line"></span><br><span class="line">names: <span class="built_in">list</span>[<span class="built_in">str</span>] = [<span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Tom&quot;</span>, <span class="string">&quot;James&quot;</span>, <span class="string">&quot;Sandra&quot;</span>, <span class="string">&quot;Blake&quot;</span>]</span><br><span class="line">start_with_b: methodcaller = methodcaller(<span class="string">&quot;startswith&quot;</span>, <span class="string">&quot;B&quot;</span>)</span><br><span class="line"></span><br><span class="line">filtered: <span class="built_in">filter</span> = <span class="built_in">filter</span>(start_with_b, names)</span><br><span class="line">print(<span class="built_in">list</span>(filtered)) <span class="comment"># [&#x27;Bob&#x27;, &#x27;Blake&#x27;]</span></span><br><span class="line"></span><br><span class="line">count_a: methodcaller = methodcaller(<span class="string">&quot;count&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">print(<span class="built_in">list</span>(<span class="built_in">sorted</span>(names, key=count_a))) <span class="comment"># [&#x27;Bob&#x27;, &#x27;Tom&#x27;, &#x27;James&#x27;, &#x27;Blake&#x27;, &#x27;Sandra&#x27;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">warm_up: <span class="built_in">str</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">for i in range(5):</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">methodcaller_test: <span class="built_in">str</span> = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">filter(start_with_b, names)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">lambda_test = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">filter(lambda x: x.startswith(&quot;B&quot;), names)</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">repeat(stmt=warm_up)</span><br><span class="line"></span><br><span class="line">methodcaller_time: <span class="built_in">float</span> = <span class="built_in">min</span>(repeat(methodcaller_test, <span class="built_in">globals</span>=<span class="built_in">globals</span>()))</span><br><span class="line">lambda_time: <span class="built_in">float</span> = <span class="built_in">min</span>(repeat(lambda_test, <span class="built_in">globals</span>=<span class="built_in">globals</span>()))</span><br><span class="line"></span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;methodcaller_time=:<span class="number">.5</span>f&#125;</span>&quot;</span>) <span class="comment"># methodcaller_time=0.04031</span></span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;lambda_time=:<span class="number">.5</span>f&#125;</span>&quot;</span>) <span class="comment"># lambda_time=0.07081</span></span><br></pre></td></tr></table></figure>
<h3 id="lru_cache"><a class="markdownIt-Anchor" href="#lru_cache">#</a> lru_cache</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"></span><br><span class="line"><span class="meta">@lru_cache(<span class="params">maxsize=<span class="number">128</span>, typed=<span class="literal">False</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span> + <span class="subst">&#123;b&#125;</span> = <span class="subst">&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">add(<span class="number">1</span>, <span class="number">1</span>) <span class="comment"># use cache</span></span><br><span class="line">add(<span class="number">1.0</span>, <span class="number">1.0</span>) <span class="comment"># typed=False use cache </span></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>) </span><br><span class="line">add(<span class="number">2</span>, <span class="number">1</span>) <span class="comment"># order change not use cache</span></span><br><span class="line">print(add.cache_info())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 + 1 = 2</span></span><br><span class="line"><span class="comment"># 1 + 2 = 3</span></span><br><span class="line"><span class="comment"># 2 + 1 = 3</span></span><br><span class="line"><span class="comment"># CacheInfo(hits=2, misses=3, maxsize=128, currsize=3)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@lru_cache(<span class="params">maxsize=<span class="number">2</span>, typed=<span class="literal">True</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span> + <span class="subst">&#123;b&#125;</span> = <span class="subst">&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>, <span class="number">1</span>) <span class="comment"># 1</span></span><br><span class="line">add(<span class="number">1.0</span>, <span class="number">1.0</span>) <span class="comment"># 2 typed=True not use cache</span></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>) <span class="comment"># 3 &gt; 2 maxsize, add(1, 2) cached, add(1, 1) not cached</span></span><br><span class="line">add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">add(<span class="number">1</span>, <span class="number">1</span>) <span class="comment"># not use cache</span></span><br><span class="line">print(add.cache_info())</span><br><span class="line">print(add.cache_clear())</span><br><span class="line">print(add.cache_info())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1 + 1 = 2</span></span><br><span class="line"><span class="comment"># 1.0 + 1.0 = 2.0</span></span><br><span class="line"><span class="comment"># 1 + 2 = 3</span></span><br><span class="line"><span class="comment"># 1 + 1 = 2</span></span><br><span class="line"><span class="comment"># CacheInfo(hits=1, misses=4, maxsize=2, currsize=2)</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># CacheInfo(hits=0, misses=0, maxsize=2, currsize=0)</span></span><br></pre></td></tr></table></figure>
<p>fibonacci</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"></span><br><span class="line"><span class="meta">@lru_cache</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fibonacci</span>(<span class="params">n</span>):</span> </span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&#x27;Calculating fibonacci(&#123;0&#125;)&#x27;</span>.<span class="built_in">format</span>(n))</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> n &lt; <span class="number">3</span> <span class="keyword">else</span> fibonacci(n-<span class="number">1</span>) + fibonacci(n-<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(fibonacci(<span class="number">6</span>))</span><br><span class="line">print(fibonacci(<span class="number">6</span>))</span><br><span class="line">print(fibonacci(<span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculating fib(6)</span></span><br><span class="line"><span class="comment"># Calculating fib(5)</span></span><br><span class="line"><span class="comment"># Calculating fib(4)</span></span><br><span class="line"><span class="comment"># Calculating fib(3)</span></span><br><span class="line"><span class="comment"># Calculating fib(2)</span></span><br><span class="line"><span class="comment"># Calculating fib(1)</span></span><br><span class="line"><span class="comment"># 8</span></span><br><span class="line"><span class="comment"># 8</span></span><br><span class="line"><span class="comment"># Calculating fib(8)</span></span><br><span class="line"><span class="comment"># Calculating fib(7)</span></span><br><span class="line"><span class="comment"># 21</span></span><br></pre></td></tr></table></figure>
<p>simple custom define memolizer like lru_cache</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">memolizer</span>(<span class="params">fn</span>):</span></span><br><span class="line">    cache = <span class="built_in">dict</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>(<span class="params">n</span>):</span></span><br><span class="line">        <span class="keyword">if</span> n <span class="keyword">not</span> <span class="keyword">in</span> cache:</span><br><span class="line">            cache[n] = fn(n)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> cache[n]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@memolizer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span>(<span class="params">n</span>):</span> </span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&#x27;Calculating fib(&#123;0&#125;)&#x27;</span>.<span class="built_in">format</span>(n))</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> n &lt; <span class="number">3</span> <span class="keyword">else</span> fib(n-<span class="number">1</span>) + fib(n-<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">print(fib(<span class="number">6</span>))</span><br><span class="line">print(fib(<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculating fib(6)</span></span><br><span class="line"><span class="comment"># Calculating fib(5)</span></span><br><span class="line"><span class="comment"># Calculating fib(4)</span></span><br><span class="line"><span class="comment"># Calculating fib(3)</span></span><br><span class="line"><span class="comment"># Calculating fib(2)</span></span><br><span class="line"><span class="comment"># Calculating fib(1)</span></span><br><span class="line"><span class="comment"># 8</span></span><br><span class="line"><span class="comment"># 8</span></span><br></pre></td></tr></table></figure>
<p>simple custom define memolizer using frozenset support order insensitive cache</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> lru_cache</span><br><span class="line"></span><br><span class="line"><span class="meta">@lru_cache</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">&quot;caculating a + b&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(add(a=<span class="number">1</span>, b=<span class="number">2</span>))</span><br><span class="line">print(add(b=<span class="number">2</span>, a=<span class="number">1</span>)) <span class="comment"># The order not equal, not use cache</span></span><br><span class="line"><span class="comment"># caculating a + b</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># caculating a + b</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># arguments must be hashable</span></span><br><span class="line">print(add(a=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], b=[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])) <span class="comment"># TypeError: unhashable type: &#x27;list&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">memolizer</span>(<span class="params">fn</span>):</span></span><br><span class="line"></span><br><span class="line">    cache = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>(<span class="params">*args, **kwargs</span>):</span></span><br><span class="line">        key = <span class="built_in">frozenset</span>(args) | <span class="built_in">frozenset</span>(kwargs.items()) <span class="comment"># frozenset is no order</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">not</span> <span class="keyword">in</span> cache:</span><br><span class="line">            cache[key] = fn(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> cache[key]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> inner</span><br><span class="line"></span><br><span class="line"><span class="meta">@memolizer</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span>(<span class="params">a, b</span>):</span></span><br><span class="line">    print(<span class="string">&quot;caculating a + b&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line">print(add(a=<span class="number">1</span>, b=<span class="number">2</span>))</span><br><span class="line">print(add(b=<span class="number">2</span>, a=<span class="number">1</span>)) </span><br><span class="line"><span class="comment"># caculating a + b</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"></span><br><span class="line">print(add(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line">print(add(<span class="number">2</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment"># caculating a + b</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="cached_property"><a class="markdownIt-Anchor" href="#cached_property">#</a> cached_property</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> cached_property</span><br><span class="line"><span class="keyword">from</span> statistics <span class="keyword">import</span> mean</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Caculator</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, values: <span class="built_in">list</span>[<span class="built_in">float</span>]</span>):</span></span><br><span class="line">        self.values = values</span><br><span class="line"></span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sum</span>(<span class="params">self</span>) -&gt; float:</span></span><br><span class="line">        print(<span class="string">f&quot;Getting the sum of: <span class="subst">&#123;self.values&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span>(self.values)</span><br><span class="line">    </span><br><span class="line"><span class="meta">    @cached_property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">average</span>(<span class="params">self</span>) -&gt; float:</span></span><br><span class="line">        print(<span class="string">f&quot;Getting the average of: <span class="subst">&#123;self.values&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> mean(self.values)</span><br><span class="line">    </span><br><span class="line">numbers: <span class="built_in">list</span>[<span class="built_in">float</span>] = [<span class="number">1.5</span>, <span class="number">2.5</span>, <span class="number">3.5</span>, <span class="number">4.5</span>, <span class="number">5.5</span>]</span><br><span class="line">caculator: Caculator = Caculator(numbers)</span><br><span class="line"><span class="comment"># print(caculator.average()) # TypeError: &#x27;float&#x27; object is not callable</span></span><br><span class="line">print(caculator.average)</span><br><span class="line">print(caculator.average)</span><br><span class="line">print(caculator.average)</span><br><span class="line"><span class="comment"># Getting the average of: [1.5, 2.5, 3.5, 4.5, 5.5]</span></span><br><span class="line"><span class="comment"># 3.5</span></span><br><span class="line"><span class="comment"># 3.5</span></span><br><span class="line"><span class="comment"># 3.5</span></span><br><span class="line"></span><br><span class="line">caculator: Caculator = Caculator(numbers + [<span class="number">6.5</span>, <span class="number">7.5</span>])</span><br><span class="line">print(caculator.average)</span><br><span class="line">print(caculator.average)</span><br><span class="line">print(caculator.average)</span><br><span class="line"><span class="comment"># Getting the average of: [1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5]</span></span><br><span class="line"><span class="comment"># 4.5</span></span><br><span class="line"><span class="comment"># 4.5</span></span><br><span class="line"><span class="comment"># 4.5</span></span><br></pre></td></tr></table></figure>
<h3 id="singledispatch"><a class="markdownIt-Anchor" href="#singledispatch">#</a> singledispatch</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> html <span class="keyword">import</span> escape</span><br><span class="line"><span class="comment"># from functools import singledispatch, singledispatchmethod</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">singledispatch</span>(<span class="params">fn</span>):</span></span><br><span class="line">    registry = <span class="built_in">dict</span>()</span><br><span class="line"></span><br><span class="line">    registry[<span class="built_in">object</span>] = fn</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">register</span>(<span class="params">type_</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">inner</span>(<span class="params">fn</span>):</span></span><br><span class="line">            registry[type_] = fn</span><br><span class="line">            <span class="keyword">return</span> fn  <span class="comment"># we do this so we can stack register decorators!</span></span><br><span class="line">        <span class="keyword">return</span> inner</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">decorator</span>(<span class="params">arg</span>):</span></span><br><span class="line">        fn = registry.get(<span class="built_in">type</span>(arg), registry[<span class="built_in">object</span>])</span><br><span class="line">        <span class="keyword">return</span> fn(arg)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dispatch</span>(<span class="params">type_</span>):</span></span><br><span class="line">        <span class="keyword">return</span> registry.get(type_, registry[<span class="built_in">object</span>])</span><br><span class="line"></span><br><span class="line">    decorator.register = register</span><br><span class="line">    decorator.registry = registry.keys()</span><br><span class="line">    decorator.dispatch = dispatch</span><br><span class="line">    <span class="keyword">return</span> decorator</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@singledispatch</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">htmlize</span>(<span class="params">arg</span>):</span></span><br><span class="line">    <span class="keyword">return</span> escape(<span class="built_in">str</span>(arg))</span><br><span class="line"></span><br><span class="line"><span class="meta">@htmlize.register(<span class="params"><span class="built_in">float</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">html_real</span>(<span class="params">a</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#123;0:.2f&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="built_in">round</span>(a, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="meta">@htmlize.register(<span class="params"><span class="built_in">str</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">html_str</span>(<span class="params">s</span>):</span></span><br><span class="line">    <span class="keyword">return</span> escape(s).replace(<span class="string">&#x27;\n&#x27;</span>, <span class="string">&#x27;&lt;br/&gt;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@htmlize.register(<span class="params"><span class="built_in">tuple</span></span>)</span></span><br><span class="line"><span class="meta">@htmlize.register(<span class="params"><span class="built_in">list</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">html_list</span>(<span class="params">l</span>):</span></span><br><span class="line">    items = [<span class="string">&#x27;&lt;li&gt;&#123;0&#125;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(htmlize(item)) <span class="keyword">for</span> item <span class="keyword">in</span> l]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;ul&gt;\n&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>.join(items) + <span class="string">&#x27;\n&lt;/ul&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@htmlize.register(<span class="params"><span class="built_in">dict</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">html_dict</span>(<span class="params">d</span>):</span></span><br><span class="line">    items = [<span class="string">&#x27;&lt;li&gt;&#123;0&#125;=&#123;1&#125;&lt;/li&gt;&#x27;</span>.<span class="built_in">format</span>(htmlize(k), htmlize(v)) <span class="keyword">for</span> k, v <span class="keyword">in</span> d.items()]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;ul&gt;\n&#x27;</span> + <span class="string">&#x27;\n&#x27;</span>.join(items) + <span class="string">&#x27;\n&lt;/ul&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line">print(htmlize.registry) <span class="comment"># dict_keys([&lt;class &#x27;object&#x27;&gt;, &lt;class &#x27;float&#x27;&gt;, &lt;class &#x27;str&#x27;&gt;, &lt;class &#x27;list&#x27;&gt;, &lt;class &#x27;tuple&#x27;&gt;, &lt;class &#x27;dict&#x27;&gt;])</span></span><br><span class="line"></span><br><span class="line">print(htmlize([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]))</span><br><span class="line"><span class="comment"># &lt;ul&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;1&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;2&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;li&gt;3&lt;/li&gt;</span></span><br><span class="line"><span class="comment"># &lt;/ul&gt;</span></span><br><span class="line"></span><br><span class="line">print(htmlize(<span class="string">&quot;&quot;&quot;this</span></span><br><span class="line"><span class="string">is a multi line string with</span></span><br><span class="line"><span class="string">a &lt; 10&quot;&quot;&quot;</span>))</span><br><span class="line"><span class="comment"># this&lt;br/&gt;</span></span><br><span class="line"><span class="comment"># is a multi line string with&lt;br/&gt;</span></span><br><span class="line"><span class="comment"># a &amp;lt; 10</span></span><br></pre></td></tr></table></figure>
<h2 id="loop"><a class="markdownIt-Anchor" href="#loop">#</a> Loop</h2>
<h3 id="while-loop"><a class="markdownIt-Anchor" href="#while-loop">#</a> while loop</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># min_length = 2</span></span><br><span class="line"><span class="comment"># name = input(&quot;Please enter your name: &quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># while not (len(name) &gt; min_length and name.isprintable() and name.isalpha()):</span></span><br><span class="line"><span class="comment">#     name = input(&quot;Please enter your name: &quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(&quot;Hello, &#123;0&#125;&quot;.format(name))</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">min_length = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;Please enter your name: &quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(name) &gt; min_length <span class="keyword">and</span> name.isprintable() <span class="keyword">and</span> name.isalpha():</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&quot;Hello, &#123;0&#125;&quot;</span>.<span class="built_in">format</span>(name))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># lst = [1, 2, 3]</span></span><br><span class="line"><span class="comment"># val = 10</span></span><br><span class="line"><span class="comment"># found = False</span></span><br><span class="line"><span class="comment"># idx = 0</span></span><br><span class="line"><span class="comment"># while idx &lt; len(lst):</span></span><br><span class="line"><span class="comment">#     if lst[idx] == val:</span></span><br><span class="line"><span class="comment">#         found = True</span></span><br><span class="line"><span class="comment">#         break</span></span><br><span class="line"><span class="comment">#     idx += 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if not found:</span></span><br><span class="line"><span class="comment">#     lst.append(val)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(lst)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">lst = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">val = <span class="number">10</span></span><br><span class="line">idx = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> idx &lt; <span class="built_in">len</span>(lst):</span><br><span class="line">    <span class="keyword">if</span> lst[idx] == val:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    idx += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    lst.append(val)</span><br><span class="line"></span><br><span class="line">print(lst) <span class="comment"># [1, 2, 3, 10]</span></span><br></pre></td></tr></table></figure>
<h3 id="for-loop"><a class="markdownIt-Anchor" href="#for-loop">#</a> for loop</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;hello&quot;</span></span><br><span class="line">i = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">    print(i, c)</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">    print(i, s[i])</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="built_in">enumerate</span>(s):</span><br><span class="line">    print(i, c)</span><br></pre></td></tr></table></figure>
<h2 id="exception"><a class="markdownIt-Anchor" href="#exception">#</a> Exception</h2>
<h3 id="try-continuebreak"><a class="markdownIt-Anchor" href="#try-continuebreak">#</a> try continue/break</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">0</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> a &lt; <span class="number">4</span>:</span><br><span class="line">    print(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line">    b -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        _ = a / b</span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - division by 0&quot;</span>)</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - always executes&quot;</span>)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - main loop&quot;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------</span></span><br><span class="line"><span class="comment"># 1, 1 - always executes</span></span><br><span class="line"><span class="comment"># 1, 1 - main loop</span></span><br><span class="line"><span class="comment"># ------------------------------       </span></span><br><span class="line"><span class="comment"># 2, 0 - division by 0</span></span><br><span class="line"><span class="comment"># 2, 0 - always executes</span></span><br><span class="line"><span class="comment"># ------------------------------       </span></span><br><span class="line"><span class="comment"># 3, -1 - always executes</span></span><br><span class="line"><span class="comment"># 3, -1 - main loop</span></span><br><span class="line"><span class="comment"># ------------------------------       </span></span><br><span class="line"><span class="comment"># 4, -2 - always executes</span></span><br><span class="line"><span class="comment"># 4, -2 - main loop</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line">b = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> a &lt; <span class="number">4</span>:</span><br><span class="line">    print(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line">    a += <span class="number">1</span></span><br><span class="line">    b -= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        a / b  <span class="comment"># type: ignore</span></span><br><span class="line">    <span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - division by 0&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - always executes&quot;</span>)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">f&quot;<span class="subst">&#123;a&#125;</span>, <span class="subst">&#123;b&#125;</span> - main loop&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">&quot;Code executed without a zero division error&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ------------------------------</span></span><br><span class="line"><span class="comment"># 1, 1 - always executes</span></span><br><span class="line"><span class="comment"># 1, 1 - main loop</span></span><br><span class="line"><span class="comment"># ------------------------------       </span></span><br><span class="line"><span class="comment"># 2, 0 - division by 0</span></span><br><span class="line"><span class="comment"># 2, 0 - always executes</span></span><br></pre></td></tr></table></figure>
<pre><code>### NotImplementedError
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scrape_website</span>(<span class="params">url: <span class="built_in">str</span></span>) -&gt; dict:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">scrape_website(<span class="string">&quot;www.abc.com&quot;</span>) <span class="comment"># No Error</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scrape_website</span>(<span class="params">url: <span class="built_in">str</span></span>) -&gt; dict:</span></span><br><span class="line">    <span class="keyword">raise</span> NotImplementedError(<span class="string">&quot;Functionality is missing&quot;</span>)</span><br><span class="line"></span><br><span class="line">scrape_website(<span class="string">&quot;www.abc.com&quot;</span>) <span class="comment"># NotImplementedError: Functionality is missing</span></span><br></pre></td></tr></table></figure>
<h3 id="typeerror-and-valueerror"><a class="markdownIt-Anchor" href="#typeerror-and-valueerror">#</a> TypeError and ValueError</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="built_in">int</span>(<span class="string">&quot;10&quot;</span>)) <span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># int can accept string</span></span><br><span class="line">print(<span class="built_in">int</span>(<span class="string">&quot;x&quot;</span>)) <span class="comment"># ValueError: invalid literal for int() with base 10: &#x27;x&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># int can&#x27;t accept None</span></span><br><span class="line">print(<span class="built_in">int</span>(<span class="literal">None</span>)) <span class="comment"># TypeError: int() argument must be a string, a bytes-like object or a real number, not &#x27;NoneType&#x27;</span></span><br></pre></td></tr></table></figure>
<h2 id="thread-and-coroutine"><a class="markdownIt-Anchor" href="#thread-and-coroutine">#</a> Thread and Coroutine</h2>
<h3 id="asyncioto_thread-change-sync-to-async"><a class="markdownIt-Anchor" href="#asyncioto_thread-change-sync-to-async">#</a> asyncio.to_thread change sync to async</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> asyncio <span class="keyword">import</span> Task</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">fetch_status</span>(<span class="params">url: <span class="built_in">str</span></span>) -&gt; dict:</span></span><br><span class="line">    print(<span class="string">f&quot;Fetch status for: <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment"># Asynchronously run function `func` in a separate thread</span></span><br><span class="line">    <span class="comment"># Return a coroutine that can be awaited to get the eventual result of func.</span></span><br><span class="line">    response: Response = <span class="keyword">await</span> asyncio.to_thread(requests.get, url, <span class="literal">None</span>) </span><br><span class="line">    print(<span class="string">&quot;Done!&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;status&quot;</span>: response.status_code, <span class="string">&quot;url&quot;</span>: url&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>() -&gt; <span class="keyword">None</span>:</span></span><br><span class="line">    task_a: Task[<span class="built_in">dict</span>] = asyncio.create_task(fetch_status(<span class="string">&quot;https://fanyi.sogou.com/&quot;</span>))</span><br><span class="line">    task_b: Task[<span class="built_in">dict</span>] = asyncio.create_task(fetch_status(<span class="string">&quot;https://www.youdao.com/&quot;</span>))</span><br><span class="line"></span><br><span class="line">    task_a_status: <span class="built_in">dict</span> = <span class="keyword">await</span> task_a</span><br><span class="line">    task_b_status: <span class="built_in">dict</span> = <span class="keyword">await</span> task_b</span><br><span class="line"></span><br><span class="line">    print(task_a_status)</span><br><span class="line">    print(task_b_status)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">asyncio.run(main=main())</span><br><span class="line"></span><br><span class="line"><span class="comment"># Fetch status for: https://fanyi.sogou.com/</span></span><br><span class="line"><span class="comment"># Fetch status for: https://www.youdao.com/</span></span><br><span class="line"><span class="comment"># Done!</span></span><br><span class="line"><span class="comment"># Done!</span></span><br><span class="line"><span class="comment"># &#123;&#x27;status&#x27;: 200, &#x27;url&#x27;: &#x27;https://fanyi.sogou.com/&#x27;&#125;</span></span><br><span class="line"><span class="comment"># &#123;&#x27;status&#x27;: 200, &#x27;url&#x27;: &#x27;https://www.youdao.com/&#x27;&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="regex"><a class="markdownIt-Anchor" href="#regex">#</a> Regex</h2>
<h3 id="research-and-rematch"><a class="markdownIt-Anchor" href="#research-and-rematch">#</a> re.search() and re.match()</h3>
<p><code>re.search()</code>  æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ï¼Œä¸è¦æ±‚å¿…é¡»æ˜¯æ–‡å­—å¼€å¤´ã€‚<br>
 <code>re.match()</code>  æŸ¥æ‰¾æ–‡å­—å¼€å¤´æ˜¯å¦ç¬¦åˆæ¡ä»¶ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">string = <span class="string">&#x27;abc1de2f&#x27;</span></span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">&#x27;[0-9]&#x27;</span>, string)</span><br><span class="line">print(m, m.group()) <span class="comment"># &lt;_sre.SRE_Match object; span=(3, 4), match=&#x27;1&#x27;&gt;  1</span></span><br><span class="line"></span><br><span class="line">m = re.match(<span class="string">&#x27;[0-9]&#x27;</span>, string)</span><br><span class="line">print(m) <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line">m = re.match(<span class="string">&#x27;[0-9]&#x27;</span>, <span class="string">&#x27;1abc1de2f&#x27;</span>)</span><br><span class="line">print(m, m.group()) <span class="comment"># &lt;_sre.SRE_Match object; span=(0, 1), match=&#x27;1&#x27;&gt;  1</span></span><br></pre></td></tr></table></figure>
<h3 id="name-group"><a class="markdownIt-Anchor" href="#name-group">#</a> name group</h3>
<p>name group: å‘½åç»„ï¼Œå¯ä»¥é€šè¿‡  <code>?P&lt;name&gt;</code>  ç»™æŸ¥æ‰¾åˆ°çš„ group å‘½å</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">r&#x27;out_(\d&#123;4&#125;)&#x27;</span>,<span class="string">&#x27;out_1984.txt&#x27;</span>)</span><br><span class="line">print(m.group(<span class="number">0</span>), m.group(<span class="number">1</span>)) <span class="comment"># out_1984 1984</span></span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">r&#x27;out_(?P&lt;year&gt;\d&#123;4&#125;)&#x27;</span>, <span class="string">&#x27;out_1984.txt&#x27;</span>)</span><br><span class="line">print(m.group(<span class="string">&#x27;year&#x27;</span>)) <span class="comment"># 1984</span></span><br></pre></td></tr></table></figure>
<h3 id="reference-group"><a class="markdownIt-Anchor" href="#reference-group">#</a> reference group</h3>
<p>reference group: å¼•ç”¨ç»„ï¼Œå¯ä»¥é€šè¿‡  <code>\n</code>  å¼•ç”¨åˆ†ç»„ï¼Œä»£è¡¨å¼•ç”¨ç¬¬ n ä¸ªåˆ†ç»„ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="comment"># \1 è¡¨ç¤ºå¼•ç”¨ç¬¬ä¸€ä¸ªåˆ†ç»„</span></span><br><span class="line">m = re.match(<span class="string">r&quot;&lt;([a-zA-Z]*)&gt;\w*&lt;/\1&gt;&quot;</span>, <span class="string">&quot;&lt;div&gt;Hello&lt;/div&gt;&quot;</span>)</span><br><span class="line">print(m.group(), m.group(<span class="number">0</span>), m.group(<span class="number">1</span>)) <span class="comment"># &lt;div&gt;Hello&lt;/div&gt; &lt;div&gt;Hello&lt;/div&gt; div</span></span><br></pre></td></tr></table></figure>
<h3 id="operate-sub-group"><a class="markdownIt-Anchor" href="#operate-sub-group">#</a> operate sub group</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;start TT end&quot;</span></span><br><span class="line">res = re.sub(<span class="string">r&quot;([A-Z])\1&quot;</span>, <span class="keyword">lambda</span> pat: pat.group(<span class="number">1</span>).lower(), s)</span><br><span class="line">print(res)  <span class="comment"># start t end</span></span><br></pre></td></tr></table></figure>
<h3 id="regex-example"><a class="markdownIt-Anchor" href="#regex-example">#</a> regex example</h3>
<p>æå–ç½‘é¡µä¸­çš„æ–‡å­—å†…å®¹ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">data_str = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;å²—ä½èŒè´£ï¼š&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;å®Œæˆæ¨èç®—æ³•ã€æ•°æ®ç»Ÿè®¡ã€æ¥å£ã€åå°ç­‰æœåŠ¡å™¨ç«¯ç›¸å…³å·¥ä½œ&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [^&gt;] é &gt; å­—ç¬¦</span></span><br><span class="line">print(re.sub(<span class="string">r&quot;&lt;[^&gt;]*&gt;|&amp;nbsp;|\n&quot;</span>, <span class="string">&quot;&quot;</span>, data_str)) <span class="comment"># å²—ä½èŒè´£ï¼šå®Œæˆæ¨èç®—æ³•ã€æ•°æ®ç»Ÿè®¡ã€æ¥å£ã€åå°ç­‰æœåŠ¡å™¨ç«¯ç›¸å…³å·¥ä½œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># .*? åŒ¹é…ä»»æ„å­—ç¬¦ä¸€ä¸ªæˆ–å¤šä¸ª, ? éè´ªå©ªåŒ¹é…</span></span><br><span class="line">print(re.sub(<span class="string">r&quot;&lt;.*?&gt;|&amp;nbsp;|\n&quot;</span>, <span class="string">&quot;&quot;</span>, data_str)) <span class="comment"># å²—ä½èŒè´£ï¼šå®Œæˆæ¨èç®—æ³•ã€æ•°æ®ç»Ÿè®¡ã€æ¥å£ã€åå°ç­‰æœåŠ¡å™¨ç«¯ç›¸å…³å·¥ä½œ</span></span><br></pre></td></tr></table></figure>
<h2 id="web"><a class="markdownIt-Anchor" href="#web">#</a> Web</h2>
<h3 id="html_request_header-to-dict"><a class="markdownIt-Anchor" href="#html_request_header-to-dict">#</a> html_request_header to dict</h3>
<p>å°†è¯·æ±‚å¤´é€šè¿‡åˆ†å‰²è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œå†é€šè¿‡  <code>dict(list)</code>  å‡½æ•°å°† list è½¬æ¢ä¸º dict.<br>
 <code>dict([['Host', 'open.tool.hexun.com']]) =&gt; &#123;'Host': 'open.tool.hexun.com'&#125;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">raw_headers = <span class="string">&quot;&quot;&quot;Host: open.tool.hexun.com</span></span><br><span class="line"><span class="string">Pragma: no-cache</span></span><br><span class="line"><span class="string">Cache-Control: no-cache</span></span><br><span class="line"><span class="string">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36</span></span><br><span class="line"><span class="string">Accept: */*</span></span><br><span class="line"><span class="string">Referer: http://stock.hexun.com/gsxw/</span></span><br><span class="line"><span class="string">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="string">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">headers = <span class="built_in">dict</span>([line.split(<span class="string">&quot;: &quot;</span>) <span class="keyword">for</span> line <span class="keyword">in</span> raw_headers.split(<span class="string">&quot;\n&quot;</span>)])</span><br><span class="line">print(headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#123;&#x27;Host&#x27;: &#x27;open.tool.hexun.com&#x27;, &#x27;Pragma&#x27;: &#x27;no-cache&#x27;, &#x27;Cache-Control&#x27;: &#x27;no-cache&#x27;, &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36&#x27;, &#x27;Accept&#x27;: &#x27;*/*&#x27;, &#x27;Referer&#x27;: &#x27;http://stock.hexun.com/gsxw/&#x27;, &#x27;Accept-Encoding&#x27;: &#x27;gzip, deflate&#x27;, &#x27;Accept-Language&#x27;: &#x27;zh-CN,zh;q=0.9,en;q=0.8&#x27;&#125; </span></span><br></pre></td></tr></table></figure>
<h3 id="request_html"><a class="markdownIt-Anchor" href="#request_html">#</a> request_html</h3>
<p>request_html å°†è·å–é¡µé¢å’Œè§£æé¡µé¢å†…å®¹æ•´åˆåœ¨ä¸€èµ·ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests_html <span class="keyword">import</span> HTMLSession</span><br><span class="line"></span><br><span class="line">session = HTMLSession()</span><br><span class="line">r = session.get(<span class="string">&#x27;https://python.org/&#x27;</span>)</span><br><span class="line">print(r.html.links)</span><br><span class="line"></span><br><span class="line">about = r.html.find(<span class="string">&#x27;#about&#x27;</span>, first=<span class="literal">True</span>)</span><br><span class="line">print(about.text)</span><br><span class="line"></span><br><span class="line">content = r.html.search(<span class="string">&#x27;python is a &#123;&#125; language&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure>
<h3 id="htmlparser-unescape-from-html-entity"><a class="markdownIt-Anchor" href="#htmlparser-unescape-from-html-entity">#</a> HTMLParser unescape from HTML Entity</h3>
<p>å°† HTML Entity è½¬æ¢ä¸ºæ™®é€šå­—ç¬¦</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> html.parser <span class="keyword">import</span> HTMLParser</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode_html</span>(<span class="params"><span class="built_in">input</span></span>):</span></span><br><span class="line">    h = HTMLParser()</span><br><span class="line">    s = h.unescape(<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(decode_html(<span class="string">&#x27;and#38451;&amp;#38175;&amp;#12345;&amp;lt;&amp;sect;&#x27;</span>)) <span class="comment"># é˜³é”Ÿã€¹&lt;Â§</span></span><br></pre></td></tr></table></figure>
<h3 id="pyppeteer"><a class="markdownIt-Anchor" href="#pyppeteer">#</a> pyppeteer</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> pyppeteer <span class="keyword">import</span> launch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    browser = <span class="keyword">await</span> launch()</span><br><span class="line">    page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">&#x27;http://example.com&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> page.screenshot(&#123;<span class="string">&#x27;path&#x27;</span>: <span class="string">&#x27;example.png&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">await</span> browser.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># AttributeError: module &#x27;asyncio&#x27; has no attribute &#x27;run&#x27;</span></span><br><span class="line"><span class="comment"># use python 3.7</span></span><br><span class="line"><span class="comment"># asyncio.run(main())</span></span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait([main()]))</span><br><span class="line">loop.close()</span><br></pre></td></tr></table></figure>
<h3 id="flask-index-page"><a class="markdownIt-Anchor" href="#flask-index-page">#</a> flask index page</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods = [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/page=&lt;page&gt;&#x27;</span>, methods = [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">page=<span class="number">1</span></span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="other"><a class="markdownIt-Anchor" href="#other">#</a> Other</h2>
<h3 id="python-and-python-m"><a class="markdownIt-Anchor" href="#python-and-python-m">#</a> python and python -m</h3>
<p><code>python run.py</code>  æ˜¯æŠŠ <span class="exturl" data-url="aHR0cDovL3J1bi5weQ==">run.py</span> æ‰€åœ¨çš„ç›®å½•æ”¾åˆ° sys.path å±æ€§ä¸­ã€‚</p>
<p><code>python -m run.py</code>  æ˜¯æŠŠè¾“å…¥å‘½ä»¤çš„ç›®å½•æ”¾åˆ° sys.path å±æ€§ä¸­ã€‚</p>
<h3 id="venv"><a class="markdownIt-Anchor" href="#venv">#</a> venv</h3>
<p>python3 create virtual enviroment.</p>
<ul>
<li>
<p>åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ  <code>python -m venv my-project</code></p>
</li>
<li>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</p>
</li>
<li>
<p>åœ¨ Posix æ ‡å‡†å¹³å°ä¸‹ï¼š <code>source &lt;venv&gt;/bin/activate</code></p>
<ul>
<li>åœ¨ Windows ä¸‹ï¼š <code>&lt;venv&gt;/Scripts/activate.bat</code></li>
</ul>
</li>
</ul>
<h3 id="share-file-use-mobile-and-computer"><a class="markdownIt-Anchor" href="#share-file-use-mobile-and-computer">#</a> share file use mobile and computer</h3>
<ol>
<li>cmd è¿›å…¥éœ€è¦å…±äº«çš„æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ  <code>python -m http.server</code></li>
<li>ipconfig/all æŸ¥çœ‹ç”µè„‘ ip</li>
<li>æ‰‹æœºç«¯è¿æ¥å’Œç”µè„‘åŒä¸€ä¸ªç½‘æ®µçš„ wifiï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ç”µè„‘ ip:port å³å¯å…±äº«æ–‡ä»¶</li>
</ol>
<h3 id="python-cprofile"><a class="markdownIt-Anchor" href="#python-cprofile">#</a> python cProfile</h3>
<blockquote>
<p>From: <span class="exturl" data-url="aHR0cHM6Ly93d3cuc2hlc2hiYWJ1LmNvbS9wb3N0cy9hbmFseXppbmctc2xvdy1weXRob24tY29kZS11c2luZy1jcHJvZmlsZS8=">Analyzing Slow python Code using cProfile</span></p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> cProfile</span><br><span class="line"><span class="keyword">import</span> pstats</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">profiler = cProfile.Profile()</span><br><span class="line">profiler.enable()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span>():</span></span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line">    b()</span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span>():</span></span><br><span class="line">    sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a()</span><br><span class="line"></span><br><span class="line">profiler.disable()</span><br><span class="line">stats = pstats.Stats(profiler)</span><br><span class="line">stats.dump_stats(<span class="string">&quot;./cProfile.stats&quot;</span>)</span><br><span class="line">stats.print_stats()</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ python test.py</span></span><br><span class="line"><span class="comment">#          6 function calls in 3.002 seconds</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#    Random listing order was used</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#    ncalls  tottime  percall  cumtime  percall filename:lineno(function)</span></span><br><span class="line"><span class="comment">#         1    0.000    0.000    1.001    1.001 C:\Users\Babb\Desktop\STUDY\cprofile-test\test.py:16(b)</span></span><br><span class="line"><span class="comment">#         1    0.000    0.000    3.002    3.002 C:\Users\Babb\Desktop\STUDY\cprofile-test\test.py:10(a)</span></span><br><span class="line"><span class="comment">#         3    3.002    1.001    3.002    1.001 &#123;built-in method time.sleep&#125;</span></span><br><span class="line"><span class="comment">#         1    0.000    0.000    0.000    0.000 &#123;method &#x27;disable&#x27; of &#x27;_lsprof.Profiler&#x27; objects&#125;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>$ pip install snakeviz</p>
<p>snakeviz cProfile.stats</p>
</blockquote>
<img data-src="/2019/06/06/python/1740729123010.png" class="">
<h3 id="chardet"><a class="markdownIt-Anchor" href="#chardet">#</a> chardet</h3>
<p>æ ¹æ®æ–‡ä»¶å†…å®¹æ£€æµ‹ç¼–ç ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;chardet_test.py&quot;</span>, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    file_data = f.read()</span><br><span class="line">    result = chardet.detect(file_data)</span><br><span class="line">    print(result)</span><br><span class="line"></span><br><span class="line">    file_content = file_data.decode(encoding=result[<span class="string">&quot;encoding&quot;</span>])</span><br><span class="line">    print(<span class="string">&quot;-&quot;</span> * <span class="number">50</span>)</span><br><span class="line">    print(file_content)</span><br></pre></td></tr></table></figure>
<h3 id="delete-bom"><a class="markdownIt-Anchor" href="#delete-bom">#</a> delete bom</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">open</span>(<span class="string">&#x27;./850_with_bom.json&#x27;</span>, mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="built_in">open</span>(<span class="string">&#x27;./850.json&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>).write(s)</span><br></pre></td></tr></table></figure>
<h3 id="windows-pip-install-permissionerror"><a class="markdownIt-Anchor" href="#windows-pip-install-permissionerror">#</a> windows pip install PermissionError</h3>
<p>PermissionError: [WinError 5] æ‹’ç»è®¿é—®ã€‚</p>
<p>æ‰¾åˆ° python å®‰è£…ç›®å½•èµ‹äºˆå½“å‰ç”¨æˆ·å®Œå…¨æ§åˆ¶çš„æƒé™ã€‚</p>
<h3 id="windows-schedule-call-python"><a class="markdownIt-Anchor" href="#windows-schedule-call-python">#</a> windows schedule call python</h3>
<p>å¦‚æœæ²¡æœ‰è®¾ç½® python ç¯å¢ƒå˜é‡å¯ä»¥åœ¨å¼€å§‹ä½ç½®å†™å…¥ python.exe çš„è·¯å¾„ï¼Œå¦‚  <code>C:\Program Files\python36</code></p>
<img data-src="/2019/06/06/python/1572255258767.png" class="">
<h3 id="python-run-daemon-on-window"><a class="markdownIt-Anchor" href="#python-run-daemon-on-window">#</a> python run daemon on window</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;C:\Program Files\python36\pythonw.exe&quot;</span> test.py</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line"><span class="string">&quot;C:\Program Files\python36\pythonw.exe&quot;</span> test.py &gt;log.txt <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line"><span class="string">&quot;C:\Program Files\python36\pythonw.exe&quot;</span> test.py <span class="number">1</span>&gt;stdout.txt <span class="number">2</span>&gt;stderr.txt</span><br></pre></td></tr></table></figure>
<h3 id="replace-double-slash-to-one-slash"><a class="markdownIt-Anchor" href="#replace-double-slash-to-one-slash">#</a> replace double slash to one slash</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">r&#x27;foo \\ bar&#x27;</span></span><br><span class="line">print(s)</span><br><span class="line">print(s.replace(<span class="string">&#x27;\\\\&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>))</span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;foo \\\\ bar&#x27;</span></span><br><span class="line">print(s)</span><br><span class="line">print(s.replace(<span class="string">&#x27;\\\\&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># foo \\ bar</span></span><br><span class="line"><span class="comment"># foo \ bar</span></span><br><span class="line"><span class="comment"># foo \\ bar</span></span><br><span class="line"><span class="comment"># foo \ bar</span></span><br></pre></td></tr></table></figure>
<h3 id="replace-normal-unicode-str-to-unicode-encoded-str"><a class="markdownIt-Anchor" href="#replace-normal-unicode-str-to-unicode-encoded-str">#</a> replace normal unicode str to unicode encoded str</h3>
<p>å°†æ™®é€šçš„ Unicode å­—ç¬¦ä¸²è½¬æ¢ä¸º Unicode ç¼–ç çš„å­—ç¬¦ä¸²ã€‚<br>
 <code>'\\u9500\\u552e' or r'\u9500\u552e'=&gt; '\u9500\u552e'</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;\\u9500\\u552e&quot;</span></span><br><span class="line">print(s) 			  <span class="comment"># \u9500\u552e</span></span><br><span class="line">print(<span class="string">&quot;\u9500\u552e&quot;</span>) <span class="comment"># é”€å”®</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># SyntaxError: (unicode error) &#x27;unicodeescape&#x27; codec can&#x27;t decode bytes in position 0-1: truncated \uXXXX escape</span></span><br><span class="line"><span class="comment"># \u ä¸èƒ½ç»„æˆå®Œæ•´å­—ç¬¦</span></span><br><span class="line"><span class="comment"># res = re.sub(&#x27;\\u&#x27;, &#x27;\u&#x27;, s)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&quot;\\u9500\\u552e&quot;</span></span><br><span class="line">print(json.loads(<span class="string">f&#x27;&quot;<span class="subst">&#123;s&#125;</span>&quot;&#x27;</span>)) <span class="comment"># é”€å”®</span></span><br><span class="line"></span><br><span class="line">print(s.encode().decode(<span class="string">&quot;unicode_escape&quot;</span>)) <span class="comment"># é”€å”®</span></span><br></pre></td></tr></table></figure>
<h3 id="while-loop-break"><a class="markdownIt-Anchor" href="#while-loop-break">#</a> while loop break</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># command = &#x27;&#x27;</span></span><br><span class="line"><span class="comment"># while command.lower() != &#x27;quit&#x27;:</span></span><br><span class="line"><span class="comment">#     command = input(&#x27;&gt;&#x27;)</span></span><br><span class="line"><span class="comment">#     result = eval(command)</span></span><br><span class="line"><span class="comment">#     print(result)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    command = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;ECHO&#x27;</span>, command)</span><br><span class="line">    <span class="keyword">if</span> command.lower() == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<h3 id="douban-pypi"><a class="markdownIt-Anchor" href="#douban-pypi">#</a> douban pypi</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure>
<h3 id="read-toml"><a class="markdownIt-Anchor" href="#read-toml">#</a> read toml</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> toml</span><br><span class="line"><span class="keyword">from</span> pprint <span class="keyword">import</span> pprint <span class="keyword">as</span> <span class="built_in">print</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_toml</span>(<span class="params">file_path</span>):</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(file_path, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        data = toml.load(f)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(read_toml(<span class="string">&quot;./config.toml&quot;</span>))</span><br></pre></td></tr></table></figure>
<p>config.toml</p>
<figure class="highlight toml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Even Better TOML</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&#x27;Babb&#x27;</span></span><br><span class="line"><span class="attr">age</span> = <span class="number">50</span></span><br><span class="line"><span class="attr">sex</span> = <span class="string">&quot;\&quot;Male\&quot;&quot;</span></span><br><span class="line"><span class="attr">hobbies</span> = [<span class="string">&#x27;reading&#x27;</span>, <span class="string">&#x27;coding&#x27;</span>, <span class="string">&#x27;gaming&#x27;</span>]</span><br><span class="line"><span class="attr">birthdate</span> = <span class="number">1998</span>-<span class="number">07</span>-<span class="number">07</span>T00:<span class="number">00</span>:<span class="number">00</span>Z</span><br><span class="line"><span class="attr">shape</span> = &#123; height = <span class="number">170</span>, wiight=<span class="number">60</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># [account]</span></span><br><span class="line"><span class="comment"># bilibili.username = &#x27;babb&#x27;</span></span><br><span class="line"><span class="comment"># bilibili.password = &#x27;xxx&#x27;</span></span><br><span class="line"><span class="comment"># youtube.username = &#x27;babb&#x27;</span></span><br><span class="line"><span class="comment"># youtube.password = &#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># [account.bilibili]</span></span><br><span class="line"><span class="comment"># username = &#x27;babb&#x27;</span></span><br><span class="line"><span class="comment"># password = &#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [account.youtube]</span></span><br><span class="line"><span class="comment"># username = &#x27;babb&#x27;</span></span><br><span class="line"><span class="comment"># password = &#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># account = [</span></span><br><span class="line"><span class="comment">#     &#123;name = &#x27;bilibili&#x27;, username = &#x27;babb&#x27;, password=&#x27;xxx&#x27;&#125;,</span></span><br><span class="line"><span class="comment">#     &#123;name = &#x27;youtube&#x27;, username = &#x27;babb&#x27;, password=&#x27;xxx&#x27;&#125;</span></span><br><span class="line"><span class="comment"># ]</span></span><br><span class="line"></span><br><span class="line"><span class="section">[[account]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&#x27;bilibili&#x27;</span></span><br><span class="line"><span class="attr">username</span> = <span class="string">&#x27;babb&#x27;</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">&#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[[account]]</span></span><br><span class="line"><span class="attr">name</span> = <span class="string">&#x27;youtube&#x27;</span></span><br><span class="line"><span class="attr">username</span> = <span class="string">&#x27;babb&#x27;</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">&#x27;xxx&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># &#123;&#x27;account&#x27;: [&#123;&#x27;name&#x27;: &#x27;bilibili&#x27;, &#x27;password&#x27;: &#x27;xxx&#x27;, &#x27;username&#x27;: &#x27;babb&#x27;&#125;,</span></span><br><span class="line"><span class="comment">#              &#123;&#x27;name&#x27;: &#x27;youtube&#x27;, &#x27;password&#x27;: &#x27;xxx&#x27;, &#x27;username&#x27;: &#x27;babb&#x27;&#125;],</span></span><br><span class="line"><span class="comment">#  &#x27;age&#x27;: 50,</span></span><br><span class="line"><span class="comment">#  &#x27;birthdate&#x27;: datetime.datetime(1998, 7, 7, 0, 0, tzinfo=&lt;toml.tz.TomlTz object at 0x000001F95DC7B8C0&gt;),</span></span><br><span class="line"><span class="comment">#  &#x27;hobbies&#x27;: [&#x27;reading&#x27;, &#x27;coding&#x27;, &#x27;gaming&#x27;],</span></span><br><span class="line"><span class="comment">#  &#x27;name&#x27;: &#x27;Babb&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;sex&#x27;: &#x27;&quot;Male&quot;&#x27;,</span></span><br><span class="line"><span class="comment">#  &#x27;shape&#x27;: &#123;&#x27;height&#x27;: 170, &#x27;wiight&#x27;: 60&#125;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="json-serialize"><a class="markdownIt-Anchor" href="#json-serialize">#</a> json serialize</h3>
<p>serialize date</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> json <span class="keyword">import</span> JSONEncoder</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> date</span><br><span class="line"></span><br><span class="line">now = datetime.now()</span><br><span class="line"></span><br><span class="line"><span class="comment"># TypeError: Object of type datetime is not JSON serializable</span></span><br><span class="line"><span class="comment"># print(json.dumps(now))</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomEncoder</span>(<span class="params">JSONEncoder</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">default</span>(<span class="params">self, obj</span>):</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(obj, date) <span class="keyword">or</span> <span class="built_in">isinstance</span>(obj, datetime):</span><br><span class="line">            <span class="keyword">return</span> obj.isoformat()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>().default(obj)</span><br><span class="line"></span><br><span class="line">print(json.dumps(now, cls=CustomEncoder)) <span class="comment"># &quot;2024-09-24T15:43:34.821884&quot;</span></span><br></pre></td></tr></table></figure>
<p>serialize custom object</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name, born</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.born = born</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">age</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> datetime.now().year - self.born</span><br><span class="line"></span><br><span class="line">person = Person(<span class="string">&quot;Babb Chen&quot;</span>, <span class="number">1994</span>)</span><br><span class="line"><span class="comment"># TypeError: Object of type Person is not JSON serializable</span></span><br><span class="line"><span class="comment"># print(json.dumps(person))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Not include property age</span></span><br><span class="line">print(person.__dict__) <span class="comment"># &#123;&#x27;name&#x27;: &#x27;Babb Chen&#x27;, &#x27;born&#x27;: 1994&#125;</span></span><br><span class="line">print(json.dumps(person.__dict__)) <span class="comment"># &#123;&quot;name&quot;: &quot;Babb Chen&quot;, &quot;born&quot;: 1994&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">seriealize_person</span>(<span class="params">obj</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">isinstance</span>(obj, Person):</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: obj.name,</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: obj.age</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">raise</span> TypeError(<span class="string">&quot;Object not serializable&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(json.dumps(person, default=seriealize_person)) <span class="comment"># &#123;&quot;name&quot;: &quot;Babb Chen&quot;, &quot;age&quot;: 30&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="format-xml"><a class="markdownIt-Anchor" href="#format-xml">#</a> format XML</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.dom.minidom <span class="keyword">as</span> xdom</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line">work_dir = <span class="string">r&#x27;C:\Users\11435\Desktop\practice\python\formatxml\xmlfiles&#x27;</span></span><br><span class="line"></span><br><span class="line">paths = Path(work_dir).glob(<span class="string">&#x27;**/*.xml&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> paths:</span><br><span class="line">    prettied = xdom.parseString(path.read_text()).toprettyxml()</span><br><span class="line">    path.write_text(pettied)</span><br></pre></td></tr></table></figure>
<h3 id="nested-xml-to-pandas-dataframe"><a class="markdownIt-Anchor" href="#nested-xml-to-pandas-dataframe">#</a> nested XML to pandas dataframe</h3>
<p>data.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">data</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">record</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Babb<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>30<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>New York<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">state</span>&gt;</span>NY<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">record</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">record</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>John<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">age</span>&gt;</span>25<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">address</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">city</span>&gt;</span>New York<span class="tag">&lt;/<span class="name">city</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">state</span>&gt;</span>NY<span class="tag">&lt;/<span class="name">state</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">address</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">record</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">data</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> xml.etree.ElementTree <span class="keyword">as</span> ET</span><br><span class="line"></span><br><span class="line">tree = ET.parse(<span class="string">&#x27;data.xml&#x27;</span>)</span><br><span class="line">root = tree.getroot()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_element</span>(<span class="params">element, item</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(<span class="built_in">list</span>(element)) == <span class="number">0</span>:</span><br><span class="line">        item[element.tag] = element.text</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> <span class="built_in">list</span>(element):</span><br><span class="line">            parse_element(child, item)</span><br><span class="line"></span><br><span class="line">data = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> child <span class="keyword">in</span> root:</span><br><span class="line">    item = &#123;&#125;</span><br><span class="line">    parse_element(child, item)</span><br><span class="line">    data.append(item)</span><br><span class="line"></span><br><span class="line">print(data)</span><br><span class="line"><span class="comment"># [&#123;&#x27;name&#x27;: &#x27;Babb&#x27;, &#x27;age&#x27;: &#x27;30&#x27;, &#x27;city&#x27;: &#x27;New York&#x27;, &#x27;state&#x27;: &#x27;NY&#x27;&#125;, &#123;&#x27;name&#x27;: &#x27;John&#x27;, &#x27;age&#x27;: &#x27;25&#x27;, &#x27;city&#x27;: &#x27;New York&#x27;, &#x27;state&#x27;: &#x27;NY&#x27;&#125;]</span></span><br><span class="line"></span><br><span class="line">df = pd.DataFrame(data)</span><br><span class="line">print(df)</span><br><span class="line"><span class="comment">#    name age      city state</span></span><br><span class="line"><span class="comment"># 0  Babb  30  New York    NY</span></span><br><span class="line"><span class="comment"># 1  John  25  New York    NY</span></span><br></pre></td></tr></table></figure>
<p><strong>Use pandas.read_xml iterparse</strong></p>
<ul>
<li>iterparse dict, optional<br>
The nodes or attributes to retrieve in iterparsing of XML document as a dict with key being the name of repeating element and value being list of elements or attribute names that are descendants of the repeated element. Note: If this option is used, it will replace xpath parsing and unlike xpath, descendants do not need to relate to each other but can exist any where in document under the repeating element. This memory-efficient method should be used for very large XML files (500MB, 1GB, or 5GB+). For example,  <code>iterparse = &#123;&quot;row_element&quot;: [&quot;child_elem&quot;, &quot;attr&quot;, &quot;grandchild_elem&quot;]</code></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define the structure for iterparse</span></span><br><span class="line">iterparse_config = &#123;</span><br><span class="line">    <span class="string">&quot;record&quot;</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;city&quot;</span>, <span class="string">&quot;state&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read the XML using iterparse</span></span><br><span class="line">df = pd.read_xml(<span class="string">&#x27;data.xml&#x27;</span>, iterparse=iterparse_config)</span><br><span class="line"></span><br><span class="line">print(df)</span><br><span class="line"><span class="comment">#    name age      city state</span></span><br><span class="line"><span class="comment"># 0  Babb  30  New York    NY</span></span><br><span class="line"><span class="comment"># 1  John  25  New York    NY</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO, StringIO</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">xml_data = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;data&gt;</span></span><br><span class="line"><span class="string">    &lt;record&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;Babb&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;age&gt;30&lt;/age&gt;</span></span><br><span class="line"><span class="string">        &lt;address&gt;</span></span><br><span class="line"><span class="string">            &lt;city&gt;New York&lt;/city&gt;</span></span><br><span class="line"><span class="string">            &lt;state&gt;NY&lt;/state&gt;</span></span><br><span class="line"><span class="string">        &lt;/address&gt;</span></span><br><span class="line"><span class="string">    &lt;/record&gt;</span></span><br><span class="line"><span class="string">    &lt;record&gt;</span></span><br><span class="line"><span class="string">        &lt;name&gt;John&lt;/name&gt;</span></span><br><span class="line"><span class="string">        &lt;age&gt;25&lt;/age&gt;</span></span><br><span class="line"><span class="string">        &lt;address&gt;</span></span><br><span class="line"><span class="string">            &lt;city&gt;New York&lt;/city&gt;</span></span><br><span class="line"><span class="string">            &lt;state&gt;NY&lt;/state&gt;</span></span><br><span class="line"><span class="string">        &lt;/address&gt;</span></span><br><span class="line"><span class="string">    &lt;/record&gt;</span></span><br><span class="line"><span class="string">&lt;/data&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Define the structure for iterparse</span></span><br><span class="line">iterparse_config = &#123;</span><br><span class="line">    <span class="string">&quot;record&quot;</span>: [<span class="string">&quot;name&quot;</span>, <span class="string">&quot;age&quot;</span>, <span class="string">&quot;city&quot;</span>, <span class="string">&quot;state&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read the XML using iterparse, default parser is &#x27;lxml&#x27;</span></span><br><span class="line"><span class="comment"># df = pd.read_xml(StringIO(xml_data.encode()), iterparse=iterparse_config) # TypeError: reading file objects must return bytes objects</span></span><br><span class="line">df = pd.read_xml(BytesIO(xml_data.encode()), iterparse=iterparse_config)</span><br><span class="line"><span class="comment"># from lxml import etree</span></span><br><span class="line"><span class="comment"># for event, elements in etree.iterparse(BytesIO(xml_data.encode()):</span></span><br><span class="line"><span class="comment">#     pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use parser &#x27;etree&#x27;</span></span><br><span class="line">df = pd.read_xml(BytesIO(xml_data.encode()), iterparse=iterparse_config, parser=<span class="string">&#x27;etree&#x27;</span>)</span><br><span class="line">df = pd.read_xml(StringIO(xml_data), iterparse=iterparse_config, parser=<span class="string">&#x27;etree&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(df)</span><br></pre></td></tr></table></figure>
<h3 id="fake-large-csv"><a class="markdownIt-Anchor" href="#fake-large-csv">#</a> fake large csv</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> faker <span class="keyword">import</span> Faker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_large_csv</span>(<span class="params">num_rows, filename</span>):</span></span><br><span class="line">    fake = Faker()</span><br><span class="line">    data = []</span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_rows):</span><br><span class="line">        data.append(</span><br><span class="line">            [</span><br><span class="line">                fake.uuid4(),</span><br><span class="line">                fake.name(),</span><br><span class="line">                fake.email(),</span><br><span class="line">                fake.date_between(start_date=<span class="string">&quot;-5y&quot;</span>, end_date=<span class="string">&quot;today&quot;</span>),</span><br><span class="line">                fake.country(),</span><br><span class="line">                fake.random_int(<span class="built_in">min</span>=<span class="number">1000</span>, <span class="built_in">max</span>=<span class="number">100000</span>),</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">    df = pd.DataFrame(data, columns=[<span class="string">&quot;id&quot;</span>, <span class="string">&quot;name&quot;</span>, <span class="string">&quot;email&quot;</span>, <span class="string">&quot;date&quot;</span>, <span class="string">&quot;country&quot;</span>, <span class="string">&quot;value&quot;</span>])</span><br><span class="line">    df.to_csv(filename, index=<span class="literal">False</span>)</span><br><span class="line">    print(<span class="string">f&quot;Generated <span class="subst">&#123;num_rows&#125;</span> rows and saved to <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    generate_large_csv(<span class="number">100_000</span>, <span class="string">&quot;large_data.csv&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="csv-to-database"><a class="markdownIt-Anchor" href="#csv-to-database">#</a> csv to database</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># import os</span></span><br><span class="line"><span class="comment"># os.environ[&quot;NLS_LANG&quot;] = &quot;GERMAN_GERMANY.UTF8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨ cx_oracle æ¨¡å—</span></span><br><span class="line">engine = create_engine(<span class="string">&#x27;oracle+cx_oracle://username:pass@ip:port/instance&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¯»å–æœ¬åœ° CSV æ–‡ä»¶</span></span><br><span class="line">df = pd.read_csv(<span class="string">&quot;test.csv&quot;</span>, sep=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ–°å»ºçš„ DataFrame å‚¨å­˜ä¸º Oracle ä¸­çš„æ•°æ®è¡¨ï¼Œä¸å‚¨å­˜ index åˆ—</span></span><br><span class="line"><span class="comment"># å­—ç¬¦ä¸²åœ¨ Oracle ä¸­å­˜å‚¨çš„æ˜¯ Clob å¯¹è±¡</span></span><br><span class="line">df.to_sql(<span class="string">&#x27;test&#x27;</span>, engine, index= <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&quot;Write to Oracle successfully!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="quit-python-interactive-shell"><a class="markdownIt-Anchor" href="#quit-python-interactive-shell">#</a> quit python Interactive Shell</h3>
<p>python Interactive Shell é€šè¿‡ EOF (End Of File) é€€å‡ºï¼Œpython åœ¨ parse stdin çš„æ—¶å€™åˆ¤æ–­æ˜¯å¦æ˜¯ EOFã€‚</p>
<p>Mac/Linux æŒ‰ Ctrl + D é€€å‡ºï¼ŒWindow å…ˆæŒ‰ Ctrl + Z ç„¶åæŒ‰ Enter é€€å‡ºã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python 3.9.6 (tags/v3.9.6:db3ff76, Jun 28 2021, 15:26:21) [MSC v.1929 64 bit (AMD64)] on win32</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; ^Z</span></span><br></pre></td></tr></table></figure>
<h3 id="jupyter-notebook-to-markdown"><a class="markdownIt-Anchor" href="#jupyter-notebook-to-markdown">#</a> Jupyter notebook to markdown</h3>
<p><code>jupyter nbconvert -h</code></p>
<p><code>jupyter nbconvert mynotebook.ipynb --to markdown</code></p>
<h3 id="prettytable"><a class="markdownIt-Anchor" href="#prettytable">#</a> prettytable</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> prettytable <span class="keyword">import</span> PrettyTable</span><br><span class="line">row = PrettyTable([<span class="string">&quot;åŸå¸‚&quot;</span>,<span class="string">&quot;æ€»è®¿é—®é‡&quot;</span>, <span class="string">&quot;å¤±è´¥é‡&quot;</span>, <span class="string">&quot;æ…¢é€Ÿé‡&quot;</span>,<span class="string">&quot;å¤±è´¥ç‡&quot;</span>,<span class="string">&quot;æ…¢é€Ÿç‡&quot;</span>])</span><br><span class="line">row.align[<span class="string">&quot;åŸå¸‚&quot;</span>] = <span class="string">&quot;l&quot;</span> <span class="comment"># Left align city names</span></span><br><span class="line">row.padding_width = <span class="number">1</span>   <span class="comment"># One space between column edges and contents (default)</span></span><br><span class="line"></span><br><span class="line">retrow = [[<span class="string">&#x27;éƒ‘å·&#x27;</span>,<span class="number">241</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0.41</span>,<span class="number">0.83</span>],[<span class="string">&#x27;çµå®&#x27;</span>,<span class="number">56</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.0</span>,<span class="number">1.79</span>]]</span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> retrow:</span><br><span class="line">    row.add_row(r)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/study/fragment/mytable&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> hfile:</span><br><span class="line">    hfile.write(<span class="built_in">str</span>(row))</span><br><span class="line">    hfile.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># mytable</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br><span class="line"><span class="comment"># | åŸå¸‚ | æ€»è®¿é—®é‡  | å¤±è´¥é‡ | æ…¢é€Ÿé‡ | å¤±è´¥ç‡ | æ…¢é€Ÿç‡ |</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br><span class="line"><span class="comment"># | éƒ‘å· |   241    |   1    |   2    |  0.41  |  0.83  |</span></span><br><span class="line"><span class="comment"># | çµå® |    56    |   0    |   1    |  0.0   |  1.79  |</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br></pre></td></tr></table></figure>
<h3 id="tqdm"><a class="markdownIt-Anchor" href="#tqdm">#</a> tqdm</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># for _ in tqdm(range(10000)):</span></span><br><span class="line"><span class="comment">#     time.sleep(0.001)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for _ in trange(10000):</span></span><br><span class="line"><span class="comment">#     time.sleep(0.001)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for _ in tqdm(range(10000), desc=&quot;description&quot;):</span></span><br><span class="line"><span class="comment">#     time.sleep(0.001)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># list1 = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;]</span></span><br><span class="line"><span class="comment"># for _ in tqdm(list1):</span></span><br><span class="line"><span class="comment">#     time.sleep(0.5)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def generator():</span></span><br><span class="line"><span class="comment">#     for i in range(50):</span></span><br><span class="line"><span class="comment">#         yield i</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># for _ in tqdm(generator(), total=50):</span></span><br><span class="line"><span class="comment">#     time.sleep(0.1)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># with tqdm(total=100) as progress_bar:</span></span><br><span class="line"><span class="comment">#     progress_bar.update(10)</span></span><br><span class="line"><span class="comment">#     time.sleep(1)</span></span><br><span class="line"><span class="comment">#     progress_bar.update(20)</span></span><br><span class="line"><span class="comment">#     time.sleep(1)</span></span><br><span class="line"><span class="comment">#     progress_bar.update(30)</span></span><br><span class="line"><span class="comment">#     time.sleep(2)</span></span><br><span class="line"><span class="comment">#     progress_bar.update(100)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"></span><br><span class="line">df = sns.load_dataset(<span class="string">&quot;iris&quot;</span>)</span><br><span class="line">print(df.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># df.petal_width.apply(lambda x: x * 2)</span></span><br><span class="line"></span><br><span class="line">tqdm.pandas(desc=<span class="string">&quot;Processing iris&quot;</span>)</span><br><span class="line">df.petal_width.progress_apply(<span class="keyword">lambda</span> x: x * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="dotenv-to-enviroment"><a class="markdownIt-Anchor" href="#dotenv-to-enviroment">#</a> dotenv to enviroment</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># load_dotenv(&quot;./project_a.env&quot;)</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">db_user = os.getenv(<span class="string">&quot;DB_USER&quot;</span>)</span><br><span class="line">db_password = os.getenv(<span class="string">&quot;DB_PASSWORD&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;db_user=&#125;</span>&quot;</span>)</span><br><span class="line">print(<span class="string">f&quot;<span class="subst">&#123;db_password=&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>.env</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DB_USER &#x3D; &#39;fake_username&#39;</span><br><span class="line">DB_PASSWORD &#x3D; &#39;fake_password&#39;</span><br></pre></td></tr></table></figure>
<h2 id="quiz"><a class="markdownIt-Anchor" href="#quiz">#</a> Quiz</h2>
<h3 id="why-judgement-none-must-use-is-in-python"><a class="markdownIt-Anchor" href="#why-judgement-none-must-use-is-in-python">#</a> Why judgement None must use â€˜isâ€™ in python?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> a:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="keyword">if</span> a == <span class="literal">None</span>:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€ç§æ–¹å¼åœ¨ <code>[], &#123;&#125;, set(), None, False</code>  è¿™å‡ ç§æƒ…å†µä¸‹éƒ½ç¬¦åˆï¼Œç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ä¹Ÿå¯ä»¥é€šè¿‡é‡è½½  <code>__bool__</code>  å®šä¹‰ä»€ä¹ˆæ—¶å€™æ˜¯ True/False.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">lst = [[], &#123;&#125;, <span class="built_in">set</span>(), <span class="literal">None</span>, <span class="literal">False</span>]</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> lst:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> a:</span><br><span class="line">        print(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"><span class="comment"># &#123;&#125;</span></span><br><span class="line"><span class="comment"># set()</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDataStructure</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">d = MyDataStructure()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> d:</span><br><span class="line">    print(<span class="string">&quot;It&#x27;s None&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># It&#x27;s None</span></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§æ–¹å¼ï¼Œç”¨æˆ·è‡ªå®šä¹‰ç±»å‹å¯ä»¥é€šè¿‡é‡è½½ <strong>eq</strong> å®šä¹‰ä»€ä¹ˆæ—¶å€™æ˜¯ True/False.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDataStructure</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">d = MyDataStructure()</span><br><span class="line"><span class="keyword">if</span> d == <span class="literal">None</span>:</span><br><span class="line">    print(d)</span><br><span class="line"><span class="comment"># &lt;__main__.MyDataStructure object at 0x000001BAA1B0AFA0&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="why-list-comprehensions-multi-lambdas-ouput-same-result"><a class="markdownIt-Anchor" href="#why-list-comprehensions-multi-lambdas-ouput-same-result">#</a> Why list comprehensions multi lambdas ouput same result?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">funcs = [<span class="keyword">lambda</span> x: x**i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>)]</span><br><span class="line"></span><br><span class="line">print(funcs[<span class="number">0</span>](<span class="number">10</span>), funcs[<span class="number">1</span>](<span class="number">10</span>), funcs[<span class="number">2</span>](<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 100000 100000 100000</span></span><br></pre></td></tr></table></figure>
<p>Internal Mechanics of List Comprehensions</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dis</span><br><span class="line"></span><br><span class="line">compiled_code = <span class="built_in">compile</span>(<span class="string">&#x27;[i**2 for i in (1, 2, 3)]&#x27;</span>, filename=<span class="string">&#x27;&#x27;</span>, mode=<span class="string">&#x27;eval&#x27;</span>)</span><br><span class="line">dis.dis(compiled_code)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 0 LOAD_CONST               0 (&lt;code object &lt;listcomp&gt; at 0x000001F77210ED20, file &quot;&quot;, line 1&gt;)</span></span><br><span class="line"><span class="comment"># 2 LOAD_CONST               1 (&#x27;&lt;listcomp&gt;&#x27;)</span></span><br><span class="line"><span class="comment"># 4 MAKE_FUNCTION            0</span></span><br><span class="line"><span class="comment"># 6 LOAD_CONST               5 ((1, 2, 3))</span></span><br><span class="line"><span class="comment"># 8 GET_ITER</span></span><br><span class="line"><span class="comment"># 10 CALL_FUNCTION            1</span></span><br><span class="line"><span class="comment"># 12 RETURN_VALUE</span></span><br></pre></td></tr></table></figure>
<p>As you can see, in step 4, python created a function ( <code>MAKE_FUNCTION</code> ), called it ( <code>CALL_FUNCTION</code> ), and then returned the result ( <code>RETURN_VALUE</code> ) in the last step.</p>
<p>So, comprehensions will behave like functions in terms of <strong>scope</strong>. They have local scope, and can access global and nonlocal scopes too. And nested comprehensions will also behave like nested functions and closures.</p>
<p>In  <code>funcs = [lambda x: x**i for i in range(6)]</code>  the <code>i</code>  was a <strong>local</strong> variable in the list comprehension, and each function created in the comprehension is referencing the same  <code>i</code>  - it is local to the comprehension, and each lambda is therefore a closure with (the same) free variable  <code>i</code> . And by the time the comprehension has finished running,  <code>i</code>  had a value of 5</p>
<p>The above code is like below, except the  <code>i</code>  is global variable.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">funcs = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>):</span><br><span class="line">    funcs.append(<span class="keyword">lambda</span> x: x**i)</span><br><span class="line"></span><br><span class="line">print(i, <span class="string">&#x27;i&#x27;</span> <span class="keyword">in</span> <span class="built_in">globals</span>())</span><br><span class="line">print(funcs[<span class="number">0</span>](<span class="number">10</span>), funcs[<span class="number">1</span>](<span class="number">10</span>), funcs[<span class="number">2</span>](<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 5 True</span></span><br><span class="line"><span class="comment"># 100000 100000 100000</span></span><br></pre></td></tr></table></figure>
<p>Can we somehow fix this problem?</p>
<p>Yes, and it relies on default values and when default values are calculated and stored with the function definition. Recall thatd efault values are evaluated and stored with the functionâ€™s definition <strong>when the function is being created (i.e. compiled)</strong>. Right now we are running into a problem because the free variable  <code>i</code>  is being evauated inside each functionâ€™s body at <strong>run time</strong>.</p>
<p>So, we can fix this by making each current value of  <code>i</code>  a paramer default of each lambda - this will get evaluated at the functions creation time - i.e. at each loop iteration:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">funcs = [<span class="keyword">lambda</span> x, <span class="built_in">pow</span>=i: x**<span class="built_in">pow</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">6</span>)]</span><br><span class="line"></span><br><span class="line">print(funcs[<span class="number">0</span>](<span class="number">10</span>), funcs[<span class="number">1</span>](<span class="number">10</span>), funcs[<span class="number">2</span>](<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1, 10, 100</span></span><br></pre></td></tr></table></figure>
<h3 id="the-difference-of-iterable-and-iterator"><a class="markdownIt-Anchor" href="#the-difference-of-iterable-and-iterator">#</a> The difference of iterable and iterator?</h3>
<p>iterator must be iterableï¼Œbut iterable not must be iterator.</p>
<h4 id="iterator"><a class="markdownIt-Anchor" href="#iterator">#</a> iterator</h4>
<ol>
<li>
<p>implement  <code>__iter__</code>  and  <code>__next__</code>  method.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cities</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self._cities = [<span class="string">&#x27;Paris&#x27;</span>, <span class="string">&#x27;Berlin&#x27;</span>, <span class="string">&#x27;Rome&#x27;</span>, <span class="string">&#x27;Madrid&#x27;</span>, <span class="string">&#x27;London&#x27;</span>]</span><br><span class="line">        self._index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">if</span> self._index &gt;= <span class="built_in">len</span>(self._cities):</span><br><span class="line">            <span class="keyword">raise</span> StopIteration</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            item = self._cities[self._index]</span><br><span class="line">            self._index += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>yield generator</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">factorials</span>(<span class="params">n</span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        <span class="keyword">yield</span> math.factorial(i)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> factorials(<span class="number">5</span>):</span><br><span class="line">    print(num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 6</span></span><br><span class="line"><span class="comment"># 24</span></span><br><span class="line"></span><br><span class="line">f = factorials(<span class="number">5</span>)</span><br><span class="line">print(<span class="string">&#x27;__iter__&#x27;</span> <span class="keyword">in</span> <span class="built_in">dir</span>(f), <span class="string">&#x27;__next__&#x27;</span> <span class="keyword">in</span> <span class="built_in">dir</span>(f)) <span class="comment"># True True</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="iterable-2"><a class="markdownIt-Anchor" href="#iterable-2">#</a> iterable</h4>
<ol>
<li>
<p>implement  <code>__getitem__</code>  method</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fib</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, n</span>):</span></span><br><span class="line">        self._n = n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self._n</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, s</span>):</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(s, <span class="built_in">int</span>):</span><br><span class="line">            <span class="comment"># single item requested</span></span><br><span class="line">            <span class="keyword">if</span> s &lt; <span class="number">0</span>:</span><br><span class="line">                s = self._n + s</span><br><span class="line">            <span class="keyword">if</span> s &lt; <span class="number">0</span> <span class="keyword">or</span> s &gt; self._n - <span class="number">1</span>:</span><br><span class="line">                <span class="keyword">raise</span> IndexError</span><br><span class="line">            <span class="keyword">return</span> self._fib(s)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># slice being requested</span></span><br><span class="line">            idx = s.indices(self._n)</span><br><span class="line">            rng = <span class="built_in">range</span>(idx[<span class="number">0</span>], idx[<span class="number">1</span>], idx[<span class="number">2</span>])</span><br><span class="line">            <span class="keyword">return</span> [self._fib(n) <span class="keyword">for</span> n <span class="keyword">in</span> rng]</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line"><span class="meta">    @lru_cache(<span class="params"><span class="number">2</span>**<span class="number">32</span></span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_fib</span>(<span class="params">n</span>):</span></span><br><span class="line">        <span class="keyword">if</span> n &lt; <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> fib(n-<span class="number">1</span>) + fib(n-<span class="number">2</span>)</span><br><span class="line">f = Fib(<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> f:</span><br><span class="line">    print(item)</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># 8</span></span><br><span class="line"><span class="comment"># 13</span></span><br><span class="line"><span class="comment"># 21</span></span><br><span class="line"><span class="comment"># 34</span></span><br><span class="line"><span class="comment"># 55</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print(f[5::-1]) # [8, 5, 3, 2, 1, 1]</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>implement  <code>__iter__</code>  method and the method return iterator, but not implement  <code>__next__</code> .</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cities</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self._cities = [<span class="string">&#x27;New York&#x27;</span>, <span class="string">&#x27;Newark&#x27;</span>, <span class="string">&#x27;New Delhi&#x27;</span>, <span class="string">&#x27;Newcastle&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">len</span>(self._cities)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getitem__</span>(<span class="params">self, s</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;getting item...&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self._cities[s]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;Calling Cities instance __iter__&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.CityIterator(self)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">CityIterator</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, city_obj</span>):</span></span><br><span class="line">            <span class="comment"># cities is an instance of Cities</span></span><br><span class="line">            print(<span class="string">&#x27;Calling CityIterator __init__&#x27;</span>)</span><br><span class="line">            self._city_obj = city_obj</span><br><span class="line">            self._index = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__iter__</span>(<span class="params">self</span>):</span></span><br><span class="line">            print(<span class="string">&#x27;Calling CitiyIterator instance __iter__&#x27;</span>)</span><br><span class="line">            <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">__next__</span>(<span class="params">self</span>):</span></span><br><span class="line">            print(<span class="string">&#x27;Calling __next__&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> self._index &gt;= <span class="built_in">len</span>(self._city_obj):</span><br><span class="line">                <span class="keyword">raise</span> StopIteration</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                item = self._city_obj._cities[self._index]</span><br><span class="line">                self._index += <span class="number">1</span></span><br><span class="line">                <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure>
</li>
</ol>

      <div class="tags">
          <a href="/tags/python/" rel="tag"><i class="ic i-tag"></i> python</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2025-12-19 17:59:24" itemprop="dateModified" datetime="2025-12-19T17:59:24+08:00">2025-12-19</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2019/06/06/uml-sequence/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;ç§¦æ—¶æ˜æœˆ-3.jpg" title="UML ä½¿ç”¨å¾ªåºåœ–å‚³é”å„ç‰©ä»¶äº’å‹•åŠæ™‚åºé—œä¿‚">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>UML ä½¿ç”¨å¾ªåºåœ–å‚³é”å„ç‰©ä»¶äº’å‹•åŠæ™‚åºé—œä¿‚</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2019/06/06/python-fire/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;çº¦ä¼šå¤§ä½œæˆ˜.jpg" title="Python Fire">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Python Fire</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#io"><span class="toc-number">1.</span> <span class="toc-text"> IO</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#file-open"><span class="toc-number">1.1.</span> <span class="toc-text"> file open</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-lines"><span class="toc-number">1.2.</span> <span class="toc-text"> file lines</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-state"><span class="toc-number">1.3.</span> <span class="toc-text"> file state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#oswalk"><span class="toc-number">1.4.</span> <span class="toc-text"> os.walk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stringio"><span class="toc-number">1.5.</span> <span class="toc-text"> StringIO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shutilmove-and-osrename"><span class="toc-number">1.6.</span> <span class="toc-text"> shutil.move and os.rename</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shutilcopy2-copy-file-with-metadata"><span class="toc-number">1.7.</span> <span class="toc-text"> shutil.copy2 copy file with metadata</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print"><span class="toc-number">1.8.</span> <span class="toc-text"> print</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print-s-r"><span class="toc-number">1.9.</span> <span class="toc-text"> print %s, %r</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fstring"><span class="toc-number">1.10.</span> <span class="toc-text"> fstring</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#logical-lines"><span class="toc-number">1.11.</span> <span class="toc-text"> logical lines</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#container"><span class="toc-number">2.</span> <span class="toc-text"> Container</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#string-index"><span class="toc-number">2.1.</span> <span class="toc-text"> string index</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string-interning"><span class="toc-number">2.2.</span> <span class="toc-text"> string interning</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#and"><span class="toc-number">2.3.</span> <span class="toc-text"> + and +&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__sub__"><span class="toc-number">2.4.</span> <span class="toc-text"> __sub__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collections-type-check"><span class="toc-number">2.5.</span> <span class="toc-text"> collections type check</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iterable"><span class="toc-number">2.6.</span> <span class="toc-text"> iterable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iter"><span class="toc-number">2.7.</span> <span class="toc-text"> iter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iterator-and-generator"><span class="toc-number">2.8.</span> <span class="toc-text"> iterator and generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defaultdict-realize-multidict"><span class="toc-number">2.9.</span> <span class="toc-text"> defaultdict realize multidict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip-and-zip_longest"><span class="toc-number">2.10.</span> <span class="toc-text"> zip and zip_longest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict_keys-and-dict_items"><span class="toc-number">2.11.</span> <span class="toc-text"> dict_keys and dict_items</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict-set-comprehension"><span class="toc-number">2.12.</span> <span class="toc-text"> dict &amp; set comprehension</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict-update"><span class="toc-number">2.13.</span> <span class="toc-text"> dict update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict-sort-by-values"><span class="toc-number">2.14.</span> <span class="toc-text"> dict sort by values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tuple"><span class="toc-number">2.15.</span> <span class="toc-text"> tuple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tuple-compare"><span class="toc-number">2.16.</span> <span class="toc-text"> tuple compare</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typing-namedtuple"><span class="toc-number">2.17.</span> <span class="toc-text"> typing namedtuple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools"><span class="toc-number">2.18.</span> <span class="toc-text"> itertools</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-groupby"><span class="toc-number">2.19.</span> <span class="toc-text"> itertools groupby</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-product"><span class="toc-number">2.20.</span> <span class="toc-text"> itertools product</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-combinations_with_replacement"><span class="toc-number">2.21.</span> <span class="toc-text"> itertools combinations_with_replacement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-combinations"><span class="toc-number">2.22.</span> <span class="toc-text"> itertools combinations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-permutations"><span class="toc-number">2.23.</span> <span class="toc-text"> itertools permutations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-batched-split-chunk"><span class="toc-number">2.24.</span> <span class="toc-text"> itertools batched split chunk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice"><span class="toc-number">2.25.</span> <span class="toc-text"> slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#hashable"><span class="toc-number">2.26.</span> <span class="toc-text"> hashable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#set-membership-is-much-faster-than-list-or-tuple-membership"><span class="toc-number">2.27.</span> <span class="toc-text"> set membership is much faster than list or tuple membership</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#enumerate-start"><span class="toc-number">2.28.</span> <span class="toc-text"> enumerate start</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#counter"><span class="toc-number">2.29.</span> <span class="toc-text"> Counter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeddict"><span class="toc-number">2.30.</span> <span class="toc-text"> TypedDict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itemgetter"><span class="toc-number">2.31.</span> <span class="toc-text"> itemgetter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#remove-list-duplicates-and-keep-order"><span class="toc-number">2.32.</span> <span class="toc-text"> remove list duplicates and keep order</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reversed"><span class="toc-number">2.33.</span> <span class="toc-text"> reversed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flatten-list"><span class="toc-number">2.34.</span> <span class="toc-text"> flatten list</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#secrets-password-generator"><span class="toc-number">2.35.</span> <span class="toc-text"> secrets password generator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class"><span class="toc-number">3.</span> <span class="toc-text"> Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#super"><span class="toc-number">3.1.</span> <span class="toc-text"> super()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__class__-point-to-class"><span class="toc-number">3.2.</span> <span class="toc-text"> __class__ point to class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#calendar"><span class="toc-number">3.3.</span> <span class="toc-text"> calendar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-and-isinstance"><span class="toc-number">3.4.</span> <span class="toc-text"> type() and isinstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typing-udtuser-defined-types"><span class="toc-number">3.5.</span> <span class="toc-text"> typing udt(user-defined types)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-monkey-patch"><span class="toc-number">3.6.</span> <span class="toc-text"> dynamic monkey patch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-import"><span class="toc-number">3.7.</span> <span class="toc-text"> dynamic import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import-order"><span class="toc-number">3.8.</span> <span class="toc-text"> import order</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#relative-and-absolute-import"><span class="toc-number">3.9.</span> <span class="toc-text"> relative and absolute import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dataclass"><span class="toc-number">3.10.</span> <span class="toc-text"> dataclass</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#property-and-descriptor"><span class="toc-number">3.11.</span> <span class="toc-text"> property and descriptor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#enum"><span class="toc-number">3.12.</span> <span class="toc-text"> enum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#abstract-class"><span class="toc-number">3.13.</span> <span class="toc-text"> abstract class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bultin-type-constructor-without-parameter"><span class="toc-number">3.14.</span> <span class="toc-text"> bultin type constructor without parameter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keyword-and-soft-keyword"><span class="toc-number">3.15.</span> <span class="toc-text"> keyword and soft keyword</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#class-arribute-and-instance-arribute"><span class="toc-number">3.16.</span> <span class="toc-text"> class arribute and instance arribute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__slots__"><span class="toc-number">3.17.</span> <span class="toc-text"> __slots__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#private-attribute"><span class="toc-number">3.18.</span> <span class="toc-text"> private attribute</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__format__"><span class="toc-number">3.19.</span> <span class="toc-text"> __format__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__getitem__"><span class="toc-number">3.20.</span> <span class="toc-text"> __getitem__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typing"><span class="toc-number">3.21.</span> <span class="toc-text"> typing</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fun"><span class="toc-number">4.</span> <span class="toc-text"> Fun</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nonlocal"><span class="toc-number">4.1.</span> <span class="toc-text"> nonlocal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#imp"><span class="toc-number">4.2.</span> <span class="toc-text"> imp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fun-__code__"><span class="toc-number">4.3.</span> <span class="toc-text"> fun __code__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#freevars"><span class="toc-number">4.4.</span> <span class="toc-text"> freevars</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch-case"><span class="toc-number">4.5.</span> <span class="toc-text"> switch case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#insepect"><span class="toc-number">4.6.</span> <span class="toc-text"> insepect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compile-to-pyc"><span class="toc-number">4.7.</span> <span class="toc-text"> compile to pyc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#traceback"><span class="toc-number">4.8.</span> <span class="toc-text"> traceback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#decorator"><span class="toc-number">4.9.</span> <span class="toc-text"> decorator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#argparse"><span class="toc-number">4.10.</span> <span class="toc-text"> argparse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rsplit"><span class="toc-number">4.11.</span> <span class="toc-text"> rsplit()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#globiglob"><span class="toc-number">4.12.</span> <span class="toc-text"> glob.iglob()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keyword-argument-and-keyword-only-argumnet"><span class="toc-number">4.13.</span> <span class="toc-text"> keyword argument and keyword-only argumnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda-free-variable"><span class="toc-number">4.14.</span> <span class="toc-text"> lambda free variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#date"><span class="toc-number">4.15.</span> <span class="toc-text"> date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#boolean"><span class="toc-number">4.16.</span> <span class="toc-text"> boolean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeit"><span class="toc-number">4.17.</span> <span class="toc-text"> timeit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval"><span class="toc-number">4.18.</span> <span class="toc-text"> eval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uuid"><span class="toc-number">4.19.</span> <span class="toc-text"> uuid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#partial"><span class="toc-number">4.20.</span> <span class="toc-text"> partial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base64"><span class="toc-number">4.21.</span> <span class="toc-text"> base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqrt"><span class="toc-number">4.22.</span> <span class="toc-text"> sqrt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mod"><span class="toc-number">4.23.</span> <span class="toc-text"> mod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#max-count"><span class="toc-number">4.24.</span> <span class="toc-text"> max count</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#empty-function-body"><span class="toc-number">4.25.</span> <span class="toc-text"> empty function body</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#and-argument"><span class="toc-number">4.26.</span> <span class="toc-text"> * and &#x2F; argument</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#argument-default-value"><span class="toc-number">4.27.</span> <span class="toc-text"> argument default value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pack-unpack"><span class="toc-number">4.28.</span> <span class="toc-text"> * pack unpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#with-context"><span class="toc-number">4.29.</span> <span class="toc-text"> with context</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#with-conext-seed-random"><span class="toc-number">4.30.</span> <span class="toc-text"> with conext seed random</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#walrus-operator"><span class="toc-number">4.31.</span> <span class="toc-text"> walrus operator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#match-case"><span class="toc-number">4.32.</span> <span class="toc-text"> match case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#magic-method"><span class="toc-number">4.33.</span> <span class="toc-text"> magic method</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unitest"><span class="toc-number">4.34.</span> <span class="toc-text"> unitest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference-counting"><span class="toc-number">4.35.</span> <span class="toc-text"> reference counting</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pre-caculate-at-compile-time"><span class="toc-number">4.36.</span> <span class="toc-text"> pre-caculate at compile time</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#not-logic-in-__main__"><span class="toc-number">4.37.</span> <span class="toc-text"> not logic in  __main__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#generator-type"><span class="toc-number">4.38.</span> <span class="toc-text"> generator type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#methodcaller"><span class="toc-number">4.39.</span> <span class="toc-text"> methodcaller</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lru_cache"><span class="toc-number">4.40.</span> <span class="toc-text"> lru_cache</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cached_property"><span class="toc-number">4.41.</span> <span class="toc-text"> cached_property</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#singledispatch"><span class="toc-number">4.42.</span> <span class="toc-text"> singledispatch</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loop"><span class="toc-number">5.</span> <span class="toc-text"> Loop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#while-loop"><span class="toc-number">5.1.</span> <span class="toc-text"> while loop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#for-loop"><span class="toc-number">5.2.</span> <span class="toc-text"> for loop</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#exception"><span class="toc-number">6.</span> <span class="toc-text"> Exception</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#try-continuebreak"><span class="toc-number">6.1.</span> <span class="toc-text"> try continue&#x2F;break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typeerror-and-valueerror"><span class="toc-number">6.2.</span> <span class="toc-text"> TypeError and ValueError</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#thread-and-coroutine"><span class="toc-number">7.</span> <span class="toc-text"> Thread and Coroutine</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#asyncioto_thread-change-sync-to-async"><span class="toc-number">7.1.</span> <span class="toc-text"> asyncio.to_thread change sync to async</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regex"><span class="toc-number">8.</span> <span class="toc-text"> Regex</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#research-and-rematch"><span class="toc-number">8.1.</span> <span class="toc-text"> re.search() and re.match()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#name-group"><span class="toc-number">8.2.</span> <span class="toc-text"> name group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference-group"><span class="toc-number">8.3.</span> <span class="toc-text"> reference group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#operate-sub-group"><span class="toc-number">8.4.</span> <span class="toc-text"> operate sub group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#regex-example"><span class="toc-number">8.5.</span> <span class="toc-text"> regex example</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web"><span class="toc-number">9.</span> <span class="toc-text"> Web</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html_request_header-to-dict"><span class="toc-number">9.1.</span> <span class="toc-text"> html_request_header to dict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request_html"><span class="toc-number">9.2.</span> <span class="toc-text"> request_html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#htmlparser-unescape-from-html-entity"><span class="toc-number">9.3.</span> <span class="toc-text"> HTMLParser unescape from HTML Entity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pyppeteer"><span class="toc-number">9.4.</span> <span class="toc-text"> pyppeteer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flask-index-page"><span class="toc-number">9.5.</span> <span class="toc-text"> flask index page</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#other"><span class="toc-number">10.</span> <span class="toc-text"> Other</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#python-and-python-m"><span class="toc-number">10.1.</span> <span class="toc-text"> python and python -m</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#venv"><span class="toc-number">10.2.</span> <span class="toc-text"> venv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#share-file-use-mobile-and-computer"><span class="toc-number">10.3.</span> <span class="toc-text"> share file use mobile and computer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-cprofile"><span class="toc-number">10.4.</span> <span class="toc-text"> python cProfile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chardet"><span class="toc-number">10.5.</span> <span class="toc-text"> chardet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-bom"><span class="toc-number">10.6.</span> <span class="toc-text"> delete bom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windows-pip-install-permissionerror"><span class="toc-number">10.7.</span> <span class="toc-text"> windows pip install PermissionError</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windows-schedule-call-python"><span class="toc-number">10.8.</span> <span class="toc-text"> windows schedule call python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-run-daemon-on-window"><span class="toc-number">10.9.</span> <span class="toc-text"> python run daemon on window</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replace-double-slash-to-one-slash"><span class="toc-number">10.10.</span> <span class="toc-text"> replace double slash to one slash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replace-normal-unicode-str-to-unicode-encoded-str"><span class="toc-number">10.11.</span> <span class="toc-text"> replace normal unicode str to unicode encoded str</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while-loop-break"><span class="toc-number">10.12.</span> <span class="toc-text"> while loop break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#douban-pypi"><span class="toc-number">10.13.</span> <span class="toc-text"> douban pypi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#read-toml"><span class="toc-number">10.14.</span> <span class="toc-text"> read toml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-serialize"><span class="toc-number">10.15.</span> <span class="toc-text"> json serialize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#format-xml"><span class="toc-number">10.16.</span> <span class="toc-text"> format XML</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nested-xml-to-pandas-dataframe"><span class="toc-number">10.17.</span> <span class="toc-text"> nested XML to pandas dataframe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fake-large-csv"><span class="toc-number">10.18.</span> <span class="toc-text"> fake large csv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csv-to-database"><span class="toc-number">10.19.</span> <span class="toc-text"> csv to database</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#quit-python-interactive-shell"><span class="toc-number">10.20.</span> <span class="toc-text"> quit python Interactive Shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jupyter-notebook-to-markdown"><span class="toc-number">10.21.</span> <span class="toc-text"> Jupyter notebook to markdown</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prettytable"><span class="toc-number">10.22.</span> <span class="toc-text"> prettytable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tqdm"><span class="toc-number">10.23.</span> <span class="toc-text"> tqdm</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dotenv-to-enviroment"><span class="toc-number">10.24.</span> <span class="toc-text"> dotenv to enviroment</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quiz"><span class="toc-number">11.</span> <span class="toc-text"> Quiz</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#why-judgement-none-must-use-is-in-python"><span class="toc-number">11.1.</span> <span class="toc-text"> Why judgement None must use â€˜isâ€™ in python?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#why-list-comprehensions-multi-lambdas-ouput-same-result"><span class="toc-number">11.2.</span> <span class="toc-text"> Why list comprehensions multi lambdas ouput same result?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#the-difference-of-iterable-and-iterator"><span class="toc-number">11.3.</span> <span class="toc-text"> The difference of iterable and iterator?</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#iterator"><span class="toc-number">11.3.1.</span> <span class="toc-text"> iterator</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#iterable-2"><span class="toc-number">11.3.2.</span> <span class="toc-text"> iterable</span></a></li></ol></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/2019/06/06/bat/" rel="bookmark" title="Window Bat">Window Bat</a></li><li><a href="/2019/06/06/oracle/" rel="bookmark" title="Oracle">Oracle</a></li><li class="active"><a href="/2019/06/06/python/" rel="bookmark" title="python">python</a></li><li><a href="/2019/10/12/linux-vim/" rel="bookmark" title="Vim">Vim</a></li><li><a href="/2020/09/01/sql-advance/" rel="bookmark" title="SQL Advance">SQL Advance</a></li><li><a href="/2021/01/01/a-resource/" rel="bookmark" title="Resources">Resources</a></li><li><a href="/2021/04/06/japanese/" rel="bookmark" title="Japanese">Japanese</a></li><li><a href="/2021/04/25/excel/" rel="bookmark" title="Excel Basic">Excel Basic</a></li><li><a href="/2021/05/06/edi-flow/" rel="bookmark" title="EDI Flow">EDI Flow</a></li><li><a href="/2021/05/13/r-tutorial/" rel="bookmark" title="R tutorial">R tutorial</a></li><li><a href="/2021/07/10/rust-for-node/" rel="bookmark" title="Deep Dive into Rust for Node.js Developers">Deep Dive into Rust for Node.js Developers</a></li><li><a href="/2021/07/20/python-daily-tool/" rel="bookmark" title="Daily Tool">Daily Tool</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="æ±Ÿè¾¹é¸Ÿ"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">æ±Ÿè¾¹é¸Ÿ</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">378</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">51</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2019/06/06/uml-sequence/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2019/06/06/python-fire/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 â€“ 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">æ±Ÿè¾¹é¸Ÿ @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2019/06/06/python/',
    favicon: {
      show: "ï¼ˆâ—Â´3ï½€â—ï¼‰Goooood",
      hide: "(Â´Ğ”ï½€)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
