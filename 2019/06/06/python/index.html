



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="python" />


<link rel="canonical" href="https://lhchen74.github.io/2019/06/06/python/">



  <title>
Python - manual |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Python
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2019-06-06 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2019-06-06T00:00:00+08:00">2019-06-06</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="/anime/index/路人女主的养成方法.jpg"></li>
          <li class="item" data-background-image="/anime/index/借东西的小人阿莉埃蒂-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/我们大家的河合庄-2.jpg"></li>
          <li class="item" data-background-image="/anime/index/电锯人-1.jpg"></li>
          <li class="item" data-background-image="/anime/index/怪物MONSTER.jpg"></li>
          <li class="item" data-background-image="/anime/index/来自新世界.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/manual/" itemprop="item" rel="index" title="In manual"><span itemprop="name">manual</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2019/06/06/python/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <h2 id="io"><a class="markdownIt-Anchor" href="#io">#</a> IO</h2>
<h3 id="file-open"><a class="markdownIt-Anchor" href="#file-open">#</a> file open</h3>
<p>open 返回的实际上是一个生成器对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取控制台或者文件内容</span></span><br><span class="line"><span class="keyword">import</span> fileinput</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fileinput.<span class="built_in">input</span>():</span><br><span class="line">    print(line)</span><br><span class="line"></span><br><span class="line">data_rows = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(filename):</span><br><span class="line">    line_arr = line.rstrip(<span class="string">&#x27;\n&#x27;</span>).split(<span class="string">&#x27;@#@&#x27;</span>)</span><br><span class="line">    data_rows.append(line_arr)</span><br><span class="line">print(data_rows)</span><br><span class="line"></span><br><span class="line">f = <span class="built_in">open</span>(filename, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">print(<span class="built_in">next</span>(f))</span><br><span class="line">print(<span class="built_in">next</span>(f))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure>
<h3 id="file-lines"><a class="markdownIt-Anchor" href="#file-lines">#</a> file lines</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 計算行數</span></span><br><span class="line">k = <span class="number">0</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>) <span class="keyword">as</span> fid:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> fid:</span><br><span class="line">        k = k + <span class="number">1</span></span><br><span class="line">        print(k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或简写为:</span></span><br><span class="line">print(<span class="built_in">len</span>([ line <span class="keyword">for</span> line <span class="keyword">in</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>) ]))</span><br></pre></td></tr></table></figure>
<h3 id="file-state"><a class="markdownIt-Anchor" href="#file-state">#</a> file state</h3>
<ul>
<li>获取文件目录名，文件名</li>
<li>获取文件是否存在，是目录还是文件</li>
<li>获取文件大小</li>
<li>获取文件创建时间，上次访问时间，修改时间</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os, sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line">print(__file__, sys.argv[<span class="number">0</span>]) <span class="comment"># python test.py =&gt; test.py test.py</span></span><br><span class="line">path = <span class="string">r&#x27;E:\study_python\test\fast02.py&#x27;</span></span><br><span class="line">print(os.path.basename(path), os.path.dirname(path), os.path.split(path))</span><br><span class="line"><span class="comment"># fast02.py E:\study_python\test (&#x27;E:\\study_python\\test&#x27;, &#x27;fast02.py&#x27;)</span></span><br><span class="line"></span><br><span class="line">print(os.path.exists(path)</span><br><span class="line">     ,os.path.isfile(path)</span><br><span class="line">     ,os.path.isdir(path)</span><br><span class="line">     ,os.path.getsize(path)</span><br><span class="line">     ,os.path.getatime(path)   <span class="comment"># 获取文件上一次读取的时间</span></span><br><span class="line">     ,datetime.datetime.fromtimestamp(os.path.getmtime(path)) <span class="comment"># 获取文件修改时间,并转换为日期</span></span><br><span class="line">     ,os.path.getctime(path))</span><br><span class="line"><span class="comment"># True True False 1740 1536125104.7735167 2018-09-05 16:59:29.086361 1536125104.7735167</span></span><br></pre></td></tr></table></figure>
<h3 id="oswalk"><a class="markdownIt-Anchor" href="#oswalk">#</a> os.walk</h3>
<p>remove node_modules</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">node_modules_dirs = []</span><br><span class="line">node_modules = <span class="string">&#x27;node_modules&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.walk(<span class="string">r&#x27;D:\study\node&#x27;</span>):</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> dirs:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">dir</span> == node_modules:</span><br><span class="line">            path = os.path.join(root, <span class="built_in">dir</span>)</span><br><span class="line">            <span class="comment"># exclude sub module node_modules</span></span><br><span class="line">            <span class="comment"># 除了最后一个 node_modules, 路径中不再包含其它 node_modules </span></span><br><span class="line">            <span class="keyword">if</span> node_modules <span class="keyword">not</span> <span class="keyword">in</span> path[<span class="number">0</span>:-<span class="built_in">len</span>(node_modules)]:</span><br><span class="line">                node_modules_dirs.append(path)</span><br><span class="line">                print(path)</span><br><span class="line">print(<span class="built_in">len</span>(node_modules_dirs), node_modules_dirs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> node_modules_dirs:</span><br><span class="line">    shutil.rmtree(<span class="built_in">dir</span>)</span><br><span class="line">    print(<span class="string">f&quot;Remove <span class="subst">&#123;<span class="built_in">dir</span>&#125;</span> success!&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>上述方法缺点是遍历目录文件过多时，性能较差，比如实际找到项目目录的 node_modules 时不需要再向下遍历安装的模块中不符合条件的 node_modules, 这时可以使用如下方式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"></span><br><span class="line">node_modules_dirs = []</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">walk</span>(<span class="params"><span class="built_in">dir</span></span>):</span></span><br><span class="line">    <span class="keyword">for</span> subpath <span class="keyword">in</span> os.listdir(<span class="built_in">dir</span>):</span><br><span class="line">        path = os.path.join(<span class="built_in">dir</span>, subpath)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> os.path.isdir(path):</span><br><span class="line">            <span class="keyword">if</span> path.endswith(<span class="string">&#x27;node_modules&#x27;</span>):</span><br><span class="line">                node_modules_dirs.append(path)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                walk(path)</span><br><span class="line"></span><br><span class="line">walk(<span class="string">r&#x27;D:\study\node&#x27;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">len</span>(node_modules_dirs), node_modules_dirs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">dir</span> <span class="keyword">in</span> node_modules_dirs:</span><br><span class="line">    shutil.rmtree(<span class="built_in">dir</span>)</span><br><span class="line">    print(<span class="string">f&quot;Remove <span class="subst">&#123;<span class="built_in">dir</span>&#125;</span> success!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="stringio"><a class="markdownIt-Anchor" href="#stringio">#</a> StringIO</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"></span><br><span class="line"><span class="comment"># f = StringIO(&#x27;hello, world&#x27;)</span></span><br><span class="line"><span class="comment"># print(f.readline())</span></span><br><span class="line"></span><br><span class="line">f = StringIO()</span><br><span class="line">f.write(<span class="string">&#x27;hello, world&#x27;</span>) <span class="comment"># f.write() 定位在文件末尾</span></span><br><span class="line">print(f.readline())  <span class="comment"># 读取不到数据</span></span><br><span class="line">f.seek(<span class="number">0</span>)</span><br><span class="line">print(f.readline())  <span class="comment"># hello, world</span></span><br></pre></td></tr></table></figure>
<h3 id="print"><a class="markdownIt-Anchor" href="#print">#</a> print</h3>
<p><code>print('*', end='\n')</code> : 默认输出换行</p>
<p><code>print('*', end='')</code> : 输出不换行</p>
<p><code>print('*', '&amp;', sep=' ')</code> : 默认以空格分隔多个参数</p>
<p><code>print('*', '&amp;', sep='@')</code> : 用 @ 分隔多个参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">num_stars = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;How many stars do you want ? &#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(num_stars):</span><br><span class="line">     print(<span class="string">&#x27;*&#x27;</span>,end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># ****</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, sep=<span class="string">&#x27; &#x27;</span>)   <span class="comment"># * &amp;</span></span><br><span class="line">print(<span class="string">&#x27;*&#x27;</span>, <span class="string">&#x27;&amp;&#x27;</span>, sep=<span class="string">&#x27;@&#x27;</span>)   <span class="comment"># *@&amp;</span></span><br></pre></td></tr></table></figure>
<h3 id="print-s-r"><a class="markdownIt-Anchor" href="#print-s-r">#</a> print %s, %r</h3>
<p><code>%r(repr)</code>  unambiguously recreate the object it represents 可以重建它所代表的对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;world&quot;</span></span><br><span class="line">print(<span class="string">&quot;hello &#123;!s&#125;&quot;</span>.<span class="built_in">format</span>(s), <span class="string">&#x27;,&#x27;</span>, <span class="string">&quot;hello %s&quot;</span> % s)</span><br><span class="line">print(<span class="string">&quot;hello &#123;!r&#125;&quot;</span>.<span class="built_in">format</span>(s), <span class="string">&#x27;,&#x27;</span>, <span class="string">&quot;hello %r&quot;</span> % s)</span><br><span class="line"><span class="comment"># hello world , hello world</span></span><br><span class="line"><span class="comment"># hello &#x27;world&#x27; , hello &#x27;world&#x27;</span></span><br><span class="line">d = datetime.date.today()</span><br><span class="line">print(<span class="string">&quot;today is &#123;!s&#125;&quot;</span>.<span class="built_in">format</span>(d), <span class="string">&quot;today is %s&quot;</span> % d)</span><br><span class="line">print(<span class="string">&quot;today is &#123;!r&#125;&quot;</span>.<span class="built_in">format</span>(d), <span class="string">&quot;today is %r&quot;</span> % d)</span><br><span class="line"><span class="comment"># today is 2019-10-28 today is 2019-10-28</span></span><br><span class="line"><span class="comment"># today is datetime.date(2019, 10, 28) today is datetime.date(2019, 10, 28)</span></span><br></pre></td></tr></table></figure>
<p><code>__repr__()</code>  方法返回一个实例的代码表示形式，通常用来重新构造这个实例。 内置的 repr () 函数返回这个字符串，跟我们使用交互式解释器显示的值是一样的。<br>
 <code>__str__()</code>  方法将实例转换为一个字符串，使用 str () 或 print () 函数会输出这个字符串。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, x, y</span>):</span></span><br><span class="line">        self.x = x</span><br><span class="line">        self.y = y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="comment"># !r 格式化代码指明输出使用 __repr__() 来代替默认的 __str__()</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Pair(&#123;0.x!r&#125;, &#123;0.y!r&#125;)&#x27;</span>.<span class="built_in">format</span>(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;(&#123;0.x!s&#125;, &#123;0.y!s&#125;)&#x27;</span>.<span class="built_in">format</span>(self)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; p = Pair(3, 4)</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; p</span></span><br><span class="line"><span class="comment"># Pair(3, 4) # __repr__() output</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; print(p)</span></span><br><span class="line"><span class="comment"># (3, 4) # __str__() output</span></span><br></pre></td></tr></table></figure>
<h3 id="prettytable"><a class="markdownIt-Anchor" href="#prettytable">#</a> prettytable</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> prettytable <span class="keyword">import</span> PrettyTable</span><br><span class="line">row = PrettyTable([<span class="string">&quot;城市&quot;</span>,<span class="string">&quot;总访问量&quot;</span>, <span class="string">&quot;失败量&quot;</span>, <span class="string">&quot;慢速量&quot;</span>,<span class="string">&quot;失败率&quot;</span>,<span class="string">&quot;慢速率&quot;</span>])</span><br><span class="line">row.align[<span class="string">&quot;城市&quot;</span>] = <span class="string">&quot;l&quot;</span> <span class="comment"># Left align city names</span></span><br><span class="line">row.padding_width = <span class="number">1</span>   <span class="comment"># One space between column edges and contents (default)</span></span><br><span class="line"></span><br><span class="line">retrow = [[<span class="string">&#x27;郑州&#x27;</span>,<span class="number">241</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0.41</span>,<span class="number">0.83</span>],[<span class="string">&#x27;灵宝&#x27;</span>,<span class="number">56</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.0</span>,<span class="number">1.79</span>]]</span><br><span class="line"><span class="keyword">for</span> r <span class="keyword">in</span> retrow:</span><br><span class="line">    row.add_row(r)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;D:/study/fragment/mytable&#x27;</span>,<span class="string">&#x27;w&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> hfile:</span><br><span class="line">    hfile.write(<span class="built_in">str</span>(row))</span><br><span class="line">    hfile.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># mytable</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br><span class="line"><span class="comment"># | 城市 | 总访问量  | 失败量 | 慢速量 | 失败率 | 慢速率 |</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br><span class="line"><span class="comment"># | 郑州 |   241    |   1    |   2    |  0.41  |  0.83  |</span></span><br><span class="line"><span class="comment"># | 灵宝 |    56    |   0    |   1    |  0.0   |  1.79  |</span></span><br><span class="line"><span class="comment"># +------+----------+--------+--------+--------+--------+</span></span><br></pre></td></tr></table></figure>
<h3 id="shutilmove-osrename"><a class="markdownIt-Anchor" href="#shutilmove-osrename">#</a> shutil.move &amp; os.rename</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># os.rename() requires to include the file name in both the source and destination arguments</span></span><br><span class="line">os.rename(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"><span class="comment"># while shutil.move() requires the new directory as destination or include the filename</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># if file exsists, os.rename will raise file exists error</span></span><br><span class="line">os.rename(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"><span class="comment"># if file exsists, this will raise file exists error</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line"><span class="comment"># if file exsists, this will coverage but no error</span></span><br><span class="line">shutil.move(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># shutil.copy will coverage, no error</span></span><br><span class="line">shutil.copy(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/&#x27;</span>)</span><br><span class="line">shutil.copy(<span class="string">&#x27;path/to/file.txt&#x27;</span>, <span class="string">&#x27;path/to/new/directory/file.txt&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="container"><a class="markdownIt-Anchor" href="#container">#</a> Container</h2>
<h3 id=""><a class="markdownIt-Anchor" href="#">#</a> + &amp; +=</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">c = a + [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment"># c = a + (3, 4) # TypeError: can only concatenate list (not &quot;tuple&quot;) to list</span></span><br><span class="line"></span><br><span class="line">a += (<span class="number">5</span>, <span class="number">6</span>)      <span class="comment"># += 实际调用的是 extend，参数可以是任意序列类型，并且 += 是 inpalce 操作</span></span><br><span class="line">a.extend(<span class="built_in">range</span>(<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<h3 id="__sub__"><a class="markdownIt-Anchor" href="#__sub__">#</a> __sub__</h3>
<p>通过定义  <code>__sub__</code>  方法可以给类型添加  <code>-</code>  操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">print(a + b) <span class="comment"># [1, 2, 3, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubList</span>(<span class="params"><span class="built_in">list</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__sub__</span>(<span class="params">self, b</span>):</span></span><br><span class="line">        a = self[:]</span><br><span class="line">        b = b[:]</span><br><span class="line">        <span class="keyword">while</span> <span class="built_in">len</span>(b) &gt; <span class="number">0</span>:</span><br><span class="line">            ele = b.pop()</span><br><span class="line">            <span class="keyword">if</span> ele <span class="keyword">in</span> a:</span><br><span class="line">                a.remove(ele)</span><br><span class="line">        <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line">al = SubList(a)</span><br><span class="line">bl = SubList(b)</span><br><span class="line">print(al - bl) [<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h3 id="collections-type-check"><a class="markdownIt-Anchor" href="#collections-type-check">#</a> collections type check</h3>
<p><code>collections</code>  模块定义了很多跟容器和迭代器（序列、映射、集合等）有关的抽象基类。</p>
<p><code>numbers</code>  库定义了跟数字对象（整数、浮点数、有理数等）有关的基类。</p>
<p><code>io</code>  库定义了很多跟 I/O 操作相关的基类。可以用这些抽象基类检查数据类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> collections</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is a sequence</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Sequence):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is iterable</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Iterable):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x has a size</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Sized):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if x is a mapping</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">isinstance</span>(x, collections.Mapping):</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="iterable"><a class="markdownIt-Anchor" href="#iterable">#</a> Iterable</h3>
<p>展开嵌套序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Iterable</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatten</span>(<span class="params">items, ignore_types=(<span class="params"><span class="built_in">str</span>, <span class="built_in">bytes</span></span>)</span>):</span></span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> items:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">isinstance</span>(x, Iterable) <span class="keyword">and</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(x, ignore_types):</span><br><span class="line">            <span class="keyword">yield</span> <span class="keyword">from</span> flatten(x)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">yield</span> x</span><br><span class="line"></span><br><span class="line">items = [<span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>], <span class="string">&#x27;abc&#x27;</span>], <span class="string">b&#x27;abc&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> flatten(items):</span><br><span class="line">    print(x)</span><br></pre></td></tr></table></figure>
<h3 id="iter"><a class="markdownIt-Anchor" href="#iter">#</a> iter()</h3>
<p>iter 函数可以接受一个可选的 callable 对象和一个标记（结尾）值作为输入参数。 当以这种方式使用的时候，它会创建一个迭代器， 这个迭代器会不断调用 callable 对象直到返回值和标记值相等为止。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="built_in">open</span>(<span class="string">&#x27;log2.txt&#x27;</span>, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> <span class="built_in">iter</span>(<span class="keyword">lambda</span>:f.read(<span class="number">10</span>), <span class="string">&#x27;&#x27;</span>):</span><br><span class="line">    print(chunk)</span><br><span class="line">f.close()</span><br><span class="line"><span class="comment"># hello</span></span><br><span class="line"><span class="comment"># worl</span></span><br><span class="line"><span class="comment"># d</span></span><br></pre></td></tr></table></figure>
<h3 id="defaultdict-realize-multidict"><a class="markdownIt-Anchor" href="#defaultdict-realize-multidict">#</a> defaultdict realize multidict</h3>
<p><code>defaultdict</code>  可以实现字典的值对应为列表或集合，列表会保持元素的插入顺序，集合会去除重复元素</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line">d = defaultdict(<span class="built_in">list</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">1</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">3</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].append(<span class="number">2</span>)</span><br><span class="line">print(d)  <span class="comment"># defaultdict(&lt;class &#x27;list&#x27;&gt;, &#123;&#x27;a&#x27;: [1, 3, 2], &#x27;b&#x27;: [2, 2]&#125;)</span></span><br><span class="line"></span><br><span class="line">d = defaultdict(<span class="built_in">set</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">1</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">3</span>)</span><br><span class="line">d[<span class="string">&#x27;a&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">d[<span class="string">&#x27;b&#x27;</span>].add(<span class="number">2</span>)</span><br><span class="line">print(d)   <span class="comment"># defaultdict(&lt;class &#x27;set&#x27;&gt;, &#123;&#x27;a&#x27;: &#123;1, 2, 3&#125;, &#x27;b&#x27;: &#123;2&#125;&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># extend</span></span><br><span class="line">d.setdefault(<span class="string">&#x27;a&#x27;</span>, []).append(<span class="number">1</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;a&#x27;</span>, []).append(<span class="number">2</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;b&#x27;</span>, <span class="built_in">set</span>()).add(<span class="number">2</span>)</span><br><span class="line">d.setdefault(<span class="string">&#x27;b&#x27;</span>, <span class="built_in">set</span>()).add(<span class="number">2</span>)</span><br><span class="line">print(d)   <span class="comment"># &#123;&#x27;a&#x27;: [1, 2], &#x27;b&#x27;: &#123;2&#125;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="zip"><a class="markdownIt-Anchor" href="#zip">#</a> zip</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">prices = &#123;</span><br><span class="line">    <span class="string">&#x27;ACME&#x27;</span>: <span class="number">45.23</span>,</span><br><span class="line">    <span class="string">&#x27;AAPL&#x27;</span>: <span class="number">612.78</span>,</span><br><span class="line">    <span class="string">&#x27;IBM&#x27;</span>: <span class="number">205.55</span>,</span><br><span class="line">    <span class="string">&#x27;HPQ&#x27;</span>: <span class="number">37.20</span>,</span><br><span class="line">    <span class="string">&#x27;FB&#x27;</span>: <span class="number">10.75</span></span><br><span class="line">&#125;</span><br><span class="line">print(<span class="built_in">sorted</span>(<span class="built_in">zip</span>(prices.values(), prices.keys())))</span><br><span class="line"></span><br><span class="line"><span class="comment"># zip() 函数创建的是只能返回一次的迭代器</span></span><br><span class="line">prices_and_names = <span class="built_in">zip</span>(prices.values(), prices.keys())</span><br><span class="line">print(<span class="built_in">min</span>(prices_and_names)) <span class="comment"># OK</span></span><br><span class="line">print(<span class="built_in">max</span>(prices_and_names)) <span class="comment"># ValueError: max() arg is an empty sequence</span></span><br></pre></td></tr></table></figure>
<h3 id="dict_keys-dict_items"><a class="markdownIt-Anchor" href="#dict_keys-dict_items">#</a> dict_keys &amp; dict_items</h3>
<p>字典的 keys () 和 items () 方法分别返回一个键视图对象和一个包含 （键，值） 对的元素视图对象， 支持集合并、交、差运算，values () 也是类似，但是不支持集合运算，因为值视图不能保证元素互不相同</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = &#123;</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> : <span class="number">1</span>,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> : <span class="number">2</span>,</span><br><span class="line">    <span class="string">&#x27;z&#x27;</span> : <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">b = &#123;</span><br><span class="line">    <span class="string">&#x27;w&#x27;</span> : <span class="number">10</span>,</span><br><span class="line">    <span class="string">&#x27;x&#x27;</span> : <span class="number">11</span>,</span><br><span class="line">    <span class="string">&#x27;y&#x27;</span> : <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">print(a.keys(), a.items())      <span class="comment"># dict_keys([&#x27;x&#x27;, &#x27;y&#x27;, &#x27;z&#x27;]) dict_items([(&#x27;x&#x27;, 1), (&#x27;y&#x27;, 2), (&#x27;z&#x27;, 3)])</span></span><br><span class="line">print(a.keys() &amp; b.keys())      <span class="comment"># &#123;&#x27;x&#x27;, &#x27;y&#x27;&#125;</span></span><br><span class="line">print(a.keys() - b.keys())      <span class="comment"># &#123;&#x27;z&#x27;&#125;</span></span><br><span class="line">print(a.items() - b.items())    <span class="comment"># &#123;(&#x27;x&#x27;, 1), (&#x27;z&#x27;, 3)&#125;</span></span><br><span class="line">c = &#123;key: a[key] <span class="keyword">for</span> key <span class="keyword">in</span> a.keys() - &#123;<span class="string">&#x27;z&#x27;</span>&#125;&#125;</span><br><span class="line">print(c)                        <span class="comment"># &#123;&#x27;x&#x27;: 1, &#x27;y&#x27;: 2&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="dict-set-comprehension"><a class="markdownIt-Anchor" href="#dict-set-comprehension">#</a> dict &amp; set comprehension</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">my_dict = &#123;<span class="string">&quot;Babb&quot;</span>: <span class="number">18</span>, <span class="string">&quot;Julian&quot;</span>: <span class="number">28</span>&#125;</span><br><span class="line">reversed_dict = &#123;value: key <span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items()&#125;</span><br><span class="line">print(reversed_dict)</span><br><span class="line">my_set = &#123;key <span class="keyword">for</span> key, value <span class="keyword">in</span> my_dict.items()&#125;</span><br><span class="line">print(my_set)</span><br></pre></td></tr></table></figure>
<h3 id="tuple-compare"><a class="markdownIt-Anchor" href="#tuple-compare">#</a> tuple compare</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, name</span>):</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">print((<span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">2</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># True</span></span><br><span class="line">print((<span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">1</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># &#x27;&lt;&#x27; not supported between instances of &#x27;A&#x27; and &#x27;A&#x27;</span></span><br><span class="line">print((<span class="number">1</span>, <span class="number">1</span>, A(<span class="string">&#x27;babb&#x27;</span>)) &lt; (<span class="number">1</span>, <span class="number">2</span>, A(<span class="string">&#x27;owen&#x27;</span>))) <span class="comment"># True</span></span><br><span class="line">print((<span class="number">1</span>, [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>]) &lt; (<span class="number">2</span>, [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;3&#x27;</span>])) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h3 id="unpack"><a class="markdownIt-Anchor" href="#unpack">#</a> unpack</h3>
<p>解包裹</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func2</span>(<span class="params">a, b, c</span>):</span></span><br><span class="line">    print(a, b, c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">func2(*a)</span><br><span class="line">b = &#123;<span class="string">&#x27;a&#x27;</span>:<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;b&#x27;</span>:<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;c&#x27;</span>:<span class="string">&#x27;3&#x27;</span>&#125;</span><br><span class="line">func2(**b)</span><br></pre></td></tr></table></figure>
<h3 id="itertools-groupby"><a class="markdownIt-Anchor" href="#itertools-groupby">#</a> itertools groupby</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"><span class="keyword">from</span> operator <span class="keyword">import</span> itemgetter</span><br><span class="line"></span><br><span class="line">employees = [</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;犬夜叉&#x27;</span>, <span class="number">2000</span>],</span><br><span class="line">    [<span class="number">200</span>, <span class="string">&#x27;杀生丸&#x27;</span>, <span class="number">3000</span>],</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;桔梗&#x27;</span>, <span class="number">1000</span>],</span><br><span class="line">    [<span class="number">200</span>, <span class="string">&#x27;玲&#x27;</span>, <span class="number">800</span>],</span><br><span class="line">    [<span class="number">100</span>, <span class="string">&#x27;冥加&#x27;</span>, <span class="number">800</span>],</span><br><span class="line">    [<span class="number">300</span>, <span class="string">&#x27;奈落&#x27;</span>, <span class="number">4000</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">D = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> no, role <span class="keyword">in</span> itertools.groupby(employees, itemgetter(<span class="number">0</span>)):</span><br><span class="line">    D[no] = D.setdefault(no, <span class="number">0</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(D) <span class="comment"># &#123;100: 3, 200: 2, 300: 1&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-product"><a class="markdownIt-Anchor" href="#itertools-product">#</a> itertools product</h3>
<p>100 以内所有勾股数，(3, 4, 5) 和 (4, 3, 5) … 算不同的勾股数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> product</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">      <span class="keyword">if</span> i * i + j * j == k  * k:</span><br><span class="line">        print(i, j, k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># product 计算笛卡尔积</span></span><br><span class="line">items = product(<span class="string">&#x27;ABCD&#x27;</span>, <span class="string">&#x27;xy&#x27;</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.product object at 0x000001BC20F1E600&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;D&#x27;, &#x27;x&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;D&#x27;, &#x27;y&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">items = product(<span class="built_in">range</span>(<span class="number">2</span>), repeat=<span class="number">3</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.product object at 0x000001AAF4ECE6C0&gt;</span></span><br><span class="line"><span class="comment"># (0, 0, 0)</span></span><br><span class="line"><span class="comment"># (0, 0, 1)</span></span><br><span class="line"><span class="comment"># (0, 1, 0)</span></span><br><span class="line"><span class="comment"># (0, 1, 1)</span></span><br><span class="line"><span class="comment"># (1, 0, 0)</span></span><br><span class="line"><span class="comment"># (1, 0, 1)</span></span><br><span class="line"><span class="comment"># (1, 1, 0)</span></span><br><span class="line"><span class="comment"># (1, 1, 1)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> product(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>), repeat=<span class="number">3</span>):</span><br><span class="line">  <span class="keyword">if</span> i * i + j * j == k * k:</span><br><span class="line">    print(i, j, k)</span><br></pre></td></tr></table></figure>
<h3 id="itertools-combinations_with_replacement"><a class="markdownIt-Anchor" href="#itertools-combinations_with_replacement">#</a> itertools combinations_with_replacement</h3>
<p>100 以内所有勾股数，(3, 4, 5) 和 (4, 3, 5) … 算相同的勾股数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> combinations_with_replacement</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i, <span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(j, <span class="number">100</span>):</span><br><span class="line">      <span class="keyword">if</span> i * i + j * j == k  * k:</span><br><span class="line">        print(i, j, k)</span><br><span class="line"></span><br><span class="line"><span class="comment"># combinations_with_replacement 容器取 n 个元素，元素可以重复的组合。</span></span><br><span class="line">items = combinations_with_replacement(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;itertools.combinations_with_replacement object at 0x000002845DA23EA0&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> combinations_with_replacement(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">100</span>), <span class="number">3</span>):</span><br><span class="line">  <span class="keyword">if</span> i * i + j * j == k * k:</span><br><span class="line">    print(i, j, k)</span><br></pre></td></tr></table></figure>
<h3 id="itertools-combinations"><a class="markdownIt-Anchor" href="#itertools-combinations">#</a> itertools combinations</h3>
<p>有 10 个不同重量的砝码，任意取三个组合，在 [a, b] 重量区间，那些重量无法覆盖？</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">wlist = [<span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">10</span>]</span><br><span class="line">n = <span class="built_in">len</span>(wlist)</span><br><span class="line">a, b = <span class="number">10</span>, <span class="number">30</span></span><br><span class="line">wset = <span class="built_in">set</span>(<span class="built_in">range</span>(a, b + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">  <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i + <span class="number">1</span>, n):</span><br><span class="line">    <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(j + <span class="number">1</span>, n):</span><br><span class="line">      total = wlist[i] + wlist[j] + wlist[k]</span><br><span class="line">      <span class="keyword">if</span> total <span class="keyword">in</span> wset:</span><br><span class="line">        wset.remove(total)</span><br><span class="line"></span><br><span class="line">print(wset)</span><br><span class="line"><span class="comment"># &#123;29, 30&#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># combinations 容器取 n 个元素，元素不重复的组合。</span></span><br><span class="line">items = combinations(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;itertools.combinations object at 0x000002150036EAE0&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, j, k <span class="keyword">in</span> combinations(wlist, <span class="number">3</span>):</span><br><span class="line">  total = i + j + k</span><br><span class="line">  <span class="keyword">if</span> total <span class="keyword">in</span> wset:</span><br><span class="line">    wset.remove(total)</span><br><span class="line"></span><br><span class="line">print(wset)</span><br><span class="line"><span class="comment"># &#123;29, 30&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="itertools-permutations"><a class="markdownIt-Anchor" href="#itertools-permutations">#</a> itertools permutations</h3>
<p>SEND + MORE = MONEY, 每个字母代表不同的数字， S = ?, D = ? …</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> permutations</span><br><span class="line"></span><br><span class="line"><span class="comment"># permutations 排列</span></span><br><span class="line">items = permutations(<span class="string">&#x27;ABC&#x27;</span>, <span class="number">2</span>)</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.permutations object at 0x000002D06EB67E00&gt;</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;A&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;B&#x27;, &#x27;C&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;A&#x27;)</span></span><br><span class="line"><span class="comment"># (&#x27;C&#x27;, &#x27;B&#x27;)</span></span><br><span class="line"></span><br><span class="line">items = permutations(<span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line">print(items)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> items:</span><br><span class="line">  print(item)</span><br><span class="line"><span class="comment"># &lt;itertools.permutations object at 0x000002D06E594E00&gt;</span></span><br><span class="line"><span class="comment"># (0, 1, 2)</span></span><br><span class="line"><span class="comment"># (0, 2, 1)</span></span><br><span class="line"><span class="comment"># (1, 0, 2)</span></span><br><span class="line"><span class="comment"># (1, 2, 0)</span></span><br><span class="line"><span class="comment"># (2, 0, 1)</span></span><br><span class="line"><span class="comment"># (2, 1, 0)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> s, e, n, d, m, o, r, y <span class="keyword">in</span> permutations(<span class="built_in">range</span>(<span class="number">10</span>), <span class="number">8</span>):</span><br><span class="line">  <span class="keyword">if</span> (s*<span class="number">1000</span>+e*<span class="number">100</span>+n*<span class="number">10</span>+d) + (m*<span class="number">1000</span>+o*<span class="number">100</span>+r*<span class="number">10</span>+e) == (m*<span class="number">10000</span>+o*<span class="number">1000</span>+n*<span class="number">100</span>+e*<span class="number">10</span>+y):</span><br><span class="line">    <span class="keyword">if</span> m != <span class="number">0</span> <span class="keyword">and</span> s != <span class="number">0</span>:</span><br><span class="line">      print(<span class="string">f&quot;<span class="subst">&#123;s=&#125;</span>,<span class="subst">&#123;e=&#125;</span>, <span class="subst">&#123;n=&#125;</span>, <span class="subst">&#123;d=&#125;</span>, <span class="subst">&#123;m=&#125;</span>, <span class="subst">&#123;o=&#125;</span>, <span class="subst">&#123;r=&#125;</span>, <span class="subst">&#123;y=&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># s=9,e=5, n=6, d=7, m=1, o=0, r=8, y=2</span></span><br><span class="line"><span class="comment"># 9567 + 1085 = 10652</span></span><br></pre></td></tr></table></figure>
<h2 id="class"><a class="markdownIt-Anchor" href="#class">#</a> Class</h2>
<h3 id="super"><a class="markdownIt-Anchor" href="#super">#</a> super()</h3>
<p>super 用来调用父类某个已经覆盖的方法，遵循菱形继承顺序，格式  <code>super([type[, object-or-type]])</code>  , 在 python3 中可以省略参数  <code>super()</code> , 在 Python2 中使用  <code>super(subtype, self)</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spam</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;A.spam&#x27;</span>)</span><br><span class="line">        <span class="built_in">super</span>().spam() <span class="comment"># 会调用 B 的 spam 方法，尽管 A 没有直接继承 B</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spam</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;B.spam&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span>(<span class="params">A, B</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">c = C()</span><br><span class="line">c.spam()</span><br><span class="line">print(C.__mro__)</span><br><span class="line"><span class="comment"># (&lt;class &#x27;__main__.C&#x27;&gt;, &lt;class &#x27;__main__.A&#x27;&gt;, &lt;class &#x27;__main__.B&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)</span></span><br></pre></td></tr></table></figure>
<h3 id="__class__-point-to-class"><a class="markdownIt-Anchor" href="#__class__-point-to-class">#</a> __class__ point to class</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">In [<span class="number">12</span>]: <span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    ...:     <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">In [<span class="number">13</span>]: a = A()</span><br><span class="line"></span><br><span class="line">In [<span class="number">14</span>]: a.__class__</span><br><span class="line">Out[<span class="number">14</span>]: __main__.A</span><br><span class="line"></span><br><span class="line">In [<span class="number">15</span>]: b = a.__class__()</span><br><span class="line"></span><br><span class="line">In [<span class="number">16</span>]: b</span><br><span class="line">Out[<span class="number">16</span>]: &lt;__main__.A at <span class="number">0x4fcb5f8</span>&gt;</span><br><span class="line"></span><br><span class="line">In [<span class="number">17</span>]: b.__class__</span><br><span class="line">Out[<span class="number">17</span>]: __main__.A</span><br></pre></td></tr></table></figure>
<h3 id="calendar"><a class="markdownIt-Anchor" href="#calendar">#</a> calendar</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> calendar</span><br><span class="line"><span class="comment"># 打印日历</span></span><br><span class="line">cal = calendar.month(<span class="number">2018</span>, <span class="number">9</span>)</span><br><span class="line">print(cal)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断是否为闰年</span></span><br><span class="line">ret = calendar.isleap(<span class="number">2018</span>)</span><br><span class="line">print(ret)</span><br><span class="line"></span><br><span class="line"><span class="comment">#    September 2018</span></span><br><span class="line"><span class="comment"># Mo Tu We Th Fr Sa Su</span></span><br><span class="line"><span class="comment">#                 1  2</span></span><br><span class="line"><span class="comment">#  3  4  5  6  7  8  9</span></span><br><span class="line"><span class="comment"># 10 11 12 13 14 15 16</span></span><br><span class="line"><span class="comment"># 17 18 19 20 21 22 23</span></span><br><span class="line"><span class="comment"># 24 25 26 27 28 29 30</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<h3 id="type-isinstance"><a class="markdownIt-Anchor" href="#type-isinstance">#</a> type() &amp; isinstance</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>(<span class="params">A</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">isinstance</span>(A(), A)    <span class="comment"># returns True</span></span><br><span class="line"><span class="built_in">type</span>(A()) == A        <span class="comment"># returns True</span></span><br><span class="line"><span class="built_in">isinstance</span>(B(), A)    <span class="comment"># returns True</span></span><br><span class="line"><span class="built_in">type</span>(B()) == A        <span class="comment"># returns False</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="number">1</span>, (<span class="built_in">float</span>, <span class="built_in">int</span>)) <span class="comment"># returns True, isinstance 第二个参数可以是一个元组</span></span><br></pre></td></tr></table></figure>
<h3 id="dynamic-monkey-patch"><a class="markdownIt-Anchor" href="#dynamic-monkey-patch">#</a> dynamic monkey patch</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Foo</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self</span>):</span></span><br><span class="line">        print(<span class="string">&#x27;Foo.bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bar</span>(<span class="params">self</span>):</span></span><br><span class="line">    print(<span class="string">&#x27;Modified bar&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Foo().bar()</span><br><span class="line">Foo.bar = bar</span><br><span class="line">Foo().bar()</span><br></pre></td></tr></table></figure>
<h3 id="dynamic-import"><a class="markdownIt-Anchor" href="#dynamic-import">#</a> dynamic import</h3>
<p>动态导入是指模块可以以字符串的形式导入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">module_names = [<span class="string">&#x27;sys&#x27;</span>, <span class="string">&#x27;os&#x27;</span>, <span class="string">&#x27;re&#x27;</span>]</span><br><span class="line">modules = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">__import__</span>, module_names))</span><br><span class="line">sys = modules[<span class="number">0</span>]</span><br><span class="line">print(sys.version)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line">module2 = importlib.import_module(<span class="string">&#x27;sys&#x27;</span>)</span><br><span class="line">print(module2.version)</span><br></pre></td></tr></table></figure>
<h3 id="typing-udtuser-defined-types"><a class="markdownIt-Anchor" href="#typing-udtuser-defined-types">#</a> typing udt(user-defined types)</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List</span><br><span class="line"></span><br><span class="line">Vector = List[<span class="built_in">float</span>]</span><br><span class="line">Matrix = List[Vector]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">addMatrix</span>(<span class="params">a : Matrix, b : Matrix</span>) -&gt; Matrix:</span></span><br><span class="line">    result = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i, row <span class="keyword">in</span> <span class="built_in">enumerate</span>(a):</span><br><span class="line">        result_row =[]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> j, col <span class="keyword">in</span> <span class="built_in">enumerate</span>(row):</span><br><span class="line">            result_row += [a[i][j] + b[i][j]]</span><br><span class="line">            </span><br><span class="line">        result += [result_row]</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line">x = [[<span class="number">1.0</span>, <span class="number">0.0</span>], [<span class="number">0.0</span>, <span class="number">1.0</span>]]</span><br><span class="line">y = [[<span class="number">2.0</span>, <span class="number">1.0</span>], [<span class="number">0.0</span>, -<span class="number">2.0</span>]]</span><br><span class="line">z = addMatrix(x, y)</span><br><span class="line"></span><br><span class="line">print(z)</span><br><span class="line"><span class="comment"># [[3.0, 1.0], [0.0, -1.0]]</span></span><br></pre></td></tr></table></figure>
<h2 id="fun"><a class="markdownIt-Anchor" href="#fun">#</a> Fun</h2>
<h3 id="nonlocal"><a class="markdownIt-Anchor" href="#nonlocal">#</a> nonlocal</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># outside function </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    message = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># nested function  </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line">        </span><br><span class="line">        message = <span class="string">&#x27;nonlocal&#x27;</span></span><br><span class="line">        print(<span class="string">&quot;inner:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">&quot;outer:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"></span><br><span class="line"><span class="comment"># inner: nonlocal</span></span><br><span class="line"><span class="comment"># outer: local</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># outside function </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">outer</span>():</span></span><br><span class="line">    message = <span class="string">&#x27;local&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># nested function  </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">inner</span>():</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># declare nonlocal variable, use outer message</span></span><br><span class="line">        <span class="keyword">nonlocal</span> message</span><br><span class="line"></span><br><span class="line">        message = <span class="string">&#x27;nonlocal&#x27;</span></span><br><span class="line">        print(<span class="string">&quot;inner:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">    inner()</span><br><span class="line">    print(<span class="string">&quot;outer:&quot;</span>, message)</span><br><span class="line"></span><br><span class="line">outer()</span><br><span class="line"></span><br><span class="line"><span class="comment"># inner: nonlocal</span></span><br><span class="line"><span class="comment"># outer: nonlocal</span></span><br></pre></td></tr></table></figure>
<h3 id="imp"><a class="markdownIt-Anchor" href="#imp">#</a> imp</h3>
<p>如果你模块不在 sys.path，可以使用 imp 模块中的方法 imp.load_source</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> imp</span><br><span class="line"></span><br><span class="line">imp.load_source(<span class="string">&quot;hi&quot;</span>, <span class="string">&quot;C://data/hi.py&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> hi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以自己指定模块的名字，相当与 import hi as hello</span></span><br><span class="line">imp.load_source(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;C://data/hi.py&quot;</span>)</span><br><span class="line"><span class="keyword">import</span> hello</span><br></pre></td></tr></table></figure>
<h3 id="fun-__code__"><a class="markdownIt-Anchor" href="#fun-__code__">#</a> fun __code__</h3>
<p>函数是一个对象， 对象有自己的作用域， 即命名空间，每个命名空间对应一个  <code>__code__</code>  ，包含对象的相关信息。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span>(<span class="params">a, b, c, *d, e, f</span>):</span></span><br><span class="line">    localvar = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(<span class="built_in">dir</span>(fun.__code__))</span><br><span class="line">print(<span class="string">&#x27;co_argcount:&#x27;</span> ,fun.__code__.co_argcount)                  <span class="comment">#位置参数个数(a,b,c)</span></span><br><span class="line">print(<span class="string">&#x27;co_kwonlyargcount:&#x27;</span>,fun.__code__.co_kwonlyargcount)       <span class="comment">#仅限关键字参数个数(e,f)</span></span><br><span class="line">print(<span class="string">&#x27;all_local:&#x27;</span>,fun.__code__.co_nlocals)                      <span class="comment">#函数中局部参数(位置参数+关键字+可变参数(*d) + 本地变量)</span></span><br><span class="line">print(<span class="string">&#x27;consts:&#x27;</span>,fun.__code__.co_consts)                          <span class="comment">#函数内部的常量</span></span><br><span class="line">print(<span class="string">&#x27;filename:&#x27;</span>,fun.__code__.co_filename)                      <span class="comment">#函数所属的文件</span></span><br><span class="line">print(<span class="string">&#x27;name:&#x27;</span>,fun.__code__.co_name)                              <span class="comment">#函数名</span></span><br><span class="line">print(<span class="string">&#x27;func_lineno:&#x27;</span>,fun.__code__.co_firstlineno)                <span class="comment">#函数位於第几行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;__class__&#x27;, &#x27;__delattr__&#x27;, &#x27;__dir__&#x27;, &#x27;__doc__&#x27;, &#x27;__eq__&#x27;, &#x27;__format__&#x27;, &#x27;__ge__&#x27;, &#x27;__getattribute__&#x27;, &#x27;__gt__&#x27;, &#x27;__hash__&#x27;, &#x27;__init__&#x27;, &#x27;__init_subclass__&#x27;, &#x27;__le__&#x27;, &#x27;__lt__&#x27;, &#x27;__ne__&#x27;, &#x27;__new__&#x27;, &#x27;__reduce__&#x27;, &#x27;__reduce_ex__&#x27;, &#x27;__repr__&#x27;, &#x27;__setattr__&#x27;, &#x27;__sizeof__&#x27;, &#x27;__str__&#x27;, &#x27;__subclasshook__&#x27;, &#x27;co_argcount&#x27;, &#x27;co_cellvars&#x27;, &#x27;co_code&#x27;, &#x27;co_consts&#x27;, &#x27;co_filename&#x27;, &#x27;co_firstlineno&#x27;, &#x27;co_flags&#x27;, &#x27;co_freevars&#x27;, &#x27;co_kwonlyargcount&#x27;, &#x27;co_lnotab&#x27;, &#x27;co_name&#x27;, &#x27;co_names&#x27;, &#x27;co_nlocals&#x27;, &#x27;co_stacksize&#x27;, &#x27;co_varnames&#x27;]</span></span><br><span class="line"><span class="comment"># co_argcount: 3</span></span><br><span class="line"><span class="comment"># co_kwonlyargcount: 2</span></span><br><span class="line"><span class="comment"># all_local: 7</span></span><br><span class="line"><span class="comment"># consts: (None, 1)</span></span><br><span class="line"><span class="comment"># filename: code_test.py</span></span><br><span class="line"><span class="comment"># name: fun</span></span><br><span class="line"><span class="comment"># func_lineno: 7</span></span><br></pre></td></tr></table></figure>
<h3 id="switch-case"><a class="markdownIt-Anchor" href="#switch-case">#</a> switch case</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">var</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">    &#125;.get(var, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">print(foo(<span class="string">&#x27;d&#x27;</span>)) <span class="comment"># 0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">var,x</span>):</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">&#x27;a&#x27;</span>: <span class="keyword">lambda</span> x: x+<span class="number">1</span>,</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>: <span class="keyword">lambda</span> x: <span class="built_in">str</span>(x+<span class="number">2</span>)+var,</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>: <span class="keyword">lambda</span> x: x+<span class="number">3</span>,</span><br><span class="line">    &#125;[var](x)</span><br><span class="line"></span><br><span class="line">print(foo(<span class="string">&#x27;b&#x27;</span>, <span class="number">2</span>)) <span class="comment"># 4b</span></span><br></pre></td></tr></table></figure>
<h3 id="insepect"><a class="markdownIt-Anchor" href="#insepect">#</a> insepect</h3>
<p>打印源码，获得定义模块。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"></span><br><span class="line">print(inspect.getsource(inspect.getsource))</span><br><span class="line">print(inspect.getmodule(inspect.getmodule))</span><br><span class="line">print(inspect.currentframe().f_lineno)</span><br><span class="line">👍</span><br><span class="line"><span class="comment"># def getsource(object):</span></span><br><span class="line"><span class="comment">#     &quot;&quot;&quot;Return the text of the source code for an object.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#     The argument may be a module, class, method, function, traceback, frame,</span></span><br><span class="line"><span class="comment">#     or code object.  The source code is returned as a single string.  An</span></span><br><span class="line"><span class="comment">#     OSError is raised if the source code cannot be retrieved.&quot;&quot;&quot;</span></span><br><span class="line"><span class="comment">#     lines, lnum = getsourcelines(object)</span></span><br><span class="line"><span class="comment">#     return &#x27;&#x27;.join(lines)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;module &#x27;inspect&#x27; from &#x27;C:\\Program Files\\Python36\\lib\\inspect.py&#x27;&gt;</span></span><br><span class="line"><span class="comment"># 23</span></span><br></pre></td></tr></table></figure>
<h3 id="compile-to-pyc"><a class="markdownIt-Anchor" href="#compile-to-pyc">#</a> compile to pyc</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单个文件</span></span><br><span class="line"><span class="comment"># python -m foo.py</span></span><br><span class="line"><span class="keyword">import</span> py_compile</span><br><span class="line">py_compile.<span class="built_in">compile</span>(file)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个文件</span></span><br><span class="line"><span class="comment"># python -m compileall &lt;dir&gt;</span></span><br><span class="line"><span class="keyword">import</span> compileall</span><br><span class="line">compileall.compile_dir(<span class="built_in">dir</span>)</span><br></pre></td></tr></table></figure>
<h3 id="traceback"><a class="markdownIt-Anchor" href="#traceback">#</a> traceback</h3>
<p><code>traceback.print_exc()</code>  可以打印出错误堆栈信息，可以显示错误行号</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(e)</span><br><span class="line"><span class="comment"># division by zero</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> traceback</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span> / <span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    <span class="comment"># traceback.print_exc() &lt;=&gt;  print(traceback.format_exc())</span></span><br><span class="line">    print(traceback.format_exc())</span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;C:/Users/11435/Desktop/Test/traceback_test.py&quot;, line 8, in &lt;module&gt;</span></span><br><span class="line"><span class="comment">#     1 / 0</span></span><br><span class="line"><span class="comment"># ZeroDivisionError: division by zero</span></span><br></pre></td></tr></table></figure>
<h3 id="decorator-wraps"><a class="markdownIt-Anchor" href="#decorator-wraps">#</a> decorator wraps</h3>
<p><code>wraps(func)</code>  可以保持原函数的状态， 如果没有添加此段，返回的是包装函数的状态， <code>whatIsLeaving.__doc__</code>  返回 None,  <code>whatIsLeaving.__name__</code>  返回 living</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> wraps</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">thisIsLiving</span>(<span class="params">func</span>):</span></span><br><span class="line"><span class="meta">    @wraps(<span class="params">func</span>)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">living</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">        <span class="keyword">return</span> func(*args,**kwargs) + <span class="string">&quot;living is sleep and eat&quot;</span></span><br><span class="line">    <span class="keyword">return</span> living</span><br><span class="line"></span><br><span class="line"><span class="meta">@thisIsLiving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">whatIsLeaving</span>():</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    什么是活着</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;what is living? &quot;</span></span><br><span class="line"></span><br><span class="line">print(whatIsLeaving.__doc__)</span><br><span class="line">print(whatIsLeaving.__name__)</span><br><span class="line">print(whatIsLeaving())</span><br><span class="line"></span><br><span class="line"><span class="comment">#     什么是活着</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># whatIsLeaving</span></span><br><span class="line"><span class="comment"># what is living? living is sleep and eat</span></span><br></pre></td></tr></table></figure>
<h3 id="argparse"><a class="markdownIt-Anchor" href="#argparse">#</a> argparse</h3>
<p>parse command line option</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">&quot;--h&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;Hub ID&quot;</span>, dest=<span class="string">&quot;hubid&quot;</span>)</span><br><span class="line">parser.add_argument(<span class="string">&quot;--t&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;File Type&quot;</span>, dest=<span class="string">&quot;filetype&quot;</span>)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">print(args.hubid, args.filetype)</span><br><span class="line"></span><br><span class="line"><span class="comment"># python argparse_test.py --h Morrison --t csv</span></span><br><span class="line"><span class="comment"># Morrison csv</span></span><br></pre></td></tr></table></figure>
<h3 id="csv-to-database"><a class="markdownIt-Anchor" href="#csv-to-database">#</a> csv to database</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"></span><br><span class="line"><span class="comment"># import  os</span></span><br><span class="line"><span class="comment"># os.environ[&quot;NLS_LANG&quot;] = &quot;GERMAN_GERMANY.UTF8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化数据库连接，使用cx_oracle模块</span></span><br><span class="line">engine = create_engine(<span class="string">&#x27;oracle+cx_oracle://username:pass@ip:port/instance&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取本地CSV文件</span></span><br><span class="line">df = pd.read_csv(<span class="string">&quot;test.csv&quot;</span>, sep=<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将新建的DataFrame储存为Oracle中的数据表，不储存index列</span></span><br><span class="line"><span class="comment"># 字符串在oracle中存储的是clob对象</span></span><br><span class="line">df.to_sql(<span class="string">&#x27;test&#x27;</span>, engine, index= <span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="string">&quot;Write to Oracle successfully!&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="rsplit"><a class="markdownIt-Anchor" href="#rsplit">#</a> rsplit()</h3>
<p>rsplit 从右向左切割，和 spit 类似，rsplit () 默认分隔符为所有空字符，包括空格、换行 (\n)、制表符 (\t) 等</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;this is string example....wow!!!&quot;</span></span><br><span class="line"></span><br><span class="line">print(s.rsplit())</span><br><span class="line">print(s.rsplit(<span class="string">&#x27;i&#x27;</span>, <span class="number">2</span>))</span><br><span class="line">print(s.rsplit(<span class="string">&#x27;w&#x27;</span>))</span><br><span class="line">print(s.rsplit(<span class="literal">None</span>, <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># [&#x27;this&#x27;, &#x27;is&#x27;, &#x27;string&#x27;, &#x27;example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this &#x27;, &#x27;s str&#x27;, &#x27;ng example....wow!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this is string example....&#x27;, &#x27;o&#x27;, &#x27;!!!&#x27;]</span></span><br><span class="line"><span class="comment"># [&#x27;this is&#x27;, &#x27;string&#x27;, &#x27;example....wow!!!&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="globiglob"><a class="markdownIt-Anchor" href="#globiglob">#</a> glob.iglob()</h3>
<p>iglob 返回一个 generator</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> glob</span><br><span class="line">g = glob.iglob(<span class="string">&#x27;*.txt&#x27;</span>)</span><br><span class="line">print(g, <span class="built_in">list</span>(g))</span><br><span class="line"></span><br><span class="line"><span class="comment"># &lt;generator object _iglob at 0x00000000025CB4C0&gt; [&#x27;combine.txt&#x27;, &#x27;test.txt&#x27;]</span></span><br></pre></td></tr></table></figure>
<h3 id="keyword-argument-and-keyword-only-argumnet"><a class="markdownIt-Anchor" href="#keyword-argument-and-keyword-only-argumnet">#</a> keyword argument and keyword-only argumnet</h3>
<p>在函数 a 中，x 和 y 是位置参数（positional） 同时也可以作为关键字参数（keyword），在函数 b, c 中 y 是仅限关键字参数（keword-only）即强制关键字参数，因为在 y 之前存在  <code>*</code> , 需要指明 y 的值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">a</span>(<span class="params">x, y</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">a(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">a(x=<span class="number">1</span>, y=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">b</span>(<span class="params">x, *, y</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">b(<span class="number">1</span>, y=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c</span>(<span class="params">x, *z, y</span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, y=<span class="number">4</span>)</span><br></pre></td></tr></table></figure>
<h3 id="lambda-free-variable"><a class="markdownIt-Anchor" href="#lambda-free-variable">#</a> lambda free variable</h3>
<p>lambda 表达式中的 x 是一个自由变量， 在运行时绑定值，而不是定义时就绑定，这跟函数的默认值参数定义是不同的。因此，在调用 lambda 表达式的时候，x 的值是执行时的值。如果你想让某个匿名函数在定义时就捕获到值，可以将那个参数值定义成默认参数即可</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">10</span></span><br><span class="line">a = <span class="keyword">lambda</span> y: x + y</span><br><span class="line">x = <span class="number">20</span></span><br><span class="line">b = <span class="keyword">lambda</span> y: x + y</span><br><span class="line">print(a(<span class="number">10</span>))</span><br><span class="line">print(b(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 30</span></span><br><span class="line"><span class="comment"># 30</span></span><br><span class="line"></span><br><span class="line">x = <span class="number">10</span></span><br><span class="line">a = <span class="keyword">lambda</span> y, x=x: x + y</span><br><span class="line">x = <span class="number">20</span></span><br><span class="line">b = <span class="keyword">lambda</span> y, x=x: x + y</span><br><span class="line">print(a(<span class="number">10</span>))</span><br><span class="line">print(b(<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 20</span></span><br><span class="line"><span class="comment"># 30</span></span><br><span class="line"></span><br><span class="line">funcs = [<span class="keyword">lambda</span> x, n=n: x + n <span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>)]</span><br><span class="line"><span class="keyword">for</span> func <span class="keyword">in</span> funcs:</span><br><span class="line">    print(func(<span class="number">1</span>))</span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="comment"># 3</span></span><br></pre></td></tr></table></figure>
<h3 id="date"><a class="markdownIt-Anchor" href="#date">#</a> date</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line">now = time.time()</span><br><span class="line">print(now)</span><br><span class="line">tl = time.localtime(now)</span><br><span class="line">print(tl)</span><br><span class="line">date = time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>, tl)</span><br><span class="line">print(date)</span><br><span class="line"></span><br><span class="line">dnow = <span class="string">&#x27;2017-10-16 12:34:00&#x27;</span></span><br><span class="line">timestamp = time.mktime(time.strptime(dnow,<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>))</span><br><span class="line">print(timestamp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1563515277.4810107</span></span><br><span class="line"><span class="comment"># time.struct_time(tm_year=2019, tm_mon=7, tm_mday=19, tm_hour=13, tm_min=47, tm_sec=57, tm_wday=4, tm_yday=200, tm_isdst=0)</span></span><br><span class="line"><span class="comment"># 2019-07-19 13:47:57</span></span><br><span class="line"><span class="comment"># 1508128440.0</span></span><br></pre></td></tr></table></figure>
<img data-src="/2019/06/06/python/date.png" class="" title="python_date">
<h3 id="boolean"><a class="markdownIt-Anchor" href="#boolean">#</a> boolean</h3>
<p>There are not many values that evaluate to False, except empty values, such as (), [], {}, “”, the number 0, and the value None. And of course the value False evaluates to False.</p>
<p>The following will return False:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span>(<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="literal">None</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="number">0</span>)</span><br><span class="line"><span class="built_in">bool</span>(<span class="string">&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">bool</span>(())</span><br><span class="line"><span class="built_in">bool</span>([])</span><br><span class="line"><span class="built_in">bool</span>(&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>One more value, or object in this case, evaluates to False, and that is if you have an object that is made from a class with a  <code>__len__</code>  function that returns 0 or False:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myclass</span>():</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__len__</span>(<span class="params">self</span>):</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">myobj = myclass()</span><br><span class="line">print(<span class="built_in">bool</span>(myobj))  <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> myobj:</span><br><span class="line">    print(<span class="literal">True</span>)  <span class="comment"># not execute</span></span><br></pre></td></tr></table></figure>
<p>Python xml.etree returns Element object len is 0 if the element’s not has child elements. So don’t use  <code>if a:</code>  or  <code>if not a:</code>  to determine if an element exists</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.etree.ElementTree</span><br><span class="line"></span><br><span class="line">config = xml.etree.ElementTree.parse(<span class="string">&#x27;.\cfgEDIASNackFileImporter.xml&#x27;</span>).getroot()</span><br><span class="line"></span><br><span class="line">receiver = config.find(<span class="string">&quot;./Notification/Appender[@Name=&#x27;MailTest&#x27;]/Receiver&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(<span class="built_in">len</span>(receiver), boolen(receiver)) <span class="comment"># 0 False</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Notification</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">SMTP</span> <span class="attr">Server</span>=<span class="string">&quot;xxx.xxx&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Appender</span> <span class="attr">Name</span>=<span class="string">&quot;MailTest&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">Receiver</span> <span class="attr">value</span>=<span class="string">&quot;test@example.com&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Appender</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Notification</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="timeit"><a class="markdownIt-Anchor" href="#timeit">#</a> timeit</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> timeit</span><br><span class="line"></span><br><span class="line">TIMES = <span class="number">10000</span></span><br><span class="line"></span><br><span class="line">SETUP = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">symbols = &#x27;$¢£¥€¤&#x27;</span></span><br><span class="line"><span class="string">def non_ascii(c):</span></span><br><span class="line"><span class="string">    return c &gt; 127</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Signature: repeat(stmt=&#x27;pass&#x27;, setup=&#x27;pass&#x27;, timer=&lt;built-in function perf_counter&gt;, repeat=3, number=1000000, globals=None)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">clock</span>(<span class="params">label, cmd</span>):</span></span><br><span class="line">    res = timeit.repeat(cmd, setup=SETUP, number=TIMES)</span><br><span class="line">    print(label, *(<span class="string">&#x27;&#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(x) <span class="keyword">for</span> x <span class="keyword">in</span> res))</span><br><span class="line"></span><br><span class="line">clock(<span class="string">&#x27;listcomp        :&#x27;</span>, <span class="string">&#x27;[ord(s) for s in symbols if ord(s) &gt; 127]&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;listcomp + func :&#x27;</span>, <span class="string">&#x27;[ord(s) for s in symbols if non_ascii(ord(s))]&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;filter + lambda :&#x27;</span>, <span class="string">&#x27;list(filter(lambda c: c &gt; 127, map(ord, symbols)))&#x27;</span>)</span><br><span class="line">clock(<span class="string">&#x27;filter + func   :&#x27;</span>, <span class="string">&#x27;list(filter(non_ascii, map(ord, symbols)))&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="eval"><a class="markdownIt-Anchor" href="#eval">#</a> eval</h3>
<p>功能：将字符串 str 当成有效的表达式来求值并返回计算结果。</p>
<p>语法： eval (source [, globals [, locals]]) -&gt; value</p>
<p>参数：</p>
<p>source：一个 Python 表达式或函数 compile () 返回的代码对象</p>
<p>globals：可选。必须是 dictionary</p>
<p>locals：可选。任意 map 对象</p>
<p>可以把 list,tuple,dict 和 string 相互转化。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">&quot;[[1,2], [3,4], [5,6], [7,8], [9,0]]&quot;</span></span><br><span class="line">print(<span class="built_in">type</span>(a)) <span class="comment"># str</span></span><br><span class="line">b = <span class="built_in">eval</span>(a)</span><br><span class="line">print(<span class="built_in">type</span>(b))  <span class="comment"># list</span></span><br></pre></td></tr></table></figure>
<h3 id="uuid"><a class="markdownIt-Anchor" href="#uuid">#</a> uuid</h3>
<p>uuid: 通用唯一标识符（Universally Unique ID，UUID）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line">user_id = uuid.uuid4()</span><br><span class="line">print(user_id)</span><br><span class="line"><span class="comment"># cb79af9a-b05f-49a7-acd2-2675852e12f9</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">next_id</span>():</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;%015d%s000&#x27;</span> % (<span class="built_in">int</span>(time.time() * <span class="number">1000</span>), uuid.uuid4().<span class="built_in">hex</span>)</span><br><span class="line">print(next_id())  <span class="comment"># 001583823607352451339f583754d75b479e67714a227ea000</span></span><br><span class="line">print(<span class="string">&#x27;%015d&#x27;</span> % <span class="number">10</span>) <span class="comment"># &#x27;000000000000010&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="partial"><a class="markdownIt-Anchor" href="#partial">#</a> partial</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认按十进制转换</span></span><br><span class="line">r1 = <span class="built_in">int</span>(<span class="string">&quot;12&quot;</span>)</span><br><span class="line">print(r1, <span class="built_in">type</span>(r1))</span><br><span class="line"><span class="comment"># 12 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按二进制转换</span></span><br><span class="line">r2 = <span class="built_in">int</span>(<span class="string">&quot;0101&quot;</span>, base=<span class="number">2</span>)</span><br><span class="line">print(r2, <span class="built_in">type</span>(r2))</span><br><span class="line"><span class="comment"># 5 &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用偏函数, 改造原有的int函数</span></span><br><span class="line">int2 = partial(<span class="built_in">int</span>, base=<span class="number">2</span>)</span><br><span class="line">r3 = int2(<span class="string">&quot;0101&quot;</span>)</span><br><span class="line">print(r3, <span class="built_in">type</span>(r3))</span><br><span class="line"><span class="comment"># 5 &lt;class &#x27;int&#x27;&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="base64"><a class="markdownIt-Anchor" href="#base64">#</a> base64</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> base64</span><br><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment"># b64encode: Encode the bytes-like object s using Base64 and return a bytes object.</span></span><br><span class="line">a = base64.b64encode(s.encode())</span><br><span class="line">print(a) <span class="comment"># b&#x27;aGVsbG8=&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># encode: Encode a file; input and output are binary files.</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;01.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> r, <span class="built_in">open</span>(<span class="string">&#x27;01.txt&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> w:</span><br><span class="line">    base64.encode(r, w)</span><br></pre></td></tr></table></figure>
<h3 id="sqrt"><a class="markdownIt-Anchor" href="#sqrt">#</a> sqrt</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line">print(math.sqrt(<span class="number">25</span>) == <span class="number">25</span> ** <span class="number">0.5</span>) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h2 id="regex"><a class="markdownIt-Anchor" href="#regex">#</a> Regex</h2>
<h3 id="research-rematch"><a class="markdownIt-Anchor" href="#research-rematch">#</a> re.search() &amp; re.match()</h3>
<p><code>re.search()</code>  查找第一个符合条件的，不要求必须是文件的开头<br>
 <code>re.match()</code>  查找文件开头是否符合条件</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">string = <span class="string">&#x27;abc1de2f&#x27;</span></span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">&#x27;[0-9]&#x27;</span>,string)</span><br><span class="line">print(m, m.group()) <span class="comment"># &lt;_sre.SRE_Match object; span=(3, 4), match=&#x27;1&#x27;&gt;  1</span></span><br><span class="line"></span><br><span class="line">m = re.match(<span class="string">&#x27;[0-9]&#x27;</span>, string)</span><br><span class="line">print(m) <span class="comment"># None</span></span><br><span class="line"></span><br><span class="line">m = re.match(<span class="string">&#x27;[0-9]&#x27;</span>, <span class="string">&#x27;1abc1de2f&#x27;</span>)</span><br><span class="line">print(m, m.group()) <span class="comment"># &lt;_sre.SRE_Match object; span=(0, 1), match=&#x27;1&#x27;&gt;  1</span></span><br></pre></td></tr></table></figure>
<h3 id="name-group"><a class="markdownIt-Anchor" href="#name-group">#</a> name group</h3>
<p>name group: 命名组，可以通过  <code>?P&lt;name&gt;</code>  给查找到的 group 命名</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">r&#x27;out_(\d&#123;4&#125;)&#x27;</span>,<span class="string">&#x27;out_1984.txt&#x27;</span>)</span><br><span class="line">print(m.group(<span class="number">0</span>), m.group(<span class="number">1</span>)) <span class="comment"># out_1984 1984</span></span><br><span class="line"></span><br><span class="line">m = re.search(<span class="string">r&#x27;out_(?P&lt;year&gt;\d&#123;4&#125;)&#x27;</span>, <span class="string">&#x27;out_1984.txt&#x27;</span>)</span><br><span class="line">print(m.group(<span class="string">&#x27;year&#x27;</span>)) <span class="comment"># 1984</span></span><br></pre></td></tr></table></figure>
<h3 id="reference-group"><a class="markdownIt-Anchor" href="#reference-group">#</a> reference group</h3>
<p>reference group: 引用组，可以通过  <code>\n</code>  引用分组，代表引用第 n 个分组</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="comment"># \1 表示引用第一个分组</span></span><br><span class="line">ret = re.match(<span class="string">r&quot;&lt;([a-zA-Z]*)&gt;\w*&lt;/\1&gt;&quot;</span>, <span class="string">&quot;&lt;html&gt;hh&lt;/html&gt;&quot;</span>)</span><br><span class="line">print(ret.group())</span><br></pre></td></tr></table></figure>
<h3 id="operate-sub-group"><a class="markdownIt-Anchor" href="#operate-sub-group">#</a> operate sub group</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;start TT end&#x27;</span></span><br><span class="line">re.sub(<span class="string">r&#x27;([A-Z])\1&#x27;</span>, <span class="keyword">lambda</span> pat: pat.group(<span class="number">1</span>).lower(), s)</span><br><span class="line"><span class="comment"># &#x27;start t end&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="regex-example"><a class="markdownIt-Anchor" href="#regex-example">#</a> regex example</h3>
<p>提取网页中的文字内容</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">data_str = <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">&lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;p&gt;岗位职责：&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p&gt;完成推荐算法、数据统计、接口、后台等服务器端相关工作&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># 1. [^&gt;] 非 &gt; 字符</span></span><br><span class="line">print(re.sub(<span class="string">r&#x27;&lt;[^&gt;]*&gt;|&amp;nbsp;|\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>, data_str))</span><br><span class="line"><span class="comment"># 2. .*?  匹配任意字符一个或多个, ? 非贪婪匹配</span></span><br><span class="line">print(re.sub(<span class="string">r&#x27;&lt;.*?&gt;|&amp;nbsp;|\n&#x27;</span>, <span class="string">&#x27;&#x27;</span>, data_str))</span><br></pre></td></tr></table></figure>
<h2 id="web"><a class="markdownIt-Anchor" href="#web">#</a> Web</h2>
<h3 id="html_request_header-to-dict"><a class="markdownIt-Anchor" href="#html_request_header-to-dict">#</a> html_request_header to dict</h3>
<p>将请求头通过分割转换为列表，再通过  <code>dict(list)</code>  函数将 list 转换为 dict<br>
 <code>dict([['Host', 'open.tool.hexun.com']]) =&gt; &#123;'Host': 'open.tool.hexun.com'&#125;</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">raw_headers = <span class="string">&quot;&quot;&quot;Host: open.tool.hexun.com</span></span><br><span class="line"><span class="string">Pragma: no-cache</span></span><br><span class="line"><span class="string">Cache-Control: no-cache</span></span><br><span class="line"><span class="string">User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.84 Safari/537.36</span></span><br><span class="line"><span class="string">Accept: */*</span></span><br><span class="line"><span class="string">Referer: http://stock.hexun.com/gsxw/</span></span><br><span class="line"><span class="string">Accept-Encoding: gzip, deflate</span></span><br><span class="line"><span class="string">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">headers = <span class="built_in">dict</span>([line.split(<span class="string">&#x27;: &#x27;</span>) <span class="keyword">for</span> line <span class="keyword">in</span> raw_headers.split(<span class="string">&#x27;\n&#x27;</span>)])</span><br><span class="line">print(headers)</span><br></pre></td></tr></table></figure>
<h3 id="request_html"><a class="markdownIt-Anchor" href="#request_html">#</a> request_html</h3>
<p>request_html 将获取页面和解析页面内容整合在一起</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests_html <span class="keyword">import</span> HTMLSession</span><br><span class="line"></span><br><span class="line">session = HTMLSession()</span><br><span class="line">r = session.get(<span class="string">&#x27;https://python.org/&#x27;</span>)</span><br><span class="line">print(r.html.links)</span><br><span class="line"></span><br><span class="line">about = r.html.find(<span class="string">&#x27;#about&#x27;</span>, first=<span class="literal">True</span>)</span><br><span class="line">print(about.text)</span><br><span class="line"></span><br><span class="line">content = r.html.search(<span class="string">&#x27;Python is a &#123;&#125; language&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure>
<h3 id="htmlparser-unescape-from-html-entity"><a class="markdownIt-Anchor" href="#htmlparser-unescape-from-html-entity">#</a> HTMLParser unescape from html entity</h3>
<p>将 html 实体转换为普通字符</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> html.parser <span class="keyword">import</span> HTMLParser</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode_html</span>(<span class="params"><span class="built_in">input</span></span>):</span></span><br><span class="line">    h = HTMLParser()</span><br><span class="line">    s = h.unescape(<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(decode_html(<span class="string">&#x27;&amp;#38451;&amp;#38175;&amp;#12345;&amp;lt;&amp;sect;&#x27;</span>)) <span class="comment"># 阳锟〹&lt;§</span></span><br></pre></td></tr></table></figure>
<h3 id="pyppeteer"><a class="markdownIt-Anchor" href="#pyppeteer">#</a> pyppeteer</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> pyppeteer <span class="keyword">import</span> launch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    browser = <span class="keyword">await</span> launch()</span><br><span class="line">    page = <span class="keyword">await</span> browser.newPage()</span><br><span class="line">    <span class="keyword">await</span> page.goto(<span class="string">&#x27;http://example.com&#x27;</span>)</span><br><span class="line">    <span class="keyword">await</span> page.screenshot(&#123;<span class="string">&#x27;path&#x27;</span>: <span class="string">&#x27;example.png&#x27;</span>&#125;)</span><br><span class="line">    <span class="keyword">await</span> browser.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># AttributeError: module &#x27;asyncio&#x27; has no attribute &#x27;run&#x27;</span></span><br><span class="line"><span class="comment"># use python 3.7</span></span><br><span class="line"><span class="comment"># asyncio.run(main())</span></span><br><span class="line"></span><br><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line">loop.run_until_complete(asyncio.wait([main()]))</span><br><span class="line">loop.close()</span><br></pre></td></tr></table></figure>
<h3 id="flask-index-page"><a class="markdownIt-Anchor" href="#flask-index-page">#</a> flask index page</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods = [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/page=&lt;page&gt;&#x27;</span>, methods = [<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span>(<span class="params">page=<span class="number">1</span></span>):</span></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h2 id="other"><a class="markdownIt-Anchor" href="#other">#</a> Other</h2>
<h3 id="freevars"><a class="markdownIt-Anchor" href="#freevars">#</a> freevars</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_averager</span>():</span></span><br><span class="line">    series = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">averager</span>(<span class="params">new_value</span>):</span></span><br><span class="line">        series.append(new_value)</span><br><span class="line">        total = <span class="built_in">sum</span>(series)</span><br><span class="line">        <span class="keyword">return</span> total / <span class="built_in">len</span>(series)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> averager</span><br><span class="line"></span><br><span class="line">avg = make_averager()</span><br><span class="line">print(avg.__code__.co_freevars)</span><br><span class="line">print(avg.__code__.co_varnames)</span><br><span class="line"></span><br><span class="line">print(avg.__closure__)</span><br><span class="line">print(avg.__closure__[<span class="number">0</span>].cell_contents)</span><br><span class="line">avg(<span class="number">10</span>)</span><br><span class="line">avg(<span class="number">11</span>)</span><br><span class="line">print(avg.__closure__[<span class="number">0</span>].cell_contents)</span><br><span class="line"></span><br><span class="line"><span class="comment"># (&#x27;series&#x27;,)</span></span><br><span class="line"><span class="comment"># (&#x27;new_value&#x27;, &#x27;total&#x27;)</span></span><br><span class="line"><span class="comment"># (&lt;cell at 0x000001C112507618: list object at 0x000001C114148E08&gt;,)</span></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"><span class="comment"># [10, 11]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_averager_nonlocal</span>():</span></span><br><span class="line"></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">averager</span>(<span class="params">new_value</span>):</span></span><br><span class="line">        <span class="keyword">nonlocal</span> count</span><br><span class="line">        <span class="keyword">nonlocal</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="built_in">sum</span> += new_value</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">sum</span> / count</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> averager</span><br><span class="line"></span><br><span class="line">print(make_averager_nonlocal().__code__.co_freevars)</span><br><span class="line"><span class="comment"># (&#x27;count&#x27;, &#x27;sum&#x27;)</span></span><br></pre></td></tr></table></figure>
<h3 id="venv"><a class="markdownIt-Anchor" href="#venv">#</a> venv</h3>
<p>python3 create virtual enviroment</p>
<ul>
<li>
<p>创建虚拟环境  <code>python -m venv my-project</code></p>
</li>
<li>
<p>激活虚拟环境<br>
在 Posix 标准平台下： <code>source &lt;venv&gt;/bin/activate</code></p>
<p>在 Windows 下： <code>&lt;venv&gt;/Scripts/activate.bat</code></p>
</li>
</ul>
<h3 id="reload-module"><a class="markdownIt-Anchor" href="#reload-module">#</a> reload module</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># reload_test.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>:</span></span><br><span class="line">    print(<span class="string">&#x27;---1---&#x27;</span>)</span><br><span class="line">&gt; <span class="keyword">import</span> reload_test</span><br><span class="line">&gt; reload_test.test()</span><br><span class="line"><span class="comment"># ---1---</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改文件后需要重新导入模块:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span>:</span></span><br><span class="line">    print(<span class="string">&#x27;---2---&#x27;</span>)</span><br><span class="line"></span><br><span class="line">&gt; <span class="keyword">from</span> imp <span class="keyword">import</span> reload</span><br><span class="line">&gt; reload(reload_test)</span><br><span class="line">&gt; reload_test.test()</span><br><span class="line"><span class="comment"># ---2---</span></span><br></pre></td></tr></table></figure>
<h3 id="import-order"><a class="markdownIt-Anchor" href="#import-order">#</a> import order</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="comment"># 查看模块搜索顺序</span></span><br><span class="line">print(sys.path)</span><br><span class="line"><span class="comment"># 程序执行时添加新的模块路径</span></span><br><span class="line">sys.path.append(<span class="string">&#x27;/home/jbn/xxx&#x27;</span>)</span><br><span class="line"><span class="comment"># 可以确保先搜索这个路径</span></span><br><span class="line">sys.path.insert(<span class="number">0</span>, <span class="string">&#x27;/home/jbn/xxx&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="share-file-use-mobile-and-computer"><a class="markdownIt-Anchor" href="#share-file-use-mobile-and-computer">#</a> share file use mobile and computer</h3>
<ol>
<li>cmd 进入需要共享的文件夹，执行  <code>python -m http.server</code></li>
<li>ipconfig/all 查看电脑 ip</li>
<li>手机端连接和电脑同一个网段的 wifi，在浏览器输入电脑 ip:port 即可共享文件</li>
</ol>
<h3 id="chardet"><a class="markdownIt-Anchor" href="#chardet">#</a> chardet</h3>
<p>根据文件内容检测编码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;chardet_test.py&quot;</span>, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    file_data = f.read()</span><br><span class="line">    result = chardet.detect(file_data)</span><br><span class="line">    print(result)</span><br><span class="line">    file_content = file_data.decode(encoding=result[<span class="string">&quot;encoding&quot;</span>])</span><br><span class="line">    print(<span class="string">&#x27;-&#x27;</span> * <span class="number">50</span>)</span><br><span class="line">    print(file_content)</span><br></pre></td></tr></table></figure>
<h3 id="delete-bom"><a class="markdownIt-Anchor" href="#delete-bom">#</a> delete bom</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="built_in">open</span>(<span class="string">&#x27;./850_with_bom.json&#x27;</span>,</span><br><span class="line">         mode=<span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8-sig&#x27;</span>).read()</span><br><span class="line"><span class="built_in">open</span>(<span class="string">&#x27;./850.json&#x27;</span>, mode=<span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>).write(s)</span><br></pre></td></tr></table></figure>
<h3 id="window-pip-install-permissionerror"><a class="markdownIt-Anchor" href="#window-pip-install-permissionerror">#</a> window pip install PermissionError</h3>
<p>PermissionError: [WinError 5] 拒绝访问。</p>
<p>找到 python 安装目录赋予当前用户完全控制的权限</p>
<h3 id="window-schedule-call-python"><a class="markdownIt-Anchor" href="#window-schedule-call-python">#</a> window schedule call python</h3>
<p>如果没有设置 python 环境变量可以在开始位置写入 python.exe 的路径，如  <code>C:\Program Files\Python36</code></p>
<img data-src="/2019/06/06/python/1572255258767.png" class="">
<h3 id="run-daemon-on-window"><a class="markdownIt-Anchor" href="#run-daemon-on-window">#</a> run daemon on window</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;C:\Program Files\Python36\pythonw.exe&quot;</span> test.py</span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line"><span class="string">&quot;C:\Program Files\Python36\pythonw.exe&quot;</span> test.py &gt;log.txt <span class="number">2</span>&gt;&amp;<span class="number">1</span></span><br><span class="line"><span class="comment"># OR</span></span><br><span class="line"><span class="string">&quot;C:\Program Files\Python36\pythonw.exe&quot;</span> test.py <span class="number">1</span>&gt;stdout.txt <span class="number">2</span>&gt;stderr.txt</span><br></pre></td></tr></table></figure>
<h3 id="python-mod"><a class="markdownIt-Anchor" href="#python-mod">#</a> python mod</h3>
<p>假设 q 是 a、b 相除产生的商 (quotient)，r 是相应的余数 (remainder)，那么在几乎所有的计算系统中，都满足：a = b x q + r，其中 |r|&lt;|a|。 所以  <code>r = a - (a / b) x b</code></p>
<p>python 使用 floor 向下整除法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">print(-<span class="number">17</span> // <span class="number">10</span>, <span class="number">17</span> // -<span class="number">10</span>, -<span class="number">17</span> // -<span class="number">10</span>)</span><br><span class="line"><span class="comment"># -17 % 10 = -17 - (-17 // 10) * 10 = -17 - (-2) * 10 = 3</span></span><br><span class="line">print(-<span class="number">17</span> % <span class="number">10</span>, <span class="number">17</span> % -<span class="number">10</span>, -<span class="number">17</span> % -<span class="number">10</span>)</span><br><span class="line"><span class="comment"># -2 -2 1</span></span><br><span class="line"><span class="comment"># 3 -3 -7</span></span><br></pre></td></tr></table></figure>
<p>js 使用向上整除法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -17 % 10 = -17 - parseInt(-17 / 10) * (-10) = -17 - (-1) * (-10) = -7</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">17</span> % <span class="number">10</span>, <span class="number">17</span> % -<span class="number">10</span>, -<span class="number">17</span> % -<span class="number">10</span>);</span><br><span class="line"><span class="comment">// -7 7 -7</span></span><br></pre></td></tr></table></figure>
<h3 id="replace-double-slash-to-one-slash"><a class="markdownIt-Anchor" href="#replace-double-slash-to-one-slash">#</a> replace double slash to one slash</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">r&#x27;foo \\ bar&#x27;</span></span><br><span class="line">print(s)</span><br><span class="line">print(s.replace(<span class="string">&#x27;\\\\&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>))</span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;foo \\\\ bar&#x27;</span></span><br><span class="line">print(s)</span><br><span class="line">print(s.replace(<span class="string">&#x27;\\\\&#x27;</span>, <span class="string">&#x27;\\&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># foo \\ bar</span></span><br><span class="line"><span class="comment"># foo \ bar</span></span><br><span class="line"><span class="comment"># foo \\ bar</span></span><br><span class="line"><span class="comment"># foo \ bar</span></span><br></pre></td></tr></table></figure>
<h3 id="replace-normal-unicode-str-to-unicode-encoded-str"><a class="markdownIt-Anchor" href="#replace-normal-unicode-str-to-unicode-encoded-str">#</a> replace normal Unicode str to Unicode encoded str</h3>
<p>将普通的 Unicode 字符串转换为 Unicode 编码的字符串<br>
 <code>'\\u9500\\u552e' or r'\u9500\u552e'=&gt; '\u9500\u552e'</code></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">s = <span class="string">&#x27;\\u9500\\u552e&#x27;</span></span><br><span class="line">print(s)</span><br><span class="line">print(<span class="string">&#x27;\u9500\u552e&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># \u 不能组成完整字符，unicode error</span></span><br><span class="line"><span class="comment"># res = re.sub(&#x27;\\u&#x27;, &#x27;\u&#x27;, s)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">s = <span class="string">&#x27;\\u9500\\u552e&#x27;</span></span><br><span class="line">print(json.loads(<span class="string">f&#x27;&quot;<span class="subst">&#123;s&#125;</span>&quot;&#x27;</span>))</span><br><span class="line"></span><br><span class="line">print(s.encode().decode(<span class="string">&#x27;unicode_escape&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># \u9500\u552e</span></span><br><span class="line"><span class="comment"># 销售</span></span><br><span class="line"><span class="comment"># 销售</span></span><br><span class="line"><span class="comment"># 销售</span></span><br></pre></td></tr></table></figure>
<h3 id="while-break"><a class="markdownIt-Anchor" href="#while-break">#</a> while break</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># command = &#x27;&#x27;</span></span><br><span class="line"><span class="comment"># while command.lower() != &#x27;quit&#x27;:</span></span><br><span class="line"><span class="comment">#     command = input(&#x27;&gt;&#x27;)</span></span><br><span class="line"><span class="comment">#     result = eval(command)</span></span><br><span class="line"><span class="comment">#     print(result)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    command = <span class="built_in">input</span>(<span class="string">&#x27;&gt;&#x27;</span>)</span><br><span class="line">    print(<span class="string">&#x27;ECHO&#x27;</span>, command)</span><br><span class="line">    <span class="keyword">if</span> command.lower() == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<h3 id="douban-pypi"><a class="markdownIt-Anchor" href="#douban-pypi">#</a> douban pypi</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests -i https://pypi.douban.com/simple/</span><br></pre></td></tr></table></figure>
<h3 id="python-python-m"><a class="markdownIt-Anchor" href="#python-python-m">#</a> python &amp; python -m</h3>
<p><code>python run.py</code>  是把 <span class="exturl" data-url="aHR0cDovL3J1bi5weQ==">run.py</span> 所在的目录放到 sys.path 属性中</p>
<p><code>python -m run.py</code>  是把输入命令的目录放到 sys.path 属性中</p>
<h3 id="format-xml"><a class="markdownIt-Anchor" href="#format-xml">#</a> format xml</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> xml.dom.minidom <span class="keyword">as</span> xdom</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line">work_dir = <span class="string">r&#x27;C:\Users\11435\Desktop\practice\python\formatxml\xmlfiles&#x27;</span></span><br><span class="line"></span><br><span class="line">paths = Path(work_dir).glob(<span class="string">&#x27;**/*.xml&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> path <span class="keyword">in</span> paths:</span><br><span class="line">    prettied = xdom.parseString(path.read_text()).toprettyxml()</span><br><span class="line">    path.write_text(pettied)</span><br></pre></td></tr></table></figure>
<h3 id="string-index"><a class="markdownIt-Anchor" href="#string-index">#</a> string index</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="comment"># for(int i=len(s) -1 ; i &gt; 0; i--)</span></span><br><span class="line">print(s[::-<span class="number">1</span>])  <span class="comment"># olleh</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># palindrome</span></span><br><span class="line">s = <span class="string">&#x27;PHP&#x27;</span></span><br><span class="line">print(s == s[::-<span class="number">1</span>]) <span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h3 id="quit-python-interactive-shell"><a class="markdownIt-Anchor" href="#quit-python-interactive-shell">#</a> Quit Python Interactive Shell</h3>
<p>Python Interactive Shell 通过 EOF (End Of File) 退出，Python 在 parse stdin 的时候判断是否是 EOF。</p>
<p>Mac/Linux 按 Ctrl + D 退出，Window 先按 Ctrl + Z 然后按 Enter 退出。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Python 3.9.6 (tags/v3.9.6:db3ff76, Jun 28 2021, 15:26:21) [MSC v.1929 64 bit (AMD64)] on win32</span><br><span class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; ^Z</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="quiz"><a class="markdownIt-Anchor" href="#quiz">#</a> Quiz</h2>
<h3 id="why-judgement-none-must-use-is-in-python"><a class="markdownIt-Anchor" href="#why-judgement-none-must-use-is-in-python">#</a> Why judgement None must use ‘is’ in python?</h3>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> a:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2</span></span><br><span class="line"><span class="keyword">if</span> a == <span class="literal">None</span>:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3</span></span><br><span class="line"><span class="keyword">if</span> a <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    print(<span class="string">&#x27;None&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># None</span></span><br></pre></td></tr></table></figure>
<p>第一种方式在 <code>[], &#123;&#125;, set(), None, False</code>  这几种情况下都符合，用户自定义类型也可以通过重载  <code>__bool__</code>  定义什么时候是 True/False.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">lst = [[], &#123;&#125;, <span class="built_in">set</span>(), <span class="literal">None</span>, <span class="literal">False</span>]</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> lst:</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> a:</span><br><span class="line">        print(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># []</span></span><br><span class="line"><span class="comment"># &#123;&#125;</span></span><br><span class="line"><span class="comment"># set()</span></span><br><span class="line"><span class="comment"># None</span></span><br><span class="line"><span class="comment"># False</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDataStructure</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__bool__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">d = MyDataStructure()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> d:</span><br><span class="line">    print(<span class="string">&quot;It&#x27;s None&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># It&#x27;s None</span></span><br></pre></td></tr></table></figure>
<p>第二种方式，用户自定义类型可以通过重载 <strong>eq</strong> 定义什么时候是 True/False.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyDataStructure</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__eq__</span>(<span class="params">self, other</span>):</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">d = MyDataStructure()</span><br><span class="line"><span class="keyword">if</span> d == <span class="literal">None</span>:</span><br><span class="line">    print(d)</span><br><span class="line"><span class="comment"># &lt;__main__.MyDataStructure object at 0x000001BAA1B0AFA0&gt;</span></span><br></pre></td></tr></table></figure>

      <div class="tags">
          <a href="/tags/python/" rel="tag"><i class="ic i-tag"></i> python</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2023-03-03 13:41:13" itemprop="dateModified" datetime="2023-03-03T13:41:13+08:00">2023-03-03</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2019/06/06/oracle/" itemprop="url" rel="prev" data-background-image="&#x2F;anime&#x2F;index&#x2F;心理测量者.jpg" title="Oracle">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> manual</span>
  <h3>Oracle</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2019/06/06/bat/" itemprop="url" rel="next" data-background-image="&#x2F;anime&#x2F;index&#x2F;交响情人梦.jpg" title="Window Bat">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> manual</span>
  <h3>Window Bat</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#io"><span class="toc-number">1.</span> <span class="toc-text"> IO</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#file-open"><span class="toc-number">1.1.</span> <span class="toc-text"> file open</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-lines"><span class="toc-number">1.2.</span> <span class="toc-text"> file lines</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#file-state"><span class="toc-number">1.3.</span> <span class="toc-text"> file state</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#oswalk"><span class="toc-number">1.4.</span> <span class="toc-text"> os.walk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#stringio"><span class="toc-number">1.5.</span> <span class="toc-text"> StringIO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print"><span class="toc-number">1.6.</span> <span class="toc-text"> print</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#print-s-r"><span class="toc-number">1.7.</span> <span class="toc-text"> print %s, %r</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prettytable"><span class="toc-number">1.8.</span> <span class="toc-text"> prettytable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shutilmove-osrename"><span class="toc-number">1.9.</span> <span class="toc-text"> shutil.move &amp; os.rename</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#container"><span class="toc-number">2.</span> <span class="toc-text"> Container</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">2.1.</span> <span class="toc-text"> + &amp; +&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__sub__"><span class="toc-number">2.2.</span> <span class="toc-text"> __sub__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collections-type-check"><span class="toc-number">2.3.</span> <span class="toc-text"> collections type check</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iterable"><span class="toc-number">2.4.</span> <span class="toc-text"> Iterable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#iter"><span class="toc-number">2.5.</span> <span class="toc-text"> iter()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defaultdict-realize-multidict"><span class="toc-number">2.6.</span> <span class="toc-text"> defaultdict realize multidict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip"><span class="toc-number">2.7.</span> <span class="toc-text"> zip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict_keys-dict_items"><span class="toc-number">2.8.</span> <span class="toc-text"> dict_keys &amp; dict_items</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dict-set-comprehension"><span class="toc-number">2.9.</span> <span class="toc-text"> dict &amp; set comprehension</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tuple-compare"><span class="toc-number">2.10.</span> <span class="toc-text"> tuple compare</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unpack"><span class="toc-number">2.11.</span> <span class="toc-text"> unpack</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-groupby"><span class="toc-number">2.12.</span> <span class="toc-text"> itertools groupby</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-product"><span class="toc-number">2.13.</span> <span class="toc-text"> itertools product</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-combinations_with_replacement"><span class="toc-number">2.14.</span> <span class="toc-text"> itertools combinations_with_replacement</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-combinations"><span class="toc-number">2.15.</span> <span class="toc-text"> itertools combinations</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#itertools-permutations"><span class="toc-number">2.16.</span> <span class="toc-text"> itertools permutations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class"><span class="toc-number">3.</span> <span class="toc-text"> Class</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#super"><span class="toc-number">3.1.</span> <span class="toc-text"> super()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#__class__-point-to-class"><span class="toc-number">3.2.</span> <span class="toc-text"> __class__ point to class</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#calendar"><span class="toc-number">3.3.</span> <span class="toc-text"> calendar</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#type-isinstance"><span class="toc-number">3.4.</span> <span class="toc-text"> type() &amp; isinstance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-monkey-patch"><span class="toc-number">3.5.</span> <span class="toc-text"> dynamic monkey patch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-import"><span class="toc-number">3.6.</span> <span class="toc-text"> dynamic import</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#typing-udtuser-defined-types"><span class="toc-number">3.7.</span> <span class="toc-text"> typing udt(user-defined types)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fun"><span class="toc-number">4.</span> <span class="toc-text"> Fun</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nonlocal"><span class="toc-number">4.1.</span> <span class="toc-text"> nonlocal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#imp"><span class="toc-number">4.2.</span> <span class="toc-text"> imp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fun-__code__"><span class="toc-number">4.3.</span> <span class="toc-text"> fun __code__</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#switch-case"><span class="toc-number">4.4.</span> <span class="toc-text"> switch case</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#insepect"><span class="toc-number">4.5.</span> <span class="toc-text"> insepect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#compile-to-pyc"><span class="toc-number">4.6.</span> <span class="toc-text"> compile to pyc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#traceback"><span class="toc-number">4.7.</span> <span class="toc-text"> traceback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#decorator-wraps"><span class="toc-number">4.8.</span> <span class="toc-text"> decorator wraps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#argparse"><span class="toc-number">4.9.</span> <span class="toc-text"> argparse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csv-to-database"><span class="toc-number">4.10.</span> <span class="toc-text"> csv to database</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rsplit"><span class="toc-number">4.11.</span> <span class="toc-text"> rsplit()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#globiglob"><span class="toc-number">4.12.</span> <span class="toc-text"> glob.iglob()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keyword-argument-and-keyword-only-argumnet"><span class="toc-number">4.13.</span> <span class="toc-text"> keyword argument and keyword-only argumnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lambda-free-variable"><span class="toc-number">4.14.</span> <span class="toc-text"> lambda free variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#date"><span class="toc-number">4.15.</span> <span class="toc-text"> date</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#boolean"><span class="toc-number">4.16.</span> <span class="toc-text"> boolean</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#timeit"><span class="toc-number">4.17.</span> <span class="toc-text"> timeit</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval"><span class="toc-number">4.18.</span> <span class="toc-text"> eval</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uuid"><span class="toc-number">4.19.</span> <span class="toc-text"> uuid</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#partial"><span class="toc-number">4.20.</span> <span class="toc-text"> partial</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#base64"><span class="toc-number">4.21.</span> <span class="toc-text"> base64</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sqrt"><span class="toc-number">4.22.</span> <span class="toc-text"> sqrt</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#regex"><span class="toc-number">5.</span> <span class="toc-text"> Regex</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#research-rematch"><span class="toc-number">5.1.</span> <span class="toc-text"> re.search() &amp; re.match()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#name-group"><span class="toc-number">5.2.</span> <span class="toc-text"> name group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reference-group"><span class="toc-number">5.3.</span> <span class="toc-text"> reference group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#operate-sub-group"><span class="toc-number">5.4.</span> <span class="toc-text"> operate sub group</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#regex-example"><span class="toc-number">5.5.</span> <span class="toc-text"> regex example</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#web"><span class="toc-number">6.</span> <span class="toc-text"> Web</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#html_request_header-to-dict"><span class="toc-number">6.1.</span> <span class="toc-text"> html_request_header to dict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#request_html"><span class="toc-number">6.2.</span> <span class="toc-text"> request_html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#htmlparser-unescape-from-html-entity"><span class="toc-number">6.3.</span> <span class="toc-text"> HTMLParser unescape from html entity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pyppeteer"><span class="toc-number">6.4.</span> <span class="toc-text"> pyppeteer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flask-index-page"><span class="toc-number">6.5.</span> <span class="toc-text"> flask index page</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#other"><span class="toc-number">7.</span> <span class="toc-text"> Other</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#freevars"><span class="toc-number">7.1.</span> <span class="toc-text"> freevars</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#venv"><span class="toc-number">7.2.</span> <span class="toc-text"> venv</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reload-module"><span class="toc-number">7.3.</span> <span class="toc-text"> reload module</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#import-order"><span class="toc-number">7.4.</span> <span class="toc-text"> import order</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#share-file-use-mobile-and-computer"><span class="toc-number">7.5.</span> <span class="toc-text"> share file use mobile and computer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chardet"><span class="toc-number">7.6.</span> <span class="toc-text"> chardet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#delete-bom"><span class="toc-number">7.7.</span> <span class="toc-text"> delete bom</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#window-pip-install-permissionerror"><span class="toc-number">7.8.</span> <span class="toc-text"> window pip install PermissionError</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#window-schedule-call-python"><span class="toc-number">7.9.</span> <span class="toc-text"> window schedule call python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#run-daemon-on-window"><span class="toc-number">7.10.</span> <span class="toc-text"> run daemon on window</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-mod"><span class="toc-number">7.11.</span> <span class="toc-text"> python mod</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replace-double-slash-to-one-slash"><span class="toc-number">7.12.</span> <span class="toc-text"> replace double slash to one slash</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#replace-normal-unicode-str-to-unicode-encoded-str"><span class="toc-number">7.13.</span> <span class="toc-text"> replace normal Unicode str to Unicode encoded str</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#while-break"><span class="toc-number">7.14.</span> <span class="toc-text"> while break</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#douban-pypi"><span class="toc-number">7.15.</span> <span class="toc-text"> douban pypi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#python-python-m"><span class="toc-number">7.16.</span> <span class="toc-text"> python &amp; python -m</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#format-xml"><span class="toc-number">7.17.</span> <span class="toc-text"> format xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#string-index"><span class="toc-number">7.18.</span> <span class="toc-text"> string index</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#quit-python-interactive-shell"><span class="toc-number">7.19.</span> <span class="toc-text"> Quit Python Interactive Shell</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#quiz"><span class="toc-number">8.</span> <span class="toc-text"> Quiz</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#why-judgement-none-must-use-is-in-python"><span class="toc-number">8.1.</span> <span class="toc-text"> Why judgement None must use ‘is’ in python?</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/2019/06/06/bat/" rel="bookmark" title="Window Bat">Window Bat</a></li><li class="active"><a href="/2019/06/06/python/" rel="bookmark" title="Python">Python</a></li><li><a href="/2019/06/06/oracle/" rel="bookmark" title="Oracle">Oracle</a></li><li><a href="/2019/10/12/linux-vim/" rel="bookmark" title="Vim">Vim</a></li><li><a href="/2020/09/01/sql-advance/" rel="bookmark" title="SQL Advance">SQL Advance</a></li><li><a href="/2021/01/01/a-resource/" rel="bookmark" title="Resources">Resources</a></li><li><a href="/2021/04/06/japanese/" rel="bookmark" title="Japanese">Japanese</a></li><li><a href="/2021/04/25/excel/" rel="bookmark" title="Excel Basic">Excel Basic</a></li><li><a href="/2021/05/06/edi-flow/" rel="bookmark" title="EDI Flow">EDI Flow</a></li><li><a href="/2021/05/13/r-tutorial/" rel="bookmark" title="R tutorial">R tutorial</a></li><li><a href="/2021/07/10/rust-for-node/" rel="bookmark" title="Deep Dive into Rust for Node.js Developers">Deep Dive into Rust for Node.js Developers</a></li><li><a href="/2021/07/20/python-daily-tool/" rel="bookmark" title="Daily Tool">Daily Tool</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">342</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">47</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2019/06/06/oracle/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2019/06/06/bat/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2019/06/06/python/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
