



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="r" />


<link rel="canonical" href="https://lhchen74.github.io/2021/05/11/r-datastructure/">



  <title>
R Data structure |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">R Data structure
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-05-11 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-05-11T00:00:00+08:00">2021-05-11</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeyvx1d4j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclh5u05ej20zk0m87df.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipeuv80yoj20zk0m8kjl.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclhpw3lwj20zk0m8gvw.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipet8c1a2j20zk0m8kct.jpg"></li>
          <li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclh0m9pdj20zk0m8hdt.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2021/05/11/r-datastructure/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载： <span class="exturl" data-url="aHR0cDovL3ZlbnVzLmlmY2EudW5pY2FuLmVzL1JpbnRyby9kYXRhU3RydWN0Lmh0bWwjZnVuY3Rpb25z">Data structure - R introduction documentation</span></p>
</blockquote>
<p>R is an object-oriented language: an <strong>object</strong> in R is anything (constants, data structures, functions, graphs) that can be assigned to a variable:</p>
<ul>
<li>Data Objects: used to store real or complex numerical values, logical values or characters. These objects are always vectors: there are no scalars in R.</li>
<li>Language Objects: functions, expressions</li>
</ul>
<h2 id="data-structure-types"><a class="markdownIt-Anchor" href="#data-structure-types">#</a> Data structure types</h2>
<ul>
<li>
<p>Vectors: one-dimensional arrays used to store collection data of the same mode</p>
<ul>
<li>Numeric Vectors (mode: <em>numeric</em>)</li>
</ul>
</li>
<li>
<p>Complex Vectors (mode: <em>complex</em>)</p>
<ul>
<li>Logical Vectors (model: <em>logical</em>)</li>
<li>Character Vector or text strings (mode: character)</li>
</ul>
</li>
<li>
<p><strong>Matrices</strong>: two-dimensional arrays to store collections of data of the same mode. They are accessed by two integer indices.</p>
</li>
<li>
<p><strong>Arrays</strong>: similar to matrices but they can be multi-dimensional (more than two dimensions)</p>
</li>
<li>
<p><strong>Factors</strong>: vectors of categorical variables designed to group the components of another vector with the same size</p>
</li>
<li>
<p><strong>Lists</strong>: ordered collection of objects, where the elements can be of different types</p>
</li>
<li>
<p><strong>Data Frames</strong>: generalization of matrices where different columns can store different mode data.</p>
</li>
<li>
<p><strong>Functions</strong>: objects created by the user and reused to make specific operations.</p>
</li>
</ul>
<img data-src="/2021/05/11/r-datastructure/dataStructuresNew.png" class="">
<h3 id="vectors"><a class="markdownIt-Anchor" href="#vectors">#</a> Vectors</h3>
<h4 id="numeric-vectors"><a class="markdownIt-Anchor" href="#numeric-vectors">#</a> Numeric Vectors</h4>
<p>There are several ways to assign values to a variable:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- 1.7               <span class="comment"># assign a value to a vector with only one element (~ scalar)</span></span><br><span class="line">&gt; 1.7 -&gt; a               # assign a value to a vector with only one element (~ scalar)</span><br><span class="line">&gt; a = <span class="number">1.7</span>                <span class="comment"># assign a value to a vector with only one element (~ scalar)</span></span><br><span class="line">&gt; assign(<span class="string">&quot;a&quot;</span>, <span class="number">1.7</span>)       <span class="comment"># assign a value to a vector with only one element (~ scalar)</span></span><br></pre></td></tr></table></figure>
<p>To show the values:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; a                      <span class="comment"># show the value in the screen (not valid in scripts)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.7</span></span><br><span class="line">&gt; print(a)               <span class="comment"># show the value in the screen (valid in scripts)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.7</span></span><br></pre></td></tr></table></figure>
<p>To generate a vector with several numeric values:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">c</span>(<span class="number">10</span>, <span class="number">11</span>, <span class="number">15</span>, <span class="number">19</span>) <span class="comment"># assign four values to a vector using the concatenate command c()</span></span><br><span class="line">&gt; a                      <span class="comment"># show the value in the screen</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">10</span> <span class="number">11</span> <span class="number">15</span> <span class="number">19</span></span><br></pre></td></tr></table></figure>
<p>The operations are always done over all the elements of the numeric array:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; a*a                    <span class="comment"># evaluate the square value of every element in the vector</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">100</span> <span class="number">121</span> <span class="number">225</span> <span class="number">361</span></span><br><span class="line">&gt; <span class="number">1</span>/a                    <span class="comment"># evaluate the inverse value of every element in the vector</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.10000000</span> <span class="number">0.09090909</span> <span class="number">0.06666667</span> <span class="number">0.05263158</span></span><br><span class="line">&gt; b &lt;- a-<span class="number">1</span>               <span class="comment"># subtract 1 from every element and assign the result to b</span></span><br><span class="line">&gt; b</span><br><span class="line">[<span class="number">1</span>]  <span class="number">9</span> <span class="number">10</span> <span class="number">14</span> <span class="number">18</span></span><br></pre></td></tr></table></figure>
<p>To generate a <em>sequence</em>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="number">2</span>:<span class="number">10</span>                                <span class="comment"># generate a sequence from n1=2 to n2=10 using n1:n2</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">&gt; <span class="number">5</span>:<span class="number">1</span>                                 <span class="comment"># generate an inverse sequence if n2 &lt; n1</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">5</span> <span class="number">4</span> <span class="number">3</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt; seq(from=n1, to=n2, by=n3)          <span class="comment"># generate sequence from n1 to n2 using n3 step</span></span><br><span class="line">                                      <span class="comment">#  (parameters names can be avoided if order is kept)</span></span><br><span class="line">&gt; seq(from=<span class="number">1</span>, to=<span class="number">10</span>, by=<span class="number">3</span>)</span><br><span class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">4</span>  <span class="number">7</span> <span class="number">10</span></span><br><span class="line">&gt; seq(<span class="number">1</span>, <span class="number">10</span>, <span class="number">3</span>)</span><br><span class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">4</span>  <span class="number">7</span> <span class="number">10</span></span><br><span class="line"></span><br><span class="line">&gt; seq(<span class="built_in">length</span>=<span class="number">10</span>, from=<span class="number">1</span>, by=<span class="number">3</span>)        <span class="comment"># generate a fixed length sequence</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">4</span>  <span class="number">7</span> <span class="number">10</span> <span class="number">13</span> <span class="number">16</span> <span class="number">19</span> <span class="number">22</span> <span class="number">25</span> <span class="number">28</span></span><br><span class="line"></span><br><span class="line">&gt; help(seq)                           <span class="comment"># for help about this command</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>To generate <em>repetitions</em>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- 1:<span class="number">3</span>; b &lt;- <span class="built_in">rep</span>(a, times=<span class="number">3</span>); c &lt;- <span class="built_in">rep</span>(a, each=<span class="number">3</span>)         <span class="comment"># command rep()</span></span><br></pre></td></tr></table></figure>
<p>In the previous example we have run three commands in the same line. They have been separated by a ‘;’.</p>
<p>The content of the three variables is now:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; a</span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">&gt; b</span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line">&gt; <span class="built_in">c</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span> <span class="number">2</span> <span class="number">3</span> <span class="number">3</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p><strong>The recycling rule:</strong> vectors of different sizes can be combined, as far as the length of the longer vector is a multiple of the shorter vector’s length (otherwise a warning is issued, although the operation is carried out):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a+<span class="built_in">c</span>                                         <span class="comment"># proper dimensions</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>                         <span class="comment"># (operation equivalent to b+c)</span></span><br><span class="line"></span><br><span class="line">&gt; d &lt;- <span class="built_in">c</span>(<span class="number">10</span>,<span class="number">100</span>)</span><br><span class="line">&gt; b+d                                         <span class="comment"># incorrect dimensions</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">11</span> <span class="number">102</span>  <span class="number">13</span> <span class="number">101</span>  <span class="number">12</span> <span class="number">103</span>  <span class="number">11</span> <span class="number">102</span>  <span class="number">13</span></span><br><span class="line">Warning message:</span><br><span class="line">In b + d : longer object <span class="built_in">length</span> is not a multiple of shorter object <span class="built_in">length</span></span><br></pre></td></tr></table></figure>
<p>If we need to know which are the objects that are currently defined, we can <em>list</em> them:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; ls()</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span></span><br></pre></td></tr></table></figure>
<p>Undesired objects can be deleted using  <code>rm()</code>  function:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; rm(a,<span class="built_in">c</span>)                                     <span class="comment"># remove objects &#x27;a&#x27; and &#x27;b&#x27;</span></span><br><span class="line">&gt; ls()                                        <span class="comment"># list current objects</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;b&quot;</span> <span class="string">&quot;d&quot;</span></span><br></pre></td></tr></table></figure>
<p>In order to remove everything in the working environment:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; rm(<span class="built_in">list</span>=ls())                               <span class="comment"># Use this with caution</span></span><br><span class="line">&gt; ls()                                        <span class="comment"># (you&#x27;ll receive no warning!)</span></span><br><span class="line">character(<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h4 id="logical-vectors"><a class="markdownIt-Anchor" href="#logical-vectors">#</a> Logical Vectors</h4>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- seq(<span class="number">1</span>:<span class="number">10</span>)                              <span class="comment"># generate a sequence</span></span><br><span class="line">&gt; a</span><br><span class="line">[<span class="number">1</span>]  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span>             <span class="comment"># show values in screen</span></span><br><span class="line">&gt; b &lt;- (a&gt;<span class="number">5</span>)                                  <span class="comment"># assign values from an inequality</span></span><br><span class="line">&gt; b                                           <span class="comment"># show values in screen</span></span><br><span class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></span><br><span class="line">&gt; a[b]                                        <span class="comment"># show values that fulfil the condition</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line">&gt; a[a&gt;<span class="number">5</span>]                                      <span class="comment"># the same, but avoiding intermediate variable</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br></pre></td></tr></table></figure>
<h4 id="character-vectors"><a class="markdownIt-Anchor" href="#character-vectors">#</a> Character Vectors</h4>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="string">&quot;This is an example&quot;</span>                   <span class="comment"># generate a character vector</span></span><br><span class="line">&gt; a                                           <span class="comment"># show vector content</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;This is an example&quot;</span></span><br></pre></td></tr></table></figure>
<p>We can concatenate vectors after converting them into character vectors:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; x &lt;- 1.5</span><br><span class="line">&gt; y &lt;- -<span class="number">2.7</span></span><br><span class="line">&gt; paste(<span class="string">&quot;Point is (&quot;</span>,x,<span class="string">&quot;,&quot;</span>,y,<span class="string">&quot;)&quot;</span>, sep=<span class="string">&quot;&quot;</span>)     <span class="comment"># concatenate x, y and a string using &#x27;paste&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;Point is (1.5,-2.7)&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="matrices"><a class="markdownIt-Anchor" href="#matrices">#</a> <strong>Matrices</strong></h3>
<p>A matrix is a <strong>bi-dimensional</strong> collection of data:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- matrix(<span class="number">1</span>:<span class="number">12</span>, nrow=<span class="number">3</span>, ncol=<span class="number">4</span>)           <span class="comment"># define a matrix with 3 rows and 4 columns</span></span><br><span class="line">&gt; a</span><br><span class="line">   [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">dim</span>(a)                                      <span class="comment"># return matrix dimensions (rows,columns)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">3</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>The elements of vectors and matrices are <strong>recycled</strong> when it is required by the involved dimensions:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- matrix(<span class="number">1</span>:<span class="number">8</span>, nrow=<span class="number">4</span>, ncol=<span class="number">4</span>)            <span class="comment"># create a matrix with 4 rows and 4 columns</span></span><br><span class="line">&gt; a</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">5</span>    <span class="number">1</span>    <span class="number">5</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">6</span>    <span class="number">2</span>    <span class="number">6</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">7</span>    <span class="number">3</span>    <span class="number">7</span></span><br><span class="line">[<span class="number">4</span>,]    <span class="number">4</span>    <span class="number">8</span>    <span class="number">4</span>    <span class="number">8</span></span><br></pre></td></tr></table></figure>
<h3 id="arrays"><a class="markdownIt-Anchor" href="#arrays">#</a> <strong>Arrays</strong></h3>
<p>They are similar to the matrices although they can have 2 o more dimensions.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&gt; z &lt;- array(<span class="number">1</span>:<span class="number">24</span>, <span class="built_in">dim</span>=<span class="built_in">c</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line">&gt; z</span><br><span class="line">, , <span class="number">1</span></span><br><span class="line"></span><br><span class="line">      [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">3</span>    <span class="number">5</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">4</span>    <span class="number">6</span></span><br><span class="line"></span><br><span class="line">, , <span class="number">2</span></span><br><span class="line"></span><br><span class="line">      [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">7</span>    <span class="number">9</span>   <span class="number">11</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">8</span>   <span class="number">10</span>   <span class="number">12</span></span><br><span class="line"></span><br><span class="line">, , <span class="number">3</span></span><br><span class="line"></span><br><span class="line">      [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,]   <span class="number">13</span>   <span class="number">15</span>   <span class="number">17</span></span><br><span class="line">[<span class="number">2</span>,]   <span class="number">14</span>   <span class="number">16</span>   <span class="number">18</span></span><br><span class="line"></span><br><span class="line">, , <span class="number">4</span></span><br><span class="line"></span><br><span class="line">      [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>]</span><br><span class="line">[<span class="number">1</span>,]   <span class="number">19</span>   <span class="number">21</span>   <span class="number">23</span></span><br><span class="line">[<span class="number">2</span>,]   <span class="number">20</span>   <span class="number">22</span>   <span class="number">24</span></span><br></pre></td></tr></table></figure>
<h3 id="factors"><a class="markdownIt-Anchor" href="#factors">#</a> <strong>Factors</strong></h3>
<p>Factors are vectors that contain categorical information useful to group the values of other vectors of the same size. Let’s see an example:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; bv &lt;- <span class="built_in">c</span>(<span class="number">0.92</span>,<span class="number">0.97</span>,<span class="number">0.87</span>,<span class="number">0.91</span>,<span class="number">0.92</span>,<span class="number">1.04</span>,<span class="number">0.91</span>,<span class="number">0.94</span>,<span class="number">0.96</span>,</span><br><span class="line">+         <span class="number">0.90</span>,<span class="number">0.96</span>,<span class="number">0.86</span>,<span class="number">0.85</span>)                        <span class="comment"># (B-V) colours from 13 galaxies</span></span><br></pre></td></tr></table></figure>
<p>If additional information is available (for instance, the morphological type of the galaxies) we can create a <strong>factor</strong> containing the galaxy types:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt; morfo &lt;- <span class="built_in">c</span>(<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;E&quot;</span>,</span><br><span class="line">+            <span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;S0&quot;</span>)                    <span class="comment"># morphological info (same size)</span></span><br><span class="line">&gt; <span class="built_in">length</span>(morfo)                                       <span class="comment"># ensure vector is the same size</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">13</span></span><br><span class="line">&gt; fmorfo &lt;- factor(morfo)                             <span class="comment"># create factor with &#x27;factor()&#x27;</span></span><br><span class="line">&gt; fmorfo</span><br><span class="line">[<span class="number">1</span>] Sab E   Sab S0  E   E   S0  S0  E   Sab E   Sab S0        <span class="comment"># show factor content</span></span><br><span class="line">Levels: E S0 Sab                                      <span class="comment"># factor different values (levels)</span></span><br><span class="line">&gt; levels(fmorfo)                                      <span class="comment"># show factor levels</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span>   <span class="string">&quot;S0&quot;</span>  <span class="string">&quot;Sab&quot;</span></span><br></pre></td></tr></table></figure>
<p>We could use this additional information to perform an statistical analysis segregating the data according to these types. This will be covered lately in the <a target="_blank" rel="noopener" href="http://venus.ifca.unican.es/Rintro/dataStruct.html#functions"><em>Functions</em></a> section.</p>
<h3 id="lists"><a class="markdownIt-Anchor" href="#lists">#</a> Lists</h3>
<p>Lists are ordered collections of objects, where the elements can be of a different type (a list can be a combination of matrices, vectors, other lists, etc.) They are created using the  <code>list()</code>  function:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, T.RC3=-<span class="number">5</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line">&gt; gal</span><br><span class="line">$name</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;NGC3379&quot;</span></span><br><span class="line"></span><br><span class="line">$morf</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line"></span><br><span class="line">$T.RC3</span><br><span class="line">[<span class="number">1</span>] -<span class="number">5</span></span><br><span class="line"></span><br><span class="line">$colours</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span></span><br><span class="line"></span><br><span class="line">&gt; gal$&lt;Tab&gt;                   <span class="comment"># pressing Tab key after &#x27;$&#x27;, the elements of &#x27;gal&#x27; are shown</span></span><br><span class="line">gal$name     gal$morf     gal$T.RC3    gal$colours</span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">length</span>(gal)                 <span class="comment"># check how many elements &#x27;gal&#x27; has</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">names</span>(gal)                  <span class="comment"># return element names</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;name&quot;</span>    <span class="string">&quot;morf&quot;</span>    <span class="string">&quot;T.RC3&quot;</span>   <span class="string">&quot;colours&quot;</span></span><br></pre></td></tr></table></figure>
<p>New elements can be added in a simple way, just defining them:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal$radio &lt;- <span class="literal">TRUE</span>                           <span class="comment"># add a boolean element</span></span><br><span class="line">&gt; gal$redshift &lt;- 0.002922                    <span class="comment"># add a numeric element</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">names</span>(gal)                                  <span class="comment"># return element names</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;name&quot;</span>     <span class="string">&quot;morf&quot;</span>     <span class="string">&quot;T.RC3&quot;</span>    <span class="string">&quot;colours&quot;</span>  <span class="string">&quot;radio&quot;</span>    <span class="string">&quot;redshift&quot;</span></span><br></pre></td></tr></table></figure>
<p>Lists can be concatenated to generate bigger lists. If we have  <code>list1</code> ,  <code>list2</code> ,  <code>list3</code> , we can create a unique list which is the result of the union of these three lists:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; list123 &lt;- <span class="built_in">c</span>(list1, list2, list3)</span><br></pre></td></tr></table></figure>
<p>As the elements in a list can be R objects of a different type:</p>
<ul>
<li>Lists are extremely versatile since they can store every type of information (good)</li>
<li>Lists can be converted in objects with a rather complex structure (bad). A list can contain several elements which are vectors of different length, which is similar to having a table where the columns have a different number of rows.</li>
</ul>
<p>The ideal situation is to take advantage of the list versatility but preventing them from growing with a very complex structure. This is why R has defined a new type of data which fulfils both requirements: a <strong>Data Frame.</strong></p>
<h3 id="data-frames-tables"><a class="markdownIt-Anchor" href="#data-frames-tables">#</a> <strong>Data Frames (Tables)</strong></h3>
<p>A <em>Data Frame</em> is an special type of list very useful for the statistical work. There are some restrictions to guarantee that they can be used for this statistical purpose.</p>
<p>Among other restrictions, a <em>Data Frame</em> must verify that:</p>
<ul>
<li>List components must be vectors (numeric, character or logical vectors), factors, numeric matrices or other data frames.</li>
<li>Vectors, which are the variables in the data frame, must be of the same length.</li>
</ul>
<p>Warning</p>
<p>In a data frame, character vectors are automatically converted into factors, and the number of levels can be determined as the number of different values in such a vector. This default behaviour can be modified with the  <code>options(stringsAsFactors = FALSE)</code>  command.</p>
<p>Basically, in a <em>Data Frame</em> all the information is displayed as a <strong>table</strong> where the columns have the same number of rows and can contain different type objects (numbers, characters, …).</p>
<p><em>Data Frames</em> can be created using the  <code>data.frame()</code>  function. Let’s see how to define a <em>data frame</em> with two elements, a numeric vector and a character vector (note that both must be same length vectors):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&gt; options(stringsAsFactors = <span class="literal">FALSE</span>)</span><br><span class="line">&gt; df &lt;- data.frame(numbers=<span class="built_in">c</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>),text=<span class="built_in">c</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;a&quot;</span>))</span><br><span class="line">&gt; df</span><br><span class="line">  numbers text</span><br><span class="line">1      <span class="number">10</span>    a</span><br><span class="line">2      <span class="number">20</span>    b</span><br><span class="line">3      <span class="number">30</span>    <span class="built_in">c</span></span><br><span class="line">4      <span class="number">40</span>    a</span><br><span class="line">&gt; df$text                                     <span class="comment"># character vector not converted to a factor</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;a&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; options(stringsAsFactors = <span class="literal">TRUE</span>)            <span class="comment"># default</span></span><br><span class="line">&gt; df &lt;- data.frame(numbers=<span class="built_in">c</span>(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>),text=<span class="built_in">c</span>(<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>,<span class="string">&quot;a&quot;</span>))</span><br><span class="line">&gt; df$text</span><br><span class="line">[<span class="number">1</span>] a b <span class="built_in">c</span> a                                   <span class="comment"># character vector of length = 4</span></span><br><span class="line">Levels: a b <span class="built_in">c</span>                                 <span class="comment">#  converted to a three levels factor!!</span></span><br><span class="line">&gt; df$numbers</span><br><span class="line">[<span class="number">1</span>] <span class="number">10</span> <span class="number">20</span> <span class="number">30</span> <span class="number">40</span>                               <span class="comment"># numeric vector of length = 4</span></span><br><span class="line"></span><br><span class="line">&gt; mode(df)                                    <span class="comment"># storage mode of the object</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;list&quot;</span></span><br><span class="line">&gt; typeof(df)                                  <span class="comment"># (internal) storage mode of the object</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;list&quot;</span></span><br><span class="line">&gt; <span class="built_in">class</span>(df)                                   <span class="comment"># object class</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;data.frame&quot;</span></span><br></pre></td></tr></table></figure>
<p>However the most common way of defining a <em>data frame</em> is reading the data stored in a file. We will see later how to do it using  <code>read.table()</code>  function.</p>
<h4 id="factors-and-tables"><a class="markdownIt-Anchor" href="#factors-and-tables">#</a> Factors and Tables</h4>
<p>It is frequently useful (for instance, for table creation) to be able to generate factors from a numeric continuum variable. To do so, we can use the  <code>cut</code>  command. Its parameter  <code>breaks</code>  defines how the data are divided. <strong>If</strong>  <code>breaks</code>  <strong>is a number</strong>, this is used as the number of (same length) intervals:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; bv &lt;- <span class="built_in">c</span>(<span class="number">0.92</span>,<span class="number">0.97</span>,<span class="number">0.87</span>,<span class="number">0.91</span>,<span class="number">0.92</span>,<span class="number">1.04</span>,<span class="number">0.91</span>,<span class="number">0.94</span>,<span class="number">0.96</span>,</span><br><span class="line">+         <span class="number">0.90</span>,<span class="number">0.96</span>,<span class="number">0.86</span>,<span class="number">0.85</span>)                <span class="comment"># (B-V) colors from 13 galaxies</span></span><br><span class="line">&gt; fbv &lt;- cut(bv,breaks=<span class="number">3</span>)                     <span class="comment"># divide &#x27;bv&#x27; in 3 equal-length intervals</span></span><br><span class="line">&gt; fbv                                         <span class="comment"># show in which interval every galaxy is</span></span><br><span class="line">[<span class="number">1</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.85</span>,<span class="number">0.913</span>]  (<span class="number">0.85</span>,<span class="number">0.913</span>]  (<span class="number">0.913</span>,<span class="number">0.977</span>]</span><br><span class="line">[<span class="number">6</span>] (<span class="number">0.977</span>,<span class="number">1.04</span>]  (<span class="number">0.85</span>,<span class="number">0.913</span>]  (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.85</span>,<span class="number">0.913</span>]</span><br><span class="line">[<span class="number">11</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.85</span>,<span class="number">0.913</span>]  (<span class="number">0.85</span>,<span class="number">0.913</span>]</span><br><span class="line">Levels: (<span class="number">0.85</span>,<span class="number">0.913</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>] (<span class="number">0.977</span>,<span class="number">1.04</span>]       <span class="comment"># the 3 intervals</span></span><br><span class="line">&gt; table(fbv)                                  <span class="comment"># generate a table with the 3 intervals</span></span><br><span class="line">fbv</span><br><span class="line">  (<span class="number">0.85</span>,<span class="number">0.913</span>] (<span class="number">0.913</span>,<span class="number">0.977</span>]  (<span class="number">0.977</span>,<span class="number">1.04</span>]</span><br><span class="line">          <span class="number">6</span>             <span class="number">6</span>             <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p><strong>If</strong>  <code>breaks</code>  <strong>is a vector</strong>, its values are used as the limits of the intervals:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; ffbv &lt;- cut(bv,breaks=<span class="built_in">c</span>(<span class="number">0.80</span>,<span class="number">0.90</span>,<span class="number">1.00</span>,<span class="number">1.10</span>))</span><br><span class="line">&gt; table(ffbv)</span><br><span class="line">ffbv</span><br><span class="line">  (<span class="number">0.8</span>,<span class="number">0.9</span>]   (<span class="number">0.9</span>,<span class="number">1</span>]   (<span class="number">1</span>,<span class="number">1.1</span>]</span><br><span class="line">      <span class="number">4</span>         <span class="number">8</span>         <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>If we want just an approximate number of intervals, but with equally spaced <em>round</em> values, we can use the  <code>pretty()</code>  function (that not always returns the specified number of intervals!):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; fffbv &lt;- cut(bv,pretty(bv,<span class="number">3</span>))               <span class="comment"># ask for 3 &#x27;pretty&#x27; intervals</span></span><br><span class="line">&gt; table(fffbv)                                <span class="comment"># return 4 intervals</span></span><br><span class="line">fffbv</span><br><span class="line">  (<span class="number">0.85</span>,<span class="number">0.9</span>] (<span class="number">0.9</span>,<span class="number">0.95</span>]   (<span class="number">0.95</span>,<span class="number">1</span>]   (<span class="number">1</span>,<span class="number">1.05</span>]</span><br><span class="line">       <span class="number">3</span>          <span class="number">5</span>          <span class="number">3</span>          <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>We can also use a quantile division:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; ffffbv &lt;- cut(bv,quantile(bv,(<span class="number">0</span>:<span class="number">4</span>)/<span class="number">4</span>))      <span class="comment"># ask for the 4 quantiles</span></span><br><span class="line">&gt; table(ffffbv)</span><br><span class="line">ffffbv</span><br><span class="line">  (<span class="number">0.85</span>,<span class="number">0.9</span>]  (<span class="number">0.9</span>,<span class="number">0.92</span>] (<span class="number">0.92</span>,<span class="number">0.96</span>] (<span class="number">0.96</span>,<span class="number">1.04</span>]</span><br><span class="line">        <span class="number">3</span>           <span class="number">4</span>           <span class="number">3</span>           <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>Warning</p>
<p>The last two groupings exclude the value 0.85 which is one of our data values.</p>
<p>Factors can be used to build multi-dimensional tables. Let’s see how. First of all, we will define the data (that in a real case would be read from a data file):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; heights &lt;- <span class="built_in">c</span>(<span class="number">1.64</span>,<span class="number">1.76</span>,<span class="number">1.79</span>,<span class="number">1.65</span>,<span class="number">1.68</span>,<span class="number">1.65</span>,<span class="number">1.86</span>,<span class="number">1.82</span>,<span class="number">1.73</span>,</span><br><span class="line">+              <span class="number">1.75</span>,<span class="number">1.59</span>,<span class="number">1.87</span>,<span class="number">1.73</span>,<span class="number">1.57</span>,<span class="number">1.63</span>,<span class="number">1.71</span>,<span class="number">1.68</span>,<span class="number">1.73</span>,<span class="number">1.53</span>,<span class="number">1.82</span>)</span><br><span class="line">&gt; weights &lt;- <span class="built_in">c</span>(<span class="number">64</span>,<span class="number">77</span>,<span class="number">82</span>,<span class="number">62</span>,<span class="number">71</span>,<span class="number">72</span>,<span class="number">85</span>,<span class="number">68</span>,<span class="number">72</span>,<span class="number">75</span>,<span class="number">81</span>,<span class="number">88</span>,<span class="number">72</span>,</span><br><span class="line">+              <span class="number">71</span>,<span class="number">74</span>,<span class="number">69</span>,<span class="number">81</span>,<span class="number">67</span>,<span class="number">65</span>,<span class="number">73</span>)</span><br><span class="line">&gt; ages &lt;- <span class="built_in">c</span>(<span class="number">12</span>,<span class="number">34</span>,<span class="number">23</span>,<span class="number">53</span>,<span class="number">23</span>,<span class="number">12</span>,<span class="number">53</span>,<span class="number">38</span>,<span class="number">83</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">58</span>,<span class="number">38</span>,</span><br><span class="line">+           <span class="number">63</span>,<span class="number">72</span>,<span class="number">44</span>,<span class="number">33</span>,<span class="number">27</span>,<span class="number">32</span>,<span class="number">38</span>)</span><br></pre></td></tr></table></figure>
<p>For each one of these variables we can generate factors:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; fheights &lt;- cut(heights,<span class="built_in">c</span>(<span class="number">1.50</span>,<span class="number">1.60</span>,<span class="number">1.70</span>,<span class="number">1.80</span>,<span class="number">1.90</span>))        <span class="comment"># factor for &#x27;heights&#x27;</span></span><br><span class="line">&gt; fweights &lt;- cut(weights,<span class="built_in">c</span>(<span class="number">60</span>,<span class="number">70</span>,<span class="number">80</span>,<span class="number">90</span>))                     <span class="comment"># factor for &#x27;weights&#x27;</span></span><br><span class="line">&gt; fages    &lt;- cut(ages,seq(<span class="number">10</span>,<span class="number">90</span>,<span class="number">10</span>))                         <span class="comment"># factor for &#x27;ages&#x27;</span></span><br></pre></td></tr></table></figure>
<p>Table generation is now straightforward using these factors. We can, for instance, generate bi-dimensional tables:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; ta &lt;- table(fheights, fweights)                     <span class="comment"># table for &#x27;heights&#x27; vs. &#x27;weights&#x27;</span></span><br><span class="line">&gt; ta</span><br><span class="line">           fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">2</span>       <span class="number">3</span>       <span class="number">1</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">2</span>       <span class="number">4</span>       <span class="number">1</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>Marginal frequencies can also be included:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; addmargins(ta)</span><br><span class="line">           fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>] Sum</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">1</span>   <span class="number">3</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">2</span>       <span class="number">3</span>       <span class="number">1</span>   <span class="number">6</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">2</span>       <span class="number">4</span>       <span class="number">1</span>   <span class="number">7</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">2</span>   <span class="number">4</span></span><br><span class="line">  Sum             <span class="number">6</span>       <span class="number">9</span>       <span class="number">5</span>  <span class="number">20</span></span><br></pre></td></tr></table></figure>
<p>Or we can work with the relative frequencies;</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; tta &lt;- prop.table(ta)</span><br><span class="line">&gt; addmargins(tta)</span><br><span class="line">         fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]  Sum</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]    <span class="number">0.05</span>    <span class="number">0.05</span>    <span class="number">0.05</span> <span class="number">0.15</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]    <span class="number">0.10</span>    <span class="number">0.15</span>    <span class="number">0.05</span> <span class="number">0.30</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]    <span class="number">0.10</span>    <span class="number">0.20</span>    <span class="number">0.05</span> <span class="number">0.35</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]    <span class="number">0.05</span>    <span class="number">0.05</span>    <span class="number">0.10</span> <span class="number">0.20</span></span><br><span class="line">  Sum          <span class="number">0.30</span>    <span class="number">0.45</span>    <span class="number">0.25</span> <span class="number">1.00</span></span><br></pre></td></tr></table></figure>
<p>We can also generate tridimensional tables. Following the previous example, we can examine the same bi-dimensional table for each age interval:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&gt; table(fheights, fweights, fages)</span><br><span class="line">, , fages = (<span class="number">10</span>,<span class="number">20</span>]                                   <span class="comment"># first age interval</span></span><br><span class="line"></span><br><span class="line">         fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line"></span><br><span class="line">, , fages = (<span class="number">20</span>,<span class="number">30</span>]                                   <span class="comment"># second age interval</span></span><br><span class="line"></span><br><span class="line">         fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">1</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">0</span>       <span class="number">1</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">1</span>       <span class="number">1</span>       <span class="number">1</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line"></span><br><span class="line">........</span><br><span class="line"></span><br><span class="line">, , fages = (<span class="number">70</span>,<span class="number">80</span>]                                   <span class="comment"># next-to-the-last age interval</span></span><br><span class="line"></span><br><span class="line">         fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">0</span>       <span class="number">1</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line"></span><br><span class="line">, , fages = (<span class="number">80</span>,<span class="number">90</span>]                                   <span class="comment"># last age interval</span></span><br><span class="line"></span><br><span class="line">         fweights</span><br><span class="line">fheights    (<span class="number">60</span>,<span class="number">70</span>] (<span class="number">70</span>,<span class="number">80</span>] (<span class="number">80</span>,<span class="number">90</span>]</span><br><span class="line">  (<span class="number">1.5</span>,<span class="number">1.6</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.6</span>,<span class="number">1.7</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.7</span>,<span class="number">1.8</span>]       <span class="number">0</span>       <span class="number">1</span>       <span class="number">0</span></span><br><span class="line">  (<span class="number">1.8</span>,<span class="number">1.9</span>]       <span class="number">0</span>       <span class="number">0</span>       <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">sum</span>(table(fheights, fweights, fages))               <span class="comment"># check total number of entries</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">20</span></span><br></pre></td></tr></table></figure>
<h4 id="matrices-and-tables"><a class="markdownIt-Anchor" href="#matrices-and-tables">#</a> Matrices and Tables</h4>
<p>We can easily generate 2D tables from matrices:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; mtab &lt;- matrix(<span class="built_in">c</span>(<span class="number">30</span>,<span class="number">12</span>,<span class="number">47</span>,<span class="number">58</span>,<span class="number">25</span>,<span class="number">32</span>), ncol=<span class="number">2</span>, byrow=<span class="literal">TRUE</span>)    <span class="comment"># create a matrix filled by rows</span></span><br><span class="line">&gt; colnames(mtab) &lt;- <span class="built_in">c</span>(<span class="string">&quot;ellipticals&quot;</span>,<span class="string">&quot;spirals&quot;</span>)                <span class="comment"># set matrix column names</span></span><br><span class="line">&gt; rownames(mtab) &lt;- <span class="built_in">c</span>(<span class="string">&quot;sample1&quot;</span>,<span class="string">&quot;sample2&quot;</span>,<span class="string">&quot;new sample&quot;</span>)       <span class="comment"># set matrix row names</span></span><br><span class="line">&gt; mtab</span><br><span class="line">           ellipticals spirals</span><br><span class="line">sample1             <span class="number">30</span>      <span class="number">12</span></span><br><span class="line">sample2             <span class="number">47</span>      <span class="number">58</span></span><br><span class="line">new sample          <span class="number">25</span>      <span class="number">32</span></span><br></pre></td></tr></table></figure>
<p>However,  <code>mtab</code>  is not a true R table. To transform it into a true table we can use:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; rtab &lt;- as.table(mtab)</span><br><span class="line"></span><br><span class="line">&gt; mode(mtab);mode(rtab)                               <span class="comment"># indistinguishable in &#x27;mode&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;numeric&quot;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;numeric&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; typeof(mtab);typeof(rtab)                           <span class="comment"># indistinguishable in &#x27;typeof&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;double&quot;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;double&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">class</span>(mtab);<span class="built_in">class</span>(rtab)                             <span class="comment"># but different in &#x27;class&#x27; !</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;matrix&quot;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;table&quot;</span></span><br></pre></td></tr></table></figure>
<p>In addition to the functions to calculate <em>marginal distributions</em> ( <code>margin.table</code> ), <em>frequencies</em> ( <code>prop.table</code> ), etc., the command  <code>summary</code>  returns the x^2</p>
<p>test for the independence of the factors:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(rtab)</span><br><span class="line">Number of cases <span class="keyword">in</span> table: <span class="number">204</span></span><br><span class="line">Number of factors: <span class="number">2</span></span><br><span class="line">Test <span class="keyword">for</span> independence of <span class="built_in">all</span> factors:</span><br><span class="line">        Chisq = <span class="number">9.726</span>, df = <span class="number">2</span>, p-value = <span class="number">0.007726</span></span><br></pre></td></tr></table></figure>
<p>The same command returns a different result when it is applied to a matrix type object:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; summary(mtab)</span><br><span class="line">        V1             V2</span><br><span class="line">  Min.   :<span class="number">25.0</span>   Min.   :<span class="number">12</span></span><br><span class="line">  <span class="number">1</span>st Qu.:<span class="number">27.5</span>   <span class="number">1</span>st Qu.:<span class="number">22</span></span><br><span class="line">  Median :<span class="number">30.0</span>   Median :<span class="number">32</span></span><br><span class="line">  Mean   :<span class="number">34.0</span>   Mean   :<span class="number">34</span></span><br><span class="line">  <span class="number">3</span>rd Qu.:<span class="number">38.5</span>   <span class="number">3</span>rd Qu.:<span class="number">45</span></span><br><span class="line">  Max.   :<span class="number">47.0</span>   Max.   :<span class="number">58</span></span><br></pre></td></tr></table></figure>
<h3 id="functions"><a class="markdownIt-Anchor" href="#functions">#</a> <strong>Functions</strong></h3>
<p>These are objects that can be created by the user and then re-used to make specific operations.</p>
<p>For example, we can define a <strong>function</strong> to calculate the standard deviation:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; stddev &lt;- <span class="keyword">function</span>(x) &#123;                     <span class="comment"># user-defined function &#x27;stddev&#x27;</span></span><br><span class="line">+   res = <span class="built_in">sqrt</span>(<span class="built_in">sum</span>((x-mean(x))^<span class="number">2</span>) / (<span class="built_in">length</span>(x)-<span class="number">1</span>))</span><br><span class="line">+   <span class="built_in">return</span>(res)</span><br><span class="line">+ &#125;</span><br></pre></td></tr></table></figure>
<p>Functions can be defined inside other functions (nested) and can also be passed as arguments to other functions. The value returned by a function is the result of the last expression evaluated in the body of the function or the value grabbed by the  <code>return</code>  command.</p>
<p>R functions arguments can have <em>default values</em> or can be <em>missing</em>. Arguments can be matched by name or position:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; mynumbers &lt;- <span class="built_in">c</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">&gt; stddev(mynumbers)                           <span class="comment"># equivalent calls to &#x27;stddev&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span></span><br><span class="line">&gt; stddev(x = mynumbers)</span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span></span><br><span class="line"></span><br><span class="line">&gt; sd(x=mynumbers)                             <span class="comment"># R function using &#x27;missing argument&#x27; with</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span>                                  <span class="comment">#       default value (FALSE)</span></span><br><span class="line">&gt; sd(x=mynumbers, na.rm=<span class="literal">TRUE</span>)                 <span class="comment"># Specify all arguments by name</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span></span><br><span class="line">&gt; sd(mynumbers, na.rm=<span class="literal">TRUE</span>)                   <span class="comment"># Mixing positional and by name matching</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span></span><br><span class="line">&gt; sd(na.rm=<span class="literal">TRUE</span>, x=mynumbers)                 <span class="comment"># legal but not recommended (keep order)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1.581139</span></span><br></pre></td></tr></table></figure>
<h4 id="looping-functions"><a class="markdownIt-Anchor" href="#looping-functions">#</a> Looping Functions</h4>
<p>There are special R functions that can be used to repeat instructions in the command line and facilitate the programming process:</p>
<blockquote>
<ul>
<li><strong>lapply</strong>: evaluate a function for each element of a list</li>
<li><strong>sapply</strong>: evaluate a function for each element of a list <em>simplifying</em> the result</li>
<li><strong>apply</strong>: Apply a function over the margins of an array (usually to apply a function to the rows/columns in a matrix)</li>
<li><strong>tapply</strong>: Apply a function over subsets of a vector (for example defined with a factor)</li>
<li><strong>mapply</strong>: Multivariate version of lapply</li>
</ul>
</blockquote>
<p>Let’s see how to apply these functions to the previous example with the galaxy colours:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; bv.vec &lt;- <span class="built_in">c</span>(<span class="number">0.92</span>,<span class="number">0.97</span>,<span class="number">0.87</span>, <span class="number">0.91</span>,<span class="number">0.92</span>,<span class="number">1.04</span>,<span class="number">0.91</span>,<span class="number">0.94</span>,<span class="number">0.96</span>,</span><br><span class="line">+             <span class="number">0.90</span>,<span class="number">0.96</span>,<span class="number">0.86</span>,<span class="number">0.85</span>)                            <span class="comment"># (B-V) colours from 13 galaxies</span></span><br><span class="line">&gt; morfo &lt;- <span class="built_in">c</span>(<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;E&quot;</span>,  <span class="string">&quot;E&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;S0&quot;</span>,<span class="string">&quot;E&quot;</span>,    <span class="comment"># ordered morph. information</span></span><br><span class="line">+            <span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;Sab&quot;</span>,<span class="string">&quot;S0&quot;</span>)                            <span class="comment">#    for the galaxies</span></span><br></pre></td></tr></table></figure>
<p><strong>lapply</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; bv.list &lt;- <span class="built_in">list</span>(colsSab=<span class="built_in">c</span>(<span class="number">0.92</span>,<span class="number">0.87</span>,<span class="number">0.90</span>,<span class="number">0.86</span>),</span><br><span class="line">+                 colsE=<span class="built_in">c</span>(<span class="number">0.97</span>,<span class="number">0.92</span>,<span class="number">1.04</span>,<span class="number">0.96</span>,<span class="number">0.96</span>),</span><br><span class="line">+                 colsSO=<span class="built_in">c</span>(<span class="number">0.91</span>,<span class="number">0.91</span>,<span class="number">0.94</span>,<span class="number">0.85</span>))</span><br><span class="line"></span><br><span class="line">&gt; lapply(bv.list, mean)                       <span class="comment"># calculate mean for each galaxy type</span></span><br><span class="line">$colsSab                                      <span class="comment">#    (returns a list)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.8875</span></span><br><span class="line"></span><br><span class="line">$colsE</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.97</span></span><br><span class="line"></span><br><span class="line">$colsSO</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.9025</span></span><br></pre></td></tr></table></figure>
<p><strong>sapply</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; sapply(bv.list, mean)                       <span class="comment"># simplified version of &#x27;lapply&#x27;</span></span><br><span class="line">colsSab   colsE  colsSO                       <span class="comment">#    (returns a vector)</span></span><br><span class="line">0.8875  <span class="number">0.9700</span>  <span class="number">0.9025</span></span><br></pre></td></tr></table></figure>
<p><strong>tapply</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; fmorfo &lt;- factor(morfo)                     <span class="comment"># create factor</span></span><br><span class="line">&gt; tapply(bv,fmorfo,mean)                      <span class="comment"># apply mean function to the galaxy colours</span></span><br><span class="line">     E     S0    Sab                          <span class="comment">#    segregating by morphological type</span></span><br><span class="line">0.9700 <span class="number">0.9025</span> <span class="number">0.8875</span></span><br></pre></td></tr></table></figure>
<p><strong>apply</strong></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- matrix(<span class="number">1</span>:<span class="number">12</span>, nrow=<span class="number">3</span>, ncol=<span class="number">4</span>)           <span class="comment"># define a matrix with 3 rows and 4 columns</span></span><br><span class="line">&gt; a</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line"></span><br><span class="line">&gt; apply(a,<span class="number">1</span>,mean)                             <span class="comment"># calculate rows (&quot;1&quot;) mean == rowMeans</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">5.5</span> <span class="number">6.5</span> <span class="number">7.5</span></span><br><span class="line">&gt; rowMeans(a)</span><br><span class="line">[<span class="number">1</span>] <span class="number">5.5</span> <span class="number">6.5</span> <span class="number">7.5</span></span><br><span class="line"></span><br><span class="line">&gt; apply(a,<span class="number">1</span>,<span class="built_in">sum</span>)                              <span class="comment"># calculate rows (&quot;1&quot;) sum == rowSums</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">22</span> <span class="number">26</span> <span class="number">30</span></span><br><span class="line">&gt; rowSums(a)</span><br><span class="line">[<span class="number">1</span>] <span class="number">22</span> <span class="number">26</span> <span class="number">30</span></span><br><span class="line"></span><br><span class="line">&gt; apply(a,<span class="number">2</span>,mean)                             <span class="comment"># calculate columns (&quot;2&quot;) mean == colMeans</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">2</span>  <span class="number">5</span>  <span class="number">8</span> <span class="number">11</span></span><br><span class="line">&gt; apply(a,<span class="number">2</span>,<span class="built_in">sum</span>)                              <span class="comment"># calculate columns (&quot;2&quot;) sum == colSums</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">6</span> <span class="number">15</span> <span class="number">24</span> <span class="number">33</span></span><br></pre></td></tr></table></figure>
<h2 id="special-values"><a class="markdownIt-Anchor" href="#special-values">#</a> Special Values</h2>
<p>It is useful to define some values as _ Not Available_ (<em>NA</em>):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">c</span>(<span class="number">0</span>:<span class="number">2</span>, <span class="literal">NA</span>, <span class="literal">NA</span>, <span class="number">5</span>:<span class="number">7</span>)                    <span class="comment"># define vector with NA values</span></span><br><span class="line">&gt; a                                           <span class="comment"># show values in screen</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span></span><br></pre></td></tr></table></figure>
<p>We can carry out mathematical operations:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; a*a                                         <span class="comment"># calculate the square of &#x27;a&#x27;</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">0</span>  <span class="number">1</span>  <span class="number">4</span> <span class="literal">NA</span> <span class="literal">NA</span> <span class="number">25</span> <span class="number">36</span> <span class="number">49</span></span><br></pre></td></tr></table></figure>
<p>We can check whether there is any undefined value:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; unavail &lt;- <span class="built_in">is.na</span>(a)                         <span class="comment"># use of is.na() function</span></span><br><span class="line">&gt; unavail</span><br><span class="line">[<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>
<p>Sometimes calculations end up in values with no mathematical sense:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">log</span>(-<span class="number">1</span>)</span><br><span class="line">&gt; a</span><br><span class="line">[<span class="number">1</span>] <span class="literal">NaN</span>                                       <span class="comment"># Result is Not-a-Number (NaN)</span></span><br><span class="line">&gt; a &lt;- 1/<span class="number">0</span>; b &lt;- 0/<span class="number">0</span>; c &lt;- <span class="built_in">log</span>(<span class="number">0</span>); d &lt;- <span class="built_in">c</span>(a,b,<span class="built_in">c</span>)</span><br><span class="line">&gt; d</span><br><span class="line">[<span class="number">1</span>]  <span class="literal">Inf</span>  <span class="literal">NaN</span> -<span class="literal">Inf</span>                            <span class="comment"># Infinities and Not-a-Number</span></span><br><span class="line">&gt; <span class="number">1</span>/<span class="literal">Inf</span>                                       <span class="comment"># Possible to operate with Infinite</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0</span>                                         <span class="comment">#   (if it makes sense!)</span></span><br></pre></td></tr></table></figure>
<p>To check whether we have <em>Infinite</em> values or <em>Not-a-Number</em> values:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">is.infinite</span>(d)                              <span class="comment"># is there any Infinite value?</span></span><br><span class="line">[<span class="number">1</span>]  <span class="literal">TRUE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></span><br><span class="line">&gt; <span class="built_in">is.nan</span>(d)                                   <span class="comment"># is there any Not-a-Number value?</span></span><br><span class="line">[<span class="number">1</span>] <span class="literal">FALSE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span></span><br></pre></td></tr></table></figure>
<p>Main R functions ( <code>mean</code> ,  <code>var</code> ,  <code>sum</code> ,  <code>min</code> ,  <code>max</code> ,…) accept an argument called  <code>na.rm</code>  that can be set as  <code>TRUE</code>  or  <code>FALSE</code>  to remove (or not) the unavailable data.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">c</span>(<span class="number">0</span>:<span class="number">2</span>, <span class="literal">NA</span>, <span class="literal">NA</span>, <span class="number">5</span>:<span class="number">7</span>)                    <span class="comment"># define vector &#x27;a&#x27; with Not-Available data</span></span><br><span class="line">&gt; a</span><br><span class="line">[<span class="number">1</span>]  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span> <span class="literal">NA</span> <span class="literal">NA</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span></span><br><span class="line">&gt; mean(a)                                     <span class="comment"># since there are Not-Available data</span></span><br><span class="line">[<span class="number">1</span>] <span class="literal">NA</span></span><br><span class="line"></span><br><span class="line">&gt; mean(a, na.rm=<span class="literal">TRUE</span>)                         <span class="comment"># calculate mean, ignoring Not-Available values</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">3.5</span></span><br></pre></td></tr></table></figure>
<h2 id="subsetting"><a class="markdownIt-Anchor" href="#subsetting">#</a> Subsetting</h2>
<p>Several R operators can be used to extract subsets (slices) from R objects:</p>
<ul>
<li><strong>[</strong> can be used to extract <strong>one or more elements</strong> of an R object. It always returns an object of the same class</li>
<li><strong>[[</strong> can be used to extract a <strong>single</strong> element from a data frame or a list. The class of the extracted element can be different from the original object.</li>
<li><strong>$</strong> can be used to extract <strong>named</strong> elements from a data frame or a list.</li>
</ul>
<p>For <em>Numeric Vectors</em>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- 1:<span class="number">15</span>                           <span class="comment"># generate a sequence</span></span><br><span class="line">&gt; a &lt;- a*a                            <span class="comment"># calculate the square of &#x27;a&#x27;</span></span><br><span class="line">&gt; a                                   <span class="comment"># show in screen</span></span><br><span class="line">[<span class="number">1</span>]   <span class="number">1</span>   <span class="number">4</span>   <span class="number">9</span>  <span class="number">16</span>  <span class="number">25</span>  <span class="number">36</span>  <span class="number">49</span>  <span class="number">64</span>  <span class="number">81</span> <span class="number">100</span> <span class="number">121</span> <span class="number">144</span> <span class="number">169</span> <span class="number">196</span> <span class="number">225</span></span><br><span class="line">&gt; a[<span class="number">3</span>]                                <span class="comment"># access to the third value in the vector</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">9</span>                                 <span class="comment">#  (numeric index)</span></span><br><span class="line">&gt; a[<span class="number">3</span>:<span class="number">5</span>]                              <span class="comment"># access to a continuum slice of values</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">9</span> <span class="number">16</span> <span class="number">25</span>                          <span class="comment">#  (numeric index)</span></span><br><span class="line">&gt; a[<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">3</span>,<span class="number">10</span>)]                        <span class="comment"># access to a given sequence of values</span></span><br><span class="line">[<span class="number">1</span>]   <span class="number">1</span>   <span class="number">9</span> <span class="number">100</span>                       <span class="comment">#  (numeric index)</span></span><br><span class="line">&gt; a[-<span class="number">1</span>]                               <span class="comment"># negative index remove values from vector</span></span><br><span class="line">[<span class="number">1</span>]   <span class="number">4</span>   <span class="number">9</span>  <span class="number">16</span>  <span class="number">25</span>  <span class="number">36</span>  <span class="number">49</span>  <span class="number">64</span>  <span class="number">81</span> <span class="number">100</span> <span class="number">121</span> <span class="number">144</span> <span class="number">169</span> <span class="number">196</span> <span class="number">225</span></span><br><span class="line">&gt; a[<span class="built_in">c</span>(-<span class="number">1</span>,-<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">7</span>)]                   <span class="comment"># remove several values (it is not possible</span></span><br><span class="line">[<span class="number">1</span>]   <span class="number">4</span>  <span class="number">16</span>  <span class="number">36</span>  <span class="number">64</span>  <span class="number">81</span> <span class="number">100</span> <span class="number">121</span> <span class="number">144</span> <span class="number">169</span> <span class="number">196</span> <span class="number">225</span>   to mix positive and negative indices!)</span><br><span class="line">&gt; a[a&gt;<span class="number">100</span>]                            <span class="comment"># access to a sequence based on a condition</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">121</span> <span class="number">144</span> <span class="number">169</span> <span class="number">196</span> <span class="number">225</span>               <span class="comment">#  (logical index)</span></span><br></pre></td></tr></table></figure>
<p>For <em>Character Vectors</em>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> &gt; a &lt;- <span class="built_in">c</span>(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;B&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;C&quot;</span>, <span class="string">&quot;D&quot;</span>, <span class="string">&quot;E&quot;</span>)</span><br><span class="line"> &gt; a[<span class="number">1</span>]                                <span class="comment"># first element of &quot;a&quot; (also a character vector)</span></span><br><span class="line"> [<span class="number">1</span>] <span class="string">&quot;A&quot;</span>                               <span class="comment">#  (numeric index)</span></span><br><span class="line"> &gt; a[<span class="number">1</span>:<span class="number">4</span>]                              <span class="comment"># sequence of the first 4 elements</span></span><br><span class="line"> [<span class="number">1</span>] <span class="string">&quot;A&quot;</span> <span class="string">&quot;B&quot;</span> <span class="string">&quot;C&quot;</span> <span class="string">&quot;C&quot;</span></span><br><span class="line"> &gt; a[a&gt;<span class="string">&quot;C&quot;</span>]                            <span class="comment"># select elements &quot;greater&quot; than letter &quot;C&quot;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;D&quot;</span> <span class="string">&quot;E&quot;</span>                            <span class="comment">#  (logical index)</span></span><br><span class="line"> &gt; gtC &lt;- a &gt; <span class="string">&quot;C&quot;</span>                      <span class="comment"># the same but using an intermediate logical vector</span></span><br><span class="line"> &gt; gtC</span><br><span class="line"> [<span class="number">1</span>] <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span>  <span class="literal">TRUE</span></span><br><span class="line"> &gt; a[gtC]</span><br><span class="line"> [<span class="number">1</span>] <span class="string">&quot;D&quot;</span> <span class="string">&quot;E&quot;</span></span><br></pre></td></tr></table></figure>
<p>For <em>Matrices</em>, elements are accessed through two integer indices:</p>
<p>Note</p>
<p>The agreement to establish the indices order  <code>a[i,j]</code>  is the same than the one used in Math for the matrix coefficients a ij</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- matrix(<span class="number">1</span>:<span class="number">12</span>, nrow=<span class="number">3</span>, ncol=<span class="number">4</span>)   <span class="comment"># define a matrix with 3 rows and 4 columns</span></span><br><span class="line">&gt; a</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; a[<span class="number">2</span>,<span class="number">3</span>]                              <span class="comment"># return the value in the 2nd row and 3th column</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">8</span></span><br><span class="line">&gt; a[[<span class="number">2</span>,<span class="number">3</span>]]                            <span class="comment"># return the value in the 2nd row and 3th column</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">8</span></span><br><span class="line">&gt; a[<span class="number">2</span>,]                               <span class="comment"># return the values for the second row</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">2</span>  <span class="number">5</span>  <span class="number">8</span> <span class="number">11</span></span><br><span class="line">&gt; a[,<span class="number">3</span>]                               <span class="comment"># return the values for the third column</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
<p>Note</p>
<p>By default, subsetting a single element or a single row or a single column returns a vector, not a matrix (this can be changed using  <code>drop=FALSE</code> )</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; a[<span class="number">2</span>,<span class="number">3</span>, drop=<span class="literal">FALSE</span>]                  <span class="comment"># so as not to &#x27;drop&#x27; the dimension</span></span><br><span class="line">      [,<span class="number">1</span>]                            <span class="comment">#     (returns a 1x1 matrix)</span></span><br><span class="line">[<span class="number">1</span>,]    <span class="number">8</span></span><br><span class="line">&gt; a[<span class="number">2</span>, , drop=<span class="literal">FALSE</span>]                  <span class="comment"># return a 1x4 matrix</span></span><br><span class="line">      [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></span><br></pre></td></tr></table></figure>
<p>The access to the matrix elements can be done with the indices stored in other auxiliary matrices:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; ind &lt;- matrix(<span class="built_in">c</span>(<span class="number">1</span>:<span class="number">3</span>,<span class="number">3</span>:<span class="number">1</span>), nrow=<span class="number">3</span>, ncol=<span class="number">2</span>)   <span class="comment"># auxiliary matrix for the indices i,j</span></span><br><span class="line">&gt; ind</span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">3</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">2</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">3</span>    <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt; a[ind] &lt;- <span class="number">0</span>                         <span class="comment"># set to 0 the matrix values in the indices</span></span><br><span class="line">&gt; a                                   <span class="comment">#  specified in &#x27;ind&#x27; (1,3), (2,2), (3,1)</span></span><br><span class="line">     [,<span class="number">1</span>] [,<span class="number">2</span>] [,<span class="number">3</span>] [,<span class="number">4</span>]</span><br><span class="line">[<span class="number">1</span>,]    <span class="number">1</span>    <span class="number">4</span>    <span class="number">0</span>   <span class="number">10</span></span><br><span class="line">[<span class="number">2</span>,]    <span class="number">2</span>    <span class="number">0</span>    <span class="number">8</span>   <span class="number">11</span></span><br><span class="line">[<span class="number">3</span>,]    <span class="number">0</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>For <em>lists</em>:</p>
<p>The list components can be accessed using the three operators mentioned above (<em>[</em>, <em>[[</em> and <em>$</em>):</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line"></span><br><span class="line">&gt; gal[<span class="number">3</span>]                              <span class="comment"># access to the third element of the list</span></span><br><span class="line">$colours                              <span class="comment">#  (get back a list with one element called &#x27;colours&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span>                         <span class="comment">#   with the sequence &#x27;0.53,0.96&#x27;)</span></span><br><span class="line">&gt; gal[<span class="string">&quot;colours&quot;</span>]                      <span class="comment"># single bracket + name (same as above)</span></span><br><span class="line">$colours</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span></span><br><span class="line"></span><br><span class="line">&gt; gal[[<span class="number">3</span>]]                            <span class="comment"># access to the third element of the list</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span>                         <span class="comment">#  (get back just the sequence)</span></span><br><span class="line">&gt; gal[[<span class="string">&quot;colours&quot;</span>]]                    <span class="comment"># double bracket + name (same as above)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; gal$colours                         <span class="comment"># element associated with the name &#x27;colours&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span>                         <span class="comment">#  (same as double bracket)</span></span><br><span class="line">&gt; gal$colours[<span class="number">1</span>]                      <span class="comment"># first element of the sequence in the third element</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span></span><br><span class="line">&gt; gal$colours[<span class="number">2</span>]                      <span class="comment"># second element of the sequence in the third element</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.96</span></span><br></pre></td></tr></table></figure>
<p>To extract <strong>multiple elements</strong> of a list, single bracket is mandatory:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line"></span><br><span class="line">&gt; gal[<span class="built_in">c</span>(<span class="number">1</span>,<span class="number">2</span>)]                         <span class="comment"># return a list with the elements &#x27;name&#x27; and &#x27;morf&#x27;</span></span><br><span class="line">$name</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;NGC3379&quot;</span></span><br><span class="line"></span><br><span class="line">$morf</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br></pre></td></tr></table></figure>
<p>For <strong>computed</strong> indices the <em>[[</em> and <em>[</em> operators can be used. The <em>$</em> operator can only be used with <em>literal</em> names:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line"></span><br><span class="line">&gt; info &lt;- <span class="string">&quot;morf&quot;</span>                      <span class="comment"># variable containing the name of one of the list elements</span></span><br><span class="line"></span><br><span class="line">&gt; gal[[<span class="string">&quot;morf&quot;</span>]</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line">&gt; gal[[info]]                         <span class="comment"># computed index for &#x27;morf&#x27; with double bracket</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; gal[<span class="string">&quot;morf&quot;</span>]</span><br><span class="line">$morf</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line">&gt; gal[info]                           <span class="comment"># computed index for &#x27;morf&#x27; with single bracket</span></span><br><span class="line">$morf</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; gal$morf</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;E&quot;</span></span><br><span class="line">&gt; gal$info                            <span class="comment"># element &#x27;info&#x27; unknown</span></span><br><span class="line"><span class="literal">NULL</span></span><br></pre></td></tr></table></figure>
<p>To <strong>recursively</strong> extract an element:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line"></span><br><span class="line">&gt; gal[[<span class="built_in">c</span>(<span class="number">3</span>,<span class="number">1</span>)]]                       <span class="comment"># extract the 1st element of the 3rd element (&#x27;0.53&#x27;)</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span></span><br><span class="line">&gt; gal[[<span class="number">3</span>]][[<span class="number">1</span>]]                       <span class="comment"># equivalent double subsetting</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span></span><br><span class="line"></span><br><span class="line">&gt; gal[<span class="built_in">c</span>(<span class="number">3</span>,<span class="number">1</span>)]                         <span class="comment"># not recursive!</span></span><br><span class="line">$colours</span><br><span class="line">[<span class="number">1</span>] <span class="number">0.53</span> <span class="number">0.96</span></span><br><span class="line"></span><br><span class="line">$name</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;NGC3379&quot;</span></span><br></pre></td></tr></table></figure>
<p>Elements can be extracted using <strong>partial matching</strong> with the <em>[[</em> and <em>$</em> operators:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; gal &lt;- <span class="built_in">list</span>(name=<span class="string">&quot;NGC3379&quot;</span>, morf=<span class="string">&quot;E&quot;</span>, colours=<span class="built_in">c</span>(<span class="number">0.53</span>,<span class="number">0.96</span>))</span><br><span class="line"></span><br><span class="line">&gt; gal$na                            <span class="comment"># get element by partial matching the name</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;NGC3379&quot;</span></span><br><span class="line">&gt; gal[[<span class="string">&quot;na&quot;</span>]]                       <span class="comment"># expect exact element name</span></span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">&gt; gal[[<span class="string">&quot;na&quot;</span>, exact=<span class="literal">FALSE</span>]]          <span class="comment"># partial matching as with &#x27;$&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;NGC3379&quot;</span></span><br></pre></td></tr></table></figure>
<p>For <em>Data Frames (Tables)</em>, the operators used for slicing are the same than those used for <em>lists</em>:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&gt; airquality                                  <span class="comment"># data frame in R library</span></span><br><span class="line">&gt; airquality[<span class="number">1</span>:<span class="number">7</span>, ]                           <span class="comment"># display first 7 rows of data frame</span></span><br><span class="line">  Ozone Solar.R Wind Temp Month Day           <span class="comment"># there are missing values in rows 5 and 6</span></span><br><span class="line">1    <span class="number">41</span>     <span class="number">190</span>  <span class="number">7.4</span>   <span class="number">67</span>     <span class="number">5</span>   <span class="number">1</span></span><br><span class="line">2    <span class="number">36</span>     <span class="number">118</span>  <span class="number">8.0</span>   <span class="number">72</span>     <span class="number">5</span>   <span class="number">2</span></span><br><span class="line">3    <span class="number">12</span>     <span class="number">149</span> <span class="number">12.6</span>   <span class="number">74</span>     <span class="number">5</span>   <span class="number">3</span></span><br><span class="line">4    <span class="number">18</span>     <span class="number">313</span> <span class="number">11.5</span>   <span class="number">62</span>     <span class="number">5</span>   <span class="number">4</span></span><br><span class="line">5    <span class="literal">NA</span>      <span class="literal">NA</span> <span class="number">14.3</span>   <span class="number">56</span>     <span class="number">5</span>   <span class="number">5</span></span><br><span class="line">6    <span class="number">28</span>      <span class="literal">NA</span> <span class="number">14.9</span>   <span class="number">66</span>     <span class="number">5</span>   <span class="number">6</span></span><br><span class="line">7    <span class="number">23</span>     <span class="number">299</span>  <span class="number">8.6</span>   <span class="number">65</span>     <span class="number">5</span>   <span class="number">7</span></span><br><span class="line">&gt; <span class="built_in">class</span>(airquality[<span class="number">1</span>:<span class="number">7</span>, ])</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;data.frame&quot;</span></span><br><span class="line"></span><br><span class="line">&gt; airquality[<span class="number">1</span>,<span class="number">1</span>]                             <span class="comment"># get element in row=1, col=1</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">41</span></span><br><span class="line">&gt; airquality[[<span class="number">1</span>,<span class="number">1</span>]]                           <span class="comment"># get element in row=1, col=1</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">41</span></span><br><span class="line"></span><br><span class="line">&gt; airquality[<span class="number">1</span>,]                              <span class="comment"># get row=1 (all columns)</span></span><br><span class="line">  Ozone Solar.R Wind Temp Month Day</span><br><span class="line">1    <span class="number">41</span>     <span class="number">190</span>  <span class="number">7.4</span>   <span class="number">67</span>     <span class="number">5</span>   <span class="number">1</span></span><br><span class="line">&gt; <span class="built_in">class</span>(airquality[<span class="number">1</span>,])</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;data.frame&quot;</span></span><br><span class="line">&gt; <span class="built_in">as.numeric</span>(airquality[<span class="number">1</span>,])                  <span class="comment"># get row=1 into a numeric vector</span></span><br><span class="line">[<span class="number">1</span>]  <span class="number">41.0</span> <span class="number">190.0</span>   <span class="number">7.4</span>  <span class="number">67.0</span>   <span class="number">5.0</span>   <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; airquality$Ozone                            <span class="comment"># get &quot;Ozone&quot; column into a vector</span></span><br><span class="line">  [<span class="number">1</span>]  <span class="number">41</span>  <span class="number">36</span>  <span class="number">12</span>  <span class="number">18</span>  <span class="literal">NA</span>  <span class="number">28</span>  <span class="number">23</span>  <span class="number">19</span>   <span class="number">8</span>  <span class="literal">NA</span>   <span class="number">7</span>  <span class="number">16</span>  <span class="number">11</span>  <span class="number">14</span>  <span class="number">18</span>  <span class="number">14</span>  <span class="number">34</span>   <span class="number">6</span></span><br><span class="line"> [<span class="number">19</span>]  <span class="number">30</span>  <span class="number">11</span>   <span class="number">1</span>  <span class="number">11</span>   <span class="number">4</span>  <span class="number">32</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="number">23</span>  <span class="number">45</span> <span class="number">115</span>  <span class="number">37</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span></span><br><span class="line"> [<span class="number">37</span>]  <span class="literal">NA</span>  <span class="number">29</span>  <span class="literal">NA</span>  <span class="number">71</span>  <span class="number">39</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="number">23</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="number">21</span>  <span class="number">37</span>  <span class="number">20</span>  <span class="number">12</span>  <span class="number">13</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span></span><br><span class="line"> [<span class="number">55</span>]  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="literal">NA</span> <span class="number">135</span>  <span class="number">49</span>  <span class="number">32</span>  <span class="literal">NA</span>  <span class="number">64</span>  <span class="number">40</span>  <span class="number">77</span>  <span class="number">97</span>  <span class="number">97</span>  <span class="number">85</span>  <span class="literal">NA</span></span><br><span class="line"> [<span class="number">73</span>]  <span class="number">10</span>  <span class="number">27</span>  <span class="literal">NA</span>   <span class="number">7</span>  <span class="number">48</span>  <span class="number">35</span>  <span class="number">61</span>  <span class="number">79</span>  <span class="number">63</span>  <span class="number">16</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="number">80</span> <span class="number">108</span>  <span class="number">20</span>  <span class="number">52</span>  <span class="number">82</span>  <span class="number">50</span></span><br><span class="line"> [<span class="number">91</span>]  <span class="number">64</span>  <span class="number">59</span>  <span class="number">39</span>   <span class="number">9</span>  <span class="number">16</span>  <span class="number">78</span>  <span class="number">35</span>  <span class="number">66</span> <span class="number">122</span>  <span class="number">89</span> <span class="number">110</span>  <span class="literal">NA</span>  <span class="literal">NA</span>  <span class="number">44</span>  <span class="number">28</span>  <span class="number">65</span>  <span class="literal">NA</span>  <span class="number">22</span></span><br><span class="line">[<span class="number">109</span>]  <span class="number">59</span>  <span class="number">23</span>  <span class="number">31</span>  <span class="number">44</span>  <span class="number">21</span>   <span class="number">9</span>  <span class="literal">NA</span>  <span class="number">45</span> <span class="number">168</span>  <span class="number">73</span>  <span class="literal">NA</span>  <span class="number">76</span> <span class="number">118</span>  <span class="number">84</span>  <span class="number">85</span>  <span class="number">96</span>  <span class="number">78</span>  <span class="number">73</span></span><br><span class="line">[<span class="number">127</span>]  <span class="number">91</span>  <span class="number">47</span>  <span class="number">32</span>  <span class="number">20</span>  <span class="number">23</span>  <span class="number">21</span>  <span class="number">24</span>  <span class="number">44</span>  <span class="number">21</span>  <span class="number">28</span>   <span class="number">9</span>  <span class="number">13</span>  <span class="number">46</span>  <span class="number">18</span>  <span class="number">13</span>  <span class="number">24</span>  <span class="number">16</span>  <span class="number">13</span></span><br><span class="line">[<span class="number">145</span>]  <span class="number">23</span>  <span class="number">36</span>   <span class="number">7</span>  <span class="number">14</span>  <span class="number">30</span>  <span class="literal">NA</span>  <span class="number">14</span>  <span class="number">18</span>  <span class="number">20</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="built_in">class</span>(airquality$Ozone)</span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;integer&quot;</span></span><br></pre></td></tr></table></figure>
<p>For <em>Character Strings</em> the access to their elements is done in a different way:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="string">&quot;This is an example of a text string&quot;</span>  <span class="comment"># define a character string</span></span><br><span class="line">&gt; substr(a,<span class="number">5</span>,<span class="number">10</span>)                              <span class="comment"># show a string subset</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot; is an&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="removing-na-values"><a class="markdownIt-Anchor" href="#removing-na-values">#</a> Removing NA values</h3>
<p>We can remove <em>Not Available</em> values in a simple way using subsetting:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">c</span>(<span class="number">0</span>:<span class="number">2</span>, <span class="literal">NA</span>, <span class="literal">NA</span>, <span class="number">5</span>:<span class="number">7</span>)                    <span class="comment"># define vector with NA values</span></span><br><span class="line"></span><br><span class="line">&gt; aa &lt;- a[!<span class="built_in">is.na</span>(a)]                          <span class="comment"># the condition uses the negation</span></span><br><span class="line">&gt; aa                                          <span class="comment">#    of is.na() function</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span>                               <span class="comment"># new vector with no NA values</span></span><br></pre></td></tr></table></figure>
<p>To take the subset of multiple vectors avoiding the missing values:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; a &lt;- <span class="built_in">c</span>( <span class="number">1</span>,  <span class="number">2</span>, <span class="number">3</span>, <span class="literal">NA</span>, <span class="number">5</span>, <span class="literal">NA</span>, <span class="number">7</span>)</span><br><span class="line">&gt; b &lt;- <span class="built_in">c</span>(<span class="string">&quot;A&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="literal">NA</span>,<span class="string">&quot;D&quot;</span>,<span class="literal">NA</span>,<span class="string">&quot;E&quot;</span>,<span class="string">&quot;F&quot;</span>)</span><br><span class="line">&gt; valsok &lt;- complete.cases(a,b)               <span class="comment"># return positions in which both vectors have</span></span><br><span class="line">&gt; valsok                                      <span class="comment">#    no-missing values</span></span><br><span class="line">[<span class="number">1</span>]  <span class="literal">TRUE</span>  <span class="literal">TRUE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span> <span class="literal">FALSE</span>  <span class="literal">TRUE</span></span><br><span class="line">&gt; a[valsok]                                   <span class="comment"># subsetting &#x27;a&#x27; gets good elements in &#x27;a&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="number">1</span> <span class="number">2</span> <span class="number">7</span></span><br><span class="line">&gt; b[valsok]                                   <span class="comment"># subsetting &#x27;b&#x27; gets good elements in &#x27;b&#x27;</span></span><br><span class="line">[<span class="number">1</span>] <span class="string">&quot;A&quot;</span> <span class="string">&quot;B&quot;</span> <span class="string">&quot;F&quot;</span></span><br></pre></td></tr></table></figure>
<p>We can also use the function  <code>complete.cases</code>  to remove missing values from data frames:</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; airquality                                  <span class="comment"># data frame in R library</span></span><br><span class="line">&gt; airquality[<span class="number">1</span>:<span class="number">7</span>, ]                           <span class="comment"># display first 7 rows of data frame</span></span><br><span class="line">  Ozone Solar.R Wind Temp Month Day           <span class="comment"># there are missing values in rows 5 and 6</span></span><br><span class="line">1    <span class="number">41</span>     <span class="number">190</span>  <span class="number">7.4</span>   <span class="number">67</span>     <span class="number">5</span>   <span class="number">1</span></span><br><span class="line">2    <span class="number">36</span>     <span class="number">118</span>  <span class="number">8.0</span>   <span class="number">72</span>     <span class="number">5</span>   <span class="number">2</span></span><br><span class="line">3    <span class="number">12</span>     <span class="number">149</span> <span class="number">12.6</span>   <span class="number">74</span>     <span class="number">5</span>   <span class="number">3</span></span><br><span class="line">4    <span class="number">18</span>     <span class="number">313</span> <span class="number">11.5</span>   <span class="number">62</span>     <span class="number">5</span>   <span class="number">4</span></span><br><span class="line">5    <span class="literal">NA</span>      <span class="literal">NA</span> <span class="number">14.3</span>   <span class="number">56</span>     <span class="number">5</span>   <span class="number">5</span></span><br><span class="line">6    <span class="number">28</span>      <span class="literal">NA</span> <span class="number">14.9</span>   <span class="number">66</span>     <span class="number">5</span>   <span class="number">6</span></span><br><span class="line">7    <span class="number">23</span>     <span class="number">299</span>  <span class="number">8.6</span>   <span class="number">65</span>     <span class="number">5</span>   <span class="number">7</span></span><br><span class="line"></span><br><span class="line">&gt; valsok &lt;- complete.cases(airquality)        <span class="comment"># rows in which all the values are ok</span></span><br><span class="line">&gt; airquality[valsok, ][<span class="number">1</span>:<span class="number">7</span>,]                  <span class="comment"># subset original dataframe and show first 7 rows</span></span><br><span class="line">  Ozone Solar.R Wind Temp Month Day</span><br><span class="line">1    <span class="number">41</span>     <span class="number">190</span>  <span class="number">7.4</span>   <span class="number">67</span>     <span class="number">5</span>   <span class="number">1</span></span><br><span class="line">2    <span class="number">36</span>     <span class="number">118</span>  <span class="number">8.0</span>   <span class="number">72</span>     <span class="number">5</span>   <span class="number">2</span></span><br><span class="line">3    <span class="number">12</span>     <span class="number">149</span> <span class="number">12.6</span>   <span class="number">74</span>     <span class="number">5</span>   <span class="number">3</span></span><br><span class="line">4    <span class="number">18</span>     <span class="number">313</span> <span class="number">11.5</span>   <span class="number">62</span>     <span class="number">5</span>   <span class="number">4</span></span><br><span class="line">7    <span class="number">23</span>     <span class="number">299</span>  <span class="number">8.6</span>   <span class="number">65</span>     <span class="number">5</span>   <span class="number">7</span></span><br><span class="line">8    <span class="number">19</span>      <span class="number">99</span> <span class="number">13.8</span>   <span class="number">59</span>     <span class="number">5</span>   <span class="number">8</span></span><br><span class="line">9     <span class="number">8</span>      <span class="number">19</span> <span class="number">20.1</span>   <span class="number">61</span>     <span class="number">5</span>   <span class="number">9</span></span><br></pre></td></tr></table></figure>

      <div class="tags">
          <a href="/tags/r/" rel="tag"><i class="ic i-tag"></i> r</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2021-10-18 13:27:19" itemprop="dateModified" datetime="2021-10-18T13:27:19+08:00">2021-10-18</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2021/05/08/r/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gicm07ih54j20zk0m84qp.jpg" title="R">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>R</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2021/05/12/r-subset/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeu1usa7j20zk0m8b29.jpg" title="Subset Data Frame Rows in R">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Subset Data Frame Rows in R</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#data-structure-types"><span class="toc-number">1.</span> <span class="toc-text"> Data structure types</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#vectors"><span class="toc-number">1.1.</span> <span class="toc-text"> Vectors</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#numeric-vectors"><span class="toc-number">1.1.1.</span> <span class="toc-text"> Numeric Vectors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logical-vectors"><span class="toc-number">1.1.2.</span> <span class="toc-text"> Logical Vectors</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#character-vectors"><span class="toc-number">1.1.3.</span> <span class="toc-text"> Character Vectors</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#matrices"><span class="toc-number">1.2.</span> <span class="toc-text"> Matrices</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arrays"><span class="toc-number">1.3.</span> <span class="toc-text"> Arrays</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#factors"><span class="toc-number">1.4.</span> <span class="toc-text"> Factors</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lists"><span class="toc-number">1.5.</span> <span class="toc-text"> Lists</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#data-frames-tables"><span class="toc-number">1.6.</span> <span class="toc-text"> Data Frames (Tables)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#factors-and-tables"><span class="toc-number">1.6.1.</span> <span class="toc-text"> Factors and Tables</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#matrices-and-tables"><span class="toc-number">1.6.2.</span> <span class="toc-text"> Matrices and Tables</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#functions"><span class="toc-number">1.7.</span> <span class="toc-text"> Functions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#looping-functions"><span class="toc-number">1.7.1.</span> <span class="toc-text"> Looping Functions</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#special-values"><span class="toc-number">2.</span> <span class="toc-text"> Special Values</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#subsetting"><span class="toc-number">3.</span> <span class="toc-text"> Subsetting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#removing-na-values"><span class="toc-number">3.1.</span> <span class="toc-text"> Removing NA values</span></a></li></ol></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">293</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">40</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item about" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2021/05/08/r/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2021/05/12/r-subset/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2022</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2021/05/11/r-datastructure/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
