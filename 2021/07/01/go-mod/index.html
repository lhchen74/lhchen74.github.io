



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="露の世" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="露の世" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="露の世" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CFira%20Code:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="go" />


<link rel="canonical" href="https://lhchen74.github.io/2021/07/01/go-mod/">



  <title>
Go Module |
D E W = 露の世</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Go Module
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-07-01 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">D E W</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicliierfjj20zk0m8npd.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipex2cdtbj20zk0m8x6p.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipeu7txpzj20zk0m81kx.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gipevo9j1jj20zk0m8e81.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1gicitht3xtj20zk0m8k5v.jpg"></li>
          <li class="item" data-background-image="https://tva1.sinaimg.cn/large/6833939bly1giclfdu6exj20zk0m87hw.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2021/07/01/go-mod/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="露の世">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载：<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmdvbGFuZy5vcmcvdXNpbmctZ28tbW9kdWxlcw==">Using Go Modules - The Go Blog</span></p>
</blockquote>
<p>Go 1.11 and 1.12 include preliminary <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2RvYy9nbzEuMTEjbW9kdWxlcw==">support for modules</span>, Go’s <span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmdvbGFuZy5vcmcvdmVyc2lvbmluZy1wcm9wb3NhbA==">new dependency management system</span> that makes dependency version information explicit and easier to manage. This blog post is an introduction to the basic operations needed to get started using modules.</p>
<p>A module is a collection of <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3JlZi9zcGVjI1BhY2thZ2Vz">Go packages</span> stored in a file tree with a  <code>go.mod</code>  file at its root. The  <code>go.mod</code>  file defines the module’s <em>module path</em>, which is also the import path used for the root directory, and its <em>dependency requirements</em>, which are the other modules needed for a successful build. Each dependency requirement is written as a module path and a specific <span class="exturl" data-url="aHR0cDovL3NlbXZlci5vcmcv">semantic version</span>.</p>
<p>As of Go 1.11, the go command enables the use of modules when the current directory or any parent directory has a  <code>go.mod</code> , provided the directory is <em>outside</em>  <code>$GOPATH/src</code> . (Inside  <code>$GOPATH/src</code> , for compatibility, the go command still runs in the old GOPATH mode, even if a  <code>go.mod</code>  is found. See the <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2NtZC9nby8jaGRyLVByZWxpbWluYXJ5X21vZHVsZV9zdXBwb3J0">go command documentation</span> for details.) Starting in Go 1.13, module mode will be the default for all development.</p>
<p>This post walks through a sequence of common operations that arise when developing Go code with modules:</p>
<ul>
<li>Creating a new module.</li>
<li>Adding a dependency.</li>
<li>Upgrading dependencies.</li>
<li>Adding a dependency on a new major version.</li>
<li>Upgrading a dependency to a new major version.</li>
<li>Removing unused dependencies.</li>
</ul>
<h2 id="creating-a-new-module"><a class="markdownIt-Anchor" href="#creating-a-new-module">#</a> Creating a new module</h2>
<p>Create a new, empty directory somewhere outside  <code>$GOPATH/src</code> ,  <code>cd</code>  into that directory, and then create a new source file,  <code>hello.go</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello, world.&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Let’s write a test, too, in  <code>hello_test.go</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;testing&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestHello</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    want := <span class="string">&quot;Hello, world.&quot;</span></span><br><span class="line">    <span class="keyword">if</span> got := Hello(); got != want &#123;</span><br><span class="line">        t.Errorf(<span class="string">&quot;Hello() = %q, want %q&quot;</span>, got, want)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>At this point, the directory contains a package, but not a module, because there is no  <code>go.mod</code>  file. If we were working in  <code>/home/gopher/hello</code>  and ran  <code>go test</code>  now, we’d see:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	_/home/gopher/hello	<span class="number">0.020</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>The last line summarizes the overall package test. Because we are working outside  <code>$GOPATH</code>  and also outside any module, the  <code>go</code>  command knows no import path for the current directory and makes up a fake one based on the directory name:  <code>_/home/gopher/hello</code> .</p>
<p>Let’s make the current directory the root of a module by using  <code>go mod init</code>  and then try  <code>go test</code>  again:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod init example.com/hello</span><br><span class="line"><span class="keyword">go</span>: creating <span class="built_in">new</span> <span class="keyword">go</span>.mod: module example.com/hello</span><br><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.020</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Congratulations! You’ve written and tested your first module.</p>
<p>The  <code>go mod init</code>  command wrote a  <code>go.mod</code>  file:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example.com/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.12</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>The  <code>go.mod</code>  file only appears in the root of the module. Packages in subdirectories have import paths consisting of the module path plus the path to the subdirectory. For example, if we created a subdirectory  <code>world</code> , we would not need to (nor want to) run  <code>go mod init</code>  there. The package would automatically be recognized as part of the  <code>example.com/hello</code>  module, with import path  <code>example.com/hello/world</code> .</p>
<h2 id="adding-a-dependency"><a class="markdownIt-Anchor" href="#adding-a-dependency">#</a> Adding a dependency</h2>
<p>Let’s update our  <code>hello.go</code>  to import  <code>rsc.io/quote</code>  and use it to implement  <code>Hello</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;rsc.io/quote&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quote.Hello()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Now let’s run the test again:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line"><span class="keyword">go</span>: finding rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line"><span class="keyword">go</span>: downloading rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line"><span class="keyword">go</span>: extracting rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line"><span class="keyword">go</span>: finding rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: finding golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c</span><br><span class="line"><span class="keyword">go</span>: downloading rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: extracting rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: downloading golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c</span><br><span class="line"><span class="keyword">go</span>: extracting golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.023</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>The  <code>go</code>  command resolves imports by using the specific dependency module versions listed in  <code>go.mod</code> . When it encounters an  <code>import</code>  of a package not provided by any module in  <code>go.mod</code> , the  <code>go</code>  command automatically looks up the module containing that package and adds it to  <code>go.mod</code> , using the latest version. (“Latest” is defined as the latest tagged stable (non-<span class="exturl" data-url="aHR0cHM6Ly9zZW12ZXIub3JnLyNzcGVjLWl0ZW0tOQ==">prerelease</span>) version, or else the latest tagged prerelease version, or else the latest untagged version.) In our example,  <code>go test</code>  resolved the new import  <code>rsc.io/quote</code>  to the module  <code>rsc.io/quote v1.5.2</code> . It also downloaded two dependencies used by  <code>rsc.io/quote</code> , namely  <code>rsc.io/sampler</code>  and  <code>golang.org/x/text</code> . Only direct dependencies are recorded in the  <code>go.mod</code>  file:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example.com/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.12</span></span><br><span class="line"></span><br><span class="line">require rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>A second  <code>go test</code>  command will not repeat this work, since the  <code>go.mod</code>  is now up-to-date and the downloaded modules are cached locally (in <code>$GOPATH/pkg/mod</code> ):</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.020</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Note that while the  <code>go</code>  command makes adding a new dependency quick and easy, it is not without cost. Your module now literally <em>depends</em> on the new dependency in critical areas such as correctness, security, and proper licensing, just to name a few. For more considerations, see Russ Cox’s blog post, “<span class="exturl" data-url="aHR0cHM6Ly9yZXNlYXJjaC5zd3RjaC5jb20vZGVwcw==">Our Software Dependency Problem</span>.”</p>
<p>As we saw above, adding one direct dependency often brings in other indirect dependencies too. The command  <code>go list -m all</code>  lists the current module and all its dependencies:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> list -m all</span><br><span class="line">example.com/hello</span><br><span class="line">golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c</span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>In the  <code>go list</code>  output, the current module, also known as the <em>main module</em>, is always the first line, followed by dependencies sorted by module path.</p>
<p>The  <code>golang.org/x/text</code>  version  <code>v0.0.0-20170915032832-14c0d48ead0c</code>  is an example of a <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2NtZC9nby8jaGRyLVBzZXVkb192ZXJzaW9ucw==">pseudo-version</span>, which is the  <code>go</code>  command’s version syntax for a specific untagged commit.</p>
<p>In addition to  <code>go.mod</code> , the  <code>go</code>  command maintains a file named  <code>go.sum</code>  containing the expected <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2NtZC9nby8jaGRyLU1vZHVsZV9kb3dubG9hZGluZ19hbmRfdmVyaWZpY2F0aW9u">cryptographic hashes</span> of the content of specific module versions:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat <span class="keyword">go</span>.sum</span><br><span class="line">golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c h1:qgOY6WgZO...</span><br><span class="line">golang.org/x/text v0<span class="number">.0</span><span class="number">.0</span><span class="number">-20170915032832</span><span class="number">-14</span>c0d48ead0c/<span class="keyword">go</span>.mod h1:Nq...</span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span> h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3...</span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span>/<span class="keyword">go</span>.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPX...</span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span> h1:<span class="number">7</span>uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/Q...</span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span>/<span class="keyword">go</span>.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9...</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>The  <code>go</code>  command uses the  <code>go.sum</code>  file to ensure that future downloads of these modules retrieve the same bits as the first download, to ensure the modules your project depends on do not change unexpectedly, whether for malicious, accidental, or other reasons. Both  <code>go.mod</code>  and  <code>go.sum</code>  should be checked into version control.</p>
<h2 id="upgrading-dependencies"><a class="markdownIt-Anchor" href="#upgrading-dependencies">#</a> Upgrading dependencies</h2>
<p>From the output of  <code>go list -m all</code> , we can see we’re using an untagged version of  <code>golang.org/x/text</code> . Let’s upgrade to the latest tagged version and test that everything still works:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get golang.org/x/text</span><br><span class="line"><span class="keyword">go</span>: finding golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: downloading golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: extracting golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.013</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Woohoo! Everything passes. Let’s take another look at  <code>go list -m all</code>  and the  <code>go.mod</code>  file:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> list -m all</span><br><span class="line">example.com/hello</span><br><span class="line">golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example.com/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.12</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span> <span class="comment">// indirect</span></span><br><span class="line">    rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">)</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>The  <code>golang.org/x/text</code>  package has been upgraded to the latest tagged version ( <code>v0.3.0</code> ). The  <code>go.mod</code>  file has been updated to specify  <code>v0.3.0</code>  too. The  <code>indirect</code>  comment indicates a dependency is not used directly by this module, only indirectly by other module dependencies. See  <code>go help modules</code>  for details.</p>
<p>Now let’s try upgrading the  <code>rsc.io/sampler</code>  minor version. Start the same way, by running  <code>go get</code>  and running tests:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get rsc.io/sampler</span><br><span class="line"><span class="keyword">go</span>: finding rsc.io/sampler v1<span class="number">.99</span><span class="number">.99</span></span><br><span class="line"><span class="keyword">go</span>: downloading rsc.io/sampler v1<span class="number">.99</span><span class="number">.99</span></span><br><span class="line"><span class="keyword">go</span>: extracting rsc.io/sampler v1<span class="number">.99</span><span class="number">.99</span></span><br><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">--- FAIL: TestHello (<span class="number">0.00</span>s)</span><br><span class="line">    hello_test.<span class="keyword">go</span>:<span class="number">8</span>: Hello() = <span class="string">&quot;99 bottles of beer on the wall, 99 bottles of beer, ...&quot;</span>, want <span class="string">&quot;Hello, world.&quot;</span></span><br><span class="line">FAIL</span><br><span class="line">exit status <span class="number">1</span></span><br><span class="line">FAIL	example.com/hello	<span class="number">0.014</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Uh, oh! The test failure shows that the latest version of  <code>rsc.io/sampler</code>  is incompatible with our usage. Let’s list the available tagged versions of that module:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> list -m -versions rsc.io/sampler</span><br><span class="line">rsc.io/sampler v1<span class="number">.0</span><span class="number">.0</span> v1<span class="number">.2</span><span class="number">.0</span> v1<span class="number">.2</span><span class="number">.1</span> v1<span class="number">.3</span><span class="number">.0</span> v1<span class="number">.3</span><span class="number">.1</span> v1<span class="number">.99</span><span class="number">.99</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>We had been using v1.3.0; v1.99.99 is clearly no good. Maybe we can try using v1.3.1 instead:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> get rsc.io/sampler@v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line"><span class="keyword">go</span>: finding rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line"><span class="keyword">go</span>: downloading rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line"><span class="keyword">go</span>: extracting rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.022</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Note the explicit  <code>@v1.3.1</code>  in the  <code>go get</code>  argument. In general each argument passed to  <code>go get</code>  can take an explicit version; the default is  <code>@latest</code> , which resolves to the latest version as defined earlier.</p>
<h2 id="adding-a-dependency-on-a-new-major-version"><a class="markdownIt-Anchor" href="#adding-a-dependency-on-a-new-major-version">#</a> Adding a dependency on a new major version</h2>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;rsc.io/quote&quot;</span></span><br><span class="line">    quoteV3 <span class="string">&quot;rsc.io/quote/v3&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quote.Hello()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Proverb</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quoteV3.Concurrency()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then we add a test to  <code>hello_test.go</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestProverb</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line">    want := <span class="string">&quot;Concurrency is not parallelism.&quot;</span></span><br><span class="line">    <span class="keyword">if</span> got := Proverb(); got != want &#123;</span><br><span class="line">        t.Errorf(<span class="string">&quot;Proverb() = %q, want %q&quot;</span>, got, want)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then we can test our code:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line"><span class="keyword">go</span>: finding rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: downloading rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line"><span class="keyword">go</span>: extracting rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.024</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Note that our module now depends on both  <code>rsc.io/quote</code>  and  <code>rsc.io/quote/v3</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> list -m rsc.io/q...</span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Each different major version ( <code>v1</code> ,  <code>v2</code> , and so on) of a Go module uses a different module path: starting at  <code>v2</code> , the path must end in the major version. In the example,  <code>v3</code>  of  <code>rsc.io/quote</code>  is no longer  <code>rsc.io/quote</code> : instead, it is identified by the module path  <code>rsc.io/quote/v3</code> . This convention is called <span class="exturl" data-url="aHR0cHM6Ly9yZXNlYXJjaC5zd3RjaC5jb20vdmdvLWltcG9ydA==">semantic import versioning</span>, and it gives incompatible packages (those with different major versions) different names. In contrast,  <code>v1.6.0</code>  of  <code>rsc.io/quote</code>  should be backwards-compatible with  <code>v1.5.2</code> , so it reuses the name  <code>rsc.io/quote</code> . (In the previous section,  <code>rsc.io/sampler</code>   <code>v1.99.99</code>  <em>should</em> have been backwards-compatible with  <code>rsc.io/sampler</code>   <code>v1.3.0</code> , but bugs or incorrect client assumptions about module behavior can both happen.)</p>
<p>The  <code>go</code>  command allows a build to include at most one version of any particular module path, meaning at most one of each major version: one  <code>rsc.io/quote</code> , one  <code>rsc.io/quote/v2</code> , one  <code>rsc.io/quote/v3</code> , and so on. This gives module authors a clear rule about possible duplication of a single module path: it is impossible for a program to build with both  <code>rsc.io/quote v1.5.2</code>  and  <code>rsc.io/quote v1.6.0</code> . At the same time, allowing different major versions of a module (because they have different paths) gives module consumers the ability to upgrade to a new major version incrementally. In this example, we wanted to use  <code>quote.Concurrency</code>  from  <code>rsc/quote/v3 v3.1.0</code>  but are not yet ready to migrate our uses of  <code>rsc.io/quote v1.5.2</code> . The ability to migrate incrementally is especially important in a large program or codebase.</p>
<h2 id="upgrading-a-dependency-to-a-new-major-version"><a class="markdownIt-Anchor" href="#upgrading-a-dependency-to-a-new-major-version">#</a> Upgrading a dependency to a new major version</h2>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> doc rsc.io/quote/v3</span><br><span class="line"><span class="keyword">package</span> quote <span class="comment">// import &quot;rsc.io/quote/v3&quot;</span></span><br><span class="line"></span><br><span class="line">Package quote collects pithy sayings.</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Concurrency</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GlassV3</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">GoV3</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">HelloV3</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">OptV3</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>We can update our use of  <code>quote.Hello()</code>  in  <code>hello.go</code>  to use  <code>quoteV3.HelloV3()</code> :</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> quoteV3 <span class="string">&quot;rsc.io/quote/v3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quoteV3.HelloV3()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Proverb</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quoteV3.Concurrency()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And then at this point, there’s no need for the renamed import anymore, so we can undo that:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;rsc.io/quote/v3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Hello</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quote.HelloV3()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Proverb</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line">    <span class="keyword">return</span> quote.Concurrency()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Let’s re-run the tests to make sure everything is working:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok      example.com/hello       <span class="number">0.014</span>s</span><br></pre></td></tr></table></figure>
<h2 id="removing-unused-dependencies"><a class="markdownIt-Anchor" href="#removing-unused-dependencies">#</a> Removing unused dependencies</h2>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> list -m all</span><br><span class="line">example.com/hello</span><br><span class="line">golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example.com/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.12</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span> <span class="comment">// indirect</span></span><br><span class="line">    rsc.io/quote v1<span class="number">.5</span><span class="number">.2</span></span><br><span class="line">    rsc.io/quote/v3 v3<span class="number">.0</span><span class="number">.0</span></span><br><span class="line">    rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span> <span class="comment">// indirect</span></span><br><span class="line">)</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>Why? Because building a single package, like with  <code>go build</code>  or  <code>go test</code> , can easily tell when something is missing and needs to be added, but not when something can safely be removed. Removing a dependency can only be done after checking all packages in a module, and all possible build tag combinations for those packages. An ordinary build command does not load this information, and so it cannot safely remove dependencies.</p>
<p>The  <code>go mod tidy</code>  command cleans up these unused dependencies:</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="keyword">go</span> mod tidy</span><br><span class="line">$ <span class="keyword">go</span> list -m all</span><br><span class="line">example.com/hello</span><br><span class="line">golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span></span><br><span class="line">rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span></span><br><span class="line">$ cat <span class="keyword">go</span>.mod</span><br><span class="line">module example.com/hello</span><br><span class="line"></span><br><span class="line"><span class="keyword">go</span> <span class="number">1.12</span></span><br><span class="line"></span><br><span class="line">require (</span><br><span class="line">    golang.org/x/text v0<span class="number">.3</span><span class="number">.0</span> <span class="comment">// indirect</span></span><br><span class="line">    rsc.io/quote/v3 v3<span class="number">.1</span><span class="number">.0</span></span><br><span class="line">    rsc.io/sampler v1<span class="number">.3</span><span class="number">.1</span> <span class="comment">// indirect</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">$ <span class="keyword">go</span> test</span><br><span class="line">PASS</span><br><span class="line">ok  	example.com/hello	<span class="number">0.020</span>s</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h2 id="conclusion"><a class="markdownIt-Anchor" href="#conclusion">#</a> Conclusion</h2>
<p>This post introduced these workflows using Go modules:</p>
<ul>
<li><code>go mod init</code>  creates a new module, initializing the  <code>go.mod</code>  file that describes it.</li>
<li><code>go build</code> ,  <code>go test</code> , and other package-building commands add new dependencies to  <code>go.mod</code>  as needed.</li>
<li><code>go list -m all</code>  prints the current module’s dependencies.</li>
<li><code>go get</code>  changes the required version of a dependency (or adds a new dependency).</li>
<li><code>go mod tidy</code>  removes unused dependencies.</li>
</ul>
<p>We encourage you to start using modules in your local development and to add  <code>go.mod</code>  and  <code>go.sum</code>  files to your projects. To provide feedback and help shape the future of dependency management in Go, please send us <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL2lzc3VlL25ldw==">bug reports</span> or <span class="exturl" data-url="aHR0cHM6Ly9nb2xhbmcub3JnL3dpa2kvRXhwZXJpZW5jZVJlcG9ydHM=">experience reports</span>.</p>
<p>Thanks for all your feedback and help improving modules.</p>

      <div class="tags">
          <a href="/tags/go/" rel="tag"><i class="ic i-tag"></i> go</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2021-10-18 13:27:09" itemprop="dateModified" datetime="2021-10-18T13:27:09+08:00">2021-10-18</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2021/06/28/python-requests-pkcs12/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipeuibk9fj20zk0m8ay2.jpg" title="Python Requests with pkcs12">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Python Requests with pkcs12</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2021/07/07/python-djangorest/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva1.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipex2cdtbj20zk0m8x6p.jpg" title="Python Django REST framework">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Python Django REST framework</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-a-new-module"><span class="toc-number">1.</span> <span class="toc-text"> Creating a new module</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#adding-a-dependency"><span class="toc-number">2.</span> <span class="toc-text"> Adding a dependency</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#upgrading-dependencies"><span class="toc-number">3.</span> <span class="toc-text"> Upgrading dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#adding-a-dependency-on-a-new-major-version"><span class="toc-number">4.</span> <span class="toc-text"> Adding a dependency on a new major version</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#upgrading-a-dependency-to-a-new-major-version"><span class="toc-number">5.</span> <span class="toc-text"> Upgrading a dependency to a new major version</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#removing-unused-dependencies"><span class="toc-number">6.</span> <span class="toc-text"> Removing unused dependencies</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#conclusion"><span class="toc-number">7.</span> <span class="toc-text"> Conclusion</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">307</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">43</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
      <span class="exturl item codepen" data-url="aHR0cHM6Ly9jb2RlcGVuLmlvL2xoY2hlbjc0" title="https:&#x2F;&#x2F;codepen.io&#x2F;lhchen74"><i class="ic i-address-card"></i></span>
      <span class="exturl item anki" data-url="aHR0cHM6Ly9hbmtpd2ViLm5ldC9kZWNrcy8=" title="https:&#x2F;&#x2F;ankiweb.net&#x2F;decks&#x2F;"><i class="ic i-address-card"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>

    
  <li class="item">
    <a href="/anime/" rel="section"><i class="ic i-magic"></i>Anime</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2021/06/28/python-requests-pkcs12/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2021/07/07/python-djangorest/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2022</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ D E W</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2021/07/01/go-mod/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
