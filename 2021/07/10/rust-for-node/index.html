



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#FFF">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">


<link rel="alternate" type="application/rss+xml" title="我知这世界本如露水般短暂 然而 然而" href="https://lhchen74.github.io/rss.xml" />
<link rel="alternate" type="application/atom+xml" title="我知这世界本如露水般短暂 然而 然而" href="https://lhchen74.github.io/atom.xml" />
<link rel="alternate" type="application/json" title="我知这世界本如露水般短暂 然而 然而" href="https://lhchen74.github.io/feed.json" />

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="/css/app.css?v=0.2.5">

  
  <meta name="keywords" content="rust" />


<link rel="canonical" href="https://lhchen74.github.io/2021/07/10/rust-for-node/">



  <title>
Deep Dive into Rust for Node.js Developers - manual |
露の世 = 我知这世界本如露水般短暂 然而 然而</title>
<meta name="generator" content="Hexo 5.4.0"></head>
<body itemscope itemtype="http://schema.org/WebPage">
  <div id="loading">
    <div class="cat">
      <div class="body"></div>
      <div class="head">
        <div class="face"></div>
      </div>
      <div class="foot">
        <div class="tummy-end"></div>
        <div class="bottom"></div>
        <div class="legs left"></div>
        <div class="legs right"></div>
      </div>
      <div class="paw">
        <div class="hands left"></div>
        <div class="hands right"></div>
      </div>
    </div>
  </div>
  <div id="container">
    <header id="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="inner">
        <div id="brand">
          <div class="pjax">
          
  <h1 itemprop="name headline">Deep Dive into Rust for Node.js Developers
  </h1>
  
<div class="meta">
  <span class="item" title="Created: 2021-07-10 00:00:00">
    <span class="icon">
      <i class="ic i-calendar"></i>
    </span>
    <span class="text">Posted on</span>
    <time itemprop="dateCreated datePublished" datetime="2021-07-10T00:00:00+08:00">2021-07-10</time>
  </span>
</div>


          </div>
        </div>
        <nav id="nav">
  <div class="inner">
    <div class="toggle">
      <div class="lines" aria-label="Toggle navigation bar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </div>
    </div>
    <ul class="menu">
      <li class="item title"><a href="/" rel="start">露の世</a></li>
    </ul>
    <ul class="right">
      <li class="item theme">
        <i class="ic i-sun"></i>
      </li>
      <li class="item search">
        <i class="ic i-search"></i>
      </li>
    </ul>
  </div>
</nav>

      </div>
      <div id="imgs" class="pjax">
        <ul>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipeyvx1d4j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicm0n457cj20zk0m8e81.jpg"></li>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicliierfjj20zk0m8npd.jpg"></li>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gicliwyw55j20zk0m8hdt.jpg"></li>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipewf5l51j20zk0m8b29.jpg"></li>
          <li class="item" data-background-image="https://tva2.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li>
        </ul>
      </div>
    </header>
    <div id="waves">
      <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g class="parallax">
          <use xlink:href="#gentle-wave" x="48" y="0" />
          <use xlink:href="#gentle-wave" x="48" y="3" />
          <use xlink:href="#gentle-wave" x="48" y="5" />
          <use xlink:href="#gentle-wave" x="48" y="7" />
        </g>
      </svg>
    </div>
    <main>
      <div class="inner">
        <div id="main" class="pjax">
          
  <div class="article wrap">
    
<div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList">
<i class="ic i-home"></i>
<span><a href="/">Home</a></span><i class="ic i-angle-right"></i>
<span  class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/manual/" itemprop="item" rel="index" title="In manual"><span itemprop="name">manual</span></a>
<meta itemprop="position" content="1" /></span>
</div>

    <article itemscope itemtype="http://schema.org/Article" class="post block" lang="en">
  <link itemprop="mainEntityOfPage" href="https://lhchen74.github.io/2021/07/10/rust-for-node/">

  <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="image" content="/images/avatar.jpg">
    <meta itemprop="name" content="江边鸟">
    <meta itemprop="description" content=", ">
  </span>

  <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="我知这世界本如露水般短暂 然而 然而">
  </span>

  <div class="body md" itemprop="articleBody">
    

    <blockquote>
<p>转载：<span class="exturl" data-url="aHR0cHM6Ly9pdG5leHQuaW8vZGVlcC1kaXZlLWludG8tcnVzdC1mb3Itbm9kZS1qcy1kZXZlbG9wZXJzLTVmYWFjZTZkYzcxZiM5Njcw">Deep Dive into Rust for Node.js Developers | by Florian GOTO </span></p>
</blockquote>
<p>With the advent of <span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvV2ViQXNzZW1ibHk=">WebAssembly</span> (<span class="exturl" data-url="aHR0cHM6Ly93ZWJhc3NlbWJseS5vcmcv">home</span>) there has never been a better time to learn Rust on top of your existing JavaScript and Node.js knowledge for high performance computing in the browser, on the server and on the edge.</p>
<p>Adding Rust to your tech stack on top of Node.js is a match made in heaven as Rust provides advanced support for WebAssembly and WebAssembly binary format is runnable in Node.js.</p>
<p>With this deep dive, you will get up and running using Rust. By the end of this article, you will be familiar enough with Rust to start your own projects and build more complex software!</p>
<p>Notes: as a Node.js developer with mainly JavaScript experience, you will see unfamiliar notations like ‘std::wx::yz’ or ‘&amp;xyz’, do not worry I explain everything.</p>
<p>Rust is a lower-level language compared to JavaScript and Node.js. This means you are going to get familiar with how computer programs work with the hardware to really understand what’s going on. Node.js being much higher-level, you usually don’t deal with these notions.</p>
<p>Remember, Rust is initially a systems programming language so closer to the metal/hardware, meaning that the abstractions provided by the language are closer to the actual physical components of the machine. This gives you greater power for high performance programming but also implies more complexity than when programming with JavaScript.</p>
<p>Rust will not hide details like is the value of a variable stored on the stack or the heap, and based on that what is allowed or not. But like with Node.js, there are plenty of libraries/modules to make your life simple.</p>
<p>The problem with many tutorials is that they are made by people who are well versed in compiled languages like C and C++ on Linux. They assume you already know how computers work internally (memory allocation, etc.) which is not the case for many Web developers (even experts in their field).</p>
<p>In this article, I keep it simple and take the point of view of someone who mainly knows JavaScript and Node.js.</p>
<p>Rust is a tough language at first so take your time, relax and come back for more .</p>
<p><strong>Overall, learning Rust will make you a better Node.js / JavaScript developer!</strong></p>
<h2 id="creating-a-project-in-rust"><a class="markdownIt-Anchor" href="#creating-a-project-in-rust">#</a> Creating a project in Rust</h2>
<p>You can run all the code in this article online (except local stuff like file access, of course) with the <span class="exturl" data-url="aHR0cHM6Ly9wbGF5LnJ1c3QtbGFuZy5vcmcvP3ZlcnNpb249bmlnaHRseSZhbXA7bW9kZT1kZWJ1ZyZhbXA7ZWRpdGlvbj0yMDE4">Rust playground</span>.</p>
<p>After installing Rust, create a new project with Cargo (the Rust package manager):</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo new &lt;PROJECT_NAME&gt;</span><br></pre></td></tr></table></figure>
<p>This will create a new folder in your current directory.</p>
<p>Alternatively, to make your current directory the project folder:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo init</span><br></pre></td></tr></table></figure>
<p>The source is located in the src/ folder. Of course, the entry point is the  <code>main.rs</code>  file with its main function (<strong>fn</strong> keyword).</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello, world!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="printing"><a class="markdownIt-Anchor" href="#printing">#</a> Printing</h2>
<p>In Rust, you use what is called a <span class="exturl" data-url="aHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWFjcm9fKGNvbXB1dGVyX3NjaWVuY2Up">macro</span> to print to the console. Macros in Rust have an identifier followed by an exclamation mark (!). The println! macro is very flexible:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">   <span class="comment">// string interpolation</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;Adding &#123;&#125; and &#123;&#125; gives &#123;&#125;&quot;</span>, <span class="number">22</span>, <span class="number">33</span>, <span class="number">22</span> + <span class="number">33</span>);</span><br><span class="line">   <span class="comment">// positional arguments</span></span><br><span class="line">   <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;Your name is &#123;0&#125;. Welcome to &#123;1&#125;. Nice to meet you &#123;0&#125;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Goto&quot;</span>, <span class="string">&quot;Rust&quot;</span></span><br><span class="line">   );</span><br><span class="line">   <span class="comment">// named arguments</span></span><br><span class="line">   <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;&#123;language&#125; is very popular. It was created in &#123;year&#125;&quot;</span>,</span><br><span class="line">        language = <span class="string">&quot;Rust&quot;</span>,</span><br><span class="line">        year = <span class="number">2010</span></span><br><span class="line">   );</span><br><span class="line">  <span class="comment">// placeholder traits (using positional argument to avoid repeat)</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;0&#125;, in binary: &#123;0:b&#125;, in hexadecimal: &#123;0:x&#125;&quot;</span>, <span class="number">11</span>);</span><br><span class="line">  <span class="comment">// debug trait (very useful to print anything)</span></span><br><span class="line">  <span class="comment">// if you try to print the array directly, you will get an error</span></span><br><span class="line">  <span class="comment">// because an array is not a string or number type</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, [<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To see the output, run:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cargo run</span><br></pre></td></tr></table></figure>
<p>you will see (along info about compilation of the code — Rust is a compiled language):</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Adding <span class="number">22</span> and <span class="number">33</span> gives <span class="number">55</span></span><br><span class="line">Your name is Goto. Welcome to Rust. Nice to meet you Goto</span><br><span class="line">Rust is very popular. It was created <span class="keyword">in</span> <span class="number">2010</span></span><br><span class="line">Decimal: <span class="number">11</span>      Binary: <span class="number">1011</span>    Hexadecimal: b</span><br><span class="line">[<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>]</span><br></pre></td></tr></table></figure>
<p>In Rust, you must use semicolons  <code>;</code>  at the end of a line unless it is the last line of a function that returns something (more on that later).</p>
<h2 id="advanced-numeric-formatted-print"><a class="markdownIt-Anchor" href="#advanced-numeric-formatted-print">#</a> Advanced numeric formatted print</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">246.92385</span>;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">24.69</span>;</span><br><span class="line">    <span class="keyword">let</span> z = x / y;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// print line macro with 3 decimal point precision</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;z is &#123;:.3&#125;&quot;</span>, z);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 9: total character space the number to occupy</span></span><br><span class="line">    <span class="comment">// (adds pre padding if necessary)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;z is &#123;:9.3&#125;&quot;</span>, z);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 0: placeholder number for padding characters</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;z is &#123;:09.3&#125;&quot;</span>, z);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;z is &#123;:09.3&#125;\nx is &#123;&#125;&quot;</span>, z, x);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// print macro without new line</span></span><br><span class="line">    <span class="built_in">print!</span>(<span class="string">&quot;y is &#123;:09.3&#125;\nx is &#123;&#125;\n&quot;</span>, y, x);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// positional parameters</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;z is &#123;0:05.1&#125; and x is &#123;1:.2&#125;. \nx is also &#123;1&#125;&quot;</span>, z, x)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">z is <span class="number">10.001</span></span><br><span class="line">z is    <span class="number">10.001</span></span><br><span class="line">z is <span class="number">00010.001</span></span><br><span class="line">z is <span class="number">00010.001</span></span><br><span class="line">x is <span class="number">246.92385</span></span><br><span class="line">y is <span class="number">00024.690</span></span><br><span class="line">x is <span class="number">246.92385</span></span><br><span class="line">z is <span class="number">010.0</span> and x is <span class="number">246.92</span>.</span><br><span class="line">x is also <span class="number">246.92385</span></span><br></pre></td></tr></table></figure>
<h2 id="variables"><a class="markdownIt-Anchor" href="#variables">#</a> Variables</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// variables are immutable by default</span></span><br><span class="line">    <span class="comment">// stored on the heap (more on that later)</span></span><br><span class="line">    <span class="keyword">let</span> pc = <span class="string">&quot;Inspirion XYZ&quot;</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;pc is &#123;&#125;&quot;</span>, pc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// mutable variables</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> age = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;age is &#123;&#125;&quot;</span>, age);</span><br><span class="line">    age = <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;age is &#123;&#125;&quot;</span>, age);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// constants (must be uppercase and explicit type definition)</span></span><br><span class="line">    <span class="keyword">const</span> BRAND: &amp;<span class="built_in">str</span> = <span class="string">&quot;Dell&quot;</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;brand is &#123;&#125;&quot;</span>, BRAND);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// multiple assignment (tuple destructuring)</span></span><br><span class="line">    <span class="comment">// more on tuples later in the article</span></span><br><span class="line">    <span class="keyword">let</span> (status, code) = (<span class="string">&quot;OK&quot;</span>, <span class="number">200</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;status: &#123;&#125;, code: &#123;&#125;&quot;</span>, status, code);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pc is Inspirion XYZ</span><br><span class="line">age is <span class="number">1</span></span><br><span class="line">age is <span class="number">2</span></span><br><span class="line">brand is Dell</span><br><span class="line">status: OK, code: <span class="number">200</span></span><br></pre></td></tr></table></figure>
<h2 id="basic-types"><a class="markdownIt-Anchor" href="#basic-types">#</a> Basic Types</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// default integer numeric type is i32</span></span><br><span class="line">    <span class="keyword">let</span> num1 = <span class="number">123</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; - type: &#123;&#125;&quot;</span>, num1, get_type(&amp;num1));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// default floating point numeric type is f64</span></span><br><span class="line">    <span class="keyword">let</span> num2 = <span class="number">1.23</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; - type: &#123;&#125;&quot;</span>, num2, get_type(&amp;num2));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// explicit typing</span></span><br><span class="line">    <span class="keyword">let</span> num3: <span class="built_in">i8</span> = <span class="number">23</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; - type: &#123;&#125;&quot;</span>, num3, get_type(&amp;num3));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// max values</span></span><br><span class="line">    <span class="comment">// std is the standard library/crate,</span></span><br><span class="line">    <span class="comment">// it gives access to a rich variety of features,</span></span><br><span class="line">    <span class="comment">// here we use the type modules (i32, i16, etc.) and properties</span></span><br><span class="line">    <span class="keyword">let</span> max_i32 = <span class="built_in">i32</span>::MAX;</span><br><span class="line">    <span class="keyword">let</span> max_i16 = <span class="built_in">i16</span>::MAX;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;max value for i32 is &#123;&#125;&quot;</span>, max_i32);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;max value for i16 is &#123;&#125;&quot;</span>, max_i16);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// boolean</span></span><br><span class="line">    <span class="keyword">let</span> is_rust_fun: <span class="built_in">bool</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;is_rust_fun is &#123;&#125; - type: &#123;&#125;&quot;</span>,</span><br><span class="line">        is_rust_fun,</span><br><span class="line">        get_type(&amp;is_rust_fun)</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">let</span> is_greater = <span class="number">23</span> &gt; <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;is_greater is &#123;&#125; - type: &#123;&#125;&quot;</span>,</span><br><span class="line">        is_greater,</span><br><span class="line">        get_type(&amp;is_greater)</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// characters (unicode - up to 4 bytes length)</span></span><br><span class="line">    <span class="keyword">let</span> smiley = &#x27;😈&#x27;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;smiley is &#123;&#125; - type: &#123;&#125;&quot;</span>, smiley, get_type(&amp;smiley));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// helper function to print types</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_type</span></span>&lt;T&gt;(_: &amp;T) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    std::any::type_name::&lt;T&gt;()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">123 - type: i32</span><br><span class="line">1.23 - type: f64</span><br><span class="line">23 - type: i8</span><br><span class="line">max value <span class="keyword">for</span> <span class="built_in">i32</span> is <span class="number">2147483647</span></span><br><span class="line">max value <span class="keyword">for</span> <span class="built_in">i16</span> is <span class="number">32767</span></span><br><span class="line">is_rust_fun is true - type: bool</span><br><span class="line">is_greater is true - type: bool</span><br><span class="line">smiley is 😈 - type: char</span><br></pre></td></tr></table></figure>
<h2 id="floating-point-numbers"><a class="markdownIt-Anchor" href="#floating-point-numbers">#</a> Floating point numbers</h2>
<ul>
<li><strong>f32</strong> (32-bit length floating point number)</li>
<li><strong>f64</strong> (64-bit length floating point number)</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// by default fractional values stored in f64</span></span><br><span class="line">    <span class="keyword">let</span> my_float = <span class="number">12.345677890123456789012345</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;my_float is: &#123;&#125;&quot;</span>, my_float);</span><br><span class="line">    <span class="keyword">let</span> a_float: <span class="built_in">f32</span> = <span class="number">9.9438535983578493758</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_float is: &#123;&#125;&quot;</span>, a_float);</span><br><span class="line">    <span class="keyword">let</span> min_f32 = <span class="built_in">f32</span>::MIN;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;min_f32 is: &#123;&#125;\n&quot;</span>, min_f32);</span><br><span class="line">    <span class="keyword">let</span> max_f32 = <span class="built_in">f32</span>::MAX;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;max_f32 is: &#123;&#125;\n&quot;</span>, max_f32);</span><br><span class="line">    <span class="keyword">let</span> min_f64 = <span class="built_in">f64</span>::MIN;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;min_f64 is: &#123;&#125;\n&quot;</span>, min_f64);</span><br><span class="line">    <span class="keyword">let</span> max_f64 = <span class="built_in">f64</span>::MAX;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;max_f64 is: &#123;&#125;\n&quot;</span>, max_f64);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">my_float is: <span class="number">12.345677890123456</span></span><br><span class="line">a_float is: <span class="number">9.943853</span></span><br><span class="line">min_f32 is: -<span class="number">340282350000000000000000000000000000000</span></span><br><span class="line"></span><br><span class="line">max_f32 is: <span class="number">340282350000000000000000000000000000000</span></span><br><span class="line"></span><br><span class="line">min_f64 is: -<span class="number">179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span></span><br><span class="line"></span><br><span class="line">max_f64 is: <span class="number">179769313486231570000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span></span><br></pre></td></tr></table></figure>
<h2 id="bitwise-operations-advanced-can-be-skipped"><a class="markdownIt-Anchor" href="#bitwise-operations-advanced-can-be-skipped">#</a> Bitwise operations (advanced — can be skipped)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Bitwise operations: on individual bits rather than sets of bytes.</span></span><br><span class="line"><span class="comment">- binary representation, a sequence of bytes</span></span><br><span class="line"><span class="comment">- underscore separator allowed for legibility</span></span><br><span class="line"><span class="comment">- by default binary representations are store as i32</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// stored as u8 by adding suffix u8</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> value = <span class="number">0b1111_0101u8</span>;</span><br><span class="line">    <span class="comment">// will print base 10 (decimal) representation</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;&#125;&quot;</span>, value);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    :08b</span></span><br><span class="line"><span class="comment">        0 -&gt; display leading zeros</span></span><br><span class="line"><span class="comment">        8 -&gt; number of bits to display</span></span><br><span class="line"><span class="comment">        b -&gt; display binary representation</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">    <span class="comment">// bitwise NOT: invert individual bits</span></span><br><span class="line"></span><br><span class="line">    value = !value; <span class="comment">// 0000_1010</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">    <span class="comment">// bitwise AND: used to clear the value of a specific bit</span></span><br><span class="line">    value = value &amp; <span class="number">0b1111_0111</span>; <span class="comment">// -&gt; 0000_0010</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">    <span class="comment">// bitwise AND: used to check value of a specific bit</span></span><br><span class="line">    <span class="comment">// if a specific bit is 0 or 1, useful to check status of registers for process state</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value &amp; <span class="number">0b0100_0000</span>);</span><br><span class="line">    <span class="comment">// -&gt; 0000_0000</span></span><br><span class="line">    <span class="comment">// bitwise OR: if either operand is 1, result is 1</span></span><br><span class="line">    <span class="comment">// useful to set value of a specific bit</span></span><br><span class="line"></span><br><span class="line">    value = value | <span class="number">0b0100_0000</span>; <span class="comment">// -&gt; 0100_0010</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">   <span class="comment">// bitwise XOR (exclusive OR):</span></span><br><span class="line">   <span class="comment">// result is 1 only when bits are different, otherwise 0</span></span><br><span class="line">   <span class="comment">// useful to set if bits are different</span></span><br><span class="line"></span><br><span class="line">   value = value ^ <span class="number">0b0101_0101</span>; <span class="comment">// -&gt; 0001_0111</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">   <span class="comment">////////////////////////////</span></span><br><span class="line">   <span class="comment">// Bit Shift operators</span></span><br><span class="line">   <span class="comment">////////////////////////////</span></span><br><span class="line">   <span class="comment">// shift bit pattern left or right by a number of bits</span></span><br><span class="line">   <span class="comment">// and backfill shifted bit spaces with zeros</span></span><br><span class="line">   <span class="comment">// shift left by 4 bits</span></span><br><span class="line"></span><br><span class="line">   value = value &lt;&lt; <span class="number">4</span>; <span class="comment">// -&gt; 0111_0000</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">   <span class="comment">// shift right by 3 bits</span></span><br><span class="line"></span><br><span class="line">   value = value &gt;&gt; <span class="number">3</span>; <span class="comment">// -&gt; 0000_1110</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;:08b&#125;&quot;</span>, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">value is <span class="number">245</span></span><br><span class="line">value is <span class="number">11110101</span></span><br><span class="line">value is <span class="number">00001010</span></span><br><span class="line">value is <span class="number">00000010</span></span><br><span class="line">value is <span class="number">00000000</span></span><br><span class="line">value is <span class="number">01000010</span></span><br><span class="line">value is <span class="number">00010111</span></span><br><span class="line">value is <span class="number">01110000</span></span><br><span class="line">value is <span class="number">00001110</span></span><br></pre></td></tr></table></figure>
<h2 id="booleans-and-binary-algebra"><a class="markdownIt-Anchor" href="#booleans-and-binary-algebra">#</a> Booleans and binary algebra</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a is &#123;&#125;\nb is &#123;&#125;&quot;</span>, a, b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;NOT a is &#123;&#125;&quot;</span>, !a);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a AND b is &#123;&#125;&quot;</span>, a &amp; b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a OR b is &#123;&#125;&quot;</span>, a | b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a XOR b is &#123;&#125;&quot;</span>, a ^ b);</span><br><span class="line">    <span class="comment">// boolean casted to integer begets 0 or 1</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a XOR b is &#123;&#125;&quot;</span>, (a ^ b) <span class="keyword">as</span> <span class="built_in">i32</span>); <span class="comment">// 1</span></span><br><span class="line">   <span class="keyword">let</span> c = (a ^ b) | (a &amp; b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c is &#123;&#125;&quot;</span>, c);</span><br><span class="line">    <span class="comment">// short-circuiting logical operations:</span></span><br><span class="line">    <span class="comment">// right operand not evaluated</span></span><br><span class="line">    <span class="keyword">let</span> d = <span class="literal">true</span> || (a &amp; b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;d is &#123;&#125;&quot;</span>, d);</span><br><span class="line">    <span class="comment">// the panic macro is not evaluated,</span></span><br><span class="line">    <span class="comment">// so the process ends with status 0 (OK, no error)</span></span><br><span class="line">    <span class="comment">// panics exit the program immediately (like throwing error in Node.js)</span></span><br><span class="line">    <span class="keyword">let</span> e = <span class="literal">false</span> &amp;&amp; <span class="built_in">panic!</span>();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;e is &#123;&#125;&quot;</span>, e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">a is <span class="literal">true</span></span><br><span class="line">b is <span class="literal">false</span></span><br><span class="line">NOT a is <span class="literal">false</span></span><br><span class="line">a AND b is <span class="literal">false</span></span><br><span class="line">a OR b is <span class="literal">true</span></span><br><span class="line">a XOR b is <span class="literal">true</span></span><br><span class="line">a XOR b is <span class="number">1</span></span><br><span class="line">c is <span class="literal">true</span></span><br><span class="line">d is <span class="literal">true</span></span><br><span class="line">e is <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="arithmetic-operations"><a class="markdownIt-Anchor" href="#arithmetic-operations">#</a> Arithmetic operations</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// can only do arithmetic operations on same type operands</span></span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">33</span>;</span><br><span class="line">    <span class="keyword">let</span> c = a + b;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c is &#123;&#125;&quot;</span>, c);</span><br><span class="line">    <span class="keyword">let</span> d = c - b;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;d is &#123;&#125;&quot;</span>, d);</span><br><span class="line">    <span class="keyword">let</span> e = a * d;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;e is &#123;&#125;&quot;</span>, e);</span><br><span class="line">    <span class="comment">// type casting (careful with precision loss and type compatibility)</span></span><br><span class="line">    <span class="keyword">let</span> f = c <span class="keyword">as</span> <span class="built_in">f32</span> / <span class="number">4.5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;f is &#123;&#125;&quot;</span>, f);</span><br><span class="line">    <span class="comment">// operator precedence control</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> g = <span class="number">43.5432</span> % (a <span class="keyword">as</span> <span class="built_in">f64</span> * e <span class="keyword">as</span> <span class="built_in">f64</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;g is &#123;&#125;&quot;</span>, g);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c is <span class="number">44</span></span><br><span class="line">d is <span class="number">11</span></span><br><span class="line">e is <span class="number">121</span></span><br><span class="line">f is <span class="number">9.777778</span></span><br><span class="line">g is <span class="number">43.5432</span></span><br></pre></td></tr></table></figure>
<h2 id="comparison-operators"><a class="markdownIt-Anchor" href="#comparison-operators">#</a> Comparison operators</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">can only compare values of same type</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">11</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">88</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a is &#123;&#125;\nb is &#123;&#125;&quot;</span>, a, b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a EQUAL TO b is &#123;&#125;&quot;</span>, a == b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a NOT EQUAL TO b is &#123;&#125;&quot;</span>, a != b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a GREATER THAN b is &#123;&#125;&quot;</span>, a &gt; b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a GREATER THAN OR EQUAL TO b is &#123;&#125;&quot;</span>, a &gt;= b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a LESS THAN b is &#123;&#125;&quot;</span>, a &lt; b);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a LESS THAN OR EQUAL TO b is &#123;&#125;&quot;</span>, a &lt;= b);</span><br><span class="line">    <span class="keyword">let</span> c = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">let</span> d = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\nc is &#123;&#125;\nd is &#123;&#125;&quot;</span>, c, d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c EQUAL TO d is &#123;&#125;&quot;</span>, c == d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c NOT EQUAL TO d is &#123;&#125;&quot;</span>, c != d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c GREATER THAN d is &#123;&#125;&quot;</span>, c &gt; d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c GREATER THAN OR EQUAL TO d is &#123;&#125;&quot;</span>, c &gt;= d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c LESS THAN d is &#123;&#125;&quot;</span>, c &lt; d);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;c LESS THAN OR EQUAL TO d is &#123;&#125;&quot;</span>, c &lt;= d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a is <span class="number">11</span></span><br><span class="line">b is <span class="number">88</span></span><br><span class="line">a EQUAL TO b is <span class="literal">false</span></span><br><span class="line">a NOT EQUAL TO b is <span class="literal">true</span></span><br><span class="line">a GREATER THAN b is <span class="literal">false</span></span><br><span class="line">a GREATER THAN OR EQUAL TO b is <span class="literal">false</span></span><br><span class="line">a LESS THAN b is <span class="literal">true</span></span><br><span class="line">a LESS THAN OR EQUAL TO b is <span class="literal">true</span></span><br><span class="line">c is <span class="literal">true</span></span><br><span class="line">d is <span class="literal">false</span></span><br><span class="line">c EQUAL TO d is <span class="literal">false</span></span><br><span class="line">c NOT EQUAL TO d is <span class="literal">true</span></span><br><span class="line">c GREATER THAN d is <span class="literal">true</span></span><br><span class="line">c GREATER THAN OR EQUAL TO d is <span class="literal">true</span></span><br><span class="line">c LESS THAN d is <span class="literal">false</span></span><br><span class="line">c LESS THAN OR EQUAL TO d is <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h2 id="chars"><a class="markdownIt-Anchor" href="#chars">#</a> Chars</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// Unicode scalar value stored using 4 bytes (32 bits)</span></span><br><span class="line">    <span class="comment">// contrary to C like languages that store it in 1 byte</span></span><br><span class="line">    <span class="keyword">let</span> letter: <span class="built_in">char</span> = <span class="string">&#x27;z&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> number_char = <span class="string">&#x27;9&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> finger = &#x27;\u&#123;<span class="number">261</span>D&#125;&#x27;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;letter is &#123;&#125;&quot;</span>, letter);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;number_char is &#123;&#125;&quot;</span>, number_char);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;finger is &#123;&#125;&quot;</span>, finger);</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;&#123;&#125; &#123;&#125;&quot;</span>,</span><br><span class="line">        std::mem::size_of_val(&amp;letter),</span><br><span class="line">        std::mem::size_of_val(&amp;finger)</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">letter is z</span><br><span class="line">number_char is <span class="number">9</span></span><br><span class="line">finger is ☝</span><br><span class="line"><span class="number">4</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h2 id="computing-average"><a class="markdownIt-Anchor" href="#computing-average">#</a> Computing average</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> a = <span class="number">33</span>;</span><br><span class="line">    <span class="keyword">let</span> b = <span class="number">4.9</span>;</span><br><span class="line">    <span class="keyword">let</span> c: <span class="built_in">f32</span> = <span class="number">123.5</span>;</span><br><span class="line">    <span class="keyword">let</span> average = (a <span class="keyword">as</span> <span class="built_in">f32</span> + b <span class="keyword">as</span> <span class="built_in">f32</span> + c) / <span class="number">3.0</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;average is &#123;&#125;&quot;</span>, average);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(average, <span class="number">53.8</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;test passed.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">average is <span class="number">53.8</span></span><br><span class="line">test passed.</span><br></pre></td></tr></table></figure>
<h2 id="arrays"><a class="markdownIt-Anchor" href="#arrays">#</a> Arrays</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// fixed length and single typed</span></span><br><span class="line">    <span class="comment">// stored in contiguous memory locations</span></span><br><span class="line">    <span class="comment">// Contiguous means that elements are laid out so that every element is the same distance from its neighbors.</span></span><br><span class="line">    <span class="keyword">let</span> letters = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]; <span class="comment">// type: [char; 3]</span></span><br><span class="line">    <span class="keyword">let</span> first_letter = letters[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_letter is &#123;&#125;&quot;</span>, first_letter);</span><br><span class="line">    <span class="comment">// to modify elements in array, it must be mutable</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> numbers = [<span class="number">11</span>, <span class="number">22</span>, <span class="number">44</span>]; <span class="comment">// type is [i32; 3]</span></span><br><span class="line">    numbers[<span class="number">2</span>] = <span class="number">33</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;numbers is &#123;&#125;&quot;</span>, numbers[<span class="number">2</span>]);</span><br><span class="line">    <span class="comment">// empty array declaration (memory allocated)</span></span><br><span class="line">    <span class="keyword">let</span> words: [&amp;<span class="built_in">str</span>; <span class="number">2</span>];</span><br><span class="line">    words = [<span class="string">&quot;ok&quot;</span>; <span class="number">2</span>]; <span class="comment">// repeat expression, equivalent to [&quot;ok&quot;, &quot;ok&quot;]</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;words is &#123;:?&#125;&quot;</span>, words);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    length of usize is based on number of bytes needed to reference memory in your target architecture:</span></span><br><span class="line"><span class="comment">    - for 32 bit compilation target -&gt; usize is 4 bytes</span></span><br><span class="line"><span class="comment">    - for 64 bit compilation target -&gt; usize is 8 bytes</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">let</span> ints = [<span class="number">22</span>; <span class="number">5</span>];</span><br><span class="line">    <span class="keyword">let</span> length: <span class="built_in">usize</span> = ints.len();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;length is &#123;&#125;&quot;</span>, length);</span><br><span class="line">    <span class="comment">// get size in memory (mem module of the std crate)</span></span><br><span class="line">    <span class="keyword">let</span> mem_size_byte = std::mem::size_of_val(&amp;ints);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;mem_size_byte is &#123;&#125;&quot;</span>, mem_size_byte);</span><br><span class="line">    <span class="comment">// get slice from array</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> slice: &amp;[<span class="built_in">i32</span>] = &amp;ints;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;slice is &#123;:?&#125;&quot;</span>, slice);</span><br><span class="line"></span><br><span class="line">    slice = &amp;ints[<span class="number">3</span>..<span class="number">5</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;slice is &#123;:?&#125;&quot;</span>, slice);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">first_letter is a</span><br><span class="line">numbers is <span class="number">33</span></span><br><span class="line">words is [<span class="string">&quot;ok&quot;</span>, <span class="string">&quot;ok&quot;</span>]</span><br><span class="line">length is <span class="number">5</span></span><br><span class="line">mem_size_byte is <span class="number">20</span></span><br><span class="line">slice is [<span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>, <span class="number">22</span>]</span><br><span class="line">slice is [<span class="number">22</span>, <span class="number">22</span>]</span><br></pre></td></tr></table></figure>
<h2 id="slices"><a class="markdownIt-Anchor" href="#slices">#</a> Slices</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// slice: used to reference a contiguous section (subset) of a collection (array, etc.) WITHOUT taking ownership of these elements</span></span><br><span class="line">    <span class="comment">// commonly used: string slice dt type : &amp;str</span></span><br><span class="line">    <span class="comment">// string literals are slices</span></span><br><span class="line">    <span class="comment">// the data is hard-coded in the executable binary and the program uses a string slice to access it</span></span><br><span class="line">    <span class="comment">// create a string slice from string data</span></span><br><span class="line">    <span class="comment">// the sentence variable has a pointer to the beginning of the string data in memory as well as info about its length and capacity</span></span><br><span class="line">    <span class="keyword">let</span> sentence = <span class="built_in">String</span>::from(<span class="string">&quot;This is a sequence of words.&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;sentence is &#123;&#125;&quot;</span>, sentence);</span><br><span class="line">    <span class="comment">// the last_word variable has a pointer to the offset/start index of the section of the string data, as well as the length of the slice</span></span><br><span class="line">    <span class="comment">// as usual, the end index of the slice is excluded from the result (common in most programming languages when slicing collections)</span></span><br><span class="line">    <span class="keyword">let</span> last_word = &amp;sentence[<span class="number">22</span>..<span class="number">22</span> + <span class="number">5</span>];          <span class="comment">// [start..end_excluded]</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;last_word is \&quot;&#123;&#125;\&quot;&quot;</span>, last_word);</span><br><span class="line">    <span class="comment">// slice from offset index to end of the collection (here string data)</span></span><br><span class="line">    <span class="keyword">let</span> last_part: &amp;<span class="built_in">str</span> = &amp;sentence[<span class="number">22</span>..];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;last_part is \&quot;&#123;&#125;\&quot;&quot;</span>, last_part);</span><br><span class="line">    <span class="comment">// slice from beginning of collection up until end index</span></span><br><span class="line">    <span class="keyword">let</span> without_last_word = &amp;sentence[..<span class="number">22</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;without_last_word is \&quot;&#123;&#125;\&quot;&quot;</span>, without_last_word);</span><br><span class="line">    <span class="comment">// the length of a string slice is in number of bytes (usize data type)</span></span><br><span class="line">    <span class="comment">// NOT in number of characters</span></span><br><span class="line">    <span class="keyword">let</span> slice_length: <span class="built_in">usize</span> = last_part.len();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;slice_length is &#123;&#125; bytes&quot;</span>, slice_length);</span><br><span class="line">    <span class="comment">// when creating a string slice, the range indices must occur at valid UTF-8 character boundaries</span></span><br><span class="line">    <span class="comment">// remember that UTF-8 characters can occupy multiple bytes</span></span><br><span class="line">    <span class="comment">// all this to say that slice range indices must be character boundaries</span></span><br><span class="line">    <span class="comment">// if you index in the middle of a character, the program will panic</span></span><br><span class="line">    <span class="comment">// so be careful when creating string slices from strings with special characters or emojis</span></span><br><span class="line">    <span class="comment">// yes, this is some low-level stuff that we usually don&#x27;t deal with in everyday Node.js</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sentence is This is a sequence of words.</span><br><span class="line">last_word is <span class="string">&quot;words&quot;</span></span><br><span class="line">last_part is <span class="string">&quot;words.&quot;</span></span><br><span class="line">without_last_word is <span class="string">&quot;This is a sequence of &quot;</span></span><br><span class="line">slice_length is <span class="number">6</span> bytes</span><br></pre></td></tr></table></figure>
<h2 id="slices-as-parameters"><a class="markdownIt-Anchor" href="#slices-as-parameters">#</a> Slices as parameters</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="built_in">String</span>::from(<span class="string">&quot;lorem ipsum&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> first_word = get_first_word(&amp;message);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_word is \&quot;&#123;&#125;\&quot;&quot;</span>, first_word);</span><br><span class="line">    <span class="keyword">let</span> first_word_too = get_first_word_too(&amp;message[<span class="number">6</span>..]);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_word_too is \&quot;&#123;&#125;\&quot;&quot;</span>, first_word_too);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ======= passing the entire string as input ===========</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_first_word</span></span>(msg: &amp;<span class="built_in">String</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="comment">// create a slice of bytes (&amp;[u8] data type) from string data</span></span><br><span class="line">    <span class="keyword">let</span> bytes: &amp;[<span class="built_in">u8</span>] = msg.as_bytes();</span><br><span class="line">    <span class="comment">// iterate through byte sequence one byte at a time</span></span><br><span class="line">    <span class="comment">// use enumerate() to get the index when iterating</span></span><br><span class="line">   <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="comment">// find first space and return everything before as a string slice</span></span><br><span class="line">        <span class="comment">// b&#x27; &#x27; is the byte representation of a blank space</span></span><br><span class="line">        <span class="comment">// remember that we are iterating on a sequence of bytes, NOT characters</span></span><br><span class="line">        <span class="comment">// we do that because the index for a string slice is in terms of bytes</span></span><br><span class="line">       <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;msg[..index];</span><br><span class="line">       &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// no blank space found, return entire message</span></span><br><span class="line">    &amp;msg</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ======= passing a string slice as input ===========</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_first_word_too</span></span>(msg: &amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> bytes: &amp;[<span class="built_in">u8</span>] = msg.as_bytes();</span><br><span class="line">    <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;msg[..index];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;msg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">first_word is <span class="string">&quot;lorem&quot;</span></span><br><span class="line">first_word_too is <span class="string">&quot;ipsum&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="deref-coercion"><a class="markdownIt-Anchor" href="#deref-coercion">#</a> Deref coercion</h2>
<p>Notes:</p>
<ul>
<li>passing a borrowed reference to a string (&amp;String) is <strong>not</strong> the same as passing a string slice (&amp;str)</li>
<li>a borrowed string reference points to a string on the stack which in turn owns and points to the data on the heap</li>
<li>a slice only stores a pointer to the heap data along with length information. It does not keep track of the capacity because it does <strong>not</strong> own anything on the heap.</li>
<li>since a string reference contains all the info to function as a slice (pointer to heap data + length), Rust allows to use a string reference where a string slice is expected</li>
<li>this convenience is called <strong>deref coercion</strong>:</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="built_in">String</span>::from(<span class="string">&quot;lorem ipsum&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// notice that a string reference is passed as argument</span></span><br><span class="line">    <span class="keyword">let</span> first_word = get_first_word(&amp;message);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_word is \&quot;&#123;&#125;\&quot;&quot;</span>, first_word);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// notice that the expected argument is of type string slice (&amp;str)</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_first_word</span></span>(msg: &amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> bytes: &amp;[<span class="built_in">u8</span>] = msg.as_bytes();</span><br><span class="line">    <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;msg[..index];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;msg</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>of course, deref coercion does not work when using a string slice where a string reference is expected (because of the missing properties)</li>
<li>when writing code, prefer using string slices in cases where ownership of the data is not required</li>
</ul>
<h2 id="multidimensional-arrays"><a class="markdownIt-Anchor" href="#multidimensional-arrays">#</a> Multidimensional arrays</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> d2: [[<span class="built_in">i32</span>; <span class="number">3</span>]; <span class="number">3</span>] = [[<span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>], [<span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>], [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]];</span><br><span class="line">    <span class="keyword">let</span> value = d2[<span class="number">1</span>][<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value is &#123;&#125;&quot;</span>, value);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> d3: [[[&amp;<span class="built_in">str</span>; <span class="number">100</span>]; <span class="number">20</span>]; <span class="number">5</span>];</span><br><span class="line">    d3 = [[[<span class="string">&quot;ok&quot;</span>; <span class="number">100</span>]; <span class="number">20</span>]; <span class="number">5</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;value d3[3][11][35] is &#123;&#125;&quot;</span>, d3[<span class="number">3</span>][<span class="number">11</span>][<span class="number">35</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value is <span class="number">6</span></span><br><span class="line">value d3[<span class="number">3</span>][<span class="number">11</span>][<span class="number">35</span>] is ok</span><br></pre></td></tr></table></figure>
<h2 id="vectors"><a class="markdownIt-Anchor" href="#vectors">#</a> Vectors</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// collection of elements with the same data type</span></span><br><span class="line">    <span class="comment">// elements are sorted in order</span></span><br><span class="line">    <span class="comment">// arrays have a fixed size that must be known at compile time</span></span><br><span class="line">    <span class="comment">// because array data is stored on the stack</span></span><br><span class="line">    <span class="comment">// vectors can dynamically grow and shrink</span></span><br><span class="line">    <span class="comment">// by adding / removing items</span></span><br><span class="line">    <span class="comment">// vector data is stored in heap memory</span></span><br><span class="line">    <span class="comment">// therefore you need to handle ownership and borrowing</span></span><br><span class="line">    <span class="comment">// vectors = mutable size arrays</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> letters: <span class="built_in">Vec</span>&lt;<span class="built_in">char</span>&gt; = <span class="built_in">vec!</span>[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;letters are &#123;:?&#125;&quot;</span>, letters);</span><br><span class="line">    <span class="keyword">let</span> first_letter = letters[<span class="number">0</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_letter is &#123;&#125;&quot;</span>, first_letter);</span><br><span class="line">    <span class="comment">// add value to vector</span></span><br><span class="line">    letters.push(<span class="string">&#x27;d&#x27;</span>);</span><br><span class="line">    letters.push(<span class="string">&#x27;e&#x27;</span>);</span><br><span class="line">    letters.push(<span class="string">&#x27;f&#x27;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;letters are &#123;:?&#125;&quot;</span>, letters);</span><br><span class="line">    <span class="comment">// remove last value</span></span><br><span class="line">    letters.pop();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;letters are &#123;:?&#125;&quot;</span>, letters);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> numbers: <span class="built_in">Vec</span>&lt;<span class="built_in">i32</span>&gt; = <span class="built_in">vec!</span>[<span class="number">11</span>, <span class="number">22</span>, <span class="number">44</span>];</span><br><span class="line">    numbers[<span class="number">2</span>] = <span class="number">33</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;numbers is &#123;&#125;&quot;</span>, numbers[<span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">let</span> words: <span class="built_in">Vec</span>&lt;&amp;<span class="built_in">str</span>&gt;;</span><br><span class="line">    words = <span class="built_in">vec!</span>[<span class="string">&quot;ok&quot;</span>; <span class="number">2</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;words are &#123;:?&#125;&quot;</span>, words);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> ints = <span class="built_in">vec!</span>[<span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>];</span><br><span class="line">    <span class="keyword">let</span> length: <span class="built_in">usize</span> = ints.len();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;length is &#123;&#125;&quot;</span>, length);</span><br><span class="line">    <span class="keyword">let</span> mem_size_byte = std::mem::size_of_val(&amp;ints);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;mem_size_byte is &#123;&#125;&quot;</span>, mem_size_byte);</span><br><span class="line">    <span class="comment">// slice from vector</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> slice: &amp;[<span class="built_in">i32</span>] = &amp;ints;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;slice is &#123;:?&#125;&quot;</span>, slice);</span><br><span class="line">    slice = &amp;ints[<span class="number">2</span>..<span class="number">5</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;slice is &#123;:?&#125;&quot;</span>, slice);</span><br><span class="line">    <span class="comment">// iterate over vector</span></span><br><span class="line">    <span class="keyword">for</span> it <span class="keyword">in</span> ints.iter() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;it is &#123;&#125;&quot;</span>, it);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// mutate vector items while iterating</span></span><br><span class="line">    <span class="keyword">for</span> it <span class="keyword">in</span> ints.iter_mut() &#123;</span><br><span class="line">        <span class="comment">// dereference the pointer to get and set value (*it)</span></span><br><span class="line">        *it *= *it;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;ints is &#123;:?&#125;&quot;</span>, ints);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">letters are [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">first_letter is a</span><br><span class="line">letters are [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;f&#x27;</span>]</span><br><span class="line">letters are [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>]</span><br><span class="line">numbers is <span class="number">33</span></span><br><span class="line">words is [<span class="string">&quot;ok&quot;</span>, <span class="string">&quot;ok&quot;</span>]</span><br><span class="line">length is <span class="number">6</span></span><br><span class="line">mem_size_byte is <span class="number">24</span></span><br><span class="line">slice is [<span class="number">22</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>, <span class="number">77</span>]</span><br><span class="line">slice is [<span class="number">44</span>, <span class="number">55</span>, <span class="number">66</span>]</span><br><span class="line">it is <span class="number">22</span></span><br><span class="line">it is <span class="number">33</span></span><br><span class="line">it is <span class="number">44</span></span><br><span class="line">it is <span class="number">55</span></span><br><span class="line">it is <span class="number">66</span></span><br><span class="line">it is <span class="number">77</span></span><br><span class="line">ints is [<span class="number">484</span>, <span class="number">1089</span>, <span class="number">1936</span>, <span class="number">3025</span>, <span class="number">4356</span>, <span class="number">5929</span>]</span><br></pre></td></tr></table></figure>
<h2 id="tuples"><a class="markdownIt-Anchor" href="#tuples">#</a> Tuples</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// used to group related items of mixed data types</span></span><br><span class="line">    <span class="comment">// can have max 12 mixed type values</span></span><br><span class="line">    <span class="comment">// adding more values and it will no longer be a tuple type</span></span><br><span class="line">    <span class="keyword">let</span> a_tuple: (&amp;<span class="built_in">str</span>, <span class="built_in">u8</span>, <span class="built_in">char</span>) = (<span class="string">&quot;ok&quot;</span>, <span class="number">0</span>, <span class="string">&#x27;d&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> first_item = a_tuple.<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_item is &#123;&#125;&quot;</span>, first_item);</span><br><span class="line">    <span class="comment">// mutate a tuple</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> b_tuple = (<span class="string">&quot;ok&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    b_tuple.<span class="number">0</span> = <span class="string">&quot;ko&quot;</span>;</span><br><span class="line">    b_tuple.<span class="number">1</span> += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;b_tuple.1 is &#123;&#125;&quot;</span>, b_tuple.<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// destructure a tuple</span></span><br><span class="line">    <span class="keyword">let</span> c_tuple = (<span class="string">&quot;en&quot;</span>, <span class="string">&quot;US&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> (language, country, code) = c_tuple;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;language is: &#123;&#125;\ncountry is: &#123;&#125;\ncode is: &#123;&#125;&quot;</span>,</span><br><span class="line">        language, country, code</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">first_item is ok</span><br><span class="line">b_tuple.<span class="number">1</span> is <span class="number">1</span></span><br><span class="line">language is: en</span><br><span class="line">country is: US</span><br><span class="line">code is: <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="functions"><a class="markdownIt-Anchor" href="#functions">#</a> Functions</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    be_polite();</span><br><span class="line">    <span class="comment">// inferred types for y and z are the ones used as parameters of add()</span></span><br><span class="line">    <span class="comment">// to be clear, if you do not declare a specific type for variables, these variables will assume the type of the arguments of the function where first used</span></span><br><span class="line">   <span class="comment">// remember, by the default inferred type is i32 for integers</span></span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">12</span>;</span><br><span class="line">    <span class="keyword">let</span> z = <span class="number">34</span>;</span><br><span class="line">    <span class="comment">// now y and z are considered u8 type because this is how they are first used as function arguments</span></span><br><span class="line">    add(y, z);</span><br><span class="line">    <span class="comment">// passing later y and z to another fn with different param types will panic</span></span><br><span class="line">    <span class="comment">// guess_number(z) // -&gt; expects a i32 not a u8</span></span><br><span class="line">    <span class="comment">// need for explicit cast:</span></span><br><span class="line">    guess_number(y <span class="keyword">as</span> <span class="built_in">i32</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">be_polite</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Greetings, pleased to meet you.&quot;</span>);</span><br><span class="line">    guess_number(<span class="number">25</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">guess_number</span></span>(number: <span class="built_in">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Indeed, &#123;&#125; is the correct answer&quot;</span>, number)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">add</span></span>(a: <span class="built_in">u8</span>, b: <span class="built_in">u8</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> sum = a + b;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;sum is &#123;&#125;&quot;</span>, sum)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Greetings, pleased to meet you.</span><br><span class="line">Indeed, <span class="number">25</span> is the correct answer</span><br><span class="line">sum is <span class="number">46</span></span><br><span class="line">Indeed, <span class="number">12</span> is the correct answer</span><br></pre></td></tr></table></figure>
<h2 id="statements-and-expressions"><a class="markdownIt-Anchor" href="#statements-and-expressions">#</a> Statements and expressions</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// Statement performs an action without returning a value</span></span><br><span class="line">    <span class="comment">// statements end with a semicolon: a = 6;</span></span><br><span class="line">    <span class="comment">// an expression evaluates to a resulting value</span></span><br><span class="line">    <span class="comment">// expressions do NOT end with a semicolon: 3 + 4 which evaluates to 7</span></span><br><span class="line">    <span class="comment">// adding a semicolon to an expressions transforms it into an statement</span></span><br><span class="line">    <span class="comment">// expressions are used as parts of statements: let total = r + c;\n\t&#123;&#125;\n\t&#123;&#125;&quot;,</span></span><br><span class="line">    <span class="comment">// where &quot;r + c&quot; is an expression and &quot;let total = r + c;&quot; is a statement</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;expression 4 + 5 evaluates to: &#123;&#125;&quot;</span>, <span class="number">4</span> + <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">expression <span class="number">4</span> + <span class="number">5</span> evaluates to: <span class="number">9</span></span><br></pre></td></tr></table></figure>
<h2 id="function-return-type"><a class="markdownIt-Anchor" href="#function-return-type">#</a> Function return type</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> result = square(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">    <span class="keyword">let</span> result_tuple = triple(<span class="number">33</span>);</span><br><span class="line">    <span class="keyword">let</span> (input, result1) = result_tuple;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;result_tuple is &#123;:?&#125;&quot;</span>, result_tuple);</span><br><span class="line">    <span class="comment">// &#123;:?&#125; ==&gt; debug formatting</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;input &#123;&#125; evaluates to &#123;&#125;&quot;</span>, input, result1);</span><br><span class="line">    <span class="keyword">let</span> nothing: () = does_not_return();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;nothing (union data type) is &#123;:?&#125;&quot;</span>, nothing)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">square</span></span>(number: <span class="built_in">i32</span>) -&gt; <span class="built_in">i32</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;processing square(&#123;&#125;)&quot;</span>, number);</span><br><span class="line">    <span class="comment">// expression returning a value</span></span><br><span class="line">    number * number</span><br><span class="line">    <span class="comment">// &quot; return  number * number;&quot; is also valid syntax</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// multiple returns with tuples</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">triple</span></span>(number: <span class="built_in">i32</span>) -&gt; (<span class="built_in">i32</span>, <span class="built_in">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;tripling the number: &#123;&#125;&quot;</span>, number);</span><br><span class="line">    <span class="keyword">let</span> input = number;</span><br><span class="line">    <span class="keyword">let</span> result = number * <span class="number">3</span>;</span><br><span class="line">    (input, result)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// union data type</span></span><br><span class="line"><span class="comment">// used when no meaningful values returned by a fn</span></span><br><span class="line"><span class="comment">// represented by empty ()</span></span><br><span class="line"><span class="comment">// it is optional</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">does_not_return</span></span>() -&gt; () &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;ain&#x27;t returning nuthing!&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">processing square(<span class="number">3</span>)</span><br><span class="line">result is <span class="number">9</span></span><br><span class="line">tripling the number: <span class="number">33</span></span><br><span class="line">result_tuple is (<span class="number">33</span>, <span class="number">99</span>)</span><br><span class="line">input <span class="number">33</span> evaluates to <span class="number">99</span></span><br><span class="line">ain<span class="symbol">&#x27;t</span> returning nuthing!</span><br><span class="line">nothing (union data type) is ()</span><br></pre></td></tr></table></figure>
<h2 id="closures"><a class="markdownIt-Anchor" href="#closures">#</a> Closures</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// closures are anonymous functions that have access to variables in the enclosing scope</span></span><br><span class="line">    <span class="comment">// long form</span></span><br><span class="line">    <span class="keyword">let</span> double = |n1: <span class="built_in">u8</span>| -&gt; <span class="built_in">u8</span> &#123; n1 * <span class="number">2</span> &#125;;</span><br><span class="line">    <span class="comment">// short form</span></span><br><span class="line">    <span class="keyword">let</span> triple = |n1| n1 * <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">const</span> DAYS_IN_YEAR: <span class="built_in">u16</span> = <span class="number">365</span>;</span><br><span class="line">    <span class="comment">// referencing variable from enclosing scope</span></span><br><span class="line">    <span class="keyword">let</span> quadruple_than_add_number_days_in_year = |n1: <span class="built_in">i32</span>| n1 * <span class="number">4</span> + (DAYS_IN_YEAR <span class="keyword">as</span> <span class="built_in">i32</span>);</span><br><span class="line">    <span class="keyword">const</span> FACTOR: <span class="built_in">i32</span> = <span class="number">22</span>;</span><br><span class="line">    <span class="keyword">let</span> multiple_by_22 = |x| FACTOR * x;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, double(<span class="number">11</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, triple(<span class="number">99</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, quadruple_than_add_number_days_in_year(<span class="number">44</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, multiple_by_22(<span class="number">5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">22</span></span><br><span class="line"><span class="number">297</span></span><br><span class="line"><span class="number">541</span></span><br><span class="line"><span class="number">110</span></span><br></pre></td></tr></table></figure>
<h2 id="celsius-to-fahrenheit-converter"><a class="markdownIt-Anchor" href="#celsius-to-fahrenheit-converter">#</a> Celsius to Fahrenheit converter</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> (celsius, farenheit) = to_farenheit(<span class="number">40.0</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; celsius is &#123;&#125; farenheit&quot;</span>, celsius, farenheit);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(farenheit, <span class="number">104.0</span>);</span><br><span class="line">    <span class="comment">// will not execute if assertion fails</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;test passed&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">to_farenheit</span></span>(celsius: <span class="built_in">f32</span>) -&gt; (<span class="built_in">f32</span>, <span class="built_in">f32</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> farenheit = (<span class="number">1.8</span> * celsius) + <span class="number">32.0</span>;</span><br><span class="line">    <span class="comment">// return statement (no semicolon)</span></span><br><span class="line">    (celsius, farenheit)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="conditional-execution"><a class="markdownIt-Anchor" href="#conditional-execution">#</a> Conditional execution</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">if</span> x == <span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x is 5&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// if expressions (equivalent of ternary operator in JS/Node.js)</span></span><br><span class="line">    <span class="keyword">let</span> x_odd = <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> &#123; <span class="string">&quot;odd&quot;</span> &#125; <span class="keyword">else</span> &#123; <span class="string">&quot;even&quot;</span> &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x_odd is &#123;&#125;&quot;</span>, x_odd);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">x is <span class="number">5</span></span><br><span class="line">x_odd is even</span><br></pre></td></tr></table></figure>
<h2 id="multiple-conditionals-ifelse-if"><a class="markdownIt-Anchor" href="#multiple-conditionals-ifelse-if">#</a> Multiple conditionals (if/else if)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> x = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">if</span> x &gt; y &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x is greater than  y&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> x &lt; y &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x is less than y&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x is equal to y&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x is less than y</span><br></pre></td></tr></table></figure>
<h2 id="loop-assignment"><a class="markdownIt-Anchor" href="#loop-assignment">#</a> Loop assignment</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// infinite loop</span></span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> count == <span class="number">10</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;count is &#123;&#125;&quot;</span>, count);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\nAfter first loop.\n&quot;</span>);</span><br><span class="line">    <span class="comment">// returning a value from loop expression</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> count == <span class="number">15</span> &#123;</span><br><span class="line">            <span class="comment">// returning a value with break statement</span></span><br><span class="line">            <span class="keyword">break</span> count * <span class="number">20</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;count is &#123;&#125;&quot;</span>, count);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\nAfter second loop, result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">count is <span class="number">1</span></span><br><span class="line">count is <span class="number">2</span></span><br><span class="line">count is <span class="number">3</span></span><br><span class="line">count is <span class="number">4</span></span><br><span class="line">count is <span class="number">5</span></span><br><span class="line">count is <span class="number">6</span></span><br><span class="line">count is <span class="number">7</span></span><br><span class="line">count is <span class="number">8</span></span><br><span class="line">count is <span class="number">9</span></span><br><span class="line">count is <span class="number">10</span></span><br><span class="line">After first <span class="keyword">loop</span>.</span><br><span class="line">count is <span class="number">11</span></span><br><span class="line">count is <span class="number">12</span></span><br><span class="line">count is <span class="number">13</span></span><br><span class="line">count is <span class="number">14</span></span><br><span class="line">count is <span class="number">15</span></span><br><span class="line">After second <span class="keyword">loop</span>, result is <span class="number">300</span></span><br></pre></td></tr></table></figure>
<h2 id="while-loops"><a class="markdownIt-Anchor" href="#while-loops">#</a> While loops</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> letters: [<span class="built_in">char</span>; <span class="number">5</span>] = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line">    <span class="keyword">while</span> count &lt; letters.len() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;letter[&#123;&#125;] is &#123;&#125;&quot;</span>, count, letters[count]);</span><br><span class="line">        count += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// contrary to loop expressions, the break statement in while loop cannot return a value</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">letter[<span class="number">0</span>] is a</span><br><span class="line">letter[<span class="number">1</span>] is b</span><br><span class="line">letter[<span class="number">2</span>] is c</span><br><span class="line">letter[<span class="number">3</span>] is d</span><br><span class="line">letter[<span class="number">4</span>] is e</span><br></pre></td></tr></table></figure>
<h2 id="for-loops"><a class="markdownIt-Anchor" href="#for-loops">#</a> For loops</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> message = [<span class="string">&#x27;m&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;g&#x27;</span>, <span class="string">&#x27;e&#x27;</span>];</span><br><span class="line">    <span class="comment">/* Iterator</span></span><br><span class="line"><span class="comment">    - implements logic to iterate over each item in a collection</span></span><br><span class="line"><span class="comment">    - next() method returns the next item in a sequence</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> message.iter() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;current item is &#123;&#125;&quot;</span>, item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">// To also get the indexes when iterating</span></span><br><span class="line">    <span class="comment">// enumerate() returns a tuple with index/item_reference pair</span></span><br><span class="line">    <span class="comment">// To get the item use &amp;item</span></span><br><span class="line">    <span class="comment">// because the iterator gives back a reference (&amp;&lt;NAME&gt;)</span></span><br><span class="line">    <span class="comment">// Adding the &amp; (borrow operator) allows you to</span></span><br><span class="line">    <span class="comment">// borrow the variable without</span></span><br><span class="line">    <span class="comment">// taking ownership (see borrowing section)</span></span><br><span class="line">    <span class="comment">// - then when you use the variable in the for loop scope, you access the value</span></span><br><span class="line">    <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> message.iter().enumerate() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;item &#123;&#125; is &#123;&#125;&quot;</span>, index, item);</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">&#x27;e&#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="comment">// iterating over a range of numbers</span></span><br><span class="line">    <span class="comment">// excludes the end value of the range</span></span><br><span class="line">    <span class="keyword">for</span> number <span class="keyword">in</span> <span class="number">0</span>..<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is &#123;&#125;&quot;</span>, number);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">current item is m</span><br><span class="line">current item is e</span><br><span class="line">current item is s</span><br><span class="line">current item is s</span><br><span class="line">current item is a</span><br><span class="line">current item is g</span><br><span class="line">current item is e</span><br><span class="line">item <span class="number">0</span> is m</span><br><span class="line">item <span class="number">1</span> is e</span><br><span class="line">number is <span class="number">0</span></span><br><span class="line">number is <span class="number">1</span></span><br><span class="line">number is <span class="number">2</span></span><br><span class="line">number is <span class="number">3</span></span><br><span class="line">number is <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h2 id="nested-loops"><a class="markdownIt-Anchor" href="#nested-loops">#</a> Nested loops</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> matrix = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]];</span><br><span class="line">    <span class="comment">// reading from matrix</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> matrix.iter() &#123;</span><br><span class="line">        <span class="keyword">for</span> number <span class="keyword">in</span> row.iter() &#123;</span><br><span class="line">            <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;\t&quot;</span>, number);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;=======================&quot;</span>);</span><br><span class="line">    <span class="comment">// modifying values from mutable matrix</span></span><br><span class="line">    <span class="comment">// iter_mut() returns mutable references</span></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> matrix.iter_mut() &#123;</span><br><span class="line">        <span class="keyword">for</span> number <span class="keyword">in</span> row.iter_mut() &#123;</span><br><span class="line">            <span class="comment">// dereference with asterisk to get the value itself</span></span><br><span class="line">            *number += <span class="number">20</span>;</span><br><span class="line">            <span class="built_in">print!</span>(<span class="string">&quot;&#123;&#125;\t&quot;</span>, number);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">4</span> <span class="number">5</span> <span class="number">6</span></span><br><span class="line"><span class="number">7</span> <span class="number">8</span> <span class="number">9</span></span><br><span class="line">=======================</span><br><span class="line"><span class="number">21</span> <span class="number">22</span> <span class="number">23</span></span><br><span class="line"><span class="number">24</span> <span class="number">25</span> <span class="number">26</span></span><br><span class="line"><span class="number">27</span> <span class="number">28</span> <span class="number">29</span></span><br></pre></td></tr></table></figure>
<h2 id="guessing-game"><a class="markdownIt-Anchor" href="#guessing-game">#</a> Guessing game</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::Rng;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Guess a number&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Please enter your guess:&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> secret_number = rand::thread_rng().gen_range(<span class="number">1</span>, <span class="number">101</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The secret number is &#123;&#125;&quot;</span>, secret_number);</span><br><span class="line">    <span class="comment">// &quot;::&quot; is used for associated functions of a given type (equiv to static methods in OOP - more on this later)</span></span><br><span class="line">    <span class="comment">// String::new() creates an empty string of type String    (growable UTF-8 encoded text)</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> guess = <span class="built_in">String</span>::new();</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        std::io::stdin, if you don&#x27;t use the import at the top of file</span></span><br><span class="line"><span class="comment">        std::io::stdin() returns an instance of a std::io::Stdin type</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    io::stdin()</span><br><span class="line">        .read_line(&amp;<span class="keyword">mut</span> guess)</span><br><span class="line">        .expect(<span class="string">&quot;Failed to read line&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;You guess: &#123;&#125;&quot;</span>, guess);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="basic-statistics"><a class="markdownIt-Anchor" href="#basic-statistics">#</a> Basic statistics</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> numbers = [<span class="number">1</span>, <span class="number">9</span>, -<span class="number">2</span>, <span class="number">0</span>, <span class="number">23</span>, <span class="number">20</span>, -<span class="number">7</span>, <span class="number">13</span>, <span class="number">37</span>, <span class="number">20</span>, <span class="number">56</span>, -<span class="number">18</span>, <span class="number">20</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> max: <span class="built_in">i32</span> = numbers[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> min: <span class="built_in">i32</span> = numbers[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> mean: <span class="built_in">f64</span> = <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> numbers.iter() &#123;</span><br><span class="line">        mean += *item <span class="keyword">as</span> <span class="built_in">f64</span>;</span><br><span class="line">        <span class="keyword">if</span> *item &gt; max &#123;</span><br><span class="line">            max = *item;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> *item &lt; min &#123;</span><br><span class="line">            min = *item;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    mean /= numbers.len() <span class="keyword">as</span> <span class="built_in">f64</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(max, <span class="number">56</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(min, -<span class="number">18</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(mean, <span class="number">12.5</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Test passed!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Test passed!</span><br></pre></td></tr></table></figure>
<h2 id="scope"><a class="markdownIt-Anchor" href="#scope">#</a> Scope</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> planet = <span class="string">&quot;Dunya&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> <span class="literal">true</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> planet = <span class="string">&quot;Jupiter&quot;</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;planet is &#123;&#125;&quot;</span>, planet);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;planet is &#123;&#125;&quot;</span>, planet);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">planet is Jupiter</span><br><span class="line">planet is Dunya</span><br></pre></td></tr></table></figure>
<h2 id="variable-mutability"><a class="markdownIt-Anchor" href="#variable-mutability">#</a> Variable mutability</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> car = <span class="string">&quot;Mitsubishi&quot;</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car is a &#123;&#125;&quot;</span>, car);</span><br><span class="line">    <span class="comment">// code block, has its own scope</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// variable shadowing</span></span><br><span class="line">        <span class="keyword">let</span> car = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;car is a &#123;&#125;&quot;</span>, car);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car is a &#123;&#125;&quot;</span>, car);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">car is a Mitsubishi</span><br><span class="line">car is a <span class="number">1</span></span><br><span class="line">car is a Mitsubishi</span><br></pre></td></tr></table></figure>
<h2 id="stack-and-heap-memory"><a class="markdownIt-Anchor" href="#stack-and-heap-memory">#</a> Stack and heap memory</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;=== STACK ====\n&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- values stored in sequential order of insertion&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- data added in LIFO (last in first out)&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- stores variables - pushing values on the stack&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- also holds info for function execution&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;- stack have very fast access because no guessing where to put data, it will be on top&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- stacks are limited in size&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- all data in stack must have a known fixed size\n&quot;</span>);</span><br><span class="line">    func1();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;func1 done&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;pop variable y off the stack&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;pop variable z off the stack\n&quot;</span>);</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;\n\n=== HEAP ====\n&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- adding data to heap, search for large enough place in memory to store data&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- marks memory spot as being used (allocating) and put data in it&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- accessing data in heap is more complex than the stack because the stack allocates anywhere in available memory&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- slower than stack&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- dynamically add and remove data&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\n\n=== POINTER ====\n&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- data type that stores a memory address&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- pointers have a fixed size so can be stored on the stack&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;- adding and accessing data on the heap is done through pointers (addresses in memory)&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func1</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;func1 executing...&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> y = <span class="number">3.11</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;push variable y = &#123;&#125; onto the stack&quot;</span>, y);</span><br><span class="line">    <span class="keyword">let</span> z = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;push variable z = &#123;&#125; onto the stack&quot;</span>, z);</span><br><span class="line">    func2();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;func2 done&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;pop variable arr off the stack&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func2</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;func2 executing...&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> arr = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;push variable arr = &#123;:?&#125; onto the stack&quot;</span>, arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">=== STACK ====</span><br><span class="line">- values stored <span class="keyword">in</span> sequential order of insertion</span><br><span class="line">- data added <span class="keyword">in</span> LIFO (last <span class="keyword">in</span> first out)</span><br><span class="line">- stores variables - pushing values on the stack</span><br><span class="line">- also holds info <span class="keyword">for</span> function execution</span><br><span class="line">- stack have very fast access because no guessing <span class="keyword">where</span> to put data, it will be on top</span><br><span class="line">- stacks are limited <span class="keyword">in</span> size</span><br><span class="line">- all data <span class="keyword">in</span> stack must have a known fixed size</span><br><span class="line">func1 executing...</span><br><span class="line">push variable y = <span class="number">3.11</span> onto the stack</span><br><span class="line">push variable z = <span class="number">5</span> onto the stack</span><br><span class="line">func2 executing...</span><br><span class="line">push variable arr = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] onto the stack</span><br><span class="line">func2 done</span><br><span class="line">pop variable arr off the stack</span><br><span class="line">func1 done</span><br><span class="line">pop variable y off the stack</span><br><span class="line">pop variable z off the stack</span><br><span class="line">=== HEAP ====</span><br><span class="line">- adding data to heap, search <span class="keyword">for</span> large enough place <span class="keyword">in</span> memory to store data</span><br><span class="line">- marks memory spot <span class="keyword">as</span> being used (allocating) and put data <span class="keyword">in</span> it</span><br><span class="line">- accessing data <span class="keyword">in</span> heap is more complex than the stack because the stack allocates anywhere <span class="keyword">in</span> available memory</span><br><span class="line">- slower than stack</span><br><span class="line">- dynamically add and remove data</span><br><span class="line">=== POINTER ====</span><br><span class="line">- data <span class="class"><span class="keyword">type</span> <span class="title">that</span></span> stores a memory address</span><br><span class="line">- pointers have a fixed size so can be stored on the stack</span><br><span class="line">- adding and accessing data on the heap is done through pointers (addresses <span class="keyword">in</span> memory)</span><br></pre></td></tr></table></figure>
<h2 id="strings"><a class="markdownIt-Anchor" href="#strings">#</a> Strings</h2>
<p>Rust has two kinds of string types.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// Two types of string representation:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// - string literals: hard coded into the executable.</span></span><br><span class="line">    <span class="comment">// these are immutable and must be known before compilation</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// - String type: allocated data on the heap, mutable and dynamically generated at runtime</span></span><br><span class="line">    <span class="comment">// string literal stored on heap</span></span><br><span class="line">    <span class="comment">// String::from() creates a String type from a string literal</span></span><br><span class="line">    <span class="comment">// the sequence [m,a,r,s] will get stored on the heap</span></span><br><span class="line">    <span class="comment">// to access the string stored on heap, program holds a pointer to it on the stack (message variable)</span></span><br><span class="line">    <span class="comment">// that pointer on the stack includes first char memory address, length of string and the capacity so you know how much memory s allocated for it on the heap</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> message = <span class="built_in">String</span>::from(<span class="string">&quot;Jupiter&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;message is &#123;&#125;&quot;</span>, message);</span><br><span class="line">    <span class="comment">// append string to original</span></span><br><span class="line">    <span class="comment">// if more memory need than capacity, pointer address updated as well as length and capacity to reflect new location in memory</span></span><br><span class="line">    message.push_str(<span class="string">&quot; is smoke and mirrors&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;message is &#123;&#125;&quot;</span>, message);</span><br><span class="line">    <span class="comment">// pushing a char</span></span><br><span class="line">    message.push(<span class="string">&#x27;!&#x27;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;message is &#123;&#125;&quot;</span>, message);</span><br><span class="line">   <span class="comment">// get length</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;message lenght is &#123;&#125;&quot;</span>, message.len());</span><br><span class="line">   <span class="comment">// get capacity in bytes</span></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;message capacity is &#123;&#125;&quot;</span>, message.capacity());</span><br><span class="line">  <span class="comment">// check if empty</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;Is empty: &#123;&#125;&quot;</span>, message.is_empty());</span><br><span class="line">  <span class="comment">// substring search</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;Contains smoke: &#123;&#125;&quot;</span>, message.contains(<span class="string">&quot;smoke&quot;</span>));</span><br><span class="line">  <span class="comment">// replace substring</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;message is &#123;&#125;&quot;</span>, message.replace(<span class="string">&quot;smoke&quot;</span>,<span class="string">&quot;gaz&quot;</span>));</span><br><span class="line">  <span class="comment">// loop over words in string (split by white space)</span></span><br><span class="line">  <span class="keyword">for</span> word <span class="keyword">in</span> message.split_whitespace() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;word is &#123;&#125;&quot;</span>, word);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// create string with capacity</span></span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">mut</span> s = <span class="built_in">String</span>::with_capacity(<span class="number">4</span>); <span class="comment">// 4 bytes capacity</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;s capacity is  &#123;&#125; bytes&quot;</span>, s.capacity());</span><br><span class="line">  <span class="comment">// 1 byte consumed</span></span><br><span class="line">  <span class="comment">// Latin alphabet letters usually have 1 byte size</span></span><br><span class="line">  <span class="comment">// remember Unicode supports 4-byte characters</span></span><br><span class="line">  s.push(<span class="string">&#x27;Q&#x27;</span>);</span><br><span class="line">  s.push(<span class="string">&#x27;W&#x27;</span>); <span class="comment">// 1 byte consumed</span></span><br><span class="line">  s.push_str(<span class="string">&quot;er&quot;</span>); <span class="comment">// 2 bytes consumed</span></span><br><span class="line">  <span class="comment">// exceeding string capacity (automagically increased and reallocation in memory)</span></span><br><span class="line">  s.push(<span class="string">&#x27;T&#x27;</span>); <span class="comment">// 1 byte consumed</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;s capacity is  now &#123;&#125; bytes&quot;</span>, s.capacity());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">message is Jupiter</span><br><span class="line">message is Jupiter is smoke and mirrors</span><br><span class="line">message is Jupiter is smoke and mirrors!</span><br><span class="line">message lenght is <span class="number">29</span></span><br><span class="line">message capacity is <span class="number">56</span></span><br><span class="line">Is empty: <span class="literal">false</span></span><br><span class="line">Contains smoke: <span class="literal">true</span></span><br><span class="line">message is Jupiter is gaz and mirrors!</span><br><span class="line">word is Jupiter</span><br><span class="line">word is is</span><br><span class="line">word is smoke</span><br><span class="line">word is and</span><br><span class="line">word is mirrors!</span><br><span class="line">s capacity is  <span class="number">4</span> bytes</span><br><span class="line">s capacity is  now <span class="number">8</span> bytes</span><br></pre></td></tr></table></figure>
<h2 id="ownership"><a class="markdownIt-Anchor" href="#ownership">#</a> Ownership</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">/* need to clean up allocated memory blocks no longer needed</span></span><br><span class="line"><span class="comment">    in C/C++: malloc() and free() for manual memory mngt</span></span><br><span class="line"><span class="comment">    other approach is garbage collection which is automatic */</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    Rust uses OWNERSHIP system:</span></span><br><span class="line"><span class="comment">       - variables are responsible for freeing their own resources</span></span><br><span class="line"><span class="comment">       - every value is owned by only one variable at a time</span></span><br><span class="line"><span class="comment">       - when owning variable goes out of scope the value is dropped</span></span><br><span class="line"><span class="comment">       - there are ways to transfer ownership of a value from one variable to another</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">let</span> outer_planet: <span class="built_in">String</span>;</span><br><span class="line">    <span class="keyword">let</span> outer_galaxy: <span class="built_in">String</span>;</span><br><span class="line">    <span class="keyword">let</span> outer_planet_position: <span class="built_in">i32</span>;</span><br><span class="line">    <span class="comment">// inner code block scope</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> inner_planet = <span class="built_in">String</span>::from(<span class="string">&quot;Mercury&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;inner_planet is &#123;&#125;&quot;</span>, inner_planet);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        because ownership mandates only one owner per value/data,</span></span><br><span class="line"><span class="comment">         - inner_planet will no longer point to the String value on the heap</span></span><br><span class="line"><span class="comment">         - transferring ownership from one variable to another is called a &quot;move&quot; in Rust</span></span><br><span class="line"><span class="comment">         - this means that NO shallow copy of data STORED ON THE HEAP in Rust</span></span><br><span class="line"><span class="comment">            (shallow copy = several variables pointing to same data in memory)</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// transferring ownership</span></span><br><span class="line">        outer_planet = inner_planet;</span><br><span class="line">        <span class="comment">// can no longer use inner_planet variable after the move of ownership of string data</span></span><br><span class="line">        <span class="comment">// println!(&quot;inner_planet is &#123;&#125;&quot;, inner_planet); // =&gt; will panic</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> inner_galaxy = <span class="built_in">String</span>::from(<span class="string">&quot;Milky Way&quot;</span>);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;inner_galaxy is &#123;&#125;&quot;</span>, inner_galaxy);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// to duplicate data stored on the heap, creates a deep copy of the String data</span></span><br><span class="line">        outer_galaxy = inner_galaxy.clone();</span><br><span class="line">        inner_galaxy.clear();</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;inner_galaxy is now: &#123;&#125;&quot;</span>, inner_galaxy);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;outer_galaxy is &#123;&#125;&quot;</span>, outer_galaxy);</span><br><span class="line">        <span class="comment">// integer data types live on the stack</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> inner_planet_position = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;inner_planet_position is &#123;&#125;&quot;</span>, inner_planet_position);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        a copy of the integer data is created for the outer_planet_position</span></span><br><span class="line"><span class="comment">        - ownership is respected (no shallow copy - only one variable per value at a time)</span></span><br><span class="line"><span class="comment">        - generally STACK-ONLY data types (ie fixed size) are implicitly copied</span></span><br><span class="line"><span class="comment">            when variable containing them is assigned to another variable</span></span><br><span class="line"><span class="comment">        - data types stored om stack implement the trait that allow them to be copied rather than moved</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        outer_planet_position = inner_planet_position;</span><br><span class="line">        inner_planet_position += <span class="number">4</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;inner_planet_position is &#123;&#125;&quot;</span>, inner_planet_position);</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;outer_planet_position is &#123;&#125;&quot;</span>, outer_planet_position);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\nouter_planet is &#123;&#125;&quot;</span>, outer_planet);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;outer_galaxy is &#123;&#125;&quot;</span>, outer_galaxy);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;outer_planet_position is &#123;&#125;&quot;</span>, outer_planet_position);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">inner_planet is Mercury</span><br><span class="line">inner_galaxy is Milky Way</span><br><span class="line">inner_galaxy is now:</span><br><span class="line">outer_galaxy is Milky Way</span><br><span class="line">inner_planet_position is <span class="number">1</span></span><br><span class="line">inner_planet_position is <span class="number">5</span></span><br><span class="line">outer_planet_position is <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>More examples:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> arr_1: [<span class="built_in">u8</span>; <span class="number">2</span>] = [<span class="number">33</span>, <span class="number">66</span>];</span><br><span class="line">    <span class="comment">// ////////////////</span></span><br><span class="line">    <span class="comment">// fixed-length types (stored on the stack) are COPIED</span></span><br><span class="line">    <span class="comment">// ////////////////</span></span><br><span class="line">    <span class="keyword">let</span> arr_2 = arr_1;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;arr_1 is &#123;:?&#125;&quot;</span>, arr_1);</span><br><span class="line">    arr_1 = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;arr_1 is now &#123;:?&#125;&quot;</span>, arr_1);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;arr_2 is &#123;:?&#125;&quot;</span>, arr_2);</span><br><span class="line">    <span class="comment">// ////////////////</span></span><br><span class="line">    <span class="comment">// mutable-length type values move the ownership to new variable</span></span><br><span class="line">    <span class="comment">// ////////////////</span></span><br><span class="line">    <span class="keyword">let</span> vec_1 = <span class="built_in">vec!</span>[<span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line">    <span class="keyword">let</span> vec_2 = vec_1;</span><br><span class="line">    <span class="comment">// can no longer use the variable which ownership has been &quot;moved&quot;</span></span><br><span class="line">    <span class="comment">// println!(&quot;vec_1 is &#123;:?&#125;&quot;, vec_1); // =&gt; wll panic</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;vec_2 is &#123;:?&#125;&quot;</span>, vec_2);</span><br><span class="line">    <span class="comment">// to borrow value owned by a variable without moving ownership,</span></span><br><span class="line">    <span class="comment">// use a reference to that value</span></span><br><span class="line">    <span class="keyword">let</span> vec_4 = <span class="built_in">vec!</span>[<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line">    <span class="comment">// borrowing value using a reference (&amp;&lt;NAME&gt;)</span></span><br><span class="line">    <span class="keyword">let</span> vec_5 = &amp;vec_4;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;vec_4 is &#123;:?&#125;&quot;</span>, vec_4);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;vec_5 is &#123;:?&#125;&quot;</span>, vec_5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Output</span><br><span class="line">arr_1 is [<span class="number">33</span>, <span class="number">66</span>]</span><br><span class="line">arr_1 is now [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">arr_2 is [<span class="number">33</span>, <span class="number">66</span>]</span><br><span class="line">vec_2 is [<span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">vec_4 is [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">vec_5 is [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<h2 id="transferring-ownership-data-stored-on-stack"><a class="markdownIt-Anchor" href="#transferring-ownership-data-stored-on-stack">#</a> Transferring ownership (data stored on STACK)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> rocket_fuel = <span class="number">1</span>;</span><br><span class="line">    process_fuel(rocket_fuel);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rocket_fuel is &#123;&#125;&quot;</span>, rocket_fuel);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - because propellant is i32 so lives on the stack,</span></span><br><span class="line"><span class="comment">    the value passed as argument is COPIED in fn scope</span></span><br><span class="line"><span class="comment">    - to be able to modify the copy inside the function scope, use the mut keyword</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(<span class="keyword">mut</span> propellant: <span class="built_in">i32</span>) &#123;</span><br><span class="line">    <span class="comment">// the copy is modified</span></span><br><span class="line">    propellant += <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant <span class="number">3</span></span><br><span class="line">rocket_fuel is <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="transferring-ownership-data-stored-on-heap"><a class="markdownIt-Anchor" href="#transferring-ownership-data-stored-on-heap">#</a> Transferring ownership (data stored on HEAP)</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> rocket_fuel = <span class="built_in">String</span>::from(<span class="string">&quot;MU-RF&quot;</span>);</span><br><span class="line">    process_fuel(rocket_fuel);</span><br><span class="line">    <span class="comment">// the ownership of the string has moved to propellant variable,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// the following code will panic because rocket_fuel ownership is done so you can no longuer use the variable</span></span><br><span class="line">    <span class="comment">// println!(&quot;rocket_fuel is &#123;&#125;&quot;, rocket_fuel);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    - because propellant is String so lives on the HEAP</span></span><br><span class="line"><span class="comment">    - data stored on heap when passed as argument to function,</span></span><br><span class="line"><span class="comment">    - the function local variable gets a pointer to the data passed</span></span><br><span class="line"><span class="comment">    - and therefore the local function variable gets ownership of the data.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(propellant: <span class="built_in">String</span>) &#123;</span><br><span class="line">    <span class="comment">// propellant takes ownership of the String data stored on the heap</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant MU-RF</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Note:</strong> A thing to remember as a Node.js developer is that variables associated to mutable-length data (aka stored on the heap) do <strong>NOT</strong> contain the data itself but a <strong>pointer to that data</strong> in memory. The pointer is a reference to the data but <strong>NOT</strong> the data itself either, it describes the data and how it can be retrieved.</p>
</blockquote>
<p>To keep the ownership of the string by the rocket_fuel variable, you can clone the data:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> rocket_fuel = <span class="built_in">String</span>::from(<span class="string">&quot;MU-RF&quot;</span>);</span><br><span class="line">    <span class="comment">// ownership of the string his kept by rocket_fuel variable,</span></span><br><span class="line">    <span class="comment">// a clone/copy of the string data is passed as argument</span></span><br><span class="line">    process_fuel( rocket_fuel.clone() );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// no panic because rocket_fuel stills own the string data</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rocket_fuel is &#123;&#125;&quot;</span>, rocket_fuel);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(propellant: <span class="built_in">String</span>) &#123;</span><br><span class="line">    <span class="comment">// propellant takes ownership of the String data clone</span></span><br><span class="line">    <span class="comment">// mutations on the clone of course will not affect the original data (but remember that you will need to declare mut in function signature)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ouput</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant MU-RF</span><br><span class="line">rocket_fuel is MU-RF</span><br></pre></td></tr></table></figure>
<p>If you do not want to copy the data and need the original variable to keep ownership of the data, then you can pass ownership back when the function is done:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> rocket_fuel = <span class="built_in">String</span>::from(<span class="string">&quot;MU-RF&quot;</span>);</span><br><span class="line">    <span class="comment">// of course, you can declare again without mut</span></span><br><span class="line">    rocket_fuel = process_fuel(rocket_fuel);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rocket_fuel is &#123;&#125;&quot;</span>, rocket_fuel);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// notice the mut on the parameter declaration, to be able to mutate the data passed inside the function scope</span></span><br><span class="line"><span class="comment">// notice the String return type and the last line without a semicolon</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(<span class="keyword">mut</span> propellant: <span class="built_in">String</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line"></span><br><span class="line">    propellant.push_str(<span class="string">&quot;-super&quot;</span>);</span><br><span class="line"></span><br><span class="line">    propellant</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ouput</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant MU-RF</span><br><span class="line">rocket_fuel is MU-RF-<span class="keyword">super</span></span><br></pre></td></tr></table></figure>
<h2 id="borrowing"><a class="markdownIt-Anchor" href="#borrowing">#</a> Borrowing</h2>
<p>All this stuff about ownership is great but what if you don’t need to transfer ownership, you just need the data:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// BORROWING: access data without taking ownership</span></span><br><span class="line">    <span class="comment">// create a reference to the variable you want to borrow</span></span><br><span class="line">    <span class="comment">// using borrow operator &quot;&amp;&quot;</span></span><br><span class="line">    <span class="keyword">let</span> rocket_fuel = <span class="built_in">String</span>::from(<span class="string">&quot;MU-RF&quot;</span>);</span><br><span class="line">    <span class="comment">// notice the borrow operator to create a reference</span></span><br><span class="line">    <span class="comment">// the function expects a reference, not a value</span></span><br><span class="line">    <span class="keyword">let</span> length = process_fuel(&amp;rocket_fuel);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rocket_fuel is &#123;&#125;, length: &#123;&#125;&quot;</span>, rocket_fuel,length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// notice the borrow operator in parameter type</span></span><br><span class="line"><span class="comment">// we expect propellant to be a reference to a string,</span></span><br><span class="line"><span class="comment">// not a string value (/pointer to it...)</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(propellant: &amp;<span class="built_in">String</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">    <span class="comment">// propellant is a reference to the variable that points to the string data, to borrow the data</span></span><br><span class="line">    <span class="comment">// again, NO SHALLOW COPY here because propellant borrows the pointer, it does contain the pointer itself (let&#x27;s say that it&#x27;s a pointer to another pointer...)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line">    <span class="keyword">let</span> length = propellant.len();</span><br><span class="line">    length</span><br><span class="line">    <span class="comment">// when the propellant variable goes out of scope at the end of the function,</span></span><br><span class="line">    <span class="comment">// the string data is still on the heap because it remains owned by the original variable (rocket_fuel)</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant MU-RF</span><br><span class="line">rocket_fuel is MU-RF, lenght: <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>In Rust, data will most often be passed by <strong>reference</strong> (borrowed)than by value (ownership transfer). But you still need to know which variable really owns the data.</p>
<h2 id="mutating-borrowed-data"><a class="markdownIt-Anchor" href="#mutating-borrowed-data">#</a> Mutating borrowed data</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// notice it is a mutable variable</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> rocket_fuel = <span class="built_in">String</span>::from(<span class="string">&quot;MU-RF&quot;</span>);</span><br><span class="line">    <span class="comment">// notice we pass a mutable reference (&amp;mut &lt;TYPE&gt;)</span></span><br><span class="line">    <span class="keyword">let</span> length = process_fuel(&amp;<span class="keyword">mut</span> rocket_fuel);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rocket_fuel is &#123;&#125;, length: &#123;&#125;&quot;</span>, rocket_fuel, length);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// notice the &amp;mut in the parameter list</span></span><br><span class="line"><span class="comment">// we expect propellant to be a mutable reference to a String</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_fuel</span></span>(propellant: &amp;<span class="keyword">mut</span> <span class="built_in">String</span>) -&gt; <span class="built_in">usize</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Processing propellant &#123;&#125;&quot;</span>, propellant);</span><br><span class="line">    <span class="comment">// mutating borrowed data</span></span><br><span class="line">    propellant.push_str(<span class="string">&quot;333&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> length = propellant.len();</span><br><span class="line">    length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Processing propellant MU-RF</span><br><span class="line">rocket_fuel is MU-RF333, lenght: <span class="number">8</span></span><br></pre></td></tr></table></figure>
<h2 id="restriction-on-borrowed-data"><a class="markdownIt-Anchor" href="#restriction-on-borrowed-data">#</a> Restriction on borrowed data</h2>
<p>Once you create a mutable reference to a variable, you cannot create other references to it <strong>within that same scope</strong>.</p>
<p>This prevents <strong>data races</strong> which occur when multiple references can access and mutate the same data.</p>
<p>Data races are a common problem when writing programs handling multiple threads that execute concurrently (no matter the programming language — even JavaScript with Node.js [ which is supposed to be single threaded…but advanced use cases allow for multiprocessing and multi-threading…know your tools! ]).</p>
<p>This restriction allows Rust to prevent data races at <strong>compile time.</strong></p>
<p>To sum up (notice the curly braces denoting different scopes):</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// IMMUTABLE references = as many as you want per scope</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> something = <span class="built_in">String</span>::from(<span class="string">&quot;a thing&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> one_ref = &amp;something;</span><br><span class="line">        <span class="keyword">let</span> another_ref = &amp;something;</span><br><span class="line">        <span class="keyword">let</span> some_ither_ref = &amp;something;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, (one_ref, another_ref, some_ither_ref));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// MUTABLE references = ONE per scope</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> something_changing = <span class="built_in">String</span>::from(<span class="string">&quot;another thing&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> the_one_and_only_ref = &amp;<span class="keyword">mut</span> something_changing;</span><br><span class="line">        <span class="comment">// CANNOT create other references to &quot;something_changing&quot;</span></span><br><span class="line">        <span class="comment">// NO MATTER if mutable or immutable</span></span><br><span class="line">        <span class="comment">// the following will make the program panic</span></span><br><span class="line">        <span class="comment">// let trying_ref = &amp;something_changing;</span></span><br><span class="line">        <span class="comment">// let trying_other_ref = &amp;mut something_changing;</span></span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;It&#x27;s only &#123;&#125;&quot;</span>, the_one_and_only_ref);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="string">&quot;a thing&quot;</span>, <span class="string">&quot;a thing&quot;</span>, <span class="string">&quot;a thing&quot;</span>)</span><br><span class="line">It<span class="symbol">&#x27;s</span> only another thing</span><br></pre></td></tr></table></figure>
<h2 id="dangling-references"><a class="markdownIt-Anchor" href="#dangling-references">#</a> Dangling references</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> everything = create_something();</span><br><span class="line">    <span class="comment">// &quot;everything&quot; is a stale reference pointing to nothing</span></span><br><span class="line">    <span class="comment">// the program will not compile</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;everything is &#123;&#125;&quot;</span>, everything);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// notice the return type</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">create_something</span></span>() -&gt; &amp;<span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> new_thing = <span class="built_in">String</span>::from(<span class="string">&quot;new in town&quot;</span>);</span><br><span class="line">    <span class="comment">// this is a dangling reference because:</span></span><br><span class="line">    <span class="comment">// new_thing goes out of scope at the end of the function</span></span><br><span class="line">    <span class="comment">// returning a reference to that variable does not make sense</span></span><br><span class="line">    <span class="comment">// because the data will have been dropped from memory because not owned anymore by a variable</span></span><br><span class="line">    &amp;new_thing</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>program will not compile because of dangling reference. The solution is to the created string instead of a reference to it:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> everything = create_something();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;everything is &#123;&#125;&quot;</span>, everything);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">create_something</span></span>() -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> new_thing = <span class="built_in">String</span>::from(<span class="string">&quot;new in town&quot;</span>);</span><br><span class="line">    new_thing</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">everything is new <span class="keyword">in</span> town</span><br></pre></td></tr></table></figure>
<h2 id="structs-aka-structures"><a class="markdownIt-Anchor" href="#structs-aka-structures">#</a> Structs (a.k.a structures)</h2>
<ul>
<li>used to group multiple related items of mixed data types</li>
<li>elements are named (unlike tuples where they are ordered)</li>
<li>two kinds of structs (regular struct and tuple struct)</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tuple struct</span></span><br><span class="line"><span class="comment">// used to store a collection of mixed data without named fields</span></span><br><span class="line"><span class="comment">// used to be distinguished as a specific type</span></span><br><span class="line"><span class="comment">// (not just a regular tuple)</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Signal</span></span>(<span class="built_in">u8</span>, <span class="built_in">bool</span>, <span class="built_in">String</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// regular struct</span></span><br><span class="line"><span class="comment">// struct names are capitalized</span></span><br><span class="line"><span class="comment">// like classes in JavaScript and OOP generally</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span></span> &#123;</span><br><span class="line">    <span class="comment">// fields of the struct</span></span><br><span class="line">    model: <span class="built_in">String</span>,</span><br><span class="line">    year: <span class="built_in">String</span>,</span><br><span class="line">    used: <span class="built_in">bool</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// method: functions/subroutines associated to a struct</span></span><br><span class="line"><span class="comment">// methods are defined within the context of a struct</span></span><br><span class="line"><span class="comment">// the first parameter of a method is the reference to a struct instance</span></span><br><span class="line"><span class="keyword">impl</span> Car &#123;</span><br><span class="line">    <span class="comment">// construct car</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(m: &amp;<span class="built_in">str</span>, y: &amp;<span class="built_in">str</span>) -&gt; Car &#123;</span><br><span class="line">        Car &#123;</span><br><span class="line">            model: m.to_string(),</span><br><span class="line">            year: y.to_string(),</span><br><span class="line">            used: <span class="literal">false</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// self is equivalent to &quot;this&quot; is JavaScript</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">serialize</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(</span><br><span class="line">            <span class="string">&quot;model: &#123;&#125; - year: &#123;&#125; - used: &#123;&#125;&quot;</span>,</span><br><span class="line">            <span class="keyword">self</span>.model, <span class="keyword">self</span>.year, <span class="keyword">self</span>.used</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// mutate state</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">marked_used</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.used = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Position</span></span> &#123;</span><br><span class="line">  latitude: <span class="built_in">f64</span>,</span><br><span class="line">  longitude: <span class="built_in">f64</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">print_signal</span></span>(s: &amp;Signal) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s1 is &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, s.<span class="number">0</span>, s.<span class="number">1</span>, s.<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> pos_1 = Position &#123;</span><br><span class="line">        latitude: <span class="number">27.299112</span>,</span><br><span class="line">        longitude: <span class="number">95.387110</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">      <span class="string">&quot;pos_1 is &#123;:.3&#125;, &#123;:.3&#125;&quot;</span>,</span><br><span class="line">      pos_1.latitude,</span><br><span class="line">      pos_1.longitude</span><br><span class="line">    );</span><br><span class="line">    pos_1.latitude = <span class="number">23.1111</span>;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">      <span class="string">&quot;pos_1 is now &#123;:.3&#125;, &#123;:.3&#125;&quot;</span>,</span><br><span class="line">      pos_1.latitude,</span><br><span class="line">      pos_1.longitude</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> s1 = Signal(<span class="number">0</span>, <span class="literal">true</span>, <span class="built_in">String</span>::from(<span class="string">&quot;ok&quot;</span>));</span><br><span class="line">    <span class="comment">// fields of a tuple struct are accessed like regular tuples values</span></span><br><span class="line">    <span class="comment">// using their index</span></span><br><span class="line">    <span class="comment">// remember tuple structs do not have named fields</span></span><br><span class="line">    print_signal(&amp;s1);</span><br><span class="line">    s1.<span class="number">0</span> = <span class="number">23</span>;</span><br><span class="line">    s1.<span class="number">1</span> = <span class="literal">false</span>;</span><br><span class="line">    s1.<span class="number">2</span> = <span class="built_in">String</span>::from(<span class="string">&quot;NETERR&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;s1 is now &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, s1.<span class="number">0</span>, s1.<span class="number">1</span>, s1.<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">let</span> car_1 = Car::new(<span class="string">&quot;QBC&quot;</span>, <span class="string">&quot;2133&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car_1 is a &#123;&#125; of &#123;&#125;&quot;</span>, car_1.model, car_1.year);</span><br><span class="line">    <span class="keyword">let</span> is_used = <span class="keyword">if</span> car_1.used == <span class="literal">true</span> &#123;</span><br><span class="line">        <span class="string">&quot;used&quot;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="string">&quot;brand new&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car_1 is &#123;&#125;&quot;</span>, is_used);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car_1 is &#123;&#125;&quot;</span>, car_1.serialize());</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> car_2 = Car::new(<span class="string">&quot;ZZ7&quot;</span>, <span class="string">&quot;2042&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car_2 is a &#123;&#125;&quot;</span>, car_2.serialize());</span><br><span class="line">    car_2.marked_used();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;car_2 is now &#123;&#125;&quot;</span>, car_2.serialize());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pos_1 is <span class="number">27.299</span>, <span class="number">95.387</span></span><br><span class="line">pos_1 is now <span class="number">23.111</span>, <span class="number">95.387</span></span><br><span class="line">s1 is <span class="number">0</span>, <span class="literal">true</span>, ok</span><br><span class="line">s1 is now <span class="number">23</span>, <span class="literal">false</span>, NETERR</span><br><span class="line">car_1 is a QBC of <span class="number">2133</span></span><br><span class="line">car_1 is brand new</span><br><span class="line">car_1 is model: QBC - year: <span class="number">2133</span> - used: <span class="literal">false</span></span><br><span class="line">car_2 is a model: ZZ7 - year: <span class="number">2042</span> - used: <span class="literal">false</span></span><br><span class="line">car_2 is now model: ZZ7 - year: <span class="number">2042</span> - used: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>More on structs:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// need to use debug and clone traits</span></span><br><span class="line"><span class="comment">// to be able to print the struct instance with debug operator</span></span><br><span class="line"><span class="comment">// to be able to clone an instance of the struct</span></span><br><span class="line"><span class="comment">// more on traits later</span></span><br><span class="line"><span class="meta">#[derive(Debug, Clone)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Spaceship</span></span> &#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    crew: <span class="built_in">u8</span>,</span><br><span class="line">    propellant: <span class="built_in">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// methods are defined within a impl block</span></span><br><span class="line"><span class="keyword">impl</span> Spaceship &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_name</span></span>(&amp;<span class="keyword">self</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">      <span class="comment">// transform string to string slice with borrow operator</span></span><br><span class="line">      &amp;<span class="keyword">self</span>.name</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">add_fuel</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, gallons: <span class="built_in">f64</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.propellant += gallons;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// this is an associated function</span></span><br><span class="line">    <span class="comment">// associated to the struct data type</span></span><br><span class="line">    <span class="comment">// similar to method but no &amp;self reference</span></span><br><span class="line">    <span class="comment">// used for functions related to the struct in general,</span></span><br><span class="line">    <span class="comment">// not a specific instance</span></span><br><span class="line">    <span class="comment">// (like class static methods in Object orientation)</span></span><br><span class="line">    <span class="comment">// commonly used to construct instances of struct</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(name: &amp;<span class="built_in">str</span>) -&gt; Spaceship &#123;</span><br><span class="line">      Spaceship &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(name),</span><br><span class="line">        crew: <span class="number">11</span>,          <span class="comment">// default value for all instances</span></span><br><span class="line">        propellant: <span class="number">0.0</span>    <span class="comment">// default value for all instances</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> spaceship1 = Spaceship &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;spaceship1&quot;</span>),</span><br><span class="line">        crew: <span class="number">123</span>,</span><br><span class="line">        propellant: <span class="number">1234567.654</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// accessing field value</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship1 has &#123;&#125; members.&quot;</span>, spaceship1.crew);</span><br><span class="line">    spaceship1.crew = <span class="number">99</span>;</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;After attack, spaceship1 has now &#123;&#125; members.&quot;</span>,</span><br><span class="line">        spaceship1.crew</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship1 is &#123;:?&#125;&quot;</span>, spaceship1);</span><br><span class="line">    <span class="comment">// by default struct data is stored on the STACK</span></span><br><span class="line">    <span class="comment">// if struct contains HEAP-stored data (like a string),</span></span><br><span class="line">    <span class="comment">// the pointer is stored on the STACK and the data on the HEAP</span></span><br><span class="line">    <span class="comment">// create struct instance from fields of other instance</span></span><br><span class="line">    <span class="comment">//  (like spread operator in JS but two dots instead of three)</span></span><br><span class="line">    <span class="comment">// it is called struct update syntax</span></span><br><span class="line">    <span class="comment">// it allows to create new instances</span></span><br><span class="line">    <span class="comment">//  by copying the values of fields of an existing instance</span></span><br><span class="line">    <span class="comment">// (except for fields explicitly set in new instance)</span></span><br><span class="line">    <span class="keyword">let</span> spaceship2 = Spaceship &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;Galactos&quot;</span>),</span><br><span class="line">        ..spaceship1</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship2 is &#123;:?&#125; members.&quot;</span>, spaceship2);</span><br><span class="line">    <span class="comment">// when modifying the copied struct instance</span></span><br><span class="line">    <span class="comment">// it will not affect new instances after the copy</span></span><br><span class="line">    <span class="comment">// (unlike JavaScript references that are kept,</span></span><br><span class="line">    <span class="comment">// when spreading objects with arrays...)</span></span><br><span class="line">    spaceship1.name = <span class="built_in">String</span>::from(<span class="string">&quot;Battlestar&quot;</span>);</span><br><span class="line">    spaceship1.crew = <span class="number">78</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(spaceship2.crew, <span class="number">99</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship1 is &#123;:?&#125;&quot;</span>, spaceship1);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship2 is &#123;:?&#125;&quot;</span>, spaceship2);</span><br><span class="line">    <span class="comment">// to copy all fields, even the heap based ones,</span></span><br><span class="line">    <span class="comment">// you need to create a copy of the struct instance</span></span><br><span class="line">    <span class="comment">// otherwise when using struct update syntax it moves ownership of heap-based data</span></span><br><span class="line">    <span class="comment">// meaning that you could no longer use the associated fields from the copied instance</span></span><br><span class="line">    <span class="comment">// let spaceship3 = SpaceShip &#123; ..spaceship1 &#125;;</span></span><br><span class="line">    <span class="comment">// println!(&quot;&#123;&#125;&quot;, spaceship1.get_name()); // move occurs because `spaceship1.name` has type `std::string::String`, which does not implement the `Copy`</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> spaceship3 = Spaceship &#123;</span><br><span class="line">        <span class="comment">// need to manually implement the clone trait</span></span><br><span class="line">        <span class="comment">// on the struct definition (see above)</span></span><br><span class="line">        ..spaceship1.clone()</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship3 is &#123;:?&#125;&quot;</span>, spaceship3);</span><br><span class="line">    <span class="keyword">let</span> name = spaceship3.get_name();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;name is &#123;&#125;&quot;</span>, name);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;spaceship3 propellant is &#123;&#125;&quot;</span>, spaceship3.propellant);</span><br><span class="line"></span><br><span class="line">    spaceship3.add_fuel(<span class="number">4567.113</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">      <span class="string">&quot;After going to space refuel station, spaceship3 propellant is now &#123;&#125;&quot;</span>,</span><br><span class="line">      spaceship3.propellant</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// to call an assocaited function, use the path operator (::)</span></span><br><span class="line">    <span class="keyword">let</span> spaceship4 = Spaceship::new(<span class="string">&quot;Serenity&quot;</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(spaceship4.crew, <span class="number">11</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="enums"><a class="markdownIt-Anchor" href="#enums">#</a> Enums</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// defines a data type with multiple possible variants</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Controller</span></span> &#123;</span><br><span class="line">    Turbo,</span><br><span class="line">    Up,</span><br><span class="line">    Down,</span><br><span class="line">    Left,</span><br><span class="line">    Right,</span><br><span class="line">    X,</span><br><span class="line">    Y,</span><br><span class="line">    A,</span><br><span class="line">    B,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">push_button_notify</span></span>(c: &amp;Controller) &#123;</span><br><span class="line">    <span class="comment">// pattern matching (equivalent to switch in JavaScript)</span></span><br><span class="line">    <span class="keyword">match</span> c &#123;</span><br><span class="line">        Controller::Turbo =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Turbo button pushed.&quot;</span>),</span><br><span class="line">        Controller::Up =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Up button pushed.&quot;</span>),</span><br><span class="line">        Controller::Down =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Down button pushed.&quot;</span>),</span><br><span class="line">        Controller::Left =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Left button pushed.&quot;</span>),</span><br><span class="line">        Controller::Right =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Right button pushed.&quot;</span>),</span><br><span class="line">        Controller::Y =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Y button pushed.&quot;</span>),</span><br><span class="line">        Controller::X =&gt; <span class="built_in">println!</span>(<span class="string">&quot;X button pushed.&quot;</span>),</span><br><span class="line">        Controller::A =&gt; <span class="built_in">println!</span>(<span class="string">&quot;A button pushed.&quot;</span>),</span><br><span class="line">        Controller::B =&gt; <span class="built_in">println!</span>(<span class="string">&quot;B button pushed.&quot;</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> secret_push_combo = [</span><br><span class="line">        Controller::Up,</span><br><span class="line">        Controller::Left,</span><br><span class="line">        Controller::A,</span><br><span class="line">        Controller::Turbo,</span><br><span class="line">        Controller::Y,</span><br><span class="line">        Controller::B,</span><br><span class="line">        Controller::Turbo,</span><br><span class="line">        Controller::Down,</span><br><span class="line">        Controller::Right,</span><br><span class="line">        Controller::X,</span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">for</span> push <span class="keyword">in</span> secret_push_combo.iter() &#123;</span><br><span class="line">        push_button_notify(push);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Up button pushed.</span><br><span class="line">Left button pushed.</span><br><span class="line">A button pushed.</span><br><span class="line">Turbo button pushed.</span><br><span class="line">Y button pushed.</span><br><span class="line">B button pushed.</span><br><span class="line">Turbo button pushed.</span><br><span class="line">Down button pushed.</span><br><span class="line">Right button pushed.</span><br><span class="line">X button pushed.</span><br></pre></td></tr></table></figure>
<h2 id="trimming-strings"><a class="markdownIt-Anchor" href="#trimming-strings">#</a> Trimming strings</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> test1 = <span class="string">&quot;This is test1.        &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test1), <span class="string">&quot;This is test1.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test2 = <span class="string">&quot;        This is test2.&quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test2), <span class="string">&quot;This is test2.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test3 = <span class="string">&quot;        This is test3.               &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test3), <span class="string">&quot;This is test3.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test4 = <span class="string">&quot;This is test4.&quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test4), <span class="string">&quot;This is test4.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test5 = <span class="string">&quot;        &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test5), <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test6 = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test6), <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test7 = <span class="string">&quot;    😸   &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test7), <span class="string">&quot;😸&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test8 = <span class="string">&quot;     😸😸 test8.   &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test8), <span class="string">&quot;😸😸 test8.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> test9 = <span class="string">&quot;     😸😸 test9. 😸😸   &quot;</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trim_space(&amp;test9), <span class="string">&quot;😸😸 test9. 😸😸&quot;</span>);</span><br><span class="line">    <span class="comment">// note: strings in Rust have a trim() method</span></span><br><span class="line">    <span class="keyword">let</span> test10 = <span class="string">&quot; 😸This is the last test😸.😸      &quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> trimmed_message = test10.trim();</span><br><span class="line">    <span class="built_in">assert_eq!</span>(trimmed_message, <span class="string">&quot;😸This is the last test😸.😸&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">trim_space</span></span>(s: &amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> bytes = s.as_bytes();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// trim leading spaces by finding first non-space character</span></span><br><span class="line">    <span class="comment">// iterate over byte representation of the string slice</span></span><br><span class="line">    <span class="comment">// we do this because, we use am intermediary string slice</span></span><br><span class="line">    <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> item != <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            result = &amp;s[index..];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> bytes = result.as_bytes();</span><br><span class="line">    <span class="comment">// trim trailing spaces by finding last non-pace character</span></span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="keyword">let</span> index = t.<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> reverse_index = result.len() - index;</span><br><span class="line">        <span class="keyword">if</span> bytes[reverse_index - <span class="number">1</span>] != <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            result = &amp;result[..reverse_index];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Other possible solution:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">trim_space</span></span>(s: &amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> start = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> end = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// iterate over the characters of the string slice</span></span><br><span class="line">    <span class="keyword">for</span> (index, character) <span class="keyword">in</span> s.chars().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> character != <span class="string">&#x27; &#x27;</span> &#123;</span><br><span class="line">            start = index;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (index, character) <span class="keyword">in</span> s.chars().rev().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> character != <span class="string">&#x27; &#x27;</span> &#123;</span><br><span class="line">            end = s.len() - index;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;s[start..end]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="standard-library"><a class="markdownIt-Anchor" href="#standard-library">#</a> Standard library</h2>
<ul>
<li>documentation: <span class="exturl" data-url="aHR0cHM6Ly9kb2MucnVzdC1sYW5nLm9yZy9zdGQv">https://doc.rust-lang.org/std/</span></li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the use statement is used to import crates/libraries</span></span><br><span class="line"><span class="comment">// it brings a module path into the scope of a program</span></span><br><span class="line"><span class="comment">// some modules of the standard library are not part of the Rust language itself</span></span><br><span class="line"><span class="comment">// (meaning, you need to import them - like the &quot;fs&quot; module in Node.js - otherwise the compiler will not know what they mean)</span></span><br><span class="line"><span class="comment">// the standard library is available to all programs by default</span></span><br><span class="line"><span class="comment">// the prelude is a list of things that are automatically imported into every Rust program</span></span><br><span class="line"><span class="comment">// it does not import the entire std library (only the most common standard modules)</span></span><br><span class="line"><span class="comment">// if a module is not included into the prelude, you need to manually import it</span></span><br><span class="line"><span class="keyword">use</span> std::thread;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> child = thread::spawn(<span class="keyword">move</span> || <span class="number">2</span> + <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">let</span> res = child.join();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;res is &#123;&#125;&quot;</span>, res.unwrap());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res is <span class="number">4</span></span><br></pre></td></tr></table></figure>
<h2 id="parsing-standard-input"><a class="markdownIt-Anchor" href="#parsing-standard-input">#</a> Parsing standard input</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// read command line inputs</span></span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">mut</span> buffer = <span class="built_in">String</span>::new();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;Enter your name:&quot;</span>);</span><br><span class="line">  <span class="comment">// ===== access the stdin stream =====</span></span><br><span class="line">  <span class="comment">// the read_line() function will update the buffer with the input string</span></span><br><span class="line">  <span class="comment">// read_line() blocks the execution of the program until something is entered at the command line</span></span><br><span class="line">  <span class="keyword">let</span> read_line_result = io::stdin().read_line(&amp;<span class="keyword">mut</span> buffer);</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;read_line_result is &#123;:?&#125;&quot;</span>, read_line_result);</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;Welcome to Rust, &#123;&#125;&quot;</span>, buffer);</span><br><span class="line">  <span class="comment">// ===== parse input string ========</span></span><br><span class="line">  <span class="comment">// clear buffer from previous input</span></span><br><span class="line">  buffer.clear();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;Enter the year when you started learning Rust:&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> read_line_result = io::stdin().read_line(&amp;<span class="keyword">mut</span> buffer);</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;read_line_result is &#123;:?&#125;&quot;</span>, read_line_result);</span><br><span class="line">  <span class="comment">// need to trim the input string because contains a newline at the end</span></span><br><span class="line">  <span class="comment">// notice the turbofish operator (::&lt;i32&gt;) to indicate the type of data to parse from the input string (here an i32 integer)</span></span><br><span class="line">  <span class="comment">// parse() returns a Result enum</span></span><br><span class="line">  <span class="comment">// Result enum allow to handle errors (more on this later)</span></span><br><span class="line">  <span class="comment">// use the unwrap function to extract the value</span></span><br><span class="line">  <span class="keyword">let</span> start_year = buffer.trim().parse::&lt;<span class="built_in">i32</span>&gt;().unwrap();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;You started your Rust journey in &#123;&#125;&quot;</span>, start_year);</span><br><span class="line">  <span class="comment">// without using the turbofish operator, indicate the destination type as the variable type</span></span><br><span class="line">  <span class="keyword">let</span> start_year: <span class="built_in">i32</span> = buffer.trim().parse().unwrap();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;You will be an expert in &#123;&#125;&quot;</span>, start_year + <span class="number">5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output (&gt; marks command line inputs)</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Enter your name:</span><br><span class="line">&gt; Florian</span><br><span class="line">read_line_result is <span class="literal">Ok</span>(<span class="number">8</span>)</span><br><span class="line">Welcome to Rust, Florian</span><br><span class="line">Enter the year when you started learning Rust:</span><br><span class="line">&gt; <span class="number">2021</span></span><br><span class="line">read_line_result is <span class="literal">Ok</span>(<span class="number">6</span>)</span><br><span class="line">You started your Rust journey <span class="keyword">in</span> <span class="number">2021</span></span><br><span class="line">You will be an expert <span class="keyword">in</span> <span class="number">2026</span></span><br></pre></td></tr></table></figure>
<h2 id="crates"><a class="markdownIt-Anchor" href="#crates">#</a> Crates</h2>
<ul>
<li>collection of source code files</li>
<li>crates registry: <span class="exturl" data-url="aHR0cHM6Ly9jcmF0ZXMuaW8v">crates.io</span><br>
(equivalent to <span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tLw==">npmjs.com</span> for Node.js modules)</li>
<li>two kinds:<br>
- <strong>binary crates</strong> contain the source code to compile to execute the program<br>
- <strong>library crates</strong> contain code for other programs to execute</li>
<li>to use third-party crates, add the crate name and version in the Cargo.toml file in the <strong>[dependencies]</strong> section (external crates):</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[package]</span><br><span class="line">name = <span class="string">&quot;crates&quot;</span></span><br><span class="line">version = <span class="string">&quot;0.1.0&quot;</span></span><br><span class="line">authors = [<span class="string">&quot;Florian GOTO &lt;you@example.com&gt;&quot;</span>]</span><br><span class="line">edition = <span class="string">&quot;2018&quot;</span></span><br><span class="line"># See more keys and their definitions at https:<span class="comment">//doc.rust-lang.org/cargo/reference/manifest.html</span></span><br><span class="line">[dependencies]</span><br><span class="line"># add the random number generation <span class="keyword">crate</span></span><br><span class="line">rand = <span class="string">&quot;0.8.3&quot;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>Cargo will automatically download the crates in the <strong>[dependencies]</strong> section along with their own dependencies before compiling</li>
<li>to use the downloaded crate</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> random_number = rand::random::&lt;<span class="built_in">u8</span>&gt;();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;random_number is &#123;&#125;&quot;</span>, random_number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">random_number is <span class="number">97</span></span><br></pre></td></tr></table></figure>
<ul>
<li>if you use a specific function of a crate, specify it directly in the use statement (the compiler will warn you about name collisions with locally defined code):</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import only the random() function of the rand crate</span></span><br><span class="line"><span class="keyword">use</span> rand::random;</span><br><span class="line"><span class="comment">// import everything from the rand crate prelude</span></span><br><span class="line"><span class="comment">// use rand::prelude::*;</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> random_number = random::&lt;<span class="built_in">u8</span>&gt;();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;random_number is &#123;&#125;&quot;</span>, random_number);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// cannot have a local function named random in the same scope</span></span><br><span class="line"><span class="comment">// the program will not compile if the following code is added because of the name collision</span></span><br><span class="line"><span class="comment">// fn random() -&gt; u8 &#123;</span></span><br><span class="line"><span class="comment">//   123</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="guessing-game-revisited"><a class="markdownIt-Anchor" href="#guessing-game-revisited">#</a> Guessing game revisited</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::*;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> MAX_RETRIES: <span class="built_in">i8</span> = <span class="number">3</span>;</span><br><span class="line">    <span class="comment">// generate random number between specified range</span></span><br><span class="line">    <span class="keyword">let</span> random_number: <span class="built_in">i8</span> = thread_rng().gen_range(<span class="number">1</span>..<span class="number">101</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> buffer = <span class="built_in">String</span>::new();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> retry_count = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Guess a number between 1 and 100:&quot;</span>);</span><br><span class="line">    <span class="keyword">while</span> retry_count &lt; MAX_RETRIES &#123;</span><br><span class="line">       <span class="comment">// clear previous guess</span></span><br><span class="line">       buffer.clear();</span><br><span class="line">       io::stdin()</span><br><span class="line">            .read_line(&amp;<span class="keyword">mut</span> buffer)</span><br><span class="line">            .expect(<span class="string">&quot;Failed to read line&quot;</span>);</span><br><span class="line">       <span class="comment">// expect() is equivalent to unwrap()</span></span><br><span class="line">       <span class="comment">// used to get value from Result enum</span></span><br><span class="line">       <span class="comment">// it allows to print a custom message when an error occurs</span></span><br><span class="line">       <span class="keyword">let</span> guess = buffer.trim()</span><br><span class="line">                         .parse::&lt;<span class="built_in">i8</span>&gt;()</span><br><span class="line">                         .expect(<span class="string">&quot;Failed to parse number&quot;</span>);</span><br><span class="line">       <span class="keyword">if</span> guess &lt; random_number &#123;</span><br><span class="line">            retry_count += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;too low. &#123;&#125;&quot;</span>,</span><br><span class="line">                <span class="keyword">if</span> retry_count &lt; MAX_RETRIES &#123;</span><br><span class="line">                    <span class="string">&quot;Try again:&quot;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="string">&quot;&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> guess &gt; random_number &#123;</span><br><span class="line">            retry_count += <span class="number">1</span>;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;too high. &#123;&#125;&quot;</span>,</span><br><span class="line">                <span class="keyword">if</span> retry_count &lt; MAX_RETRIES &#123;</span><br><span class="line">                    <span class="string">&quot;Try again:&quot;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="string">&quot;&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> guess == random_number &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;correct!&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;random_number was &#123;&#125;&quot;</span>, random_number);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alternative implementation:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::*;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    guess_with_infinite_retry();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">guess_with_infinite_retry</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> secret_number = thread_rng().gen_range(<span class="number">1</span>..<span class="number">101</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Guess a number between 1 and 100:&quot;</span>);</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> guess = <span class="built_in">String</span>::new();</span><br><span class="line">        io::stdin()</span><br><span class="line">            .read_line(&amp;<span class="keyword">mut</span> guess)</span><br><span class="line">            .expect(<span class="string">&quot;Failed to read line&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> guess: <span class="built_in">u32</span> = guess.trim()</span><br><span class="line">                              .parse()</span><br><span class="line">                              .expect(<span class="string">&quot;Failed to parse guess&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> guess &lt; secret_number &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;guess too low, guess higher:&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> guess &gt; secret_number &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;guess too high, guess lower:&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;you found it!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alternative implementation with “continue playing”:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::*;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    guess_with_limited_retry(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">guess_with_limited_retry</span></span>(max_retries: <span class="built_in">i8</span>) &#123;</span><br><span class="line">    <span class="comment">// generate random number between specified range</span></span><br><span class="line">    <span class="keyword">let</span> random_number: <span class="built_in">i8</span> = thread_rng().gen_range(<span class="number">1</span>..<span class="number">101</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> buffer = <span class="built_in">String</span>::new();</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> new_game = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> new_game == <span class="literal">true</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Guess a number between 1 and 100:&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> retry_count = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">while</span> retry_count &lt; max_retries &#123;</span><br><span class="line">            buffer.clear();</span><br><span class="line">            io::stdin()</span><br><span class="line">                .read_line(&amp;<span class="keyword">mut</span> buffer)</span><br><span class="line">                .expect(<span class="string">&quot;Failed to read line&quot;</span>);</span><br><span class="line">            <span class="keyword">let</span> guess = buffer.trim()</span><br><span class="line">                              .parse::&lt;<span class="built_in">i8</span>&gt;()</span><br><span class="line">                              .expect(<span class="string">&quot;Failed to parse number&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> guess &lt; random_number &#123;</span><br><span class="line">                retry_count += <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">println!</span>(</span><br><span class="line">                    <span class="string">&quot;too low. &#123;&#125;&quot;</span>,</span><br><span class="line">                    <span class="keyword">if</span> retry_count &lt; max_retries &#123;</span><br><span class="line">                        <span class="string">&quot;Try again:&quot;</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="string">&quot;&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> guess &gt; random_number &#123;</span><br><span class="line">                retry_count += <span class="number">1</span>;</span><br><span class="line">                <span class="built_in">println!</span>(</span><br><span class="line">                    <span class="string">&quot;too high. &#123;&#125;&quot;</span>,</span><br><span class="line">                    <span class="keyword">if</span> retry_count &lt; max_retries &#123;</span><br><span class="line">                        <span class="string">&quot;Try again:&quot;</span></span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="string">&quot;&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                );</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> guess == random_number &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;correct!&quot;</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="built_in">println!</span>(<span class="string">&quot;random_number was &#123;&#125;&quot;</span>, random_number);</span><br><span class="line">      <span class="built_in">println!</span>(<span class="string">&quot;do you want to continue playing ? (y/n)&quot;</span>);</span><br><span class="line">      <span class="keyword">let</span> <span class="keyword">mut</span> try_again = <span class="built_in">String</span>::new();</span><br><span class="line">      io::stdin()</span><br><span class="line">         .read_line(&amp;<span class="keyword">mut</span> try_again)</span><br><span class="line">         .expect(<span class="string">&quot;Failed to read line&quot;</span>);</span><br><span class="line">      <span class="keyword">let</span> try_again: <span class="built_in">char</span> = try_again</span><br><span class="line">         .trim()</span><br><span class="line">         .parse()</span><br><span class="line">         .expect(<span class="string">&quot;Failed to parse try again answer.&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> try_again == <span class="string">&#x27;y&#x27;</span> &#123;</span><br><span class="line">            new_game = <span class="literal">true</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> try_again == <span class="string">&#x27;n&#x27;</span> &#123;</span><br><span class="line">            new_game = <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;answer with y or n.&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="command-line-arguments"><a class="markdownIt-Anchor" href="#command-line-arguments">#</a> Command line arguments</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::env;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// check for required number of arguments</span></span><br><span class="line">    <span class="keyword">if</span> env::args().len() &lt;= <span class="number">2</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;this program requires at least two arguments&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// args() returns an iterator over arguments passed to the program executable binary file</span></span><br><span class="line">    <span class="comment">// use enumerate() to get input args and their index</span></span><br><span class="line">    <span class="comment">// first argument is the executable path (but not always)</span></span><br><span class="line">    <span class="keyword">for</span> (index, arg) <span class="keyword">in</span> env::args().enumerate() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;argument &#123;&#125; is &#123;&#125;&quot;</span>, index, arg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// get argument at specific index</span></span><br><span class="line">    <span class="keyword">let</span> arg2 = env::args().nth(<span class="number">2</span>).unwrap();</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\narg2 is &#123;&#125;&quot;</span>, arg2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; cargo run toto <span class="string">&quot;titi.txt&quot;</span> --flag -t</span><br><span class="line">argument <span class="number">0</span> is target/debug/command_line_args</span><br><span class="line">argument <span class="number">1</span> is toto</span><br><span class="line">argument <span class="number">2</span> is titi.txt</span><br><span class="line">argument <span class="number">3</span> is --flag</span><br><span class="line">argument <span class="number">4</span> is -t</span><br><span class="line">arg2 is titi.txt</span><br></pre></td></tr></table></figure>
<h2 id="reading-content-from-file"><a class="markdownIt-Anchor" href="#reading-content-from-file">#</a> Reading content from file</h2>
<ul>
<li>create a fruits.txt file in your project folder with the following content:</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">apple</span><br><span class="line">avocado</span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line">orange</span><br><span class="line">mango</span><br><span class="line">coconut</span><br><span class="line">pear</span><br><span class="line">lemon</span><br></pre></td></tr></table></figure>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::path::Path;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> path = Path::new(<span class="string">&quot;./fruits.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> contents = fs::read_to_string(path)</span><br><span class="line">                      .expect(<span class="string">&quot;Failed to read file.&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;contents is: &#123;&#125;&quot;</span>, contents);</span><br><span class="line">    <span class="comment">// process individual lines</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> contents.lines() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;line is &#123;&#125;&quot;</span>, line);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// read file as bytes</span></span><br><span class="line">    <span class="keyword">let</span> contents: <span class="built_in">Vec</span>&lt;<span class="built_in">u8</span>&gt; = fs::read(path)</span><br><span class="line">                               .expect(<span class="string">&quot;Failed to read file.&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;\ncontents is: &#123;:?&#125;&quot;</span>, contents);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">contents is: apple</span><br><span class="line">avocado</span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line">orange</span><br><span class="line">mango</span><br><span class="line">coconut</span><br><span class="line">pear</span><br><span class="line">lemon</span><br><span class="line">line is apple</span><br><span class="line">line is avocado</span><br><span class="line">line is banana</span><br><span class="line">line is cherry</span><br><span class="line">line is orange</span><br><span class="line">line is mango</span><br><span class="line">line is coconut</span><br><span class="line">line is pear</span><br><span class="line">line is lemon</span><br><span class="line">contents is: [<span class="number">97</span>, <span class="number">112</span>, <span class="number">112</span>, <span class="number">108</span>, <span class="number">101</span>, <span class="number">10</span>, <span class="number">97</span>, <span class="number">118</span>, <span class="number">111</span>, <span class="number">99</span>, <span class="number">97</span>, <span class="number">100</span>, <span class="number">111</span>, <span class="number">10</span>, <span class="number">98</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">97</span>, <span class="number">10</span>, <span class="number">99</span>, <span class="number">104</span>, <span class="number">101</span>, <span class="number">114</span>, <span class="number">114</span>, <span class="number">121</span>, <span class="number">10</span>, <span class="number">111</span>, <span class="number">114</span>, <span class="number">97</span>, <span class="number">109</span>, <span class="number">103</span>, <span class="number">101</span>, <span class="number">10</span>, <span class="number">109</span>, <span class="number">97</span>, <span class="number">110</span>, <span class="number">103</span>, <span class="number">111</span>, <span class="number">10</span>, <span class="number">99</span>, <span class="number">111</span>, <span class="number">99</span>, <span class="number">111</span>, <span class="number">110</span>, <span class="number">117</span>, <span class="number">116</span>, <span class="number">10</span>, <span class="number">112</span>, <span class="number">101</span>, <span class="number">97</span>, <span class="number">114</span>, <span class="number">10</span>, <span class="number">108</span>, <span class="number">101</span>, <span class="number">109</span>, <span class="number">111</span>, <span class="number">110</span>, <span class="number">10</span>]</span><br></pre></td></tr></table></figure>
<h2 id="writing-content-to-file"><a class="markdownIt-Anchor" href="#writing-content-to-file">#</a> Writing content to file</h2>
<ul>
<li>copy the fruits.txt file from the previous section</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::path;</span><br><span class="line"><span class="comment">// import the Write trait of the io module prelude (more on traits later)</span></span><br><span class="line"><span class="keyword">use</span> std::io::prelude::*;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> path = path::Path::new(<span class="string">&quot;./file.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> contents = <span class="built_in">String</span>::new();</span><br><span class="line">    contents.push_str(<span class="string">&quot;this is line 1\n&quot;</span>);</span><br><span class="line">    contents.push_str(<span class="string">&quot;this is line 2\n&quot;</span>);</span><br><span class="line">    contents.push_str(<span class="string">&quot;this is line 3\n&quot;</span>);</span><br><span class="line">    <span class="comment">// === write/replace file content ===</span></span><br><span class="line">    fs::write(path, contents)</span><br><span class="line">       .expect(<span class="string">&quot;Failed to write to file.&quot;</span>);</span><br><span class="line">    <span class="comment">// === append content to file ===</span></span><br><span class="line">    <span class="keyword">let</span> path = path::Path::new(<span class="string">&quot;./fruits.txt&quot;</span>);</span><br><span class="line">    <span class="comment">// new() function of the OpenOptions struct in the fs module</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> file = fs::OpenOptions::new()</span><br><span class="line">        .append(<span class="literal">true</span>)</span><br><span class="line">        .open(path)</span><br><span class="line">        .expect(<span class="string">&quot;Failed to open file.&quot;</span>);</span><br><span class="line">    <span class="comment">// uses the imported Write trait</span></span><br><span class="line">    <span class="comment">// expects an array of bytes as argument</span></span><br><span class="line">    <span class="comment">// notice the b in front of the string to convert to byte array</span></span><br><span class="line">    file.write(<span class="string">b&quot;\nolive\n&quot;</span>)</span><br><span class="line">        .expect(<span class="string">&quot;Failed to write to file.&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="fruit-finder"><a class="markdownIt-Anchor" href="#fruit-finder">#</a> Fruit finder</h2>
<ul>
<li>copy the fruits.txt file from previous sections in your project folder</li>
<li>we will create a program that looks for fruits in the list</li>
<li>if a fruit is in the list, it returns a message with its position in the list</li>
<li>if not found, it is added to the list</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::env;</span><br><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::io::prelude::*;</span><br><span class="line"><span class="keyword">use</span> std::path::Path;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> env::args().len() != <span class="number">3</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;This programs takes two arguments&quot;</span>);</span><br><span class="line">        std::process::exit(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> file_path = env::args().nth(<span class="number">1</span>).expect(<span class="string">&quot;Failed to get file path&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> search_name = env::args().nth(<span class="number">2</span>).expect(<span class="string">&quot;Failed to get search name&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> path = Path::new(&amp;file_path);</span><br><span class="line">    <span class="keyword">let</span> fruits = fs::read_to_string(path).expect(<span class="string">&quot;Failed to read file&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (index, fruit) <span class="keyword">in</span> fruits.lines().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> fruit == search_name &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;&#123;&#125; is the &#123;&#125;&#123;&#125; fruit in the list&quot;</span>,</span><br><span class="line">                search_name,</span><br><span class="line">                index + <span class="number">1</span>,</span><br><span class="line">                <span class="keyword">if</span> index == <span class="number">0</span> &#123;</span><br><span class="line">                    <span class="string">&quot;st&quot;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">1</span> &#123;</span><br><span class="line">                    <span class="string">&quot;nd&quot;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> index == <span class="number">2</span> &#123;</span><br><span class="line">                    <span class="string">&quot;rd&quot;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="string">&quot;th&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; is not in the fruit list&quot;</span>, search_name);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> file = fs::OpenOptions::new()</span><br><span class="line">        .append(<span class="literal">true</span>)</span><br><span class="line">        .open(path)</span><br><span class="line">        .expect(<span class="string">&quot;Failed to open file.&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> new_fruit = search_name.clone();</span><br><span class="line">    <span class="keyword">let</span> fruits_bytes = fruits.as_bytes();</span><br><span class="line">    <span class="keyword">if</span> fruits_bytes[fruits_bytes.len() - <span class="number">1</span>] != <span class="string">b&#x27;\n&#x27;</span> &#123;</span><br><span class="line">        <span class="comment">// insert newline at start of the string new_fruit</span></span><br><span class="line">        new_fruit.insert(<span class="number">0</span>, <span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    new_fruit.push(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    file.write(new_fruit.as_bytes())</span><br><span class="line">        .expect(<span class="string">&quot;Failed to write to file.&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; was added to fruit list&quot;</span>, search_name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&gt; cat fruits.txt</span><br><span class="line">apple</span><br><span class="line">avocado</span><br><span class="line">banana</span><br><span class="line">cherry</span><br><span class="line">orange</span><br><span class="line">mango</span><br><span class="line">coconut</span><br><span class="line">pear</span><br><span class="line">lemon</span><br><span class="line">lime</span><br><span class="line">pineapple</span><br><span class="line">papaya</span><br><span class="line">grape</span><br><span class="line">guava</span><br><span class="line">kiwi</span><br><span class="line">elderberry</span><br><span class="line">raspberry</span><br><span class="line">tomato</span><br><span class="line">&gt; cargo run -q fruits.txt tomato</span><br><span class="line">tomato is the <span class="number">18</span>th fruit <span class="keyword">in</span> the list</span><br><span class="line">&gt; cargo run -q fruits.txt avocado</span><br><span class="line">avocado is the <span class="number">2</span>nd fruit <span class="keyword">in</span> the list</span><br><span class="line">&gt; cargo run -q fruits.txt peach</span><br><span class="line">peach is not <span class="keyword">in</span> the fruit list</span><br><span class="line">peach was added to fruit list</span><br><span class="line">cargo run -q fruits.txt peach</span><br><span class="line">peach is the <span class="number">19</span>th fruit <span class="keyword">in</span> the list</span><br></pre></td></tr></table></figure>
<h2 id="shape-factories"><a class="markdownIt-Anchor" href="#shape-factories">#</a> Shape factories</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rectangle</span></span> &#123;</span><br><span class="line">    width: <span class="built_in">f64</span>,</span><br><span class="line">    height: <span class="built_in">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Circle</span></span> &#123;</span><br><span class="line">    radius: <span class="built_in">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> Rectangle &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(width: <span class="built_in">f64</span>, height: <span class="built_in">f64</span>) -&gt; Rectangle &#123;</span><br><span class="line">        <span class="comment">// notice the shorthand notation</span></span><br><span class="line">        <span class="comment">// when creating instance of struct</span></span><br><span class="line">        <span class="comment">// because method params have same names as struct fields</span></span><br><span class="line">        Rectangle &#123; width, height &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">f64</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.height * <span class="keyword">self</span>.width</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">scale</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, scalar: <span class="built_in">f64</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.width *= scalar;</span><br><span class="line">        <span class="keyword">self</span>.height *= scalar;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> Circle &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(radius: <span class="built_in">f64</span>) -&gt; Circle &#123;</span><br><span class="line">        Circle &#123; radius &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">f64</span> &#123;</span><br><span class="line">        std::<span class="built_in">f64</span>::consts::PI * <span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_diameter</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">f64</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.radius * <span class="number">2.0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> rect = Rectangle::new(<span class="number">1.2</span>, <span class="number">3.4</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(rect.get_area(), <span class="number">4.08</span>);</span><br><span class="line">    rect.scale(<span class="number">0.5</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(rect.get_area(), <span class="number">1.02</span>);</span><br><span class="line">    <span class="keyword">let</span> circ = Circle::new(<span class="number">4.0</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(circ.get_diameter(), <span class="number">8.0</span>);</span><br><span class="line">    <span class="keyword">let</span> expected = <span class="number">16.0</span> * std::<span class="built_in">f64</span>::consts::PI;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(circ.get_area(), expected);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Test passed!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Test passed!</span><br></pre></td></tr></table></figure>
<h2 id="generic-struct-definitions"><a class="markdownIt-Anchor" href="#generic-struct-definitions">#</a> Generic struct definitions</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// abstract stand-ins for concrete data types or other properties</span></span><br><span class="line"><span class="comment">// can be used with structs, functions, methods, etc. to help eliminate duplicate code</span></span><br><span class="line"><span class="comment">// gives flexibility to data types</span></span><br><span class="line"><span class="comment">// defined with &lt;T&gt; (T: generic type variable)</span></span><br><span class="line"><span class="comment">// the name of the generic variable is arbitrary, could be &lt;Toto&gt;</span></span><br><span class="line"><span class="comment">// similar to generics in TypeScrypt</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rectangle</span></span>&lt;T&gt; &#123;</span><br><span class="line">    width: T,</span><br><span class="line">    height: T,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// multiple generic types</span></span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Shape</span></span>&lt;T, U&gt; &#123;</span><br><span class="line">    width: T,</span><br><span class="line">    height: U,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// creating rectangle with f64 data</span></span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">1.2</span>,</span><br><span class="line">        height: <span class="number">3.4</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="comment">// creating rectangle with u32 data</span></span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">5</span>,</span><br><span class="line">        height: <span class="number">11</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="comment">// creating rectangle with u8 data</span></span><br><span class="line">    <span class="comment">// notice we add u8 as a suffix to the number</span></span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">7u8</span>,</span><br><span class="line">        height: <span class="number">23u8</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="comment">// creating shape with u16 and f32 data</span></span><br><span class="line">    <span class="keyword">let</span> rect = Shape &#123;</span><br><span class="line">        width: <span class="number">456u16</span>,</span><br><span class="line">        height: <span class="number">78.54f32</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rect is Rectangle &#123; width: <span class="number">1.2</span>, height: <span class="number">3.4</span> &#125;</span><br><span class="line">rect is Rectangle &#123; width: <span class="number">5</span>, height: <span class="number">11</span> &#125;</span><br><span class="line">rect is Rectangle &#123; width: <span class="number">7</span>, height: <span class="number">23</span> &#125;</span><br><span class="line">rect is Shape &#123; width: <span class="number">456</span>, height: <span class="number">78.54</span> &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Generics are a zero cost abstraction = easier programming without slowing down runtime performance</li>
<li>The Rust compiler uses <strong>monomorphization</strong> for generics = replaces placeholders with concrete data types</li>
<li>At compile time, the code will include the concrete data types, <strong>not</strong> the generic abstraction = if you create a Rectangle with f64 data, the compiled code will have a struct definition for a Rectangle with f64 fields and as many concrete type definitions as the ones when creating struct instances.</li>
<li>The source code will use generic data types but the compiled code will have the concrete data types thus not impacting runtime performance (no guess work about data types).</li>
</ul>
<h2 id="generic-method-definitions"><a class="markdownIt-Anchor" href="#generic-method-definitions">#</a> Generic method definitions</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Rectangle</span></span>&lt;T&gt; &#123;</span><br><span class="line">    width: T,</span><br><span class="line">    height: T,</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Shape</span></span>&lt;T, U&gt; &#123;</span><br><span class="line">    width: T,</span><br><span class="line">    height: U,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// include the generic variable names after the impl keyword</span></span><br><span class="line"><span class="comment">// and after the struct identifier</span></span><br><span class="line"><span class="comment">// impl&lt;T, U&gt; tells the compiler that methods for generic struct definition</span></span><br><span class="line"><span class="keyword">impl</span>&lt;T, U&gt; Shape&lt;T, U&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_width</span></span>(&amp;<span class="keyword">self</span>) -&gt; &amp;T &#123;</span><br><span class="line">        <span class="comment">// need to return a reference</span></span><br><span class="line">        <span class="comment">// because not know by which type &lt;T&gt; will be replaced with</span></span><br><span class="line">        <span class="comment">// remember ownership for fixed / mutable-length data type</span></span><br><span class="line">        <span class="comment">// returning a reference works for both without transfer of ownership</span></span><br><span class="line">        &amp;<span class="keyword">self</span>.width</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// implementing methods for a specific concrete type of Shape</span></span><br><span class="line"><span class="comment">// notice not putting generic types after impl keyword tells the compiler that these methods are for concrete struct defintition</span></span><br><span class="line"><span class="keyword">impl</span> Shape&lt;<span class="built_in">u8</span>, <span class="built_in">u8</span>&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_perimeter</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">u8</span> &#123;</span><br><span class="line">        (<span class="keyword">self</span>.height + <span class="keyword">self</span>.width) * <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">1.2</span>,</span><br><span class="line">        height: <span class="number">3.4</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">5</span>,</span><br><span class="line">        height: <span class="number">11</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="keyword">let</span> rect = Rectangle &#123;</span><br><span class="line">        width: <span class="number">7u8</span>,</span><br><span class="line">        height: <span class="number">23u8</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="keyword">let</span> rect = Shape &#123;</span><br><span class="line">        width: <span class="number">456u16</span>,</span><br><span class="line">        height: <span class="number">78.54f32</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect is &#123;:?&#125;&quot;</span>, rect);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect width is &#123;:?&#125;&quot;</span>, rect.get_width());</span><br><span class="line">    <span class="keyword">let</span> rect = Shape &#123;</span><br><span class="line">        width: <span class="number">54u8</span>,</span><br><span class="line">        height: <span class="number">32u8</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// get_perimeter() method is defined on this instance of Shape</span></span><br><span class="line">    <span class="comment">// because the fields are both u8 data</span></span><br><span class="line">    <span class="comment">// otherwise this method would be not be found</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect perimter is &#123;:?&#125;&quot;</span>, rect.get_perimeter());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rect is Rectangle &#123; width: <span class="number">1.2</span>, height: <span class="number">3.4</span> &#125;</span><br><span class="line">rect is Rectangle &#123; width: <span class="number">5</span>, height: <span class="number">11</span> &#125;</span><br><span class="line">rect is Rectangle &#123; width: <span class="number">7</span>, height: <span class="number">23</span> &#125;</span><br><span class="line">rect is Shape &#123; width: <span class="number">456</span>, height: <span class="number">78.54</span> &#125;</span><br><span class="line">rect width is <span class="number">456</span></span><br><span class="line">rect perimter is <span class="number">172</span></span><br></pre></td></tr></table></figure>
<h2 id="generic-function-definitions"><a class="markdownIt-Anchor" href="#generic-function-definitions">#</a> Generic function definitions</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// restrict the generic type</span></span><br><span class="line"><span class="comment">// to types that implement the Trait for values that can be compared for a sort-order (PartialOrd)</span></span><br><span class="line"><span class="comment">// PartialOrd trait is included in the std crate prelude (no need for full path)</span></span><br><span class="line"><span class="comment">// otherwise, how would the compiler know if the concrete types can be compared using &gt; ?</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_biggest</span></span>&lt;T: <span class="built_in">PartialOrd</span>&gt;(n1: T, n2: T) -&gt; T &#123;</span><br><span class="line">    <span class="keyword">if</span> n1 &gt; n2 &#123;</span><br><span class="line">        n1</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        n2</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;biggest is &#123;&#125;&quot;</span>, get_biggest(<span class="number">23u8</span>, <span class="number">121u8</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;biggest is &#123;&#125;&quot;</span>, get_biggest(<span class="number">12345</span>, <span class="number">121</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;biggest is &#123;&#125;&quot;</span>, get_biggest(<span class="number">123.45</span>, <span class="number">1.21</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">biggest is <span class="number">121</span></span><br><span class="line">biggest is <span class="number">12345</span></span><br><span class="line">biggest is <span class="number">123.45</span></span><br></pre></td></tr></table></figure>
<h2 id="box-data-type"><a class="markdownIt-Anchor" href="#box-data-type">#</a> Box data type</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Box&lt;T&gt; used to store data on the heap instead of the stack</span></span><br><span class="line"><span class="comment">// it consists of a pointer on the stack</span></span><br><span class="line"><span class="comment">// which points to a memory chunk on the heap</span></span><br><span class="line"><span class="comment">// that has been allocated large enough to hold &lt;T&gt; data</span></span><br><span class="line"><span class="comment">// Boxes are considered smart pointers</span></span><br><span class="line"><span class="comment">// provide more functionality than references:</span></span><br><span class="line"><span class="comment">// Box&lt;T&gt; has ownership of the data it points to</span></span><br><span class="line"><span class="comment">// Box&lt;T&gt; deallocates the heap memory when it goes out of scope</span></span><br><span class="line"><span class="comment">// Box data type is used to store a type whose size cannot be known at compile time</span></span><br><span class="line"><span class="comment">// but a size is still required</span></span><br><span class="line"><span class="comment">// ex: recursive types</span></span><br><span class="line"><span class="comment">// ex of recursive type: a struct which includes another struct of the same type as one of its fields (think about Iterators - like in JavaScript)</span></span><br><span class="line"><span class="comment">// you don&#x27;t know the depth of layers at compile time and therefore not know the size of the overall structure</span></span><br><span class="line"><span class="comment">// another use case for boxes is to transfer ownership of data rather copying it on the stack</span></span><br><span class="line"><span class="comment">// to avoid copying large amounts of stack data</span></span><br><span class="line"><span class="comment">// potential performance improvement by moving data to heap where can be more easily transferred (because of pointers)</span></span><br><span class="line"><span class="keyword">use</span> std::mem;</span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Team</span></span> &#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    size: <span class="built_in">u8</span>,</span><br><span class="line">    capacity: <span class="built_in">f64</span>,</span><br><span class="line">    domain: <span class="built_in">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// remember the struct lives on the stack</span></span><br><span class="line">    <span class="comment">// except for mutable-length fields (ex: String) that leave on the heap</span></span><br><span class="line">    <span class="keyword">let</span> lions = Team &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;The lions&quot;</span>),</span><br><span class="line">        size: <span class="number">7</span>,</span><br><span class="line">        capacity: <span class="number">11.5</span>,</span><br><span class="line">        domain: <span class="built_in">String</span>::from(<span class="string">&quot;Authentication&quot;</span>),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;lions is &#123;:?&#125;&quot;</span>, lions);</span><br><span class="line">    <span class="comment">// mem::size_of_val() gives the size in byte of what the given reference points to</span></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">      <span class="string">&quot;lions size is on stack &#123;&#125; bytes&quot;</span>,</span><br><span class="line">      mem::size_of_val(&amp;lions)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// this is not a copy operation, ownership is moved</span></span><br><span class="line">    <span class="comment">// the lions variable looses ownership of the struct</span></span><br><span class="line">    <span class="comment">// the lions variable can no longer be used</span></span><br><span class="line">    <span class="comment">// the struct instance is transferred to to heap location allocated by the box</span></span><br><span class="line">    <span class="comment">// the boxed_lions variable becomes the new owner of the struct</span></span><br><span class="line">    <span class="comment">// through the box smart pointer that lives on the stack</span></span><br><span class="line">    <span class="keyword">let</span> boxed_lions: <span class="built_in">Box</span>&lt;Team&gt; = <span class="built_in">Box</span>::new(lions);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;boxed_lions is &#123;:?&#125;&quot;</span>, boxed_lions);</span><br><span class="line">    <span class="comment">// printing size in bytes of the box pointer</span></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;boxed_lions size is on stack &#123;&#125; bytes&quot;</span>,</span><br><span class="line">        mem::size_of_val(&amp;boxed_lions)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// printing size in byte of the struct instance</span></span><br><span class="line">    <span class="comment">// need to pass a reference to the dereferenced box pointer (WTF...) to mem::size_of_val()</span></span><br><span class="line">    <span class="comment">// using the dereference operator &quot;*&quot; before the box pointer</span></span><br><span class="line">    <span class="comment">// referencing a pointer will represent the pointed-to location / data:</span></span><br><span class="line">    <span class="comment">// &amp;*boxed_lions is a reference to the data on the heap rather than the pointer on the stack</span></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;boxed_lions team size is on heap &#123;&#125; bytes&quot;</span>,</span><br><span class="line">        mem::size_of_val(&amp;*boxed_lions)</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// moving back the struct instance on the stack</span></span><br><span class="line">    <span class="comment">// by dereferencing the box pointer</span></span><br><span class="line">    <span class="keyword">let</span> unboxed_lions: Team = *boxed_lions;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;unboxed_lions is &#123;:?&#125;&quot;</span>, unboxed_lions);</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;unboxed_lions team size is on stack &#123;&#125; bytes&quot;</span>,</span><br><span class="line">        mem::size_of_val(&amp;unboxed_lions)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">lions is Team &#123; name: <span class="string">&quot;The lions&quot;</span>, size: <span class="number">7</span>, capacity: <span class="number">11.5</span>, domain: <span class="string">&quot;Authentication&quot;</span> &#125;</span><br><span class="line">lions size is on stack <span class="number">64</span> bytes</span><br><span class="line">boxed_lions is Team &#123; name: <span class="string">&quot;The lions&quot;</span>, size: <span class="number">7</span>, capacity: <span class="number">11.5</span>, domain: <span class="string">&quot;Authentication&quot;</span> &#125;</span><br><span class="line">boxed_lions size is on stack <span class="number">8</span> bytes</span><br><span class="line">boxed_lions team size is on heap <span class="number">64</span> bytes</span><br><span class="line">unboxed_lions is Team &#123; name: <span class="string">&quot;The lions&quot;</span>, size: <span class="number">7</span>, capacity: <span class="number">11.5</span>, domain: <span class="string">&quot;Authentication&quot;</span> &#125;</span><br><span class="line">unboxed_lions team size is on stack <span class="number">64</span> bytes</span><br></pre></td></tr></table></figure>
<h2 id="summing-boxes"><a class="markdownIt-Anchor" href="#summing-boxes">#</a> Summing boxes</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::ops::Add;</span><br><span class="line"><span class="comment">// restrict generic type T to concrete types that implement the Add trait (like u32, f64, etc.)</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">sum_boxes</span></span>&lt;T: Add&lt;Output = T&gt;&gt;(b1: <span class="built_in">Box</span>&lt;T&gt;, b2: <span class="built_in">Box</span>&lt;T&gt;) -&gt; <span class="built_in">Box</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> unboxed_b1 = *b1;</span><br><span class="line">    <span class="keyword">let</span> unboxed_b2 = *b2;</span><br><span class="line">    <span class="keyword">let</span> sum = unboxed_b1 + unboxed_b2;</span><br><span class="line">    <span class="built_in">Box</span>::new(sum)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">44</span>);</span><br><span class="line">    <span class="keyword">let</span> sum_box = sum_boxes(box1, box2);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_box, <span class="number">55</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">1.1</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">4.4</span>);</span><br><span class="line">    <span class="keyword">let</span> sum_box = sum_boxes(box1, box2);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_box, <span class="number">5.5</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">1.1f32</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">4.4f32</span>);</span><br><span class="line">    <span class="keyword">let</span> sum_box = sum_boxes(box1, box2);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_box, <span class="number">5.5f32</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">11u8</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">44u8</span>);</span><br><span class="line">    <span class="keyword">let</span> sum_box = sum_boxes(box1, box2);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_box, <span class="number">55u8</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">11u16</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">44u16</span>);</span><br><span class="line">    <span class="keyword">let</span> sum_box = sum_boxes(box1, box2);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_box, <span class="number">55u16</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;tests passed!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">test passed!</span><br></pre></td></tr></table></figure>
<p>Compact version</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::ops::Add;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">sum_boxes</span></span>&lt;T: Add&lt;Output = T&gt;&gt;(b1: <span class="built_in">Box</span>&lt;T&gt;, b2: <span class="built_in">Box</span>&lt;T&gt;) -&gt; <span class="built_in">Box</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="built_in">Box</span>::new(*b1 + *b2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(<span class="built_in">Box</span>::new(<span class="number">11</span>), <span class="built_in">Box</span>::new(<span class="number">44</span>)), <span class="number">55</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(<span class="built_in">Box</span>::new(<span class="number">1.1</span>), <span class="built_in">Box</span>::new(<span class="number">4.4</span>)), <span class="number">5.5</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(<span class="built_in">Box</span>::new(<span class="number">1.1f32</span>), <span class="built_in">Box</span>::new(<span class="number">4.4f32</span>)), <span class="number">5.5f32</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(<span class="built_in">Box</span>::new(<span class="number">11u8</span>), <span class="built_in">Box</span>::new(<span class="number">44u8</span>)), <span class="number">55u8</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(<span class="built_in">Box</span>::new(<span class="number">11u16</span>), <span class="built_in">Box</span>::new(<span class="number">44u16</span>)), <span class="number">55u16</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;tests passed!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>More complex generic type restriction</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::ops::&#123;Add, MulAssign&#125;;</span><br><span class="line"><span class="comment">// remove the Copy trait restriction and see what happens</span></span><br><span class="line"><span class="comment">// more on this later</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">sum_boxes</span></span>&lt;T: Add&lt;Output = T&gt; + MulAssign + <span class="built_in">Copy</span>&gt;(</span><br><span class="line">    <span class="keyword">mut</span> b1: <span class="built_in">Box</span>&lt;T&gt;,</span><br><span class="line">    b2: <span class="built_in">Box</span>&lt;T&gt;</span><br><span class="line">) -&gt; <span class="built_in">Box</span>&lt;T&gt; &#123;</span><br><span class="line">    *b1 *= *b2;</span><br><span class="line">    <span class="built_in">Box</span>::new(*b1 + *b2)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">44</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(box1, box2), <span class="number">528</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">1.1</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">4.4</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(box1, box2), <span class="number">9.240000000000002</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">1.1f32</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">4.4f32</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(box1, box2), <span class="number">9.24f32</span>);</span><br><span class="line">    <span class="keyword">let</span> box1 = <span class="built_in">Box</span>::new(<span class="number">11u16</span>);</span><br><span class="line">    <span class="keyword">let</span> box2 = <span class="built_in">Box</span>::new(<span class="number">44u16</span>);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(*sum_boxes(box1, box2), <span class="number">528u16</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;tests passed!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="traits"><a class="markdownIt-Anchor" href="#traits">#</a> Traits</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// trait;</span></span><br><span class="line"><span class="comment">// abstract way to define capabilities for functionality of specific data types</span></span><br><span class="line"><span class="comment">// collection of methods</span></span><br><span class="line"><span class="comment">// representing a set of behaviors necessary to accomplish some task</span></span><br><span class="line"><span class="comment">// data types can implement a trait:</span></span><br><span class="line"><span class="comment">// the type implements those specific methods so they&#x27;ll be available for use with it</span></span><br><span class="line"><span class="comment">// generics use traits to specify the capabilities of unknown data types:</span></span><br><span class="line"><span class="comment">// the trait act as a bound for which concrete types will be accepted</span></span><br><span class="line"><span class="comment">// as long as these concrete types implement the set of methods</span></span><br><span class="line"><span class="comment">// similar to interfaces in TypeScript and other languages supporting classical OOP</span></span><br><span class="line"><span class="comment">// Rust comes with default common traits (see the std::prelude)</span></span><br><span class="line"><span class="comment">// you can define your custom traits</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span></span> &#123;</span><br><span class="line">    model: <span class="built_in">String</span>,</span><br><span class="line">    brand: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">u16</span>, <span class="comment">// km/h</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Plane</span></span> &#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    nick_name: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">u16</span>, <span class="comment">// km/h</span></span><br><span class="line">    crew: <span class="built_in">u8</span>,</span><br><span class="line">    passengers: <span class="built_in">u16</span>,</span><br><span class="line">    ceiling: <span class="built_in">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// custom trait</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Serialization</span></span> &#123;</span><br><span class="line">    <span class="comment">// method signatures</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">describe</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// implementing trait for a specific type</span></span><br><span class="line"><span class="keyword">impl</span> Serialization <span class="keyword">for</span> Car &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">describe</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="comment">// format! macro returns formatted string</span></span><br><span class="line">        <span class="built_in">format!</span>(</span><br><span class="line">            <span class="string">&quot;&#123;&#125; from &#123;&#125; going at &#123;&#125; km/h.&quot;</span>,</span><br><span class="line">            <span class="keyword">self</span>.model, <span class="keyword">self</span>.brand, <span class="keyword">self</span>.velocity</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// implementing trait for another type</span></span><br><span class="line"><span class="keyword">impl</span> Serialization <span class="keyword">for</span> Plane &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">describe</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(</span><br><span class="line">            <span class="string">&quot;&#123;&#125; (&#123;&#125;) going at &#123;&#125; km/h with a crew of &#123;&#125; and up to &#123;&#125; passengers at &#123;&#125; m above.&quot;</span>,</span><br><span class="line">            <span class="keyword">self</span>.name, <span class="keyword">self</span>.nick_name, <span class="keyword">self</span>.velocity, <span class="keyword">self</span>.crew, <span class="keyword">self</span>.passengers, <span class="keyword">self</span>.ceiling</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> gle_class_coupe = Car &#123;</span><br><span class="line">        model: <span class="built_in">String</span>::from(<span class="string">&quot;GLE-Class Coupe&quot;</span>),</span><br><span class="line">        brand: <span class="built_in">String</span>::from(<span class="string">&quot;Mercedes-Benz&quot;</span>),</span><br><span class="line">        velocity: <span class="number">280</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> g6 = Plane &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;Gulfstream G650 &quot;</span>),</span><br><span class="line">        nick_name: <span class="built_in">String</span>::from(<span class="string">&quot;G6&quot;</span>),</span><br><span class="line">        velocity: <span class="number">956</span>,</span><br><span class="line">        crew: <span class="number">4</span>,</span><br><span class="line">        passengers: <span class="number">19</span>,</span><br><span class="line">        ceiling: <span class="number">15545</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, gle_class_coupe.describe());</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, g6.describe());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GLE-Class Coupe from Mercedes-Benz going at <span class="number">280</span> km/h.</span><br><span class="line">Gulfstream G650  (G6) going at <span class="number">956</span> km/h with a crew of <span class="number">4</span> and up to <span class="number">19</span> passengers at <span class="number">15545</span> m above.</span><br></pre></td></tr></table></figure>
<h2 id="default-trait-implementation"><a class="markdownIt-Anchor" href="#default-trait-implementation">#</a> Default trait implementation</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span></span> &#123;</span><br><span class="line">    model: <span class="built_in">String</span>,</span><br><span class="line">    brand: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">u16</span>, <span class="comment">// km/h</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Plane</span></span> &#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    nick_name: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">u16</span>, <span class="comment">// km/h</span></span><br><span class="line">    crew: <span class="built_in">u8</span>,</span><br><span class="line">    passengers: <span class="built_in">u16</span>,</span><br><span class="line">    ceiling: <span class="built_in">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Serialization</span></span> &#123;</span><br><span class="line">    <span class="comment">// default trait implementation</span></span><br><span class="line">    <span class="comment">// to avoid having to implement it for each type that uses the trait</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">describe</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="built_in">String</span>::from(<span class="string">&quot;some kind of vehicle.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> Serialization <span class="keyword">for</span> Car &#123;</span><br><span class="line">    <span class="comment">// specific trait implementation for Car structure</span></span><br><span class="line">    <span class="comment">// overriding the default implementation</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">describe</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(</span><br><span class="line">            <span class="string">&quot;&#123;&#125; from &#123;&#125; going at &#123;&#125; km/h.&quot;</span>,</span><br><span class="line">            <span class="keyword">self</span>.model, <span class="keyword">self</span>.brand, <span class="keyword">self</span>.velocity</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// will use the default trait implementation because no specific one</span></span><br><span class="line"><span class="keyword">impl</span> Serialization <span class="keyword">for</span> Plane &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> gle_class_coupe = Car &#123;</span><br><span class="line">        model: <span class="built_in">String</span>::from(<span class="string">&quot;GLE-Class Coupe&quot;</span>),</span><br><span class="line">        brand: <span class="built_in">String</span>::from(<span class="string">&quot;Mercedes-Benz&quot;</span>),</span><br><span class="line">        velocity: <span class="number">280</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> g6 = Plane &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;Gulfstream G650 &quot;</span>),</span><br><span class="line">        nick_name: <span class="built_in">String</span>::from(<span class="string">&quot;G6&quot;</span>),</span><br><span class="line">        velocity: <span class="number">956</span>,</span><br><span class="line">        crew: <span class="number">4</span>,</span><br><span class="line">        passengers: <span class="number">19</span>,</span><br><span class="line">        ceiling: <span class="number">15545</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, gle_class_coupe.describe());</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, g6.describe());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GLE-Class Coupe from Mercedes-Benz going at <span class="number">280</span> km/h.</span><br><span class="line">some kind of vehicle.</span><br></pre></td></tr></table></figure>
<h2 id="derivable-traits"><a class="markdownIt-Anchor" href="#derivable-traits">#</a> Derivable traits</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// by default new structs do not implement any trait</span></span><br><span class="line"><span class="comment">// you as the programmer give it the traits it needs</span></span><br><span class="line"><span class="comment">// derivable traits provide default implementations for common traits</span></span><br><span class="line"><span class="comment">// gives access to basic functionalities</span></span><br><span class="line"><span class="comment">// instead of having to implement custom traits</span></span><br><span class="line"><span class="comment">// when deriving traits,</span></span><br><span class="line"><span class="comment">// the compiler generates default code for the required methods</span></span><br><span class="line"><span class="comment">// derivable traits are (subject to change as the language evolves):</span></span><br><span class="line"><span class="comment">// Eq</span></span><br><span class="line"><span class="comment">// PartialEq</span></span><br><span class="line"><span class="comment">// Ord</span></span><br><span class="line"><span class="comment">// PartialOrd</span></span><br><span class="line"><span class="comment">// Clone</span></span><br><span class="line"><span class="comment">// Copy</span></span><br><span class="line"><span class="comment">// Hash</span></span><br><span class="line"><span class="comment">// Default - create empty instance of a data type</span></span><br><span class="line"><span class="comment">// Debug - provide formatted debug string</span></span><br><span class="line"><span class="comment">// to derive traits:  #[ derive( trait_a, trait_b, ..) ]</span></span><br><span class="line"><span class="comment">// default implementation of PartialEq requires all fields of both structs to be equal to return true</span></span><br><span class="line"><span class="comment">// (check documentation  std::cmp::PartialEq)</span></span><br><span class="line"><span class="comment">// default implementation of PartialOrd compares the values of the fields,</span></span><br><span class="line"><span class="comment">// parses the fields in order of definition and</span></span><br><span class="line"><span class="comment">// once found a field that can be compared,</span></span><br><span class="line"><span class="comment">// will return result of comparison</span></span><br><span class="line"><span class="comment">// and not look at other fields (check documentation  std::cmp::PartialOrd)</span></span><br><span class="line"><span class="meta">#[derive(PartialEq, PartialOrd, Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Car</span></span> &#123;</span><br><span class="line">    model: <span class="built_in">String</span>,</span><br><span class="line">    brand: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">u16</span>, <span class="comment">// km/h</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> gle_class_coupe = Car &#123;</span><br><span class="line">        model: <span class="built_in">String</span>::from(<span class="string">&quot;GLE-Class Coupe&quot;</span>),</span><br><span class="line">        brand: <span class="built_in">String</span>::from(<span class="string">&quot;Mercedes-Benz&quot;</span>),</span><br><span class="line">        velocity: <span class="number">280</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> gle_class = Car &#123;</span><br><span class="line">        model: <span class="built_in">String</span>::from(<span class="string">&quot;GLE-Class&quot;</span>),</span><br><span class="line">        brand: <span class="built_in">String</span>::from(<span class="string">&quot;Mercedes-Benz&quot;</span>),</span><br><span class="line">        velocity: <span class="number">218</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// allowed because of derived PartialEq trait</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Are the cars equal: &#123;&#125;&quot;</span>, gle_class_coupe == gle_class);</span><br><span class="line">    <span class="comment">// allowed because of derived PartialOrd trait</span></span><br><span class="line">    <span class="comment">// here the name field is compared to assert which one is greater</span></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;Is the coupe greater then the SUV: &#123;&#125;&quot;</span>,</span><br><span class="line">        gle_class_coupe &gt; gle_class</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// allowed because of derived Debug trait</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, gle_class);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Are the cars equal: <span class="literal">false</span></span><br><span class="line">Is the coupe greater then the SUV: <span class="literal">true</span></span><br><span class="line">Car &#123; model: <span class="string">&quot;GLE-Class&quot;</span>, brand: <span class="string">&quot;Mercedes-Benz&quot;</span>, velocity: <span class="number">218</span> &#125;Are the cars equal: falseIs the coupe greater then the SUV: trueCar &#123; model: <span class="string">&quot;GLE-Class&quot;</span>, brand: <span class="string">&quot;Mercedes-Benz&quot;</span>, velocity: <span class="number">218</span> &#125;</span><br></pre></td></tr></table></figure>
<h2 id="trait-bounds"><a class="markdownIt-Anchor" href="#trait-bounds">#</a> Trait bounds</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// when working with generics we can use traits</span></span><br><span class="line"><span class="comment">// in order to stipulate which functionalities the concrete types must implement</span></span><br><span class="line"><span class="comment">// trait bounds force a generic type to implement specific traits</span></span><br><span class="line"><span class="comment">// trait bounds guarantee a generic type will have the necessary behaviors</span></span><br><span class="line"><span class="keyword">use</span> std::fmt::<span class="built_in">Debug</span>;</span><br><span class="line"><span class="keyword">use</span> std::any;</span><br><span class="line"><span class="comment">// To be able to print an item it must implement the Display trait</span></span><br><span class="line"><span class="comment">// but because not all type implement it, we will use the Debug trait</span></span><br><span class="line"><span class="comment">// which is more commonly implemented by default</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">print_type</span></span>&lt;T: <span class="built_in">Debug</span>&gt;(it: T) &#123;</span><br><span class="line">    <span class="comment">// type_name() returns the name of a type as a string slice</span></span><br><span class="line">    <span class="comment">// by passing the type to the turbofish operator (::&lt;MY_TYPE&gt;)</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125; is a &#123;&#125;&quot;</span>, it, any::type_name::&lt;T&gt;());</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    print_type(<span class="number">1</span>);</span><br><span class="line">    print_type(<span class="number">1.2</span>);</span><br><span class="line">    print_type([<span class="number">12</span>, <span class="number">34</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> is a <span class="built_in">i32</span></span><br><span class="line"><span class="number">1.2</span> is a <span class="built_in">f64</span></span><br><span class="line">[<span class="number">12</span>, <span class="number">34</span>] is a [<span class="built_in">i32</span>; <span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<h2 id="multiple-trait-bounds-and-where-clause"><a class="markdownIt-Anchor" href="#multiple-trait-bounds-and-where-clause">#</a> Multiple trait bounds and where clause</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"><span class="comment">// multiple trait bounds are separated by a + operator</span></span><br><span class="line"><span class="comment">// PartialEq/From/Copy are part of the prelude of the std library so no import</span></span><br><span class="line"><span class="comment">// fn compare_and_print&lt;T: Display + PartialEq + From&lt;U&gt;, U: Display + PartialEq + Copy&gt;(a: T, b: U) &#123;</span></span><br><span class="line"><span class="comment">// the below function signature is equivalent to the above</span></span><br><span class="line"><span class="comment">// but more readable with the were clause to declare trait bounds</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">compare_and_print</span></span>&lt;T, U&gt;(a: T, b: U)</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    T: Display + <span class="built_in">PartialEq</span> + <span class="built_in">From</span>&lt;U&gt;,</span><br><span class="line">    U: Display + <span class="built_in">PartialEq</span> + <span class="built_in">Copy</span>,</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// T::from(b) =&gt; convert b to type T</span></span><br><span class="line">    <span class="comment">// From trait allows for a type</span></span><br><span class="line">    <span class="comment">// to define how to create itself from another type.</span></span><br><span class="line">    <span class="comment">// ex: creating a string from string slice</span></span><br><span class="line">    <span class="comment">//      String::from(&quot;ttoto&quot;)</span></span><br><span class="line">    <span class="keyword">if</span> a == T::from(b) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; is equal to &#123;&#125;&quot;</span>, a, b);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; is not equal to &#123;&#125;&quot;</span>, a, b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    compare_and_print(<span class="number">22</span>, <span class="number">55</span>);</span><br><span class="line">    compare_and_print(<span class="number">2.2</span>, <span class="number">2.2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">22</span> is not equal to <span class="number">55</span></span><br><span class="line"><span class="number">2.2</span> is equal to <span class="number">2.2</span></span><br></pre></td></tr></table></figure>
<h2 id="return-types-and-implemented-traits"><a class="markdownIt-Anchor" href="#return-types-and-implemented-traits">#</a> Return types and implemented traits</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"><span class="comment">// the return value must implement the Display trait</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_displayable</span></span>() -&gt; <span class="keyword">impl</span> Display &#123;</span><br><span class="line">    <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Display: &#123;&#125;&quot;</span>, get_displayable());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Display: <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="return-types-and-dynamic-dispatching-with-traits"><a class="markdownIt-Anchor" href="#return-types-and-dynamic-dispatching-with-traits">#</a> Return types and dynamic dispatching with traits</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"><span class="comment">// dynamic dispatch</span></span><br><span class="line"><span class="comment">// when the retun type cannot be known until runtime</span></span><br><span class="line"><span class="comment">// notice the dyn keyword and the use of a Box pointers</span></span><br><span class="line"><span class="comment">// Returns a value that implements the Display trait,</span></span><br><span class="line"><span class="comment">// but we do not know which one at compile time.</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_dynamic_displayable</span></span>(a: <span class="built_in">bool</span>) -&gt; <span class="built_in">Box</span>&lt;<span class="keyword">dyn</span> Display&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> a &#123;</span><br><span class="line">        <span class="comment">// returns u32</span></span><br><span class="line">        <span class="built_in">Box</span>::new(<span class="number">1</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// returns string slice</span></span><br><span class="line">        <span class="built_in">Box</span>::new(<span class="string">&quot;one&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Display: &#123;&#125;&quot;</span>, get_dynamic_displayable(<span class="literal">false</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Display: one</span><br></pre></td></tr></table></figure>
<h2 id="comparing-jet-planes"><a class="markdownIt-Anchor" href="#comparing-jet-planes">#</a> Comparing jet planes</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::cmp::*;</span><br><span class="line"><span class="keyword">use</span> std::fmt;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Jet</span></span> &#123;</span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    velocity: <span class="built_in">f64</span>, <span class="comment">// km/h</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// custom implementation of the Display trait</span></span><br><span class="line"><span class="keyword">impl</span> fmt::Display <span class="keyword">for</span> Jet &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">fmt</span></span>(&amp;<span class="keyword">self</span>, f: &amp;<span class="keyword">mut</span> fmt::Formatter&lt;<span class="symbol">&#x27;_</span>&gt;) -&gt; fmt::<span class="built_in">Result</span> &#123;</span><br><span class="line">        <span class="built_in">write!</span>(f, <span class="string">&quot;&#123;&#125;, flying at &#123;&#125; km/h&quot;</span>, <span class="keyword">self</span>.name, <span class="keyword">self</span>.velocity)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// custom implementation of the PartialOrd trait</span></span><br><span class="line"><span class="keyword">impl</span> <span class="built_in">PartialOrd</span> <span class="keyword">for</span> Jet &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">partial_cmp</span></span>(&amp;<span class="keyword">self</span>, other: &amp;<span class="keyword">Self</span>) -&gt; <span class="built_in">Option</span>&lt;Ordering&gt; &#123;</span><br><span class="line">        <span class="keyword">self</span>.velocity.partial_cmp(&amp;other.velocity)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// custom implementation of the PartialEq trait</span></span><br><span class="line"><span class="keyword">impl</span> <span class="built_in">PartialEq</span> <span class="keyword">for</span> Jet &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">eq</span></span>(&amp;<span class="keyword">self</span>, other: &amp;<span class="keyword">Self</span>) -&gt; <span class="built_in">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.velocity == other.velocity</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> g6 = Jet &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;Gulfstream G650&quot;</span>),</span><br><span class="line">        velocity: <span class="number">956.0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> g7 = Jet &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;Gulfstream G700&quot;</span>),</span><br><span class="line">        velocity: <span class="number">937.0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;G6 jet is &#123;&#125;&quot;</span>, g6);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Does G6 velocity equal to G7&#x27;s: &#123;&#125;&quot;</span>, g6.eq(&amp;g7));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Is G6 faster than G7: &#123;&#125;&quot;</span>, g6.gt(&amp;g7));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">G6 jet is Gulfstream G650, flying at <span class="number">956</span> km/h</span><br><span class="line">Does G6 velocity equal to G7<span class="symbol">&#x27;s</span>: <span class="literal">false</span></span><br><span class="line">Is G6 faster than G7: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h2 id="borrow-checker"><a class="markdownIt-Anchor" href="#borrow-checker">#</a> Borrow checker</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// borrow checker</span></span><br><span class="line"><span class="comment">// compares scopes to determine whether all borrows are valid</span></span><br><span class="line"><span class="comment">// lifetime (how long it is alive) of variables annotated like &quot; &#x27;a &quot;</span></span><br><span class="line"><span class="comment">// the lifetime of a variable is related to its scope</span></span><br><span class="line"><span class="comment">// Rust analyses the scope / lifetime of the values referenced by a variable</span></span><br><span class="line"><span class="comment">// using the borrow checker</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> fuel; <span class="comment">// ========= START lifetime (&#x27;a) of fuel ==========</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">let</span> gasoil = <span class="built_in">String</span>::from(<span class="string">&quot;gasoil&quot;</span>); <span class="comment">// ===== START lifetime (&#x27;b) of gasoil =======</span></span><br><span class="line">        fuel = &amp;gasoil;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;fuel is &#123;&#125;&quot;</span>, fuel);</span><br><span class="line">    &#125; <span class="comment">// ========= END lifetime of gasoil ================</span></span><br><span class="line">&#125; <span class="comment">// ========= END lifetime of fuel ================</span></span><br></pre></td></tr></table></figure>
<p>Error detected by the borrow checker:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> fuel; <span class="comment">// ========= START &#x27;a ================</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> gasoil = <span class="built_in">String</span>::from(<span class="string">&quot;gasoil&quot;</span>); <span class="comment">// ===== START &#x27;b =====</span></span><br><span class="line">        fuel = &amp;gasoil;</span><br><span class="line">    &#125; <span class="comment">// ========= END &#x27;b ================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// fuel stores a borrowed reference to gasoil</span></span><br><span class="line">    <span class="comment">// gasoil lifetime is done</span></span><br><span class="line">    <span class="comment">// fuel contains a dangling reference, the program will not compile</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;fuel is &#123;&#125;&quot;</span>, fuel);</span><br><span class="line">&#125; <span class="comment">// ========= END &#x27;a ================</span></span><br></pre></td></tr></table></figure>
<p>Fixing the lifetime error by extending the lifetime of gasoil:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> fuel; <span class="comment">// ========= START &#x27;a ================</span></span><br><span class="line">    <span class="keyword">let</span> gasoil = <span class="built_in">String</span>::from(<span class="string">&quot;gasoil&quot;</span>); <span class="comment">// ======= START &#x27;b ========</span></span><br><span class="line">    &#123;</span><br><span class="line">        fuel = &amp;gasoil;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;fuel is &#123;&#125;&quot;</span>, fuel);</span><br><span class="line">&#125; <span class="comment">// ========= END &#x27;a and &#x27;b ================</span></span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fuel is gasoil</span><br></pre></td></tr></table></figure>
<h2 id="lifetime-annotation"><a class="markdownIt-Anchor" href="#lifetime-annotation">#</a> Lifetime annotation</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// defining a generic lifetime &#x27;a</span></span><br><span class="line"><span class="comment">// explicitly defining a generic lifetime for parameters</span></span><br><span class="line"><span class="comment">// is called lifetime annotation</span></span><br><span class="line"><span class="comment">// must begin with apostrophe (&#x27;x)</span></span><br><span class="line"><span class="comment">// convention is to use a single lowercase letter (&#x27;a, &#x27;b, &#x27;c)</span></span><br><span class="line"><span class="comment">// but you are free to name it whatever (&#x27;a_lifetime, &#x27;toto)</span></span><br><span class="line"><span class="comment">// pay attention to the lifetime annotation</span></span><br><span class="line"><span class="comment">// which follows the borrow operator followed by a space then the type</span></span><br><span class="line"><span class="comment">// in this example, by annotating the return type,</span></span><br><span class="line"><span class="comment">// we tell the compiler that the returned value has the same lifetime as the params</span></span><br><span class="line"><span class="comment">// in case there are different lifetimes,</span></span><br><span class="line"><span class="comment">// the compiler will take the smallest</span></span><br><span class="line"><span class="comment">// by annotating the lifetime of the parameters,</span></span><br><span class="line"><span class="comment">// we give the borrow checker the info to validate the returned reference</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_longest_name</span></span>&lt;<span class="symbol">&#x27;a</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>, y: &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>) -&gt; &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x.len() &gt; y.len() &#123;</span><br><span class="line">        x</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        y</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="keyword">let</span> name1 = <span class="built_in">String</span>::from(<span class="string">&quot;Deep Space 9&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> name2 = <span class="built_in">String</span>::from(<span class="string">&quot;Voyager&quot;</span>);</span><br><span class="line">    result = get_longest_name(&amp;name1, &amp;name2);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result is Deep Space <span class="number">9</span></span><br></pre></td></tr></table></figure>
<h2 id="multiple-lifetime-annotations"><a class="markdownIt-Anchor" href="#multiple-lifetime-annotations">#</a> Multiple lifetime annotations</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// notice here that although the return type has the same lifetime as one param</span></span><br><span class="line"><span class="comment">// we must annotate the other param with another lifetime</span></span><br><span class="line"><span class="comment">// even if never returned</span></span><br><span class="line"><span class="comment">// to avoid any confusion</span></span><br><span class="line"><span class="comment">// remember that here the code is simple</span></span><br><span class="line"><span class="comment">// but the input and the returned value could coming from a compiled library</span></span><br><span class="line"><span class="comment">// that the compiler does not have access to the source code</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_longest_name</span></span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt;(x: &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>, y: &amp;<span class="symbol">&#x27;b</span> <span class="built_in">str</span>) -&gt; &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x.len() &gt; y.len() &#123;</span><br><span class="line">        x</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        x</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> result;</span><br><span class="line">    <span class="comment">// START &#x27;a</span></span><br><span class="line">    <span class="keyword">let</span> name1 = <span class="built_in">String</span>::from(<span class="string">&quot;Deep Space 9&quot;</span>);</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// START &#x27;b</span></span><br><span class="line">        <span class="keyword">let</span> name2 = <span class="built_in">String</span>::from(<span class="string">&quot;Voyager&quot;</span>);</span><br><span class="line">        result = get_longest_name(&amp;name1, &amp;name2);</span><br><span class="line">    &#125; <span class="comment">// END &#x27;b</span></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125; <span class="comment">// END &#x27;a</span></span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result is Deep Space <span class="number">9</span></span><br></pre></td></tr></table></figure>
<h2 id="lifetime-elision-rules"><a class="markdownIt-Anchor" href="#lifetime-elision-rules">#</a> Lifetime elision rules</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lifetime elision rules</span></span><br><span class="line"><span class="comment">// set of rules for the compiler to analyze reference lifetimes</span></span><br><span class="line"><span class="comment">// describes situations that do not require explicit lifetime annotations</span></span><br><span class="line"><span class="comment">// if any ambiguity remains, explicit lifetime annotation will be required</span></span><br><span class="line"><span class="comment">// currently, 3 lifetime elision rules:</span></span><br><span class="line"><span class="comment">// #1</span></span><br><span class="line"><span class="comment">// each input parameter that is a reference is assigned its own lifetime</span></span><br><span class="line"><span class="comment">// fn get_first_word&lt;&#x27;a&gt;(s: &amp;&#x27;a str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// lifetimes only apply for parameters that are references,</span></span><br><span class="line"><span class="comment">// non-reference parameters don&#x27;t need them</span></span><br><span class="line"><span class="comment">// fn get_first_word&lt;&#x27;a&gt;(s: &amp;&#x27;a str, t: i32) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// fn get_first_word&lt;&#x27;a, &#x27;b&gt;(s: &amp;&#x27;a str, t: &amp;&#x27;b str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// fn get_first_word&lt;&#x27;a, &#x27;b, &#x27;c&gt;(s: &amp;&#x27;a str, t: &amp;&#x27;b str, u: &amp;&#x27;c str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// #2</span></span><br><span class="line"><span class="comment">// if there&#x27;s only one input lifetime,</span></span><br><span class="line"><span class="comment">// assign it to all output lifetimes</span></span><br><span class="line"><span class="comment">// (the output lifetime must necessarily match one of the input lifetime)</span></span><br><span class="line"><span class="comment">// qualifies for elision thus lifetimes can be omitted:</span></span><br><span class="line"><span class="comment">// fn get_first_word&lt;&#x27;a&gt;(s: &amp;&#x27;a str) -&gt; &amp;&#x27;a str &#123;</span></span><br><span class="line"><span class="comment">// ==&gt; fn get_first_word(s: &amp;str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// #3</span></span><br><span class="line"><span class="comment">// if there&#x27;s a &amp;self or &amp;mut self input parameter,</span></span><br><span class="line"><span class="comment">// its lifetime will be assigned to all output lifetimes</span></span><br><span class="line"><span class="comment">// fn do_stuff(&amp;self, input: &amp;str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// rule #1 ==&gt; fn do_stuff&lt;&#x27;a,&#x27;b&gt;(&amp;&#x27;a self, input: &amp;&#x27;b str) -&gt; &amp;str &#123;</span></span><br><span class="line"><span class="comment">// rule #3 ==&gt; fn do_stuff&lt;&#x27;a,&#x27;b&gt;(&amp;&#x27;a self, input: &amp;&#x27;b str) -&gt; &amp;&#x27;a str &#123;</span></span><br><span class="line"><span class="comment">// these elision rules are for the compiler</span></span><br><span class="line"><span class="comment">// but it&#x27;s good to know when you can omit lifetimes</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="built_in">String</span>::from(<span class="string">&quot;Hi there&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> first_word = get_first_word(&amp;message);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;first_word is &#123;&#125;&quot;</span>, first_word);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_first_word</span></span>(s: &amp;<span class="built_in">str</span>) -&gt; &amp;<span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> bytes = s.as_bytes();</span><br><span class="line">    <span class="keyword">for</span> (index, &amp;item) <span class="keyword">in</span> bytes.iter().enumerate() &#123;</span><br><span class="line">        <span class="keyword">if</span> item == <span class="string">b&#x27; &#x27;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &amp;s[..index]; <span class="comment">// found blank space</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &amp;s <span class="comment">// no blank space found, input is a single word</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">first_word is Hi</span><br></pre></td></tr></table></figure>
<h2 id="struct-lifetime-annotations"><a class="markdownIt-Anchor" href="#struct-lifetime-annotations">#</a> Struct lifetime annotations</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Spaceship</span></span>&lt;<span class="symbol">&#x27;a</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// the struct has ownership of that string</span></span><br><span class="line">    <span class="comment">// when the struct goes out of scope,</span></span><br><span class="line">    <span class="comment">// that string data will be dropped and removed from the heap</span></span><br><span class="line">    name: <span class="built_in">String</span>,</span><br><span class="line">    <span class="comment">// the struct does not own the data referenced by this field</span></span><br><span class="line">    <span class="comment">// there is ambiguity if the struct can still use that reference</span></span><br><span class="line">    <span class="comment">// need to add explicit lifetime annotation</span></span><br><span class="line">    nickname: &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Annotate lifetimes to impl.</span></span><br><span class="line"><span class="keyword">impl</span>&lt;<span class="symbol">&#x27;a</span>, <span class="symbol">&#x27;b</span>&gt; Spaceship&lt;<span class="symbol">&#x27;a</span>&gt; &#123;</span><br><span class="line">    <span class="comment">// because of lifetime elision rule #3,</span></span><br><span class="line">    <span class="comment">// no need for explicit lifetime annotation</span></span><br><span class="line">    <span class="comment">// the output lifetimes will have the lifetime as the &amp;self parameter</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">send_transmission</span></span>(&amp;<span class="keyword">self</span>, msg: &amp;<span class="built_in">str</span>) -&gt; (&amp;<span class="built_in">str</span>, &amp;<span class="built_in">str</span>) &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Transmitting message: &#123;&#125;&quot;</span>, msg);</span><br><span class="line">        (&amp;<span class="keyword">self</span>.name, <span class="keyword">self</span>.nickname)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// here, because the output lifetime is different from the &amp;self input lifetime,</span></span><br><span class="line">    <span class="comment">// need for explicit lifetime annotation</span></span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">test_send_transmission</span></span>(&amp;<span class="symbol">&#x27;a</span> <span class="keyword">self</span>, msg: &amp;<span class="symbol">&#x27;b</span> <span class="built_in">str</span>) -&gt; &amp;<span class="symbol">&#x27;b</span> <span class="built_in">str</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Transmitting message: &#123;&#125;&quot;</span>, msg);</span><br><span class="line">        msg</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> saucer = Spaceship &#123;</span><br><span class="line">        name: <span class="built_in">String</span>::from(<span class="string">&quot;TR95 MCC Enterprise 9&quot;</span>),</span><br><span class="line">        nickname: <span class="string">&quot;TR95&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> sender = saucer.send_transmission(<span class="string">&quot;All aboard!&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;sender is &#123;&#125;&quot;</span>, sender.<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> test_msg = saucer.test_send_transmission(<span class="string">&quot;this is a test&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;test_msg is &#123;&#125;&quot;</span>, test_msg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Transmitting message: All aboard!</span><br><span class="line">sender is TR95</span><br><span class="line">Transmitting message: this is a test</span><br><span class="line">test_msg is this is a test</span><br></pre></td></tr></table></figure>
<h2 id="static-lifetimes"><a class="markdownIt-Anchor" href="#static-lifetimes">#</a> Static lifetimes</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x27;static lifetime</span></span><br><span class="line"><span class="comment">// indicates references available for the entire duration of the program</span></span><br><span class="line"><span class="comment">// example: a string literal is stored in the program binary</span></span><br><span class="line"><span class="comment">// so it never goes away</span></span><br><span class="line"><span class="comment">// the data is available from start to finish</span></span><br><span class="line"><span class="comment">// all string literals have a static lifetime:</span></span><br><span class="line"><span class="comment">//  let literal: &amp;&#x27;static str = &quot;I am a string slice&quot;;</span></span><br><span class="line"><span class="comment">// will never become invalid and lives longer than other lifetimes</span></span><br><span class="line"><span class="comment">// &#x27;static lifetime as a trait bound</span></span><br><span class="line"><span class="comment">// ensures the data type will only contain &#x27;static elements</span></span><br><span class="line"><span class="comment">// so that the receiver can hold onto it</span></span><br><span class="line"><span class="comment">// and use it as long as they want knowing it will never become invalid:</span></span><br><span class="line"><span class="comment">// &lt;T: Display + &#x27;static&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">get_toto</span></span>&lt;<span class="symbol">&#x27;a</span>&gt;() -&gt; &amp;<span class="symbol">&#x27;a</span> <span class="built_in">str</span> &#123;</span><br><span class="line">    <span class="string">&quot;toto here&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> toto: &amp;<span class="symbol">&#x27;static</span> <span class="built_in">str</span> = get_toto();</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;toto is &#123;&#125;&quot;</span>, toto);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">toto is toto here</span><br></pre></td></tr></table></figure>
<h2 id="more-on-enums"><a class="markdownIt-Anchor" href="#more-on-enums">#</a> More on enums</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Shape</span></span> &#123;</span><br><span class="line">    <span class="comment">// storing data in enum variants by declaring parameter types</span></span><br><span class="line">    Triangle(<span class="built_in">f64</span>, <span class="built_in">f64</span>, <span class="built_in">f64</span>), <span class="comment">// sides a, b, c</span></span><br><span class="line">    Rectangle(<span class="built_in">f64</span>, <span class="built_in">f64</span>),     <span class="comment">// width, height</span></span><br><span class="line">    Circle(<span class="built_in">f64</span>),             <span class="comment">// radius</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Triangle(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Rectangle(<span class="number">1.3</span>, <span class="number">5.7</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Circle(<span class="number">1.13</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="comment">// match operator</span></span><br><span class="line">    <span class="comment">// compares a value to a series of patterns</span></span><br><span class="line">    <span class="comment">// to determine which code to execute</span></span><br><span class="line">    <span class="comment">// similar to switch statements in other languages</span></span><br><span class="line">    <span class="comment">// match expression used to control flow of program</span></span><br><span class="line">    <span class="keyword">match</span> a_shape &#123;</span><br><span class="line">        <span class="comment">// enumerate all possible values</span></span><br><span class="line">        <span class="comment">// capture the stored data</span></span><br><span class="line">        <span class="comment">// using a positional parameter name (a, b, c)</span></span><br><span class="line">        <span class="comment">// the logic to execute, when a match, is after the &quot; =&gt; &quot;</span></span><br><span class="line">        Shape::Triangle(a, b, c) =&gt; <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">&quot;a_shape is a triangle with sides a = &#123;&#125;, b = &#123;&#125;, c = &#123;&#125;&quot;</span>,</span><br><span class="line">            a, b, c</span><br><span class="line">        ),</span><br><span class="line">        Shape::Rectangle(width, height) =&gt; <span class="built_in">println!</span>(</span><br><span class="line">            <span class="string">&quot;a_shape is a rectangle with width = &#123;&#125; and height = &#123;&#125;&quot;</span>,</span><br><span class="line">            width, height</span><br><span class="line">        ),</span><br><span class="line">        Shape::Circle(radius) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;a_shape is a circle with radius &#123;&#125;&quot;</span>, radius),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a_shape is Triangle(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>)</span><br><span class="line">a_shape is Rectangle(<span class="number">1.3</span>, <span class="number">5.7</span>)</span><br><span class="line">a_shape is Circle(<span class="number">1.13</span>)</span><br><span class="line">a_shape is a circle with radius <span class="number">1.13</span></span><br></pre></td></tr></table></figure>
<h2 id="match-with-wildcard-pattern"><a class="markdownIt-Anchor" href="#match-with-wildcard-pattern">#</a> Match with wildcard pattern</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> number = <span class="number">123u8</span>;</span><br><span class="line">    <span class="comment">// match expression returning values based on case</span></span><br><span class="line">    <span class="comment">// match arms are evaluated sequentially from top to bottom</span></span><br><span class="line">   <span class="keyword">let</span> result: &amp;<span class="built_in">str</span> = <span class="keyword">match</span> number &#123;</span><br><span class="line">        <span class="comment">// match arm</span></span><br><span class="line">        <span class="number">0</span> =&gt; <span class="string">&quot;zero&quot;</span>,</span><br><span class="line">        <span class="comment">// match arm</span></span><br><span class="line">        <span class="number">1</span> =&gt; <span class="string">&quot;one&quot;</span>,</span><br><span class="line">        <span class="comment">// match arm</span></span><br><span class="line">        <span class="number">2</span> =&gt; <span class="string">&quot;two&quot;</span>,</span><br><span class="line">        <span class="comment">// wildcard pattern (default case)</span></span><br><span class="line">        <span class="comment">// represented by an underscore symbol (_)</span></span><br><span class="line">        <span class="comment">// should be used last,</span></span><br><span class="line">        <span class="comment">// otherwise the following arms will not be evaluated.</span></span><br><span class="line">        <span class="comment">// useful when you don&#x27;t want to define all possible match arms explicitly</span></span><br><span class="line">        <span class="comment">// (or simply because there is a high or infinite number of possibilities)</span></span><br><span class="line">        <span class="comment">// notice the code block when more than one line</span></span><br><span class="line">        _ =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; did not match any arm&quot;</span>, number);</span><br><span class="line">            <span class="string">&quot;unmatched&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">123</span> did not <span class="keyword">match</span> any arm</span><br><span class="line">result is unmatched</span><br></pre></td></tr></table></figure>
<h2 id="enum-methods"><a class="markdownIt-Anchor" href="#enum-methods">#</a> Enum methods</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Shape</span></span> &#123;</span><br><span class="line">    Triangle(<span class="built_in">f64</span>, <span class="built_in">f64</span>, <span class="built_in">f64</span>), <span class="comment">// sides a, b, c</span></span><br><span class="line">    Rectangle(<span class="built_in">f64</span>, <span class="built_in">f64</span>),     <span class="comment">// width, height</span></span><br><span class="line">    Circle(<span class="built_in">f64</span>),             <span class="comment">// radius</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> Shape &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">get_perimeter</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="built_in">f64</span> &#123;</span><br><span class="line">        <span class="comment">// no need to dereference the self variable</span></span><br><span class="line">        <span class="comment">// the compiler will automatically reference/dereference patterns in match expressions</span></span><br><span class="line">        <span class="comment">// match *self &#123;</span></span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span> &#123;</span><br><span class="line">            Shape::Rectangle(width, height) =&gt; (width + height) * <span class="number">2.0</span>,</span><br><span class="line">            Shape::Triangle(a, b, c) =&gt; a + b + c,</span><br><span class="line">            Shape::Circle(radius) =&gt; radius * <span class="number">2.0</span> * std::<span class="built_in">f64</span>::consts::PI,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Triangle(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape perimeter is &#123;&#125;&quot;</span>, a_shape.get_perimeter());</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Rectangle(<span class="number">1.3</span>, <span class="number">5.7</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape perimeter is &#123;&#125;&quot;</span>, a_shape.get_perimeter());</span><br><span class="line">    <span class="keyword">let</span> a_shape = Shape::Circle(<span class="number">1.13</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape is &#123;:?&#125;&quot;</span>, a_shape);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a_shape perimeter is &#123;:.2&#125;&quot;</span>, a_shape.get_perimeter());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a_shape is Triangle(<span class="number">1.1</span>, <span class="number">2.2</span>, <span class="number">3.3</span>)</span><br><span class="line">a_shape perimeter is <span class="number">6.6</span></span><br><span class="line">a_shape is Rectangle(<span class="number">1.3</span>, <span class="number">5.7</span>)</span><br><span class="line">a_shape perimeter is <span class="number">14</span></span><br><span class="line">a_shape is Circle(<span class="number">1.13</span>)</span><br><span class="line">a_shape perimeter is <span class="number">7.10</span></span><br></pre></td></tr></table></figure>
<h2 id="optiont-enum"><a class="markdownIt-Anchor" href="#optiont-enum">#</a> Option&lt;T&gt; enum</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// in many languages,</span></span><br><span class="line"><span class="comment">//  errors occur when using a null value in a not-null context</span></span><br><span class="line"><span class="comment">// Rust does not have a traditional null value</span></span><br><span class="line"><span class="comment">// instead Rust uses a generic enum named Option</span></span><br><span class="line"><span class="comment">// which can be of two variants:</span></span><br><span class="line"><span class="comment">// enum Option&lt;T&gt; &#123;</span></span><br><span class="line"><span class="comment">//   Some(T),</span></span><br><span class="line"><span class="comment">//   None</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// 1) Some: indicates that has a value</span></span><br><span class="line"><span class="comment">// 2) None : indicates that no value</span></span><br><span class="line"><span class="comment">// the Option enum is included in the prelude</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// instantiate an option enum</span></span><br><span class="line">    <span class="keyword">let</span> someone: <span class="built_in">Option</span>&lt;<span class="built_in">i32</span>&gt; = <span class="literal">Some</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;someone is &#123;:?&#125;&quot;</span>, someone);</span><br><span class="line">    <span class="keyword">let</span> something: <span class="built_in">Option</span>&lt;&amp;<span class="built_in">str</span>&gt; = <span class="literal">Some</span>(<span class="string">&quot;thing&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;something is &#123;:?&#125;&quot;</span>, something);</span><br><span class="line">    <span class="keyword">let</span> nothing: <span class="built_in">Option</span>&lt;<span class="built_in">i32</span>&gt; = <span class="literal">None</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;nothing is &#123;:?&#125;&quot;</span>, nothing);</span><br><span class="line">    <span class="keyword">let</span> countdown = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// use get() on slices to get an option enum holding</span></span><br><span class="line">    <span class="comment">// a reference to the value at the specified index</span></span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">let</span> item = item.unwrap_or(&amp;<span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">20</span>);</span><br><span class="line">    <span class="comment">// unwrap_or(&amp;default_value):</span></span><br><span class="line">    <span class="comment">// if variant is Option::Some returns the stored data</span></span><br><span class="line">    <span class="comment">// if the variant is Option::None, the passed argument is used instead</span></span><br><span class="line">    <span class="comment">// notice that the argument is a reference</span></span><br><span class="line">    <span class="keyword">let</span> item = item.unwrap_or(&amp;<span class="number">0</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">someone is <span class="literal">Some</span>(<span class="number">1</span>)</span><br><span class="line">something is <span class="literal">Some</span>(<span class="string">&quot;thing&quot;</span>)</span><br><span class="line">nothing is <span class="literal">None</span></span><br><span class="line">item is <span class="literal">None</span></span><br><span class="line">item is <span class="literal">Some</span>(<span class="number">5</span>)</span><br><span class="line">item is <span class="number">4</span></span><br><span class="line">item is <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="matching-optiont"><a class="markdownIt-Anchor" href="#matching-optiont">#</a> Matching Option&lt;T&gt;</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> countdown = [<span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">3</span>);</span><br><span class="line">    <span class="comment">// using match expression to return value</span></span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">match</span> item &#123;</span><br><span class="line">        <span class="literal">Some</span>(value) =&gt; value + <span class="number">1</span>,</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">    <span class="keyword">let</span> item = countdown.get(<span class="number">20</span>);</span><br><span class="line">    <span class="keyword">let</span> item = <span class="keyword">match</span> item &#123;</span><br><span class="line">        <span class="literal">Some</span>(value) =&gt; value + <span class="number">1</span>,</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;item is &#123;:?&#125;&quot;</span>, item);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">item is <span class="literal">None</span></span><br><span class="line">item is <span class="literal">Some</span>(<span class="number">5</span>)</span><br><span class="line">item is <span class="number">3</span></span><br><span class="line">item is <span class="number">0</span></span><br></pre></td></tr></table></figure>
<h2 id="if-let-matching"><a class="markdownIt-Anchor" href="#if-let-matching">#</a> If-let matching</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// if let syntax</span></span><br><span class="line"><span class="comment">// use when matching only one variant</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> number = <span class="literal">Some</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">// notice the syntax:</span></span><br><span class="line">    <span class="comment">// if let PATTERN = VALUE &#123;&#125;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="literal">Some</span>(<span class="number">1</span>) = number &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;You are the one&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You are the one</span><br></pre></td></tr></table></figure>
<h2 id="location-enum"><a class="markdownIt-Anchor" href="#location-enum">#</a> Location enum</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt;</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Location</span></span> &#123;</span><br><span class="line">    Unknown,</span><br><span class="line">    Anonymous,</span><br><span class="line">    Known(<span class="built_in">f64</span>, <span class="built_in">f64</span>), <span class="comment">// latitude, longitude</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> fmt::Display <span class="keyword">for</span> Location &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">fmt</span></span>(&amp;<span class="keyword">self</span>, f: &amp;<span class="keyword">mut</span> fmt::Formatter&lt;<span class="symbol">&#x27;_</span>&gt;) -&gt; fmt::<span class="built_in">Result</span> &#123;</span><br><span class="line">        <span class="keyword">match</span> <span class="keyword">self</span> &#123;</span><br><span class="line">            Location::Anonymous =&gt; <span class="built_in">write!</span>(f, <span class="string">&quot;Location is anonymous&quot;</span>),</span><br><span class="line">            Location::Unknown =&gt; <span class="built_in">write!</span>(f, <span class="string">&quot;Location is unknown&quot;</span>),</span><br><span class="line">            Location::Known(latitude, longitude) =&gt; &#123;</span><br><span class="line">                <span class="built_in">write!</span>(f, <span class="string">&quot;latitude: &#123;&#125; longitude: &#123;&#125;&quot;</span>, latitude, longitude)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> address = Location::Anonymous;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;address is &#123;&#125;&quot;</span>, address);</span><br><span class="line">    <span class="keyword">let</span> address = Location::Unknown;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;address is &#123;&#125;&quot;</span>, address);</span><br><span class="line">    <span class="keyword">let</span> address = Location::Known(<span class="number">123.4</span>, <span class="number">456.7</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;address is &#123;&#125;&quot;</span>, address);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">address is Location is anonymous</span><br><span class="line">address is Location is unknown</span><br><span class="line">address is latitude: <span class="number">123.4</span> longitude: <span class="number">456.7</span></span><br></pre></td></tr></table></figure>
<h2 id="unrecoverable-errors"><a class="markdownIt-Anchor" href="#unrecoverable-errors">#</a> Unrecoverable errors</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// two types of runtime errors in Rust</span></span><br><span class="line"><span class="comment">// Recoverable (ex: file not found error)</span></span><br><span class="line"><span class="comment">// Unrecoverable (ex: index out of array bounds)</span></span><br><span class="line"><span class="comment">// most languages do not distinguish between these errors</span></span><br><span class="line"><span class="comment">// and use Exceptions to handle all of them</span></span><br><span class="line"><span class="comment">// Rust does not have traditional Exceptions:</span></span><br><span class="line"><span class="comment">// Rust uses the Result&lt;T, E&gt; enum type for recoverable errors</span></span><br><span class="line"><span class="comment">// Rust uses panics for unrecoverable errors</span></span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// panic! macro</span></span><br><span class="line">    <span class="comment">// immediately terminates the program</span></span><br><span class="line">    <span class="comment">// and provides feedback to caller of program</span></span><br><span class="line">    <span class="comment">// panic!(&quot;Something went wrong.&quot;);</span></span><br><span class="line">    <span class="keyword">let</span> countdown: [<span class="built_in">i32</span>; <span class="number">4</span>] = [<span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> left <span class="keyword">in</span> countdown.iter() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;T-minus &#123;&#125;&quot;</span>, left);</span><br><span class="line">        <span class="comment">// the program will panic when diving by zero</span></span><br><span class="line">        <span class="keyword">let</span> q = <span class="number">1</span> / left;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;q is &#123;&#125;&quot;</span>, q);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">T-minus <span class="number">3</span></span><br><span class="line">q is <span class="number">0</span></span><br><span class="line">T-minus <span class="number">2</span></span><br><span class="line">q is <span class="number">0</span></span><br><span class="line">T-minus <span class="number">1</span></span><br><span class="line">q is <span class="number">1</span></span><br><span class="line">T-minus <span class="number">0</span></span><br><span class="line">thread <span class="symbol">&#x27;main</span>&#x27; panicked at <span class="symbol">&#x27;attempt</span> to divide by zero&#x27;, /home/&lt;USER&gt;/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/lib/rustlib/src/rust/library/core/src/ops/arith.rs:<span class="number">474</span>:<span class="number">1</span></span><br><span class="line">note: run with `RUST_BACKTRACE=<span class="number">1</span>` environment variable to display a backtrace</span><br></pre></td></tr></table></figure>
<h2 id="recoverable-errors"><a class="markdownIt-Anchor" href="#recoverable-errors">#</a> Recoverable errors</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// recoverable errors</span></span><br><span class="line"><span class="comment">// errors that do not cause the program to fail</span></span><br><span class="line"><span class="comment">// and can be corrected</span></span><br><span class="line"><span class="comment">// Rust uses the Result&lt;T,E&gt; enum type to handle recoverable errors</span></span><br><span class="line"><span class="comment">// enum Result&lt;T, E&gt; &#123;</span></span><br><span class="line"><span class="comment">//     Ok(T),</span></span><br><span class="line"><span class="comment">//     Err(E),</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// the Ok variant stores the value of the successful operation</span></span><br><span class="line"><span class="comment">// the Err variant stores the value of the error</span></span><br><span class="line"><span class="comment">// the Result enum is included in the prelude</span></span><br><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// read_to_string() returns a Result&lt;T, E&gt; enum</span></span><br><span class="line">    <span class="comment">// create a file named file.txt in the root of the project folder:</span></span><br><span class="line">    <span class="comment">// $ echo 42 &gt; file.txt</span></span><br><span class="line">    <span class="keyword">let</span> content: <span class="built_in">Result</span>&lt;<span class="built_in">String</span>, io::Error&gt; = fs::read_to_string(<span class="string">&quot;file.txt&quot;</span>);</span><br><span class="line">    <span class="comment">// avoid the unwrap() method</span></span><br><span class="line">    <span class="comment">// because will panic if this is the Err variant of the Result enum</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;content is &#123;:?&#125;&quot;</span>, content.unwrap());</span><br><span class="line">    <span class="comment">// for custom error message, use expect()</span></span><br><span class="line">    <span class="comment">// not the best way to handle recoverable errors</span></span><br><span class="line">    <span class="keyword">let</span> content: <span class="built_in">Result</span>&lt;<span class="built_in">String</span>, io::Error&gt; = fs::read_to_string(<span class="string">&quot;file-x.txt&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;content is &#123;:?&#125;&quot;</span>, content.expect(<span class="string">&quot;failed reading file&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">content is <span class="string">&quot;42\n&quot;</span></span><br><span class="line">thread <span class="symbol">&#x27;main</span>&#x27; panicked at <span class="symbol">&#x27;failed</span> reading file: Os &#123; code: <span class="number">2</span>, kind: NotFound, message: <span class="string">&quot;No such file or directory&quot;</span> &#125;&#x27;, src/main.rs:<span class="number">35</span>:<span class="number">41</span></span><br></pre></td></tr></table></figure>
<h2 id="matching-resultt-e-enum-for-error-handling"><a class="markdownIt-Anchor" href="#matching-resultt-e-enum-for-error-handling">#</a> Matching Result&lt;T, E&gt; enum for error handling</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> result = fs::read_to_string(<span class="string">&quot;does-not-exist.txt&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> content = <span class="keyword">match</span> result &#123;</span><br><span class="line">        <span class="literal">Ok</span>(text) =&gt; text,</span><br><span class="line">        <span class="comment">// handle I/O error based on kind</span></span><br><span class="line">        <span class="literal">Err</span>(error) =&gt; <span class="keyword">match</span> error.kind() &#123;</span><br><span class="line">            io::ErrorKind::NotFound =&gt; <span class="built_in">String</span>::from(<span class="string">&quot;File not found&quot;</span>),</span><br><span class="line">            io::ErrorKind::PermissionDenied =&gt; &#123;</span><br><span class="line">              <span class="built_in">String</span>::from(<span class="string">&quot;Permission denied&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            _ =&gt; error.to_string(),</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;content is \&quot;&#123;&#125;\&quot;&quot;</span>, content);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">content is <span class="string">&quot;File not found&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="propagating-errors"><a class="markdownIt-Anchor" href="#propagating-errors">#</a> Propagating errors</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">read_and_combine</span></span>(f1: &amp;<span class="built_in">str</span>, f2: &amp;<span class="built_in">str</span>) -&gt; <span class="built_in">Result</span>&lt;<span class="built_in">String</span>, io::Error&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> s1 = <span class="keyword">match</span> fs::read_to_string(f1) &#123;</span><br><span class="line">        <span class="literal">Ok</span>(s) =&gt; s,</span><br><span class="line">        <span class="comment">// propagating the error to caller</span></span><br><span class="line">        <span class="literal">Err</span>(e) =&gt; <span class="keyword">return</span> <span class="literal">Err</span>(e),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// Rust provides a shorthand syntax for propagating errors</span></span><br><span class="line">    <span class="comment">// by removing the match expression</span></span><br><span class="line">    <span class="comment">// and putting a question mark (?) after the Result enum</span></span><br><span class="line">    <span class="comment">// it is equivalent to the above syntax</span></span><br><span class="line">    <span class="comment">// the ? can only be used with functions that return a Result enum</span></span><br><span class="line">    <span class="keyword">let</span> s2 = fs::read_to_string(f2)?;</span><br><span class="line">    s1.push(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    s1.push_str(&amp;s2);</span><br><span class="line">    <span class="literal">Ok</span>(s1)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">match</span> read_and_combine(<span class="string">&quot;file1.txt&quot;</span>, <span class="string">&quot;file2.txt&quot;</span>) &#123;</span><br><span class="line">        <span class="literal">Ok</span>(text_result) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;result is:\n&#123;&#125;&quot;</span>, text_result),</span><br><span class="line">        <span class="literal">Err</span>(e) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Got error: &#123;&#125;&quot;</span>, e),</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Got error: No such file or directory (os error <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h2 id="guessing-game-revisited-with-error-handling"><a class="markdownIt-Anchor" href="#guessing-game-revisited-with-error-handling">#</a> Guessing game revisited with error handling</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> rand::prelude::*;</span><br><span class="line"><span class="keyword">use</span> std::io;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    guess_with_infinite_retry();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">guess_with_infinite_retry</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> secret_number = thread_rng().gen_range(<span class="number">1</span>..<span class="number">101</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> invalid_numberretry_limit = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Guess a number between 1 and 100:&quot;</span>);</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">mut</span> buffer = <span class="built_in">String</span>::new();</span><br><span class="line">        <span class="keyword">let</span> guess = <span class="keyword">match</span> io::stdin().read_line(&amp;<span class="keyword">mut</span> buffer) &#123;</span><br><span class="line">            <span class="literal">Ok</span>(_) =&gt; <span class="keyword">match</span> buffer.trim().parse::&lt;<span class="built_in">u32</span>&gt;() &#123;</span><br><span class="line">                <span class="literal">Ok</span>(number) =&gt; number,</span><br><span class="line">                <span class="literal">Err</span>(e) =&gt; &#123;</span><br><span class="line">                    invalid_numberretry_limit += <span class="number">1</span>;</span><br><span class="line">                    <span class="keyword">if</span> invalid_numberretry_limit == <span class="number">3</span> &#123;</span><br><span class="line">                        <span class="built_in">panic!</span>(<span class="string">&quot;Too many invalid numbers entered&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">println!</span>(<span class="string">&quot;Failed to parse guess: &#123;&#125;&quot;</span>, e);</span><br><span class="line">                    <span class="built_in">println!</span>(<span class="string">&quot;Please enter a valid number:&quot;</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="literal">Err</span>(e) =&gt; &#123;</span><br><span class="line">                <span class="built_in">println!</span>(<span class="string">&quot;Failed to read line: &#123;&#125;&quot;</span>, e);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">if</span> guess &lt; secret_number &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;guess too low, guess higher:&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> guess &gt; secret_number &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;guess too high, guess lower:&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;you found it!&quot;</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Guess a number between <span class="number">1</span> and <span class="number">100</span>:</span><br><span class="line">Failed to parse guess: cannot parse integer from empty string</span><br><span class="line">Please enter a valid number:</span><br><span class="line">Failed to parse guess: cannot parse integer from empty string</span><br><span class="line">Please enter a valid number:</span><br><span class="line">thread <span class="symbol">&#x27;main</span>&#x27; panicked at <span class="symbol">&#x27;Too</span> many invalid numbers entered&#x27;, src/main.rs:<span class="number">19</span>:<span class="number">25</span></span><br><span class="line">note: run with `RUST_BACKTRACE=<span class="number">1</span>` environment variable to display a backtrace</span><br></pre></td></tr></table></figure>
<p>Or</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Guess a number between <span class="number">1</span> and <span class="number">100</span>:</span><br><span class="line"><span class="number">44</span></span><br><span class="line">guess too low, guess higher:</span><br><span class="line"><span class="number">77</span></span><br><span class="line">guess too low, guess higher:</span><br><span class="line"><span class="number">99</span></span><br><span class="line">guess too high, guess lower:</span><br><span class="line"><span class="number">88</span></span><br><span class="line">guess too high, guess lower:</span><br><span class="line"><span class="number">80</span></span><br><span class="line">you found it!</span><br></pre></td></tr></table></figure>
<h2 id="vectors-with-error-handling"><a class="markdownIt-Anchor" href="#vectors-with-error-handling">#</a> Vectors with error handling</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// create an empty vector</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> presidents: <span class="built_in">Vec</span>&lt;<span class="built_in">String</span>&gt; = <span class="built_in">Vec</span>::new();</span><br><span class="line">    presidents.push(<span class="built_in">String</span>::from(<span class="string">&quot;Chirac&quot;</span>));</span><br><span class="line">    presidents.push(<span class="built_in">String</span>::from(<span class="string">&quot;Sarkozy&quot;</span>));</span><br><span class="line">    presidents.push(<span class="built_in">String</span>::from(<span class="string">&quot;Hollande&quot;</span>));</span><br><span class="line">    presidents.push(<span class="built_in">String</span>::from(<span class="string">&quot;Macron&quot;</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;presidents are &#123;:?&#125;&quot;</span>, presidents);</span><br><span class="line">    <span class="keyword">let</span> last = <span class="keyword">match</span> presidents.pop() &#123;</span><br><span class="line">        <span class="literal">Some</span>(president) =&gt; president,</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="string">&quot;not found&quot;</span>.to_string(),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;last is &#123;&#125;&quot;</span>, last);</span><br><span class="line">    <span class="keyword">let</span> fourth = <span class="keyword">match</span> presidents.get(<span class="number">3</span>) &#123;</span><br><span class="line">        <span class="literal">Some</span>(president) =&gt; president,</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="string">&quot;not found&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;fourth president is &#123;&#125;&quot;</span>, fourth);</span><br><span class="line">    <span class="comment">// creating a vector with the vec![] macro</span></span><br><span class="line">    <span class="keyword">let</span> countdown = <span class="built_in">vec!</span>[<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;countdown is &#123;:?&#125;&quot;</span>, countdown);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">presidents are [<span class="string">&quot;Chirac&quot;</span>, <span class="string">&quot;Sarkozy&quot;</span>, <span class="string">&quot;Hollande&quot;</span>, <span class="string">&quot;Macron&quot;</span>]</span><br><span class="line">last is Macron</span><br><span class="line">fourth president is not found</span><br><span class="line">countdown is [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<h2 id="hashmapk-v-data-type"><a class="markdownIt-Anchor" href="#hashmapk-v-data-type">#</a> HashMap&lt;K, V&gt; data type</h2>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stores data in key / value pairs</span></span><br><span class="line"><span class="comment">// use the keys to lookup corresponding values</span></span><br><span class="line"><span class="comment">// key -&gt; value mapping is one way</span></span><br><span class="line"><span class="comment">// Rust uses a hash function to determine how to store data</span></span><br><span class="line"><span class="comment">// keys and values can be different data types</span></span><br><span class="line"><span class="comment">// all keys must have the same type</span></span><br><span class="line"><span class="comment">// all values must have the same type</span></span><br><span class="line"><span class="comment">// each key can only have one value associated with it at a time</span></span><br><span class="line"><span class="comment">// you need to import the type</span></span><br><span class="line"><span class="comment">// updating hashmap entries, approaches:</span></span><br><span class="line"><span class="comment">// #1: overwrite existing key/value pair</span></span><br><span class="line"><span class="comment">// #2: insert a new entry if a key does not exist</span></span><br><span class="line"><span class="comment">// #3: modify a value based on its existing value</span></span><br><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> missions = HashMap::new();</span><br><span class="line">    missions.insert(<span class="string">&quot;Toto&quot;</span>, <span class="number">23</span>); <span class="comment">// HashMap&lt;&amp;str, i32&gt;</span></span><br><span class="line">    missions.insert(<span class="string">&quot;Toto&quot;</span>, <span class="number">33</span>); <span class="comment">// #1 update</span></span><br><span class="line">    missions.insert(<span class="string">&quot;Titi&quot;</span>, <span class="number">45</span>);</span><br><span class="line">    missions.insert(<span class="string">&quot;Tata&quot;</span>, <span class="number">67</span>);</span><br><span class="line">    missions.entry(<span class="string">&quot;Tutu&quot;</span>).or_insert(<span class="number">77</span>); <span class="comment">// #2 update</span></span><br><span class="line">    <span class="comment">// #3 update</span></span><br><span class="line">    <span class="keyword">let</span> tyty = missions.entry(<span class="string">&quot;Titi&quot;</span>).or_insert(<span class="number">0</span>);</span><br><span class="line">    *tyty += <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;missions is &#123;:?&#125;&quot;</span>, missions.clone());</span><br><span class="line">    <span class="keyword">let</span> toto_missions = <span class="keyword">match</span> missions.get(<span class="string">&quot;Toto&quot;</span>) &#123;</span><br><span class="line">        <span class="literal">Some</span>(value) =&gt; value,</span><br><span class="line">        <span class="literal">None</span> =&gt; &amp;<span class="number">0</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Toto_missions is &#123;&#125;&quot;</span>, toto_missions);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">missions is &#123;<span class="string">&quot;Tata&quot;</span>: <span class="number">67</span>, <span class="string">&quot;Titi&quot;</span>: <span class="number">46</span>, <span class="string">&quot;Toto&quot;</span>: <span class="number">33</span>, <span class="string">&quot;Tutu&quot;</span>: <span class="number">77</span>&#125;</span><br><span class="line">Toto_missions is <span class="number">33</span></span><br></pre></td></tr></table></figure>
<h2 id="word-counter"><a class="markdownIt-Anchor" href="#word-counter">#</a> Word counter</h2>
<p>Create a file named “lorem.txt” with the following content:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis porta velit quis mattis bibendum. Fusce sed nulla eget arcu lacinia placerat ac eget dui. Nam a ante tellus. Aliquam varius tincidunt nisi a efficitur. Donec non malesuada odio. Donec vitae arcu eu magna efficitur pulvinar. Proin feugiat, erat et congue aliquet, ipsum turpis volutpat ante, a ullamcorper magna elit nec libero. Maecenas lacus magna, gravida id tristique at, lobortis sit amet libero.Donec vel nunc ac sapien tempus vehicula. Aenean vulputate quam eget felis elementum suscipit. Aliquam vehicula odio dui, id varius lectus gravida consequat. Maecenas sit amet dolor erat. Duis rhoncus mollis nulla. Etiam pellentesque arcu sed pretium fermentum. Phasellus metus velit, dapibus eu pellentesque eu, pulvinar eu nunc. In posuere massa non elementum varius. Donec et vehicula urna, id dignissim ex.Nunc vitae sem volutpat, malesuada odio vel, ornare arcu. Nunc dictum tincidunt turpis, sed tristique tellus hendrerit at. In ac tempor lacus. Pellentesque tempus velit eu pharetra consectetur. Integer ultricies sem sem, a tincidunt urna tempus quis. Nullam porttitor turpis ut lacus mollis dignissim nec vel ipsum. Integer volutpat quam et enim pellentesque, ut imperdiet nibh faucibus. Vestibulum varius, libero eget porta congue, enim risus porttitor lacus, at pretium mauris ligula sit amet ligula.Donec at pharetra elit. Sed nulla dui, consectetur sollicitudin magna a, consequat maximus erat. Maecenas ultricies libero orci, a cursus justo blandit non. Vivamus non fringilla ante. In cursus finibus elit quis cursus. Maecenas at arcu id ex consectetur eleifend. Aenean nec purus eget odio commodo ullamcorper. Integer maximus quis turpis id finibus. Etiam mi nunc, fringilla eget diam non, gravida blandit nisl. Curabitur finibus bibendum consequat. Nunc eleifend aliquam risus a iaculis.Nullam id lacus sem. Suspendisse a nunc facilisis, rutrum purus aliquet, pulvinar libero. Etiam ornare, enim at egestas varius, mi justo feugiat purus, eget congue nisi nibh vitae mauris. Integer malesuada, diam et placerat mollis, purus nulla molestie lacus, <span class="keyword">in</span> egestas nisl lacus et odio. Fusce feugiat odio eget justo lacinia placerat. In rutrum et quam sed gravida. Vivamus vel blandit metus, sed imperdiet turpis. Sed facilisis ipsum ipsum, egestas mattis dolor tempus at. Morbi eu scelerisque ante.</span><br></pre></td></tr></table></figure>
<p>Source code</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"><span class="keyword">use</span> std::env;</span><br><span class="line"><span class="keyword">use</span> std::fmt;</span><br><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MostCommonWord</span></span> &#123;</span><br><span class="line">    value: <span class="built_in">String</span>,</span><br><span class="line">    occurrence: <span class="built_in">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> fmt::Display <span class="keyword">for</span> MostCommonWord &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">fmt</span></span>(&amp;<span class="keyword">self</span>, f: &amp;<span class="keyword">mut</span> fmt::Formatter&lt;<span class="symbol">&#x27;_</span>&gt;) -&gt; fmt::<span class="built_in">Result</span> &#123;</span><br><span class="line">        <span class="built_in">write!</span>(</span><br><span class="line">            f,</span><br><span class="line">            <span class="string">&quot;\&quot;&#123;&#125;\&quot; is the most common word with &#123;&#125; occurrences&quot;</span>,</span><br><span class="line">            <span class="keyword">self</span>.value, <span class="keyword">self</span>.occurrence</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">impl</span> MostCommonWord &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(value: &amp;<span class="built_in">str</span>, occurrence: <span class="built_in">u32</span>) -&gt; MostCommonWord &#123;</span><br><span class="line">        MostCommonWord &#123;</span><br><span class="line">            value: value.to_string(),</span><br><span class="line">            occurrence,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> env::args().len() != <span class="number">2</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;this program requires one argument&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> filepath = <span class="keyword">match</span> env::args().nth(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="literal">Some</span>(text) =&gt; text,</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="built_in">panic!</span>(<span class="string">&quot;Failed to get file path&quot;</span>),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// println!(&quot;filepath is &#123;&#125;&quot;, filepath);</span></span><br><span class="line">    <span class="keyword">let</span> file_content = <span class="keyword">match</span> fs::read_to_string(filepath) &#123;</span><br><span class="line">        <span class="literal">Ok</span>(content) =&gt; content,</span><br><span class="line">        <span class="literal">Err</span>(e) =&gt; <span class="built_in">panic!</span>(<span class="string">&quot;Err: &#123;&#125;&quot;</span>, e),</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// println!(&quot;file_content is:\n &#123;&#125;&quot;, file_content);</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> word_count: HashMap&lt;<span class="built_in">String</span>, <span class="built_in">u32</span>&gt; = HashMap::new();</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> file_content.split_whitespace() &#123;</span><br><span class="line">        <span class="keyword">let</span> lowercase_word = word.to_lowercase();</span><br><span class="line">        <span class="keyword">match</span> word_count.get(&amp;lowercase_word) &#123;</span><br><span class="line">            <span class="literal">Some</span>(count) =&gt; &#123;</span><br><span class="line">                <span class="keyword">let</span> increment = *count + <span class="number">1</span>;</span><br><span class="line">                word_count.insert(lowercase_word, increment);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">                word_count.insert(lowercase_word, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> most_common = MostCommonWord::new(<span class="string">&quot;&quot;</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> most_common_words = <span class="built_in">vec!</span>[];</span><br><span class="line">    <span class="keyword">for</span> (word, count) <span class="keyword">in</span> &amp;word_count &#123;</span><br><span class="line">        <span class="keyword">if</span> most_common.occurrence &lt; *count &#123;</span><br><span class="line">            most_common.value = word.to_string();</span><br><span class="line">            most_common.occurrence = *count;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    most_common_words.push(most_common);</span><br><span class="line">    <span class="keyword">for</span> (word, count) <span class="keyword">in</span> &amp;word_count &#123;</span><br><span class="line">        <span class="keyword">if</span> most_common_words[<span class="number">0</span>].value != word.to_string()</span><br><span class="line">            &amp;&amp; most_common_words[<span class="number">0</span>].occurrence == *count</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">let</span> other_most_common = MostCommonWord::new(word, *count);</span><br><span class="line">            most_common_words.push(other_most_common);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> most_common_words.len() &gt; <span class="number">1</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;The most common words in the text are;&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> most_common <span class="keyword">in</span> most_common_words &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;\&quot;&#123;&#125;\&quot; with &#123;&#125; occurrences&quot;</span>,</span><br><span class="line">                most_common.value, most_common.occurrence</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> most_common_words.len() == <span class="number">1</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, most_common_words[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Output</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cargo run lorem.txt</span><br><span class="line"><span class="string">&quot;eget&quot;</span> is the most common word with <span class="number">8</span> occurrences</span><br></pre></td></tr></table></figure>
<p>Alternative implementation</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::env;</span><br><span class="line"><span class="keyword">use</span> std::fs;</span><br><span class="line"><span class="keyword">use</span> std::collections::HashMap;</span><br><span class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</span><br><span class="line">    <span class="comment">// read file and build vector of individual words</span></span><br><span class="line">    <span class="keyword">let</span> contents = <span class="keyword">match</span> env::args().nth(<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="literal">Some</span>(f) =&gt; <span class="keyword">match</span> fs::read_to_string(f) &#123;</span><br><span class="line">            <span class="literal">Ok</span>(s) =&gt; s.to_lowercase(),</span><br><span class="line">            <span class="literal">Err</span>(e) =&gt; &#123;</span><br><span class="line">                eprintln!(<span class="string">&quot;Could not read file: &#123;&#125;&quot;</span>, e);</span><br><span class="line">                std::process::exit(<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="literal">None</span> =&gt; &#123;</span><br><span class="line">            eprintln!(<span class="string">&quot;Program requires an argument: &lt;file path&gt;&quot;</span>);</span><br><span class="line">            std::process::exit(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> all_words = contents.split_whitespace().collect::&lt;<span class="built_in">Vec</span>&lt;&amp;<span class="built_in">str</span>&gt;&gt;();</span><br><span class="line">    <span class="comment">// count how many times each unique word occurs</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> word_counts: HashMap&lt;&amp;<span class="built_in">str</span>, <span class="built_in">u32</span>&gt; = HashMap::new();</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> all_words.iter() &#123;</span><br><span class="line">        *word_counts.entry(word).or_insert(<span class="number">1</span>) += <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// determine the most commonly used word(s)</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> top_count = <span class="number">0u32</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut</span> top_words: <span class="built_in">Vec</span>&lt;&amp;<span class="built_in">str</span>&gt; = <span class="built_in">Vec</span>::new();</span><br><span class="line">    <span class="keyword">for</span> (&amp;key, &amp;val) <span class="keyword">in</span> word_counts.iter() &#123;</span><br><span class="line">        <span class="keyword">if</span> val &gt; top_count &#123;</span><br><span class="line">            top_count = val;</span><br><span class="line">            top_words.clear();</span><br><span class="line">            top_words.push(key);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> val == top_count &#123;</span><br><span class="line">            top_words.push(key);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// display results</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Top word(s) occurred &#123;&#125; times:&quot;</span>, top_count);</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> top_words.iter() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, word);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      <div class="tags">
          <a href="/tags/rust/" rel="tag"><i class="ic i-tag"></i> rust</a>
      </div>
  </div>

   <footer>

    <div class="meta">
  <span class="item">
    <span class="icon">
      <i class="ic i-calendar-check"></i>
    </span>
    <span class="text">Edited on</span>
    <time title="Modified: 2021-10-18 13:27:20" itemprop="dateModified" datetime="2021-10-18T13:27:20+08:00">2021-10-18</time>
  </span>
</div>

      

  </footer>

</article>

  </div>
  

<div class="post-nav">
    <div class="item left">
      

  <a href="/2021/07/07/python-djangorest/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclh3brzpj20zk0m8ann.jpg" title="Python Django REST framework">
  <span class="type">Previous Post</span>
  <span class="category"><i class="ic i-flag"></i> </span>
  <h3>Python Django REST framework</h3>
  </a>

    </div>
    <div class="item right">
      

  <a href="/2021/07/20/python-daily-tool/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva2.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciuv0socj20zk0m8qes.jpg" title="Daily Tool">
  <span class="type">Next Post</span>
  <span class="category"><i class="ic i-flag"></i> manual</span>
  <h3>Daily Tool</h3>
  </a>

    </div>
</div>

  
  <div class="wrap" id="comments"></div>


        </div>
        <div id="sidebar">
          

<div class="inner">

  <div class="panels">
    <div class="inner">
      <div class="contents panel pjax" data-title="Contents">
          <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#creating-a-project-in-rust"><span class="toc-number">1.</span> <span class="toc-text"> Creating a project in Rust</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#printing"><span class="toc-number">2.</span> <span class="toc-text"> Printing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#advanced-numeric-formatted-print"><span class="toc-number">3.</span> <span class="toc-text"> Advanced numeric formatted print</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#variables"><span class="toc-number">4.</span> <span class="toc-text"> Variables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basic-types"><span class="toc-number">5.</span> <span class="toc-text"> Basic Types</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#floating-point-numbers"><span class="toc-number">6.</span> <span class="toc-text"> Floating point numbers</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bitwise-operations-advanced-can-be-skipped"><span class="toc-number">7.</span> <span class="toc-text"> Bitwise operations (advanced — can be skipped)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#booleans-and-binary-algebra"><span class="toc-number">8.</span> <span class="toc-text"> Booleans and binary algebra</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arithmetic-operations"><span class="toc-number">9.</span> <span class="toc-text"> Arithmetic operations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comparison-operators"><span class="toc-number">10.</span> <span class="toc-text"> Comparison operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#chars"><span class="toc-number">11.</span> <span class="toc-text"> Chars</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#computing-average"><span class="toc-number">12.</span> <span class="toc-text"> Computing average</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#arrays"><span class="toc-number">13.</span> <span class="toc-text"> Arrays</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slices"><span class="toc-number">14.</span> <span class="toc-text"> Slices</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#slices-as-parameters"><span class="toc-number">15.</span> <span class="toc-text"> Slices as parameters</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#deref-coercion"><span class="toc-number">16.</span> <span class="toc-text"> Deref coercion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multidimensional-arrays"><span class="toc-number">17.</span> <span class="toc-text"> Multidimensional arrays</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vectors"><span class="toc-number">18.</span> <span class="toc-text"> Vectors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tuples"><span class="toc-number">19.</span> <span class="toc-text"> Tuples</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#functions"><span class="toc-number">20.</span> <span class="toc-text"> Functions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#statements-and-expressions"><span class="toc-number">21.</span> <span class="toc-text"> Statements and expressions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#function-return-type"><span class="toc-number">22.</span> <span class="toc-text"> Function return type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#closures"><span class="toc-number">23.</span> <span class="toc-text"> Closures</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#celsius-to-fahrenheit-converter"><span class="toc-number">24.</span> <span class="toc-text"> Celsius to Fahrenheit converter</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#conditional-execution"><span class="toc-number">25.</span> <span class="toc-text"> Conditional execution</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multiple-conditionals-ifelse-if"><span class="toc-number">26.</span> <span class="toc-text"> Multiple conditionals (if&#x2F;else if)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#loop-assignment"><span class="toc-number">27.</span> <span class="toc-text"> Loop assignment</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#while-loops"><span class="toc-number">28.</span> <span class="toc-text"> While loops</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#for-loops"><span class="toc-number">29.</span> <span class="toc-text"> For loops</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nested-loops"><span class="toc-number">30.</span> <span class="toc-text"> Nested loops</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#guessing-game"><span class="toc-number">31.</span> <span class="toc-text"> Guessing game</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#basic-statistics"><span class="toc-number">32.</span> <span class="toc-text"> Basic statistics</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#scope"><span class="toc-number">33.</span> <span class="toc-text"> Scope</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#variable-mutability"><span class="toc-number">34.</span> <span class="toc-text"> Variable mutability</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#stack-and-heap-memory"><span class="toc-number">35.</span> <span class="toc-text"> Stack and heap memory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#strings"><span class="toc-number">36.</span> <span class="toc-text"> Strings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ownership"><span class="toc-number">37.</span> <span class="toc-text"> Ownership</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transferring-ownership-data-stored-on-stack"><span class="toc-number">38.</span> <span class="toc-text"> Transferring ownership (data stored on STACK)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#transferring-ownership-data-stored-on-heap"><span class="toc-number">39.</span> <span class="toc-text"> Transferring ownership (data stored on HEAP)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#borrowing"><span class="toc-number">40.</span> <span class="toc-text"> Borrowing</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mutating-borrowed-data"><span class="toc-number">41.</span> <span class="toc-text"> Mutating borrowed data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#restriction-on-borrowed-data"><span class="toc-number">42.</span> <span class="toc-text"> Restriction on borrowed data</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dangling-references"><span class="toc-number">43.</span> <span class="toc-text"> Dangling references</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#structs-aka-structures"><span class="toc-number">44.</span> <span class="toc-text"> Structs (a.k.a structures)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#enums"><span class="toc-number">45.</span> <span class="toc-text"> Enums</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#trimming-strings"><span class="toc-number">46.</span> <span class="toc-text"> Trimming strings</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#standard-library"><span class="toc-number">47.</span> <span class="toc-text"> Standard library</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#parsing-standard-input"><span class="toc-number">48.</span> <span class="toc-text"> Parsing standard input</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#crates"><span class="toc-number">49.</span> <span class="toc-text"> Crates</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#guessing-game-revisited"><span class="toc-number">50.</span> <span class="toc-text"> Guessing game revisited</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#command-line-arguments"><span class="toc-number">51.</span> <span class="toc-text"> Command line arguments</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#reading-content-from-file"><span class="toc-number">52.</span> <span class="toc-text"> Reading content from file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#writing-content-to-file"><span class="toc-number">53.</span> <span class="toc-text"> Writing content to file</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fruit-finder"><span class="toc-number">54.</span> <span class="toc-text"> Fruit finder</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shape-factories"><span class="toc-number">55.</span> <span class="toc-text"> Shape factories</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#generic-struct-definitions"><span class="toc-number">56.</span> <span class="toc-text"> Generic struct definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#generic-method-definitions"><span class="toc-number">57.</span> <span class="toc-text"> Generic method definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#generic-function-definitions"><span class="toc-number">58.</span> <span class="toc-text"> Generic function definitions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#box-data-type"><span class="toc-number">59.</span> <span class="toc-text"> Box data type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#summing-boxes"><span class="toc-number">60.</span> <span class="toc-text"> Summing boxes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#traits"><span class="toc-number">61.</span> <span class="toc-text"> Traits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#default-trait-implementation"><span class="toc-number">62.</span> <span class="toc-text"> Default trait implementation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#derivable-traits"><span class="toc-number">63.</span> <span class="toc-text"> Derivable traits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#trait-bounds"><span class="toc-number">64.</span> <span class="toc-text"> Trait bounds</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multiple-trait-bounds-and-where-clause"><span class="toc-number">65.</span> <span class="toc-text"> Multiple trait bounds and where clause</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return-types-and-implemented-traits"><span class="toc-number">66.</span> <span class="toc-text"> Return types and implemented traits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#return-types-and-dynamic-dispatching-with-traits"><span class="toc-number">67.</span> <span class="toc-text"> Return types and dynamic dispatching with traits</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comparing-jet-planes"><span class="toc-number">68.</span> <span class="toc-text"> Comparing jet planes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#borrow-checker"><span class="toc-number">69.</span> <span class="toc-text"> Borrow checker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lifetime-annotation"><span class="toc-number">70.</span> <span class="toc-text"> Lifetime annotation</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#multiple-lifetime-annotations"><span class="toc-number">71.</span> <span class="toc-text"> Multiple lifetime annotations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#lifetime-elision-rules"><span class="toc-number">72.</span> <span class="toc-text"> Lifetime elision rules</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#struct-lifetime-annotations"><span class="toc-number">73.</span> <span class="toc-text"> Struct lifetime annotations</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#static-lifetimes"><span class="toc-number">74.</span> <span class="toc-text"> Static lifetimes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#more-on-enums"><span class="toc-number">75.</span> <span class="toc-text"> More on enums</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#match-with-wildcard-pattern"><span class="toc-number">76.</span> <span class="toc-text"> Match with wildcard pattern</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#enum-methods"><span class="toc-number">77.</span> <span class="toc-text"> Enum methods</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#optiont-enum"><span class="toc-number">78.</span> <span class="toc-text"> Option&lt;T&gt; enum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#matching-optiont"><span class="toc-number">79.</span> <span class="toc-text"> Matching Option&lt;T&gt;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if-let-matching"><span class="toc-number">80.</span> <span class="toc-text"> If-let matching</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#location-enum"><span class="toc-number">81.</span> <span class="toc-text"> Location enum</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unrecoverable-errors"><span class="toc-number">82.</span> <span class="toc-text"> Unrecoverable errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#recoverable-errors"><span class="toc-number">83.</span> <span class="toc-text"> Recoverable errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#matching-resultt-e-enum-for-error-handling"><span class="toc-number">84.</span> <span class="toc-text"> Matching Result&lt;T, E&gt; enum for error handling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#propagating-errors"><span class="toc-number">85.</span> <span class="toc-text"> Propagating errors</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#guessing-game-revisited-with-error-handling"><span class="toc-number">86.</span> <span class="toc-text"> Guessing game revisited with error handling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vectors-with-error-handling"><span class="toc-number">87.</span> <span class="toc-text"> Vectors with error handling</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hashmapk-v-data-type"><span class="toc-number">88.</span> <span class="toc-text"> HashMap&lt;K, V&gt; data type</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#word-counter"><span class="toc-number">89.</span> <span class="toc-text"> Word counter</span></a></li></ol>
      </div>
      <div class="related panel pjax" data-title="Related">
        <ul>
          <li><a href="/2019/06/06/bat/" rel="bookmark" title="Window Bat">Window Bat</a></li><li><a href="/2019/06/06/oracle/" rel="bookmark" title="Oracle">Oracle</a></li><li><a href="/2019/06/06/python/" rel="bookmark" title="Python">Python</a></li><li><a href="/2019/10/12/linux-vim/" rel="bookmark" title="Vim">Vim</a></li><li><a href="/2020/09/01/sql-advance/" rel="bookmark" title="SQL Advance">SQL Advance</a></li><li><a href="/2021/01/01/a-resource/" rel="bookmark" title="Resources">Resources</a></li><li><a href="/2021/04/06/japanese/" rel="bookmark" title="Japanese">Japanese</a></li><li><a href="/2021/04/25/excel/" rel="bookmark" title="Excel Basic">Excel Basic</a></li><li><a href="/2021/05/06/edi-flow/" rel="bookmark" title="EDI Flow">EDI Flow</a></li><li><a href="/2021/05/13/r-tutorial/" rel="bookmark" title="R tutorial">R tutorial</a></li><li class="active"><a href="/2021/07/10/rust-for-node/" rel="bookmark" title="Deep Dive into Rust for Node.js Developers">Deep Dive into Rust for Node.js Developers</a></li><li><a href="/2021/07/20/python-daily-tool/" rel="bookmark" title="Daily Tool">Daily Tool</a></li>
        </ul>
      </div>
      <div class="overview panel" data-title="Overview">
        <div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="image" itemprop="image" alt="江边鸟"
      data-src="/images/avatar.jpg">
  <p class="name" itemprop="name">江边鸟</p>
  <div class="description" itemprop="description"></div>
</div>

<nav class="state">
    <div class="item posts">
      <a href="/archives/">
        <span class="count">274</span>
        <span class="name">posts</span>
      </a>
    </div>
    <div class="item categories">
      <a href="/categories/">
        <span class="count">2</span>
        <span class="name">categories</span>
      </a>
    </div>
    <div class="item tags">
      <a href="/tags/">
        <span class="count">39</span>
        <span class="name">tags</span>
      </a>
    </div>
</nav>

<div class="social">
      <span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xoY2hlbjc0" title="https:&#x2F;&#x2F;github.com&#x2F;lhchen74"><i class="ic i-github"></i></span>
      <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLw==" title="https:&#x2F;&#x2F;music.163.com&#x2F;"><i class="ic i-cloud-music"></i></span>
</div>

<ul class="menu">
  
    
  <li class="item">
    <a href="/" rel="section"><i class="ic i-home"></i>Home</a>
  </li>

    
  <li class="item">
    <a href="/about/" rel="section"><i class="ic i-user"></i>About</a>
  </li>

        
  <li class="item dropdown">
      <a href="javascript:void(0);"><i class="ic i-feather"></i>Posts</a>
    <ul class="submenu">

        
  <li class="item">
    <a href="/archives/" rel="section"><i class="ic i-list-alt"></i>Archives</a>
  </li>

        
  <li class="item">
    <a href="/categories/" rel="section"><i class="ic i-th"></i>Categories</a>
  </li>

        
  <li class="item">
    <a href="/tags/" rel="section"><i class="ic i-tags"></i>Tags</a>
  </li>

  </ul>
    
  <li class="item">
    <a href="/friends/" rel="section"><i class="ic i-heart"></i>Friends</a>
  </li>


</ul>

      </div>
    </div>
  </div>

  <ul id="quick">
    <li class="prev pjax">
        <a href="/2021/07/07/python-djangorest/" rel="prev" title="Previous Post"><i class="ic i-chevron-left"></i></a>
    </li>
    <li class="up"><i class="ic i-arrow-up"></i></li>
    <li class="down"><i class="ic i-arrow-down"></i></li>
    <li class="next pjax">
        <a href="/2021/07/20/python-daily-tool/" rel="next" title="Next Post"><i class="ic i-chevron-right"></i></a>
    </li>
    <li class="percent"></li>
  </ul>
</div>


        </div>
        <div class="dimmer"></div>
      </div>
    </main>
    <footer id="footer">
      <div class="inner">
        <div class="widgets">
          

        </div>
        <div class="status">
  <div class="copyright">
    
    &copy; 2010 – 
    <span itemprop="copyrightYear">2021</span>
    <span class="with-love">
      <i class="ic i-sakura rotate"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">江边鸟 @ 露の世</span>
  </div>
  <div class="powered-by">
    Powered by <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span>
  </div>
</div>

      </div>
    </footer>
  </div>
<script data-config type="text/javascript">
  var LOCAL = {
    path: '2021/07/10/rust-for-node/',
    favicon: {
      show: "（●´3｀●）Goooood",
      hide: "(´Д｀)Booooom"
    },
    search : {
      placeholder: "Search for Posts",
      empty: "We didn't find any results for the search: ${query}",
      stats: "${hits} results found in ${time} ms"
    },
    valine: true,fancybox: true,
    ignores : [
      function(uri) {
        return uri.includes('#');
      },
      function(uri) {
        return new RegExp(LOCAL.path+"$").test(uri);
      }
    ]
  };
</script>

<script src="https://cdn.polyfill.io/v2/polyfill.js"></script>

<script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script>

<script src="/js/app.js?v=0.2.5"></script>




</body>
</html>
